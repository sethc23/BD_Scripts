
<html>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[9]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="kn">from</span> <span class="nn">qgis.core</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">qgis.utils</span>

<span class="k">print</span> <span class="s">&quot;helo&quot;</span> <span class="c"># console output: helo</span>

<span class="n">QgsApplication</span><span class="o">.</span><span class="n">setPrefixPath</span><span class="p">(</span><span class="s">&quot;/Applications/MacPorts/QGIS.app/&quot;</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
<span class="n">QgsApplication</span><span class="o">.</span><span class="n">initQgis</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>helo
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[10]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="k">print</span> <span class="n">qgis</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">legendInterface</span><span class="p">()</span><span class="o">.</span><span class="n">layers</span><span class="p">()</span> 
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_text output_pyerr">
<pre>
<span class="ansired">---------------------------------------------------------------------------</span>
<span class="ansired">AttributeError</span>                            Traceback (most recent call last)
<span class="ansigreen">&lt;ipython-input-10-97ba408d6608&gt;</span> in <span class="ansicyan">&lt;module&gt;</span><span class="ansiblue">()</span>
<span class="ansigreen">----&gt; 1</span><span class="ansired"> </span><span class="ansigreen">print</span> qgis<span class="ansiblue">.</span>utils<span class="ansiblue">.</span>iface<span class="ansiblue">.</span>legendInterface<span class="ansiblue">(</span><span class="ansiblue">)</span><span class="ansiblue">.</span>layers<span class="ansiblue">(</span><span class="ansiblue">)</span><span class="ansiblue"></span>

<span class="ansired">AttributeError</span>: &apos;NoneType&apos; object has no attribute &apos;legendInterface&apos;</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[11]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">uri</span> <span class="o">=</span> <span class="n">QgsDataSourceURI</span><span class="p">()</span>
<span class="n">uri</span><span class="o">.</span><span class="n">setConnection</span><span class="p">(</span><span class="s">&quot;localhost&quot;</span><span class="p">,</span> 
                  <span class="s">&quot;5432&quot;</span><span class="p">,</span> 
                  <span class="s">&quot;routing&quot;</span><span class="p">,</span> 
                  <span class="s">&quot;postgres&quot;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span>
<span class="n">uri</span><span class="o">.</span><span class="n">setDataSource</span><span class="p">(</span><span class="s">&quot;public&quot;</span><span class="p">,</span> <span class="s">&quot;ways&quot;</span><span class="p">,</span> <span class="s">&quot;the_geom&quot;</span><span class="p">)</span>
<span class="n">vlayer</span> <span class="o">=</span> <span class="n">QgsVectorLayer</span><span class="p">(</span><span class="n">uri</span><span class="o">.</span><span class="n">uri</span><span class="p">(),</span> <span class="s">&quot;layer_name_you_like&quot;</span><span class="p">,</span> <span class="s">&quot;postgres&quot;</span><span class="p">)</span>
<span class="k">print</span> <span class="n">qgis</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">legendInterface</span><span class="p">()</span><span class="o">.</span><span class="n">layers</span><span class="p">()</span> 
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="kn">from</span> <span class="nn">PyQt4.QtCore</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">PyQt4.QtGui</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">lg</span> <span class="o">=</span> <span class="n">qgis</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">mainWindow</span><span class="p">()</span><span class="o">.</span><span class="n">findChild</span><span class="p">(</span><span class="n">QTreeWidget</span><span class="p">,</span> <span class="s">&#39;theMapLegend&#39;</span><span class="p">)</span>
<span class="n">lg</span><span class="o">.</span><span class="n">selectionModel</span><span class="p">()</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>  <span class="c"># clear just selection</span>
<span class="n">lg</span><span class="o">.</span><span class="n">setCurrentItem</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>  <span class="c"># clear selection and active layer</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[5]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre> 
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">QgsApplication</span><span class="o">.</span><span class="n">exitQgis</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># add encoding?</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">codecs</span>
<span class="nb">reload</span><span class="p">(</span><span class="n">sys</span><span class="p">)</span>
<span class="n">sys</span><span class="o">.</span><span class="n">setdefaultencoding</span><span class="p">(</span><span class="s">&#39;UTF8&#39;</span><span class="p">)</span> <span class="c"># to set</span>
<span class="c"># sys.setdefaultencoding(&#39;ascii&#39;) # to unset</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[50]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">ibk</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[1]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># Libraries</span>
<span class="n">THIS_NOTEBOOK</span> <span class="o">=</span> <span class="s">&#39;aporo_vendor_info&#39;</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s">&#39;expand_frame_repr&#39;</span><span class="p">,</span><span class="bp">False</span><span class="p">)</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s">&#39;display.max_columns&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s">&#39;display.max_rows&#39;</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s">&#39;display.width&#39;</span><span class="p">,</span><span class="mi">180</span><span class="p">)</span>
<span class="n">np</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">np</span>
<span class="n">np</span><span class="o">.</span><span class="n">set_printoptions</span><span class="p">(</span><span class="n">linewidth</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span><span class="n">threshold</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span> <span class="k">as</span> <span class="n">dt</span>
<span class="kn">from</span> <span class="nn">types</span> <span class="kn">import</span> <span class="n">NoneType</span>
<span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">sleep</span> <span class="k">as</span> <span class="n">delay</span>
<span class="kn">import</span> <span class="nn">codecs</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span>
<span class="c">#from logging import getLogger</span>
<span class="c">#from logging import INFO as logging_info</span>
<span class="c">#getLogger(&#39;sqlalchemy.dialects.postgresql&#39;).setLevel(logging_info)</span>
<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s">r&#39;postgresql://postgres:postgres@192.168.3.52:8800/routing&#39;</span><span class="p">,</span>
                       <span class="n">encoding</span><span class="o">=</span><span class="s">&#39;utf-8&#39;</span><span class="p">,</span>
                       <span class="n">echo</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

<span class="o">%</span><span class="k">load_ext</span> <span class="n">sql</span>
<span class="c"># %sql postgresql://postgres:postgres@localhost/routing</span>
<span class="o">%</span><span class="k">sql</span> <span class="n">postgresql</span><span class="p">:</span><span class="o">//</span><span class="n">postgres</span><span class="p">:</span><span class="n">postgres</span><span class="nd">@192.168.3.52</span><span class="p">:</span><span class="mi">8800</span><span class="o">/</span><span class="n">routing</span>
<span class="kn">import</span> <span class="nn">psycopg2</span>
<span class="n">conn</span> <span class="o">=</span> <span class="n">psycopg2</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&quot;dbname=&#39;routing&#39; user=&#39;postgres&#39; host=&#39;192.168.3.52&#39; password=&#39;&#39; port=8800&quot;</span><span class="p">);</span>
<span class="n">cur</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
<span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">sleep</span> <span class="k">as</span> <span class="n">delay</span>
<span class="kn">from</span> <span class="nn">os</span> <span class="kn">import</span> <span class="n">path</span> <span class="k">as</span> <span class="n">os_path</span>
<span class="kn">from</span> <span class="nn">os</span> <span class="kn">import</span> <span class="n">system</span> <span class="k">as</span> <span class="n">os_cmd</span>
<span class="kn">from</span> <span class="nn">pandas.tseries.offsets</span> <span class="kn">import</span> <span class="n">DateOffset</span>
<span class="n">mn_zipcodes</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10001</span><span class="p">,</span> <span class="mi">10002</span><span class="p">,</span> <span class="mi">10003</span><span class="p">,</span> <span class="mi">10004</span><span class="p">,</span> <span class="mi">10005</span><span class="p">,</span> <span class="mi">10006</span><span class="p">,</span> 
               <span class="mi">10007</span><span class="p">,</span> <span class="mi">10009</span><span class="p">,</span> <span class="mi">10010</span><span class="p">,</span> <span class="mi">10011</span><span class="p">,</span> <span class="mi">10012</span><span class="p">,</span> <span class="mi">10013</span><span class="p">,</span> 
               <span class="mi">10014</span><span class="p">,</span> <span class="mi">10015</span><span class="p">,</span> <span class="mi">10016</span><span class="p">,</span> <span class="mi">10017</span><span class="p">,</span> <span class="mi">10018</span><span class="p">,</span> <span class="mi">10019</span><span class="p">,</span> 
               <span class="mi">10020</span><span class="p">,</span> <span class="mi">10021</span><span class="p">,</span> <span class="mi">10022</span><span class="p">,</span> <span class="mi">10023</span><span class="p">,</span> <span class="mi">10024</span><span class="p">,</span> <span class="mi">10025</span><span class="p">,</span> 
               <span class="mi">10026</span><span class="p">,</span> <span class="mi">10027</span><span class="p">,</span> <span class="mi">10028</span><span class="p">,</span> <span class="mi">10029</span><span class="p">,</span> <span class="mi">10030</span><span class="p">,</span> <span class="mi">10031</span><span class="p">,</span> 
               <span class="mi">10032</span><span class="p">,</span> <span class="mi">10033</span><span class="p">,</span> <span class="mi">10034</span><span class="p">,</span> <span class="mi">10035</span><span class="p">,</span> <span class="mi">10036</span><span class="p">,</span> <span class="mi">10037</span><span class="p">,</span> 
               <span class="mi">10038</span><span class="p">,</span> <span class="mi">10039</span><span class="p">,</span> <span class="mi">10040</span><span class="p">,</span> <span class="mi">10041</span><span class="p">,</span> <span class="mi">10043</span><span class="p">,</span> <span class="mi">10044</span><span class="p">,</span> 
               <span class="mi">10045</span><span class="p">,</span> <span class="mi">10046</span><span class="p">,</span> <span class="mi">10047</span><span class="p">,</span> <span class="mi">10048</span><span class="p">,</span> <span class="mi">10055</span><span class="p">,</span> <span class="mi">10060</span><span class="p">,</span> 
               <span class="mi">10065</span><span class="p">,</span> <span class="mi">10069</span><span class="p">,</span> <span class="mi">10072</span><span class="p">,</span> <span class="mi">10075</span><span class="p">,</span> <span class="mi">10079</span><span class="p">,</span> <span class="mi">10080</span><span class="p">,</span> 
               <span class="mi">10081</span><span class="p">,</span> <span class="mi">10082</span><span class="p">,</span> <span class="mi">10087</span><span class="p">,</span> <span class="mi">10090</span><span class="p">,</span> <span class="mi">10094</span><span class="p">,</span> <span class="mi">10095</span><span class="p">,</span> 
               <span class="mi">10096</span><span class="p">,</span> <span class="mi">10098</span><span class="p">,</span> <span class="mi">10099</span><span class="p">,</span> <span class="mi">10102</span><span class="p">,</span> <span class="mi">10103</span><span class="p">,</span> <span class="mi">10104</span><span class="p">,</span> 
               <span class="mi">10105</span><span class="p">,</span> <span class="mi">10106</span><span class="p">,</span> <span class="mi">10107</span><span class="p">,</span> <span class="mi">10109</span><span class="p">,</span> <span class="mi">10110</span><span class="p">,</span> <span class="mi">10111</span><span class="p">,</span> 
               <span class="mi">10112</span><span class="p">,</span> <span class="mi">10114</span><span class="p">,</span> <span class="mi">10115</span><span class="p">,</span> <span class="mi">10117</span><span class="p">,</span> <span class="mi">10118</span><span class="p">,</span> <span class="mi">10119</span><span class="p">,</span> 
               <span class="mi">10120</span><span class="p">,</span> <span class="mi">10121</span><span class="p">,</span> <span class="mi">10122</span><span class="p">,</span> <span class="mi">10123</span><span class="p">,</span> <span class="mi">10124</span><span class="p">,</span> <span class="mi">10125</span><span class="p">,</span> 
               <span class="mi">10126</span><span class="p">,</span> <span class="mi">10128</span><span class="p">,</span> <span class="mi">10130</span><span class="p">,</span> <span class="mi">10131</span><span class="p">,</span> <span class="mi">10132</span><span class="p">,</span> <span class="mi">10133</span><span class="p">,</span> 
               <span class="mi">10138</span><span class="p">,</span> <span class="mi">10149</span><span class="p">,</span> <span class="mi">10151</span><span class="p">,</span> <span class="mi">10152</span><span class="p">,</span> <span class="mi">10153</span><span class="p">,</span> <span class="mi">10154</span><span class="p">,</span> 
               <span class="mi">10155</span><span class="p">,</span> <span class="mi">10157</span><span class="p">,</span> <span class="mi">10158</span><span class="p">,</span> <span class="mi">10160</span><span class="p">,</span> <span class="mi">10161</span><span class="p">,</span> <span class="mi">10162</span><span class="p">,</span> 
               <span class="mi">10164</span><span class="p">,</span> <span class="mi">10165</span><span class="p">,</span> <span class="mi">10166</span><span class="p">,</span> <span class="mi">10167</span><span class="p">,</span> <span class="mi">10168</span><span class="p">,</span> <span class="mi">10169</span><span class="p">,</span> 
               <span class="mi">10170</span><span class="p">,</span> <span class="mi">10171</span><span class="p">,</span> <span class="mi">10172</span><span class="p">,</span> <span class="mi">10173</span><span class="p">,</span> <span class="mi">10174</span><span class="p">,</span> <span class="mi">10175</span><span class="p">,</span> 
               <span class="mi">10176</span><span class="p">,</span> <span class="mi">10177</span><span class="p">,</span> <span class="mi">10178</span><span class="p">,</span> <span class="mi">10179</span><span class="p">,</span> <span class="mi">10184</span><span class="p">,</span> <span class="mi">10196</span><span class="p">,</span> 
               <span class="mi">10197</span><span class="p">,</span> <span class="mi">10199</span><span class="p">,</span> <span class="mi">10203</span><span class="p">,</span> <span class="mi">10211</span><span class="p">,</span> <span class="mi">10212</span><span class="p">,</span> <span class="mi">10213</span><span class="p">,</span> 
               <span class="mi">10256</span><span class="p">,</span> <span class="mi">10257</span><span class="p">,</span> <span class="mi">10258</span><span class="p">,</span> <span class="mi">10259</span><span class="p">,</span> <span class="mi">10260</span><span class="p">,</span> <span class="mi">10261</span><span class="p">,</span> 
               <span class="mi">10265</span><span class="p">,</span> <span class="mi">10269</span><span class="p">,</span> <span class="mi">10270</span><span class="p">,</span> <span class="mi">10271</span><span class="p">,</span> <span class="mi">10273</span><span class="p">,</span> <span class="mi">10275</span><span class="p">,</span> 
               <span class="mi">10277</span><span class="p">,</span> <span class="mi">10278</span><span class="p">,</span> <span class="mi">10279</span><span class="p">,</span> <span class="mi">10280</span><span class="p">,</span> <span class="mi">10281</span><span class="p">,</span> <span class="mi">10282</span><span class="p">,</span> 
               <span class="mi">10285</span><span class="p">,</span> <span class="mi">10286</span><span class="p">,</span> <span class="mi">10292</span><span class="p">]</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[4]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># seamless analysis...</span>

<span class="c"># CLEAN UP FUNCTIONS:</span>
    
    <span class="c"># 1. make sure &#39;inactive&#39; is not null</span>
<span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;update seamless set inactive = false where inactive is null&quot;&quot;&quot;</span><span class="p">)</span>
    
    <span class="c"># 2. mark any entries without links updated as &#39;updated&#39; if upd_vend_content is not null</span>
<span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">    update seamless</span>
<span class="s">    set upd_search_links = upd_vend_content</span>
<span class="s">    where </span>
<span class="s">    (upd_search_links is null and upd_vend_content is not null)</span>
<span class="s">    or</span>
<span class="s">    (upd_search_links &lt; upd_vend_content);</span>
<span class="s">&quot;&quot;&quot;</span><span class="p">)</span>   

    <span class="c"># 3. update seamless inactive from seamless_closed</span>
<span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">    update seamless s</span>
<span class="s">    set inactive = true</span>
<span class="s">    from seamless_closed sc</span>
<span class="s">    where s.sl_link = sc.sl_link</span>
<span class="s">    and sc.inactive is true;</span>
<span class="s">&quot;&quot;&quot;</span><span class="p">)</span>
    
    <span class="c"># 4. delete from seamless_closed where updated seamless</span>
<span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">update seamless_closed sc</span>
<span class="s">set vend_name = null</span>
<span class="s">from seamless s</span>
<span class="s">where s.sl_link = sc.sl_link</span>
<span class="s">and sc.upd_seamless is true;</span>

<span class="s">delete from seamless_closed sc</span>
<span class="s">where vend_name is null;</span>
<span class="s">&quot;&quot;&quot;</span><span class="p">)</span>

    <span class="c"># 5. remove entries outside of Manhattan</span>

<span class="c"># conn.set_isolation_level(0)</span>
<span class="c"># cur.execute(delete_cmd)</span>

<span class="n">cmd</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">select s.* from seamless s, (select array_agg(B::integer) A from unnest(array</span><span class="si">%(mn_zipcodes)s</span><span class="s">) B) as f1 </span>
<span class="s">where not array[s.zipcode] &amp;&amp; A order by s.zipcode;&quot;&quot;&quot;</span><span class="o">%</span><span class="p">{</span><span class="s">&#39;mn_zipcodes&#39;</span><span class="p">:</span><span class="n">mn_zipcodes</span><span class="p">}</span>
<span class="n">test</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">test</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">&quot;&quot;&quot;Really delete out-of-area rows?</span><span class="se">\n</span><span class="s"></span>
<span class="s">             Use This:</span><span class="se">\n\n</span><span class="s"></span>
<span class="s">             conn.set_isolation_level(0)</span>
<span class="s">             cur.execute(delete_cmd)</span><span class="se">\n</span><span class="s">&quot;&quot;&quot;</span>
    <span class="n">delete_cmd</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">        delete from seamless s</span>
<span class="s">        using (select array_agg(B::integer) A from unnest(array</span><span class="si">%(mn_zipcodes)s</span><span class="s">) B) as f1 </span>
<span class="s">        where not array[s.zipcode] &amp;&amp; A;&quot;&quot;&quot;</span><span class="o">%</span><span class="p">{</span><span class="s">&#39;mn_zipcodes&#39;</span><span class="p">:</span><span class="n">mn_zipcodes</span><span class="p">}</span>
    <span class="k">raise</span> <span class="ne">SystemError</span><span class="p">()</span>
    
    
<span class="k">print</span> <span class="s">&#39;DB -- seamless&#39;</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;Value&#39;</span><span class="p">,</span><span class="s">&#39;Var&#39;</span><span class="p">])</span>

<span class="n">sl</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s">&#39;select * from seamless&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
<span class="n">sl_all_vend</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">sl</span><span class="p">)</span>

<span class="n">sl_link_updates</span> <span class="o">=</span> <span class="n">sl</span><span class="p">[</span><span class="n">sl</span><span class="o">.</span><span class="n">upd_search_links</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="bp">True</span> <span class="k">if</span> <span class="n">s</span><span class="o">!=</span><span class="bp">None</span> <span class="k">else</span> <span class="bp">False</span><span class="p">)</span><span class="o">==</span><span class="bp">True</span><span class="p">]</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s">&#39;upd_search_links&#39;</span><span class="p">,</span><span class="n">ascending</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span><span class="o">.</span><span class="n">upd_search_links</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="n">oldest_sl_link_update</span><span class="p">,</span><span class="n">newest_sl_link_update</span> <span class="o">=</span> <span class="n">sl_link_updates</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">sl_link_updates</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="n">sl_null_link_updates</span> <span class="o">=</span> <span class="n">sl_all_vend</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">sl_link_updates</span><span class="p">)</span>

<span class="n">sl_content_updates</span> <span class="o">=</span> <span class="n">sl</span><span class="p">[</span><span class="n">sl</span><span class="o">.</span><span class="n">upd_vend_content</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="bp">True</span> <span class="k">if</span> <span class="n">s</span><span class="o">!=</span><span class="bp">None</span> <span class="k">else</span> <span class="bp">False</span><span class="p">)</span><span class="o">==</span><span class="bp">True</span><span class="p">]</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s">&#39;upd_vend_content&#39;</span><span class="p">,</span><span class="n">ascending</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span><span class="o">.</span><span class="n">upd_vend_content</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="n">oldest_sl_content_update</span><span class="p">,</span><span class="n">newest_sl_content_update</span> <span class="o">=</span> <span class="n">sl_content_updates</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">sl_content_updates</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="n">sl_null_content_updates</span> <span class="o">=</span> <span class="n">sl_all_vend</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">sl_content_updates</span><span class="p">)</span>

<span class="n">sl_not_updated</span> <span class="o">=</span> <span class="p">(</span><span class="n">sl_all_vend</span><span class="o">-</span><span class="p">(</span><span class="n">sl_null_link_updates</span><span class="o">+</span><span class="n">sl_null_content_updates</span><span class="p">))</span>
<span class="n">sl_perc_updated</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="mi">100</span> <span class="o">*</span> <span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">sl_not_updated</span><span class="p">)</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="n">sl_all_vend</span><span class="p">)),</span><span class="mi">2</span><span class="p">))</span><span class="o">+</span><span class="s">&#39; %&#39;</span>


<span class="n">sl_updated</span> <span class="o">=</span> <span class="n">sl</span><span class="p">[(</span><span class="n">sl</span><span class="o">.</span><span class="n">upd_search_links</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="bp">True</span> <span class="k">if</span> <span class="n">s</span><span class="o">!=</span><span class="bp">None</span> <span class="k">else</span> <span class="bp">False</span><span class="p">)</span><span class="o">==</span><span class="bp">True</span><span class="p">)</span> <span class="o">&amp;</span> 
                <span class="p">(</span><span class="n">sl</span><span class="o">.</span><span class="n">upd_vend_content</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="bp">True</span> <span class="k">if</span> <span class="n">s</span><span class="o">!=</span><span class="bp">None</span> <span class="k">else</span> <span class="bp">False</span><span class="p">)</span><span class="o">==</span><span class="bp">True</span><span class="p">)]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="n">sl_all_upd_vend</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">sl_updated</span><span class="p">)</span>
<span class="n">sl_uniq_vend</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">sl_updated</span><span class="o">.</span><span class="n">vend_id</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>

<span class="n">sl_active_vend</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">sl_updated</span><span class="p">[</span><span class="n">sl_updated</span><span class="o">.</span><span class="n">inactive</span><span class="o">==</span><span class="bp">False</span><span class="p">])</span>
<span class="n">sl_inactive_vend</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">sl_updated</span><span class="p">[</span><span class="n">sl_updated</span><span class="o">.</span><span class="n">inactive</span><span class="o">==</span><span class="bp">True</span><span class="p">])</span>
<span class="n">sl_perc_active_vend</span><span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="mi">100</span> <span class="o">*</span> <span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">sl_active_vend</span><span class="p">)</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="n">sl_all_upd_vend</span><span class="p">)),</span><span class="mi">2</span><span class="p">))</span><span class="o">+</span><span class="s">&#39; %&#39;</span>

<span class="n">sl_with_geom</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">sl_updated</span><span class="p">[</span><span class="n">sl_updated</span><span class="o">.</span><span class="n">geom</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">==</span><span class="bp">False</span><span class="p">])</span>
<span class="n">sl_WITHOUT_geom</span> <span class="o">=</span> <span class="n">sl_all_upd_vend</span> <span class="o">-</span> <span class="n">sl_with_geom</span>
<span class="n">sl_perc_with_geom</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="mi">100</span> <span class="o">*</span> <span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">sl_with_geom</span><span class="p">)</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="n">sl_all_upd_vend</span><span class="p">)),</span><span class="mi">2</span><span class="p">))</span><span class="o">+</span><span class="s">&#39; %&#39;</span>

<span class="n">sl_with_matched_bbl</span> <span class="o">=</span> <span class="n">sl_updated</span><span class="o">.</span><span class="n">bbl</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="bp">True</span> <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">!=</span><span class="s">&#39;nan&#39;</span> <span class="k">else</span> <span class="bp">False</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
<span class="n">sl_perc_with_matched_bbl</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="mi">100</span> <span class="o">*</span> <span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">sl_with_matched_bbl</span><span class="p">)</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="n">sl_all_upd_vend</span><span class="p">)),</span><span class="mi">2</span><span class="p">))</span><span class="o">+</span><span class="s">&#39; %&#39;</span>
<span class="n">sl_WITHOUT_matched_bbl</span> <span class="o">=</span> <span class="n">sl_all_upd_vend</span> <span class="o">-</span> <span class="n">sl_with_matched_bbl</span>


<span class="n">params</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="s">&#39;Oldest SL Link Update&#39;</span><span class="p">,</span><span class="n">oldest_sl_link_update</span><span class="p">),</span>
    <span class="p">(</span><span class="s">&#39;Newest SL Link Update&#39;</span><span class="p">,</span><span class="n">newest_sl_link_update</span><span class="p">),</span>
    <span class="p">(</span><span class="s">&#39;Oldest SL Vend Content Update&#39;</span><span class="p">,</span><span class="n">oldest_sl_content_update</span><span class="p">),</span>
    <span class="p">(</span><span class="s">&#39;Newest SL Vend Content Update&#39;</span><span class="p">,</span><span class="n">newest_sl_content_update</span><span class="p">),</span>
    <span class="p">(</span><span class="s">&#39;# of Seamless Vendors&#39;</span><span class="p">,</span><span class="n">sl_all_vend</span><span class="p">),</span>
    <span class="p">(</span><span class="s">&#39;# of Duplicate VEND Rows&#39;</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">sl_updated</span><span class="p">)</span> <span class="o">-</span> <span class="n">sl_uniq_vend</span><span class="p">),</span>
    <span class="p">(</span><span class="s">&#39;</span><span class="si">% o</span><span class="s">f Updated Seamless Vendors (&quot;VEND&quot;)&#39;</span><span class="p">,</span><span class="n">sl_perc_updated</span><span class="p">),</span>
    <span class="p">(</span><span class="s">&#39;# of VEND without Links Updated&#39;</span><span class="p">,</span><span class="n">sl_null_link_updates</span><span class="p">),</span>
    <span class="p">(</span><span class="s">&#39;# of VEND without Content Updated&#39;</span><span class="p">,</span><span class="n">sl_null_content_updates</span><span class="p">),</span>
    <span class="p">(</span><span class="s">&#39;</span><span class="si">% o</span><span class="s">f Active Seamless VEND&#39;</span><span class="p">,</span><span class="n">sl_perc_active_vend</span><span class="p">),</span>
    <span class="p">(</span><span class="s">&#39;# of Inactive Seamless VEND&#39;</span><span class="p">,</span><span class="n">sl_inactive_vend</span><span class="p">),</span>
    <span class="p">(</span><span class="s">&#39;</span><span class="si">% o</span><span class="s">f VEND with geom&#39;</span><span class="p">,</span><span class="n">sl_perc_with_geom</span><span class="p">),</span>
    <span class="p">(</span><span class="s">&#39;# WITHOUT geom&#39;</span><span class="p">,</span><span class="n">sl_WITHOUT_geom</span><span class="p">),</span>
    <span class="p">(</span><span class="s">&#39;</span><span class="si">% o</span><span class="s">f VEND with BBL&#39;</span><span class="p">,</span><span class="n">sl_perc_with_matched_bbl</span><span class="p">),</span>
    <span class="p">(</span><span class="s">&#39;# WITHOUT BBL&#39;</span><span class="p">,</span><span class="n">sl_WITHOUT_matched_bbl</span><span class="p">),</span>
         <span class="p">]</span>

<span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">params</span><span class="p">:</span>
    <span class="n">d</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s">&#39;Var&#39;</span><span class="p">:</span><span class="n">it</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="s">&#39;Value&#39;</span><span class="p">:</span><span class="n">it</span><span class="p">[</span><span class="mi">1</span><span class="p">]},</span><span class="n">ignore_index</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="k">print</span> <span class="n">d</span>
<span class="o">%</span><span class="k">sql</span> <span class="n">postgres</span><span class="nd">@routing</span> <span class="n">select</span> <span class="o">*</span> <span class="kn">from</span> <span class="nn">seamless</span> <span class="nn">limit</span> <span class="mi">1</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>DB -- seamless
                         Value                                     Var
0   2014-10-18 05:00:45.597487                   Oldest SL Link Update
1   2014-11-25 20:23:58.846481                   Newest SL Link Update
2   2014-10-18 05:00:45.597487           Oldest SL Vend Content Update
3   2014-11-25 20:23:58.846481           Newest SL Vend Content Update
4                         3169                   # of Seamless Vendors
5                            0                # of Duplicate VEND Rows
6                      100.0 %  % of Updated Seamless Vendors (&quot;VEND&quot;)
7                            0         # of VEND without Links Updated
8                            0       # of VEND without Content Updated
9                      93.09 %               % of Active Seamless VEND
10                         219             # of Inactive Seamless VEND
11                     100.0 %                     % of VEND with geom
12                           0                          # WITHOUT geom
13                      94.6 %                      % of VEND with BBL
14                         171                           # WITHOUT BBL
1 rows affected.
</pre>
</div>
</div>

<div class="output_area"><div class="prompt output_prompt">
    Out[4]:</div>

<div class="output_html rendered_html output_subarea output_pyout">
<table>
    <tr>
        <th>sl_link</th>
        <th>vend_id</th>
        <th>vend_name</th>
        <th>description</th>
        <th>cuisine</th>
        <th>catering</th>
        <th>address</th>
        <th>zipcode</th>
        <th>phone</th>
        <th>price</th>
        <th>rating</th>
        <th>rating_total</th>
        <th>rating_perc</th>
        <th>reviews</th>
        <th>pickup_est</th>
        <th>deliv_est</th>
        <th>deliv_min</th>
        <th>deliv_fee</th>
        <th>perc_fee</th>
        <th>search_link_blob</th>
        <th>estimates_blob</th>
        <th>upd_search_links</th>
        <th>upd_vend_content</th>
        <th>inactive</th>
        <th>camis</th>
        <th>bbl</th>
        <th>lot_cnt</th>
        <th>geom</th>
        <th>id</th>
        <th>norm_addr</th>
        <th>vent_cnt_per_lot</th>
    </tr>
    <tr>
        <td>http://www.seamless.com/food-delivery/pazza-notte-formerly-pasta-la-vista-new-york-city.684.r</td>
        <td>684</td>
        <td>Pazza Notte</td>
        <td>Italian cuisine with a wide variety of seafood dishes, pasta and pizza available.</td>
        <td>Italian</td>
        <td>NaN</td>
        <td>1375a Avenue Of The Americas</td>
        <td>10019</td>
        <td>2127656288</td>
        <td>5.0</td>
        <td>4.0</td>
        <td>50</td>
        <td>12.0</td>
        <td>14.0</td>
        <td>10-15</td>
        <td>25-40</td>
        <td>15.0</td>
        <td>None</td>
        <td>1</td>
        <td>&lt;span class='tooltip-v-name'&gt;Pazza Notte&lt;/span&gt;1375A AVENUE OF THE AMERICAS&lt;br /&gt;&lt;br /&gt;&lt;em&gt;Italian cuisine with a wide variety of seafood dishes, pasta and pizza available.&lt;/em&gt;&lt;br /&gt;&lt;br /&gt;&lt;div&gt;Open on Seamless:Â &lt;strong&gt;11:30 AM - 10:15 PM&lt;/strong&gt;&lt;/div&gt;</td>
        <td>Delivery Minimum: $15.00 </td>
        <td>2014-11-18 19:25:56.666174-05:00</td>
        <td>2014-11-18 19:25:56.666174-05:00</td>
        <td>False</td>
        <td>40843676</td>
        <td>None</td>
        <td>0</td>
        <td>0101000020E610000013831B84947E52C07BC96BCABA614440</td>
        <td>3237</td>
        <td>1375a 6 ave</td>
        <td>2</td>
    </tr>
</table>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[3]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># seamless_closed analysis</span>
<span class="k">print</span> <span class="s">&#39;DB -- seamless_closed&#39;</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;Value&#39;</span><span class="p">,</span><span class="s">&#39;Var&#39;</span><span class="p">])</span>

<span class="n">d</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s">&#39;Var&#39;</span><span class="p">:</span><span class="s">&#39;# of Potential Active Vendors to Scrape&#39;</span><span class="p">,</span>
              <span class="s">&#39;Value&#39;</span><span class="p">:</span><span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s">&quot;&quot;&quot; </span>
<span class="s">                                    select count(*) u from seamless_closed sc</span>
<span class="s">                                    where inactive is False</span>
<span class="s">                                    and upd_seamless is false</span>
<span class="s">                                    &quot;&quot;&quot;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span><span class="o">.</span><span class="n">u</span><span class="p">[</span><span class="mi">0</span><span class="p">]},</span>
            <span class="n">ignore_index</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="n">d</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s">&#39;Var&#39;</span><span class="p">:</span><span class="s">&#39;# of Potential Vendors Matched to seamless DB&#39;</span><span class="p">,</span>
              <span class="s">&#39;Value&#39;</span><span class="p">:</span><span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s">&quot;&quot;&quot; </span>
<span class="s">                                    select count(*) u from seamless_closed sc</span>
<span class="s">                                    inner join seamless s</span>
<span class="s">                                    on s.sl_link ilike sc.sl_link</span>
<span class="s">                                    &quot;&quot;&quot;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span><span class="o">.</span><span class="n">u</span><span class="p">[</span><span class="mi">0</span><span class="p">]},</span>
            <span class="n">ignore_index</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="n">d</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s">&#39;Var&#39;</span><span class="p">:</span><span class="s">&#39;(above) NOT Matched to seamless DB&#39;</span><span class="p">,</span>
              <span class="s">&#39;Value&#39;</span><span class="p">:</span><span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s">&quot;&quot;&quot; </span>
<span class="s">                                    select count(*) u from seamless_closed sc</span>
<span class="s">                                    where not exists </span>
<span class="s">                                        (select * from seamless s </span>
<span class="s">                                        where s.sl_link = sc.sl_link)</span>
<span class="s">                                    and inactive is False</span>
<span class="s">                                    &quot;&quot;&quot;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span><span class="o">.</span><span class="n">u</span><span class="p">[</span><span class="mi">0</span><span class="p">]},</span>
            <span class="n">ignore_index</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="k">print</span> <span class="n">d</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>DB -- seamless_closed
   Value                                            Var
0      0        # of Potential Active Vendors to Scrape
1      0  # of Potential Vendors Matched to seamless DB
2      0             (above) NOT Matched to seamless DB
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[45]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># mnv analysis</span>

<span class="c"># CLEAN UP</span>

    <span class="c"># 1. remove entries outside of Manhattan</span>

<span class="c"># conn.set_isolation_level(0)</span>
<span class="c"># cur.execute(delete_cmd)</span>

<span class="n">cmd</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">select s.* from mnv s, (select array_agg(B::integer) A from unnest(array</span><span class="si">%(mn_zipcodes)s</span><span class="s">) B) as f1 </span>
<span class="s">where not array[s.zipcode] &amp;&amp; A order by s.zipcode;&quot;&quot;&quot;</span><span class="o">%</span><span class="p">{</span><span class="s">&#39;mn_zipcodes&#39;</span><span class="p">:</span><span class="n">mn_zipcodes</span><span class="p">}</span>
<span class="n">test</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">test</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">&quot;&quot;&quot;Really delete out-of-area rows?</span><span class="se">\n</span><span class="s"></span>
<span class="s">             Use This:</span><span class="se">\n\n</span><span class="s"></span>
<span class="s">             conn.set_isolation_level(0)</span>
<span class="s">             cur.execute(delete_cmd)</span><span class="se">\n</span><span class="s">&quot;&quot;&quot;</span>
    <span class="n">delete_cmd</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">        delete from mnv s</span>
<span class="s">        using (select array_agg(B::integer) A from unnest(array</span><span class="si">%(mn_zipcodes)s</span><span class="s">) B) as f1 </span>
<span class="s">        where not array[s.zipcode] &amp;&amp; A;&quot;&quot;&quot;</span><span class="o">%</span><span class="p">{</span><span class="s">&#39;mn_zipcodes&#39;</span><span class="p">:</span><span class="n">mn_zipcodes</span><span class="p">}</span>
    <span class="k">raise</span> <span class="ne">SystemError</span><span class="p">()</span>

<span class="k">print</span> <span class="s">&#39;DB -- mnv (Manhattan Vendors)&#39;</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;Value&#39;</span><span class="p">,</span><span class="s">&#39;Var&#39;</span><span class="p">])</span>

<span class="n">mn</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s">&#39;select * from mnv&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
<span class="n">mn</span><span class="p">[</span><span class="s">&#39;phone&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mn</span><span class="o">.</span><span class="n">phone</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="mi">0</span> <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">==</span><span class="s">&#39;nan&#39;</span> <span class="k">else</span> <span class="nb">int</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
<span class="n">mn_vend_tot</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">mn</span><span class="p">)</span><span class="c">#len(mn.camis.unique().tolist())</span>

<span class="k">print</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">Records from &quot;mn_vendor&quot; are limited to the last 18 months from now</span><span class="se">\n</span><span class="s">&#39;</span>
<span class="n">back_18_months</span> <span class="o">=</span> <span class="n">dt</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="n">DateOffset</span><span class="p">(</span><span class="n">months</span><span class="o">=</span><span class="mi">18</span><span class="p">)</span>
<span class="n">mn_a</span> <span class="o">=</span> <span class="n">mn</span><span class="p">[</span><span class="n">mn</span><span class="o">.</span><span class="n">inspdate</span><span class="o">&gt;</span><span class="n">back_18_months</span><span class="p">]</span>
<span class="n">mn_a_vend_tot</span> <span class="o">=</span> <span class="n">mn_rec_within_18_months</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">mn_a</span><span class="p">)</span><span class="c">#len(mn_a.camis.unique().tolist())</span>

<span class="n">mn_perc_active_within_18_months</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="mi">100</span> <span class="o">*</span> <span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">mn_a_vend_tot</span><span class="p">)</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="n">mn_vend_tot</span><span class="p">)),</span><span class="mi">2</span><span class="p">))</span><span class="o">+</span><span class="s">&#39; %&#39;</span>
<span class="n">mn_INACTIVE_within_18_months</span> <span class="o">=</span> <span class="n">mn_vend_tot</span> <span class="o">-</span> <span class="n">mn_a_vend_tot</span>

<span class="n">mn_a_with_address</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">mn_a</span><span class="p">[</span><span class="n">mn_a</span><span class="o">.</span><span class="n">address</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">==</span><span class="bp">False</span><span class="p">])</span>
<span class="n">mn_a_WITHOUT_address</span> <span class="o">=</span> <span class="n">mn_a_vend_tot</span> <span class="o">-</span> <span class="n">mn_a_with_address</span>
<span class="n">mn_a_perc_with_address</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="mi">100</span> <span class="o">*</span> <span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">mn_a_with_address</span><span class="p">)</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="n">mn_a_vend_tot</span><span class="p">)),</span><span class="mi">2</span><span class="p">))</span><span class="o">+</span><span class="s">&#39; %&#39;</span>

<span class="n">mn_a_with_geom</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">mn_a</span><span class="p">[</span><span class="n">mn_a</span><span class="o">.</span><span class="n">geom</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">==</span><span class="bp">False</span><span class="p">])</span>
<span class="n">mn_a_WITHOUT_geom</span> <span class="o">=</span> <span class="n">mn_a_vend_tot</span> <span class="o">-</span> <span class="n">mn_a_with_geom</span>
<span class="n">mn_a_perc_with_geom</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="mi">100</span> <span class="o">*</span> <span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">mn_a_with_geom</span><span class="p">)</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="n">mn_a_vend_tot</span><span class="p">)),</span><span class="mi">2</span><span class="p">))</span><span class="o">+</span><span class="s">&#39; %&#39;</span>

<span class="n">mn_a_yelp_matched</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">mn_a</span><span class="p">[</span><span class="n">mn_a</span><span class="o">.</span><span class="n">yelp_id</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">==</span><span class="bp">False</span><span class="p">])</span>
<span class="n">mn_a_WITHOUT_yelp_match</span> <span class="o">=</span> <span class="n">mn_a_vend_tot</span> <span class="o">-</span> <span class="n">mn_a_yelp_matched</span>
<span class="n">mn_a_perc_with_yelp_match</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="mi">100</span> <span class="o">*</span> <span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">mn_a_yelp_matched</span><span class="p">)</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="n">mn_a_vend_tot</span><span class="p">)),</span><span class="mi">2</span><span class="p">))</span><span class="o">+</span><span class="s">&#39; %&#39;</span>

<span class="n">mn_a_seamless_matched</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">mn_a</span><span class="p">[</span><span class="n">mn_a</span><span class="o">.</span><span class="n">seamless_id</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">==</span><span class="bp">False</span><span class="p">])</span>
<span class="n">mn_a_WITHOUT_seamless_match</span> <span class="o">=</span> <span class="n">mn_a_vend_tot</span> <span class="o">-</span> <span class="n">mn_a_seamless_matched</span>
<span class="n">mn_a_perc_with_seamless_match</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="mi">100</span> <span class="o">*</span> <span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">mn_a_seamless_matched</span><span class="p">)</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="n">mn_a_vend_tot</span><span class="p">)),</span><span class="mi">2</span><span class="p">))</span><span class="o">+</span><span class="s">&#39; %&#39;</span>

<span class="c">##### [ insert ]</span>

    <span class="c">### Get Info Per Group of All Records:</span>
    <span class="c">#</span>
    <span class="c"># most_recent_rec = mn[mn.inspdate&gt;back_18_months].sort(&#39;inspdate&#39;,ascending=False).inspdate.tolist()[0]</span>
    <span class="c"># g = mn[mn.inspdate&gt;back_18_months].groupby(&#39;camis&#39;)</span>
    <span class="c"># g_keys = g.groups.keys()</span>
    <span class="c"># g_df = pd.DataFrame(columns=[&#39;camis&#39;,&#39;most_recent_rec&#39;])</span>
    <span class="c"># for it in g_keys:</span>
    <span class="c">#     t = g.get_group(it).sort(&#39;inspdate&#39;,ascending=False)</span>
    <span class="c">#     t_camis = t.camis.tolist()[0]</span>
    <span class="c">#     t_most_recent_rec = t.inspdate.tolist()[0]</span>
    <span class="c">#     g_df = g_df.append({&#39;camis&#39;:t_camis,&#39;most_recent_rec&#39;:t_latest_rec},ignore_index=True)</span>
    <span class="c"># mn_vend_inspected_within_18_months = len(g_df)</span>
    <span class="c">#</span>
    <span class="c">###</span>


    <span class="c"># SL_phone_matches = pd.read_sql(&quot;&quot;&quot; </span>
    <span class="c">#                                     select count(*) u from seamless s</span>
    <span class="c">#                                     inner join mn_vendors mnv </span>
    <span class="c">#                                     on mnv.phone = s.phone</span>
    <span class="c">#                                     where mnv.phone is not null</span>
    <span class="c">#                                     &quot;&quot;&quot;,engine).u[0]</span>
    <span class="c"># SL_vend_total = pd.read_sql(&quot;select count(*) u from seamless&quot;,engine).u[0]</span>
    <span class="c"># d = d.append({&#39;Var&#39;:&#39;% of Seamless having matching Phone&#39;,</span>
    <span class="c">#               &#39;Value&#39;: str(round(100 * (float(SL_phone_matches)/float(SL_vend_total)),2))+&#39; %&#39;},</span>
    <span class="c">#             ignore_index=True)    </span>
    <span class="c"># if SL_phone_matches!=SL_vend_total:</span>
    <span class="c">#     d = d.append({&#39;Var&#39;:&#39;# WITHOUT matching Phone&#39;,</span>
    <span class="c">#                   &#39;Value&#39;:SL_vend_total - SL_phone_matches},</span>
    <span class="c">#                 ignore_index=True)</span>

    <span class="c"># yelp_phone_matches = pd.read_sql(&quot;&quot;&quot; </span>
    <span class="c">#                                     select count(*) u from yelp s</span>
    <span class="c">#                                     inner join mn_vendors mnv </span>
    <span class="c">#                                     on mnv.phone = s.phone</span>
    <span class="c">#                                     where mnv.phone is not null</span>
    <span class="c">#                                     &quot;&quot;&quot;,engine).u[0]</span>
    <span class="c"># yelp_vend_total = pd.read_sql(&quot;select count(*) u from yelp&quot;,engine).u[0]</span>
    <span class="c"># d = d.append({&#39;Var&#39;:&#39;% of Yelp having matching Phone&#39;,</span>
    <span class="c">#               &#39;Value&#39;: str(round(100 * (float(yelp_phone_matches)/float(yelp_vend_total)),2))+&#39; %&#39;},</span>
    <span class="c">#             ignore_index=True)    </span>
    <span class="c"># if yelp_phone_matches!=yelp_vend_total:</span>
    <span class="c">#     d = d.append({&#39;Var&#39;:&#39;# WITHOUT matching Phone&#39;,</span>
    <span class="c">#                   &#39;Value&#39;:yelp_vend_total - yelp_phone_matches},</span>
    <span class="c">#                 ignore_index=True)</span>



    <span class="c"># d = d.append({&#39;Var&#39;:&#39;(above) Matched with NYC Tax Lots&#39;,</span>
    <span class="c">#               &#39;Value&#39;:pd.read_sql(&quot;&quot;&quot; </span>
    <span class="c">#                                     select count(*) u from seamless s</span>
    <span class="c">#                                     inner join mn_vendors mnv on to_char(mnv.phone::numeric,&#39;9999999999&#39;::text)::bigint = s.phone</span>
    <span class="c">#                                     where mnv.phone is not null</span>
    <span class="c">#                                     and s.bbl is not null</span>
    <span class="c">#                                     &quot;&quot;&quot;,engine).u[0]},</span>
    <span class="c">#             ignore_index=True)</span>

    <span class="c"># d = d.append({&#39;Var&#39;:&#39;Unique Tax Lots: [ lot_pts - mn_vendor - SL ]&#39;,</span>
    <span class="c">#               &#39;Value&#39;: &#39;%s - %s - %s&#39;% (str(pd.read_sql(&quot;&quot;&quot;select count(distinct bbl) u from lot_pts&quot;&quot;&quot;,engine).u[0]),</span>
    <span class="c">#                                    str(pd.read_sql(&quot;&quot;&quot;select count(distinct bbl) u from mn_vendors&quot;&quot;&quot;,engine).u[0]),</span>
    <span class="c">#                                    str(pd.read_sql(&quot;&quot;&quot;select count(distinct bbl) u from seamless&quot;&quot;&quot;,engine).u[0])) </span>
    <span class="c">#                 },</span>
    <span class="c">#             ignore_index=True)</span>

    <span class="c"># d = d.append({&#39;Var&#39;:&#39;# of Active Seamless Vendors&#39;,</span>
    <span class="c">#               &#39;Value&#39;:pd.read_sql(&quot;&quot;&quot; </span>
    <span class="c">#                                     select count(*) u </span>
    <span class="c">#                                     from seamless </span>
    <span class="c">#                                     where inactive is false</span>
    <span class="c">#                                     &quot;&quot;&quot;,engine).u[0]},</span>
    <span class="c">#             ignore_index=True)</span>

<span class="n">mn_a_with_bbl</span> <span class="o">=</span> <span class="n">mn_a</span><span class="o">.</span><span class="n">bbl</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">is_integer</span><span class="p">())</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
<span class="n">mn_a_perc_with_bbl</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="mi">100</span> <span class="o">*</span> <span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">mn_a_with_bbl</span><span class="p">)</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="n">mn_a_vend_tot</span><span class="p">)),</span><span class="mi">2</span><span class="p">))</span><span class="o">+</span><span class="s">&#39; %&#39;</span>
<span class="n">mn_a_WITHOUT_bbl</span> <span class="o">=</span> <span class="n">mn_a_vend_tot</span> <span class="o">-</span> <span class="n">mn_a_with_bbl</span>

<span class="n">mn_a_with_10_digit_phone</span> <span class="o">=</span> <span class="n">mn_a</span><span class="o">.</span><span class="n">phone</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">))</span><span class="o">==</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
<span class="n">mn_a_WITHOUT_10_digit_phone</span> <span class="o">=</span> <span class="n">mn_a</span><span class="o">.</span><span class="n">phone</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">))</span><span class="o">==</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
<span class="n">mn_a_perc_with_10_digit_phone</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="mi">100</span> <span class="o">*</span> <span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">mn_a_with_10_digit_phone</span><span class="p">)</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="n">mn_a_vend_tot</span><span class="p">)),</span><span class="mi">2</span><span class="p">))</span><span class="o">+</span><span class="s">&#39; %&#39;</span>

<span class="n">params</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="s">&#39;# of NYC Restaurants (&quot;Vend.&quot;)&#39;</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">mn</span><span class="p">)),</span>
    <span class="p">(</span><span class="s">&#39;</span><span class="si">% o</span><span class="s">f Vend. records active &lt; 18 months (&quot;VEND&quot;)&#39;</span><span class="p">,</span><span class="n">mn_perc_active_within_18_months</span><span class="p">),</span>
    <span class="p">(</span><span class="s">&#39;# of VEND&#39;</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">mn_a</span><span class="p">)),</span>
    <span class="p">(</span><span class="s">&#39;</span><span class="si">% o</span><span class="s">f VEND with address&#39;</span><span class="p">,</span><span class="n">mn_a_perc_with_address</span><span class="p">),</span>
    <span class="p">(</span><span class="s">&#39;# WITHOUT address&#39;</span><span class="p">,</span><span class="n">mn_a_WITHOUT_address</span><span class="p">),</span>
    <span class="p">(</span><span class="s">&#39;</span><span class="si">% o</span><span class="s">f VEND with geom&#39;</span><span class="p">,</span><span class="n">mn_a_perc_with_geom</span><span class="p">),</span>
    <span class="p">(</span><span class="s">&#39;# WITHOUT geom&#39;</span><span class="p">,</span><span class="n">mn_a_WITHOUT_geom</span><span class="p">),</span>
    <span class="p">(</span><span class="s">&#39;</span><span class="si">% o</span><span class="s">f VEND with BBL&#39;</span><span class="p">,</span><span class="n">mn_a_perc_with_bbl</span><span class="p">),</span>
    <span class="p">(</span><span class="s">&#39;# WITHOUT BBL&#39;</span><span class="p">,</span><span class="n">mn_a_WITHOUT_bbl</span><span class="p">),</span>
    <span class="p">(</span><span class="s">&#39;</span><span class="si">% o</span><span class="s">f VEND with 10-digit Phone&#39;</span><span class="p">,</span><span class="n">mn_a_perc_with_10_digit_phone</span><span class="p">),</span>
    <span class="p">(</span><span class="s">&#39;# WITHOUT 10-digit Phone&#39;</span><span class="p">,</span><span class="n">mn_a_WITHOUT_10_digit_phone</span><span class="p">),</span>
    <span class="p">(</span><span class="s">&#39;</span><span class="si">% o</span><span class="s">f VEND matched with Yelp&#39;</span><span class="p">,</span><span class="n">mn_a_perc_with_yelp_match</span><span class="p">),</span>
    <span class="p">(</span><span class="s">&#39;# NOT matched with Yelp&#39;</span><span class="p">,</span><span class="n">mn_a_WITHOUT_yelp_match</span><span class="p">),</span>
    <span class="p">(</span><span class="s">&#39;</span><span class="si">% o</span><span class="s">f VEND matched with Seamless&#39;</span><span class="p">,</span><span class="n">mn_a_perc_with_seamless_match</span><span class="p">),</span>
    <span class="p">(</span><span class="s">&#39;# NOT matched with Seamless&#39;</span><span class="p">,</span><span class="n">mn_a_WITHOUT_seamless_match</span><span class="p">),</span>
<span class="p">]</span>

<span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">params</span><span class="p">:</span>
    <span class="n">d</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s">&#39;Var&#39;</span><span class="p">:</span><span class="n">it</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="s">&#39;Value&#39;</span><span class="p">:</span><span class="n">it</span><span class="p">[</span><span class="mi">1</span><span class="p">]},</span><span class="n">ignore_index</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="k">print</span> <span class="n">d</span>
<span class="o">%</span><span class="k">sql</span> <span class="n">postgres</span><span class="nd">@routing</span> <span class="n">select</span> <span class="o">*</span> <span class="kn">from</span> <span class="nn">mnv</span> <span class="nn">limit</span> <span class="mi">1</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>DB -- mnv (Manhattan Vendors)

Records from &quot;mn_vendor&quot; are limited to the last 18 months from now

      Value                                             Var
0     10195                  # of NYC Restaurants (&quot;Vend.&quot;)
1   96.85 %  % of Vend. records active &lt; 18 months (&quot;VEND&quot;)
2      9874                                       # of VEND
3   99.86 %                          % of VEND with address
4        14                               # WITHOUT address
5   92.85 %                             % of VEND with geom
6       706                                  # WITHOUT geom
7    89.4 %                              % of VEND with BBL
8      1047                                   # WITHOUT BBL
9   99.95 %                   % of VEND with 10-digit Phone
10        5                        # WITHOUT 10-digit Phone
11  26.84 %                     % of VEND matched with Yelp
12     7224                         # NOT matched with Yelp
13  20.26 %                 % of VEND matched with Seamless
14     7874                     # NOT matched with Seamless
1 rows affected.
</pre>
</div>
</div>

<div class="output_area"><div class="prompt output_prompt">
    Out[45]:</div>

<div class="output_html rendered_html output_subarea output_pyout">
<table>
    <tr>
        <th>building</th>
        <th>camis</th>
        <th>vend_name</th>
        <th>clean_street</th>
        <th>cuisinecode</th>
        <th>dba</th>
        <th>inspdate</th>
        <th>street</th>
        <th>id</th>
        <th>recog_street</th>
        <th>recog_addr</th>
        <th>bbl</th>
        <th>phone</th>
        <th>norm_addr</th>
        <th>seamless_id</th>
        <th>yelp_id</th>
        <th>address</th>
        <th>geom</th>
        <th>lot_cnt</th>
        <th>zipcode</th>
        <th>cuisine_description</th>
        <th>grade</th>
        <th>grade_date</th>
        <th>inspection_type</th>
        <th>record_date</th>
        <th>violation_code</th>
        <th>violation_description</th>
    </tr>
    <tr>
        <td>464</td>
        <td>40363644</td>
        <td>dominos pizza</td>
        <td>3 ave</td>
        <td>None</td>
        <td>DOMINO'S PIZZA</td>
        <td>2014-08-05 00:00:00</td>
        <td>3 AVENUE</td>
        <td>22250</td>
        <td>None</td>
        <td>False</td>
        <td>None</td>
        <td>2125450200</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>1</td>
        <td>10016</td>
        <td>Pizza</td>
        <td>A</td>
        <td>2014-08-05T00:00:00</td>
        <td>Cycle Inspection / Initial Inspection</td>
        <td>2014-11-18T06:01:25</td>
        <td>10F</td>
        <td>Non-food contact surface improperly constructed. Unacceptable material used. Non-food contact surface or equipment improperly maintained and/or not properly sealed, raised, spaced or movable to allow accessibility for cleaning on all sides, above and underneath the unit.</td>
    </tr>
</table>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[3]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># yelp</span>

<span class="c">## CLEANUP FUNCTIONS:</span>

<span class="c"># 1. remove entries outside of Manhattan</span>
<span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;drop table if exists tmp;&#39;</span><span class="p">)</span>
<span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">    create table tmp as</span>
<span class="s">    select </span>
<span class="s">        s.*,</span>
<span class="s">        True::boolean non_mn_zipcode</span>
<span class="s">    from </span>
<span class="s">        yelp s, </span>
<span class="s">        (select array_agg(B::bigint) A from unnest(array</span><span class="si">%(mn_zipcodes)s</span><span class="s">) B) as f1 </span>
<span class="s">    where not array[s.postal_code] &amp;&amp; A order by s.postal_code;</span>

<span class="s">    delete from yelp y</span>
<span class="s">    using tmp t</span>
<span class="s">    where t.gid = y.gid;</span>

<span class="s">    with upd as (</span>
<span class="s">        update yelp_geom_error y</span>
<span class="s">        set</span>
<span class="s">            id = y.id,</span>
<span class="s">            vend_name = y.vend_name,</span>
<span class="s">            phone = y.phone,</span>
<span class="s">            address = y.address,</span>
<span class="s">            city = y.city,</span>
<span class="s">            state_code = y.state_code,</span>
<span class="s">            postal_code = y.postal_code,</span>
<span class="s">            display_phone = y.display_phone,</span>
<span class="s">            is_claimed = y.is_claimed,</span>
<span class="s">            is_closed = y.is_closed,</span>
<span class="s">            menu_date_updated = y.menu_date_updated,</span>
<span class="s">            menu_provider = y.menu_provider,</span>
<span class="s">            rating = y.rating,</span>
<span class="s">            review_count = y.review_count,</span>
<span class="s">            categories = y.categories,</span>
<span class="s">            url = y.url,</span>
<span class="s">            latitude = y.latitude,</span>
<span class="s">            longitude = y.longitude,</span>
<span class="s">            geo_accuracy = y.geo_accuracy,</span>
<span class="s">            hours = y.hours,</span>
<span class="s">            hours_updated = y.hours_updated,</span>
<span class="s">            extra_info = y.extra_info,</span>
<span class="s">            menu_page = y.menu_page,</span>
<span class="s">            website = y.website,</span>
<span class="s">            online_ordering = y.online_ordering,</span>
<span class="s">            price_range = y.price_range,</span>
<span class="s">            gid = y.gid,</span>
<span class="s">            geom = y.geom,</span>
<span class="s">            bbl = y.bbl,</span>
<span class="s">            camis = y.camis,</span>
<span class="s">            lot_cnt = y.lot_cnt,</span>
<span class="s">            norm_addr = y.norm_addr,</span>
<span class="s">            last_api_update = y.last_api_update,</span>
<span class="s">            neighborhoods = y.neighborhoods,</span>
<span class="s">            display_address = y.display_address,</span>
<span class="s">            non_mn_zipcode = y.non_mn_zipcode,</span>
<span class="s">            last_updated = &#39;now&#39;::timestamp with time zone</span>
<span class="s">        from tmp t</span>
<span class="s">        where y.gid = t.gid</span>
<span class="s">        returning t.gid gid</span>
<span class="s">    )</span>
<span class="s">    insert into yelp_geom_error ( </span>
<span class="s">            id,</span>
<span class="s">            vend_name,</span>
<span class="s">            phone,</span>
<span class="s">            address,</span>
<span class="s">            city,</span>
<span class="s">            state_code,</span>
<span class="s">            postal_code,</span>
<span class="s">            display_phone,</span>
<span class="s">            is_claimed,</span>
<span class="s">            is_closed,</span>
<span class="s">            menu_date_updated,</span>
<span class="s">            menu_provider,</span>
<span class="s">            rating,</span>
<span class="s">            review_count,</span>
<span class="s">            categories,</span>
<span class="s">            url,</span>
<span class="s">            latitude,</span>
<span class="s">            longitude,</span>
<span class="s">            geo_accuracy,</span>
<span class="s">            hours,</span>
<span class="s">            hours_updated,</span>
<span class="s">            extra_info,</span>
<span class="s">            menu_page,</span>
<span class="s">            website,</span>
<span class="s">            online_ordering,</span>
<span class="s">            price_range,</span>
<span class="s">            gid,</span>
<span class="s">            geom,</span>
<span class="s">            bbl,</span>
<span class="s">            camis,</span>
<span class="s">            lot_cnt,</span>
<span class="s">            norm_addr,</span>
<span class="s">            last_api_update,</span>
<span class="s">            neighborhoods,</span>
<span class="s">            display_address,</span>
<span class="s">            non_mn_zipcode,</span>
<span class="s">            last_updated)</span>
<span class="s">    select</span>
<span class="s">        t.id,</span>
<span class="s">        t.vend_name,</span>
<span class="s">        t.phone,</span>
<span class="s">        t.address,</span>
<span class="s">        t.city,</span>
<span class="s">        t.state_code,</span>
<span class="s">        t.postal_code,</span>
<span class="s">        t.display_phone,</span>
<span class="s">        t.is_claimed,</span>
<span class="s">        t.is_closed,</span>
<span class="s">        t.menu_date_updated,</span>
<span class="s">        t.menu_provider,</span>
<span class="s">        t.rating,</span>
<span class="s">        t.review_count,</span>
<span class="s">        t.categories,</span>
<span class="s">        t.url,</span>
<span class="s">        t.latitude,</span>
<span class="s">        t.longitude,</span>
<span class="s">        t.geo_accuracy,</span>
<span class="s">        t.hours,</span>
<span class="s">        t.hours_updated,</span>
<span class="s">        t.extra_info,</span>
<span class="s">        t.menu_page,</span>
<span class="s">        t.website,</span>
<span class="s">        t.online_ordering,</span>
<span class="s">        t.price_range,</span>
<span class="s">        t.gid,</span>
<span class="s">        t.geom,</span>
<span class="s">        t.bbl,</span>
<span class="s">        t.camis,</span>
<span class="s">        t.lot_cnt,</span>
<span class="s">        t.norm_addr,</span>
<span class="s">        t.last_api_update,</span>
<span class="s">        t.neighborhoods,</span>
<span class="s">        t.display_address,</span>
<span class="s">        t.non_mn_zipcode,</span>
<span class="s">        &#39;now&#39;::timestamp with time zone now</span>
<span class="s">    from</span>
<span class="s">        tmp t,</span>
<span class="s">        (select array_agg(f.gid) upd_gids from upd f) as f1</span>
<span class="s">    where (not upd_gids &amp;&amp; array[t.gid]</span>
<span class="s">        or upd_gids is null);</span>
<span class="s">    </span>
<span class="s">    drop table tmp;</span>
<span class="s">            &quot;&quot;&quot;</span><span class="o">%</span><span class="p">{</span><span class="s">&#39;mn_zipcodes&#39;</span><span class="p">:</span><span class="n">mn_zipcodes</span><span class="p">})</span>


<span class="k">print</span> <span class="s">&#39;DB -- yelp&#39;</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;Value&#39;</span><span class="p">,</span><span class="s">&#39;Var&#39;</span><span class="p">])</span>

<span class="n">y</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s">&#39;select * from yelp&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
<span class="n">y_vend_cnt</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="n">y_a</span> <span class="o">=</span> <span class="n">y</span><span class="p">[</span><span class="n">y</span><span class="o">.</span><span class="n">is_closed</span><span class="o">==</span><span class="bp">False</span><span class="p">]</span>
<span class="n">y_a_vend_cnt</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">y_a</span><span class="p">)</span>
<span class="n">y_a_uniq_vend</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">y_a</span><span class="o">.</span><span class="n">id</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>

<span class="n">oldest_search_api_query</span> <span class="o">=</span> <span class="n">y_a</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s">&#39;last_api_update&#39;</span><span class="p">,</span><span class="n">ascending</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span><span class="o">.</span><span class="n">last_api_update</span><span class="o">.</span><span class="n">tolist</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">newest_search_api_query</span> <span class="o">=</span> <span class="n">y_a</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s">&#39;last_api_update&#39;</span><span class="p">,</span><span class="n">ascending</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span><span class="o">.</span><span class="n">last_api_update</span><span class="o">.</span><span class="n">tolist</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">oldest_y_page_scrape</span> <span class="o">=</span> <span class="n">y_a</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s">&#39;hours_updated&#39;</span><span class="p">,</span><span class="n">ascending</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span><span class="o">.</span><span class="n">hours_updated</span><span class="o">.</span><span class="n">tolist</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">newest_y_page_scrape</span> <span class="o">=</span> <span class="n">y_a</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s">&#39;hours_updated&#39;</span><span class="p">,</span><span class="n">ascending</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span><span class="o">.</span><span class="n">hours_updated</span><span class="o">.</span><span class="n">tolist</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>

<span class="n">y_a_with_info</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">y_a</span><span class="p">[</span><span class="n">y_a</span><span class="o">.</span><span class="n">hours</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="bp">True</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">))</span><span class="o">!=</span><span class="mi">0</span> <span class="k">else</span> <span class="bp">False</span><span class="p">)</span><span class="o">==</span><span class="bp">True</span><span class="p">])</span>
<span class="n">y_a_perc_with_info</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="mi">100</span> <span class="o">*</span> <span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">y_a_with_info</span><span class="p">)</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="n">y_a_vend_cnt</span><span class="p">)),</span><span class="mi">2</span><span class="p">))</span><span class="o">+</span><span class="s">&#39; %&#39;</span>
<span class="n">y_a_WITHOUT_info</span> <span class="o">=</span> <span class="n">y_a_vend_cnt</span> <span class="o">-</span> <span class="n">y_a_with_info</span>

<span class="n">y_a_with_geom</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">y_a</span><span class="p">[</span><span class="n">y_a</span><span class="o">.</span><span class="n">geom</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">==</span><span class="bp">False</span><span class="p">])</span>
<span class="n">y_a_WITHOUT_geom</span> <span class="o">=</span> <span class="n">y_a_vend_cnt</span> <span class="o">-</span> <span class="n">y_a_with_geom</span>
<span class="n">y_a_perc_with_geom</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="mi">100</span> <span class="o">*</span> <span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">y_a_with_geom</span><span class="p">)</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="n">y_a_vend_cnt</span><span class="p">)),</span><span class="mi">2</span><span class="p">))</span><span class="o">+</span><span class="s">&#39; %&#39;</span>

<span class="n">y_a_with_matched_bbl</span> <span class="o">=</span> <span class="n">y_a</span><span class="o">.</span><span class="n">bbl</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="bp">True</span> <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">!=</span><span class="s">&#39;nan&#39;</span> <span class="k">else</span> <span class="bp">False</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
<span class="n">y_a_perc_with_matched_bbl</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="mi">100</span> <span class="o">*</span> <span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">y_a_with_matched_bbl</span><span class="p">)</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="n">y_a_vend_cnt</span><span class="p">)),</span><span class="mi">2</span><span class="p">))</span><span class="o">+</span><span class="s">&#39; %&#39;</span>
<span class="n">y_a_WITHOUT_matched_bbl</span> <span class="o">=</span> <span class="n">y_a_vend_cnt</span> <span class="o">-</span> <span class="n">y_a_with_matched_bbl</span>

<span class="n">y_a_claiming_pages</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">y_a</span><span class="p">[</span><span class="n">y_a</span><span class="o">.</span><span class="n">is_claimed</span><span class="o">==</span><span class="bp">True</span><span class="p">])</span>
<span class="n">y_a_NOT_claiming_pages</span> <span class="o">=</span> <span class="n">y_a_vend_cnt</span> <span class="o">-</span> <span class="n">y_a_claiming_pages</span>
<span class="n">y_a_perc_claiming_pages</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="mi">100</span> <span class="o">*</span> <span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">y_a_claiming_pages</span><span class="p">)</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="n">y_a_vend_cnt</span><span class="p">)),</span><span class="mi">2</span><span class="p">))</span><span class="o">+</span><span class="s">&#39; %&#39;</span>

<span class="n">y_a_with_online_ordering</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">y_a</span><span class="p">[</span><span class="n">y_a</span><span class="o">.</span><span class="n">online_ordering</span><span class="o">==</span><span class="bp">True</span><span class="p">])</span>
<span class="n">y_a_WITHOUT_online_ordering</span> <span class="o">=</span> <span class="n">y_a_vend_cnt</span> <span class="o">-</span> <span class="n">y_a_with_online_ordering</span>
<span class="n">y_a_perc_online_ordering</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="mi">100</span> <span class="o">*</span> <span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">y_a_with_online_ordering</span><span class="p">)</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="n">y_a_vend_cnt</span><span class="p">)),</span><span class="mi">2</span><span class="p">))</span><span class="o">+</span><span class="s">&#39; %&#39;</span>

<span class="n">params</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="s">&#39;Oldest Search API Query&#39;</span><span class="p">,</span><span class="n">oldest_search_api_query</span><span class="p">),</span>
    <span class="p">(</span><span class="s">&#39;Latest Search API Query&#39;</span><span class="p">,</span><span class="n">newest_search_api_query</span><span class="p">),</span>
    <span class="p">(</span><span class="s">&#39;Oldest Biz Page Scrape&#39;</span><span class="p">,</span><span class="n">oldest_y_page_scrape</span><span class="p">),</span>
    <span class="p">(</span><span class="s">&#39;Latest Biz Page Scrape&#39;</span><span class="p">,</span><span class="n">newest_y_page_scrape</span><span class="p">),</span>
    <span class="p">(</span><span class="s">&#39;# of Total Yelp Vendors&#39;</span><span class="p">,</span><span class="n">y_vend_cnt</span><span class="p">),</span>
    <span class="p">(</span><span class="s">&#39;# of Active Yelp Vendors (&quot;VEND&quot;)&#39;</span><span class="p">,</span><span class="n">y_a_vend_cnt</span><span class="p">),</span>
    <span class="p">(</span><span class="s">&#39;</span><span class="si">% o</span><span class="s">f VEND with all info obtained&#39;</span><span class="p">,</span><span class="n">y_a_perc_with_info</span><span class="p">),</span>
    <span class="p">(</span><span class="s">&#39;# WITHOUT all info obtained&#39;</span><span class="p">,</span><span class="n">y_a_WITHOUT_info</span><span class="p">),</span>
    <span class="p">(</span><span class="s">&#39;</span><span class="si">% o</span><span class="s">f VEND with geom&#39;</span><span class="p">,</span><span class="n">y_a_perc_with_geom</span><span class="p">),</span>
    <span class="p">(</span><span class="s">&#39;# WITHOUT geom&#39;</span><span class="p">,</span><span class="n">y_a_WITHOUT_geom</span><span class="p">),</span>
    <span class="p">(</span><span class="s">&#39;</span><span class="si">% o</span><span class="s">f VEND Matched BBL&#39;</span><span class="p">,</span><span class="n">y_a_perc_with_matched_bbl</span><span class="p">),</span>
    <span class="p">(</span><span class="s">&#39;# NOT Matched BBL&#39;</span><span class="p">,</span><span class="n">y_a_WITHOUT_matched_bbl</span><span class="p">),</span>
    <span class="p">(</span><span class="s">&#39;</span><span class="si">% o</span><span class="s">f VEND Claiming Pages&#39;</span><span class="p">,</span><span class="n">y_a_perc_claiming_pages</span><span class="p">),</span>
    <span class="p">(</span><span class="s">&#39;# NOT Claiming Pages&#39;</span><span class="p">,</span><span class="n">y_a_NOT_claiming_pages</span><span class="p">),</span>
    <span class="p">(</span><span class="s">&#39;</span><span class="si">% o</span><span class="s">f VEND with Online Ordering&#39;</span><span class="p">,</span><span class="n">y_a_perc_online_ordering</span><span class="p">),</span>
    <span class="p">(</span><span class="s">&#39;# WITHOUT Online Ordering&#39;</span><span class="p">,</span><span class="n">y_a_WITHOUT_online_ordering</span><span class="p">),</span>
         <span class="p">]</span>

<span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">params</span><span class="p">:</span>
    <span class="n">d</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s">&#39;Var&#39;</span><span class="p">:</span><span class="n">it</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="s">&#39;Value&#39;</span><span class="p">:</span><span class="n">it</span><span class="p">[</span><span class="mi">1</span><span class="p">]},</span><span class="n">ignore_index</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="k">print</span> <span class="n">d</span>
<span class="o">%</span><span class="k">sql</span> <span class="n">postgres</span><span class="nd">@routing</span> <span class="n">select</span> <span class="o">*</span> <span class="kn">from</span> <span class="nn">yelp</span> <span class="nn">limit</span> <span class="mi">1</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>DB -- yelp
                         Value                                Var
0   2014-11-17 21:51:30.806388            Oldest Search API Query
1   2014-11-24 23:44:45.301603            Latest Search API Query
2   2014-11-04 15:31:44.994299             Oldest Biz Page Scrape
3   2014-11-25 15:18:53.462294             Latest Biz Page Scrape
4                         4016            # of Total Yelp Vendors
5                         4016  # of Active Yelp Vendors (&quot;VEND&quot;)
6                      100.0 %   % of VEND with all info obtained
7                            0        # WITHOUT all info obtained
8                      94.57 %                % of VEND with geom
9                          218                     # WITHOUT geom
10                     87.77 %              % of VEND Matched BBL
11                         491                  # NOT Matched BBL
12                     59.54 %           % of VEND Claiming Pages
13                        1625               # NOT Claiming Pages
14                     23.33 %     % of VEND with Online Ordering
15                        3079          # WITHOUT Online Ordering
1 rows affected.
</pre>
</div>
</div>

<div class="output_area"><div class="prompt output_prompt">
    Out[3]:</div>

<div class="output_html rendered_html output_subarea output_pyout">
<table>
    <tr>
        <th>id</th>
        <th>vend_name</th>
        <th>phone</th>
        <th>address</th>
        <th>city</th>
        <th>state_code</th>
        <th>postal_code</th>
        <th>display_phone</th>
        <th>is_claimed</th>
        <th>is_closed</th>
        <th>menu_date_updated</th>
        <th>menu_provider</th>
        <th>rating</th>
        <th>review_count</th>
        <th>categories</th>
        <th>url</th>
        <th>latitude</th>
        <th>longitude</th>
        <th>geo_accuracy</th>
        <th>hours</th>
        <th>hours_updated</th>
        <th>extra_info</th>
        <th>menu_page</th>
        <th>website</th>
        <th>online_ordering</th>
        <th>price_range</th>
        <th>gid</th>
        <th>geom</th>
        <th>bbl</th>
        <th>camis</th>
        <th>lot_cnt</th>
        <th>norm_addr</th>
        <th>last_api_update</th>
        <th>neighborhoods</th>
        <th>display_address</th>
        <th>upd_search_links</th>
        <th>phone_as_text</th>
    </tr>
    <tr>
        <td>the-modern-new-york-2</td>
        <td>The Modern</td>
        <td>None</td>
        <td>None</td>
        <td>New York</td>
        <td>NY</td>
        <td>10019</td>
        <td>NaN</td>
        <td>False</td>
        <td>False</td>
        <td>None</td>
        <td>NaN</td>
        <td>5.0</td>
        <td>1</td>
        <td>{{Restaurants,restaurants}}</td>
        <td>http://www.yelp.com/biz/the-modern-new-york-2</td>
        <td>40.76821</td>
        <td>-73.98999</td>
        <td>5.0</td>
        <td>None</td>
        <td>2014-11-25 06:09:33.726752-05:00</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>False</td>
        <td>None</td>
        <td>9400</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>0</td>
        <td>None</td>
        <td>2014-11-24 18:29:21.742377-05:00</td>
        <td>Hell's Kitchen</td>
        <td>Hell's Kitchen,New York, NY 10019</td>
        <td>2014-11-25 23:57:51.779096-05:00</td>
        <td></td>
    </tr>
</table>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### yelp: remove unlikely matches by comparing matched/added geoms w/ yelp-provided coord.s</span>
<span class="n">cmd</span><span class="o">=</span><span class="s">&quot;&quot;&quot;</span>

<span class="s">drop table if exists tmp;</span>

<span class="s">create table tmp as</span>
<span class="s">    SELECT </span>
<span class="s">        y.id compare_id,</span>
<span class="s">        y.vend_name vend_name,</span>
<span class="s">        y.address address,</span>
<span class="s">        0.0::double precision seperation_dist,</span>
<span class="s">        ST_SetSRID(ST_Point(y.longitude, y.latitude),4326)::geometry(Point,4326) geom</span>
<span class="s">    FROM yelp y</span>
<span class="s">    WHERE geom is not null;</span>

<span class="s">update tmp set seperation_dist = null;</span>

<span class="s">update tmp A </span>
<span class="s">    set seperation_dist = ST_Distance_Spheroid(A.geom,B.geom,</span>
<span class="s">                                &#39;SPHEROID[&quot;WGS 84&quot;,6378137,298.257223563]&#39;) </span>
<span class="s">    from yelp B </span>
<span class="s">    where </span>
<span class="s">        A.compare_id = B.id</span>
<span class="s">        and A.geom is not null</span>
<span class="s">        and B.geom is not null;</span>

<span class="s">&quot;&quot;&quot;</span>
<span class="o">%</span><span class="k">sql</span> <span class="n">postgres</span><span class="nd">@routing</span> <span class="err">$</span><span class="n">cmd</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### yelp: compare matched added geoms w/ yelp-provided coord.s</span>
<span class="n">cmd</span><span class="o">=</span><span class="s">&quot;&quot;&quot;</span>

<span class="s">drop table if exists tmp;</span>

<span class="s">create table tmp as</span>
<span class="s">    SELECT </span>
<span class="s">        y.id compare_id,</span>
<span class="s">        y.vend_name vend_name,</span>
<span class="s">        y.address address,</span>
<span class="s">        0.0::double precision seperation_dist,</span>
<span class="s">        ST_SetSRID(ST_Point(y.longitude, y.latitude),4326)::geometry(Point,4326) geom</span>
<span class="s">    FROM yelp y</span>
<span class="s">    WHERE geom is not null;</span>

<span class="s">update tmp set seperation_dist = null;</span>

<span class="s">update tmp A </span>
<span class="s">    set seperation_dist = ST_Distance_Spheroid(A.geom,B.geom,</span>
<span class="s">                                &#39;SPHEROID[&quot;WGS 84&quot;,6378137,298.257223563]&#39;) </span>
<span class="s">    from yelp B </span>
<span class="s">    where </span>
<span class="s">        A.compare_id = B.id</span>
<span class="s">        and A.geom is not null</span>
<span class="s">        and B.geom is not null;</span>

<span class="s">update tmp set geom=null where seperation_dist&gt;400.0;</span>

<span class="s">update yelp y set geom=null</span>
<span class="s">from tmp t</span>
<span class="s">where t.geom is null and y.id=t.compare_id;</span>

<span class="s">drop table tmp;</span>

<span class="s">&quot;&quot;&quot;</span>
<span class="o">%</span><span class="k">sql</span> <span class="n">postgres</span><span class="nd">@routing</span> <span class="err">$</span><span class="n">cmd</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[39]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="k">def</span> <span class="nf">match_distinct_mnv_var</span><span class="p">(</span><span class="n">tbl</span><span class="o">=</span><span class="s">&#39;seamless&#39;</span><span class="p">,</span><span class="n">tbl_id</span><span class="o">=</span><span class="s">&#39;vend_id&#39;</span><span class="p">,</span><span class="n">vend_name</span><span class="o">=</span><span class="s">&#39;vend_name&#39;</span><span class="p">,</span><span class="n">match_var</span><span class="o">=</span><span class="s">&#39;vend_name&#39;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Matches distinct $tbl variables with distinct mn_vendor vars.</span>
<span class="sd">    </span>
<span class="sd">    Usages:</span>
<span class="sd">    </span>
<span class="sd">        match_distinct_mnv_var(tbl=&#39;yelp&#39;,tbl_id=&#39;id&#39;,vend_name=&#39;vend_name&#39;,match_var=&#39;phone&#39;)</span>
<span class="sd">        match_distinct_mnv_var(tbl=&#39;seamless&#39;,tbl_id=&#39;vend_id&#39;,vend_name=&#39;vend_name&#39;,match_var=&#39;vend_name&#39;)</span>
<span class="sd">        match_distinct_mnv_var(tbl=&#39;yelp&#39;,tbl_id=&#39;id&#39;,vend_name=&#39;vend_name&#39;,match_var=&#39;address&#39;)</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">T</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;tbl&#39;</span><span class="p">:</span><span class="n">tbl</span><span class="p">,</span>
         <span class="s">&#39;tbl_id&#39;</span><span class="p">:</span><span class="n">tbl_id</span><span class="p">,</span>
         <span class="s">&#39;vend_name&#39;</span><span class="p">:</span><span class="n">vend_name</span><span class="p">,</span>
         <span class="s">&#39;match_var&#39;</span><span class="p">:</span><span class="n">match_var</span><span class="p">}</span>
    
    <span class="n">x</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s">&quot;select * from </span><span class="si">%(tbl)s</span><span class="s">&quot;</span><span class="o">%</span><span class="k">T</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>

    <span class="n">x_var_tot</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="n">match_var</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
    <span class="n">x</span><span class="p">[</span><span class="n">match_var</span><span class="o">+</span><span class="s">&#39;_cnt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="n">match_var</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">i</span><span class="p">:</span> <span class="n">x_var_tot</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
    <span class="n">x_var_id_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="n">match_var</span><span class="o">+</span><span class="s">&#39;_cnt&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span><span class="p">][</span><span class="n">match_var</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span><span class="n">x</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="n">match_var</span><span class="o">+</span><span class="s">&#39;_cnt&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span><span class="p">][</span><span class="n">tbl_id</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()))</span>
    <span class="n">x_var_id_dict_keys</span> <span class="o">=</span> <span class="n">x_var_id_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>

    <span class="n">mnv</span>  <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s">&quot;select * from mnv where </span><span class="si">%(tbl)s</span><span class="s">_id is null&quot;</span><span class="o">%</span><span class="k">T</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
    <span class="n">mnv_var_tot</span> <span class="o">=</span> <span class="n">mnv</span><span class="p">[</span><span class="n">match_var</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
    <span class="n">mnv</span><span class="p">[</span><span class="n">match_var</span><span class="o">+</span><span class="s">&#39;_cnt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mnv</span><span class="p">[</span><span class="n">match_var</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">i</span><span class="p">:</span> <span class="n">mnv_var_tot</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
    <span class="n">mnv_x</span> <span class="o">=</span> <span class="n">mnv</span><span class="p">[</span> <span class="p">(</span><span class="n">mnv</span><span class="p">[</span><span class="n">match_var</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">x_var_id_dict_keys</span><span class="p">)</span><span class="o">==</span><span class="bp">True</span><span class="p">)</span><span class="o">&amp;</span><span class="p">(</span><span class="n">mnv</span><span class="p">[</span><span class="n">match_var</span><span class="o">+</span><span class="s">&#39;_cnt&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span><span class="p">)</span> <span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">mnv_x</span><span class="p">[</span><span class="s">&#39;</span><span class="si">%(tbl)s</span><span class="s">_id&#39;</span><span class="o">%</span><span class="k">T</span><span class="p">]</span> <span class="o">=</span> <span class="n">mnv_x</span><span class="p">[</span><span class="n">match_var</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">x_var_id_dict</span><span class="p">)</span>

    <span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span> <span class="s">&quot;&quot;&quot;drop table if exists tmp;&quot;&quot;&quot;</span><span class="p">)</span>
    <span class="n">mnv_x</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s">&#39;tmp&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">        alter table tmp add column tid serial primary key;</span>
<span class="s">        update tmp set tid = nextval(pg_get_serial_sequence(&#39;tmp&#39;,&#39;tid&#39;));</span>
<span class="s">    &quot;&quot;&quot;</span><span class="p">)</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">        update mnv m</span>
<span class="s">        set </span><span class="si">%(tbl)s</span><span class="s">_id = t.</span><span class="si">%(tbl)s</span><span class="s">_id</span>
<span class="s">        from tmp t</span>
<span class="s">        where m.camis = t.camis;</span>

<span class="s">        drop table tmp;</span>
<span class="s">    &quot;&quot;&quot;</span><span class="o">%</span><span class="k">T</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[44]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">match_tables</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;seamless&#39;</span><span class="p">,</span><span class="s">&#39;yelp&#39;</span><span class="p">]</span>
<span class="n">match_vars</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;vend_name&#39;</span><span class="p">,</span><span class="s">&#39;phone&#39;</span><span class="p">,</span><span class="s">&#39;norm_addr&#39;</span><span class="p">]</span>

<span class="n">it</span><span class="o">=</span><span class="n">match_vars</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="n">match_distinct_mnv_var</span><span class="p">(</span><span class="n">tbl</span><span class="o">=</span><span class="s">&#39;seamless&#39;</span><span class="p">,</span><span class="n">tbl_id</span><span class="o">=</span><span class="s">&#39;vend_id&#39;</span><span class="p">,</span><span class="n">vend_name</span><span class="o">=</span><span class="s">&#39;vend_name&#39;</span><span class="p">,</span><span class="n">match_var</span><span class="o">=</span><span class="n">it</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[48]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">sl_phones</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s">&#39;select distinct phone p from seamless&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s">&#39;select distinct phone p from yelp&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
<span class="n">y</span><span class="p">[</span><span class="s">&#39;match&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">y</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="bp">True</span> <span class="k">if</span> <span class="n">sl_phones</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">0</span> <span class="k">else</span> <span class="bp">False</span><span class="p">)</span>
<span class="n">y</span><span class="o">.</span><span class="n">match</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">
    Out[48]:</div>


<div class="output_text output_subarea output_pyout">
<pre>1050</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### Visualize Matched Vendors</span>
<span class="n">c</span><span class="o">=</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">select </span>
<span class="s">    lower(m.vend_name),</span>
<span class="s">    lower(y.vend_name),</span>
<span class="s">    levenshtein(lower(m.vend_name),lower(y.vend_name),1,0,4),</span>
<span class="s">    difference(lower(m.vend_name),lower(y.vend_name))</span>
<span class="s">from mnv m,yelp y</span>
<span class="s">where m.yelp_id=y.id</span>
<span class="s">order by levenshtein(lower(m.vend_name),lower(y.vend_name),1,0,4) desc</span>
<span class="s">&quot;&quot;&quot;</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### __ create/update &#39;*_geom_error&#39; tables for remainders of yelp,seamless,mnv</span>

<span class="n">tables</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;yelp&#39;</span><span class="p">,</span><span class="s">&#39;seamless&#39;</span><span class="p">]</span>
<span class="n">id_cols</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;yelp&#39;</span><span class="p">:</span><span class="s">&#39;id&#39;</span><span class="p">,</span><span class="s">&#39;seamless&#39;</span><span class="p">:</span><span class="s">&#39;vend_id&#39;</span><span class="p">}</span>

<span class="n">c</span><span class="o">=</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">    select table_name tbl from information_schema.tables </span>
<span class="s">    WHERE table_schema=&#39;public&#39;</span>
<span class="s">    and table_name = ANY(array</span><span class="si">%s</span><span class="s">)</span>
<span class="s">    &quot;&quot;&quot;</span><span class="o">%</span><span class="k">str</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">+</span><span class="s">&#39;_geom_error&#39;</span><span class="p">,</span><span class="n">tables</span><span class="p">))</span>
<span class="n">chk</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span><span class="o">.</span><span class="n">tbl</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

<span class="k">for</span> <span class="n">tbl</span> <span class="ow">in</span> <span class="n">tables</span><span class="p">:</span>
    <span class="n">T</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;base_tbl&#39;</span><span class="p">:</span><span class="n">tbl</span><span class="p">,</span><span class="s">&#39;err_tbl&#39;</span><span class="p">:</span><span class="n">tbl</span><span class="o">+</span><span class="s">&#39;_geom_error&#39;</span><span class="p">,</span><span class="s">&#39;id_col&#39;</span><span class="p">:</span><span class="n">id_cols</span><span class="p">[</span><span class="n">tbl</span><span class="p">]}</span>
    <span class="k">if</span> <span class="n">chk</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s">&#39;err_tbl&#39;</span><span class="p">])</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
        <span class="n">c</span><span class="o">=</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">            create table </span><span class="si">%(err_tbl)s</span><span class="s"> as</span>
<span class="s">                select * from </span><span class="si">%(base_tbl)s</span><span class="s"> where geom is null;</span>
<span class="s">                </span>
<span class="s">            delete from </span><span class="si">%(base_tbl)s</span><span class="s"> t </span>
<span class="s">                using (select array_agg(t2.</span><span class="si">%(id_col)s</span><span class="s">) A from </span><span class="si">%(err_tbl)s</span><span class="s"> t2) </span>
<span class="s">                where y.</span><span class="si">%(id_col)s</span><span class="s"> = any(A);</span>
<span class="s">            &quot;&quot;&quot;</span><span class="o">%</span><span class="k">T</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">cols</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s">&quot;&quot;&quot;   </span>
<span class="s">            select column_name cols </span>
<span class="s">            from INFORMATION_SCHEMA.COLUMNS </span>
<span class="s">            where table_name = &#39;</span><span class="si">%(base_tbl)s</span><span class="s">&#39;&quot;&quot;&quot;</span><span class="o">%</span><span class="k">T</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span><span class="o">.</span><span class="n">cols</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

        <span class="n">T</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s">&#39;upd_defs&#39;</span>   <span class="p">:</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">+</span><span class="s">&#39; = t.&#39;</span><span class="o">+</span><span class="n">s</span><span class="o">+</span><span class="s">&#39;,&#39;</span><span class="p">,</span><span class="n">cols</span><span class="p">))[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span>
                  <span class="s">&#39;insert_cols&#39;</span><span class="p">:</span> <span class="s">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">cols</span><span class="p">)</span> <span class="p">})</span>
        <span class="n">T</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s">&#39;select_cols&#39;</span><span class="p">:</span> <span class="s">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="s">&#39;t.&#39;</span><span class="o">+</span><span class="n">s</span><span class="p">,</span><span class="n">cols</span><span class="p">))})</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">c</span><span class="o">=</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">            with upd as (</span>
<span class="s">                update </span><span class="si">%(err_tbl)s</span><span class="s"> s</span>
<span class="s">                set </span><span class="si">%(upd_defs)s</span><span class="s"></span>
<span class="s">                from </span><span class="si">%(base_tbl)s</span><span class="s"> t</span>
<span class="s">                where s.</span><span class="si">%(id_col)s</span><span class="s"> = t.</span><span class="si">%(id_col)s</span><span class="s"></span>
<span class="s">                and t.geom is null</span>
<span class="s">                returning s.</span><span class="si">%(id_col)s</span><span class="s"> </span><span class="si">%(id_col)s</span><span class="s"></span>
<span class="s">                        )                   </span>
<span class="s">            insert into </span><span class="si">%(err_tbl)s</span><span class="s"> ( </span><span class="si">%(insert_cols)s</span><span class="s"> )</span>

<span class="s">            select </span><span class="si">%(select_cols)s</span><span class="s"></span>
<span class="s">                from </span>
<span class="s">                    </span><span class="si">%(base_tbl)s</span><span class="s"> t,</span>
<span class="s">                    (select array_agg(t2.</span><span class="si">%(id_col)s</span><span class="s">) A from </span><span class="si">%(err_tbl)s</span><span class="s"> t2) as f2</span>
<span class="s">                where (not A @&gt; array[t.</span><span class="si">%(id_col)s</span><span class="s">])</span>
<span class="s">                and t.geom is null;</span>

<span class="s">            delete from </span><span class="si">%(base_tbl)s</span><span class="s"> t </span>
<span class="s">                using (select array_agg(t2.</span><span class="si">%(id_col)s</span><span class="s">) A from </span><span class="si">%(err_tbl)s</span><span class="s"> t2) as f1</span>
<span class="s">                where t.</span><span class="si">%(id_col)s</span><span class="s"> = any(A);</span>
<span class="s">            &quot;&quot;&quot;</span><span class="o">%</span><span class="k">T</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### __ create &#39;all_info&#39; from { mn_vendor,seamless,yelp } [ about 2.5 min ] </span>

<span class="kn">import</span> <span class="nn">sys</span>
<span class="nb">reload</span><span class="p">(</span><span class="n">sys</span><span class="p">)</span>
<span class="n">sys</span><span class="o">.</span><span class="n">setdefaultencoding</span><span class="p">(</span><span class="s">&#39;UTF8&#39;</span><span class="p">)</span>

<span class="c"># match_distinct_mnv_phone(tbl=&#39;yelp&#39;,tbl_id=&#39;id&#39;)</span>
<span class="c"># match_distinct_mnv_phone(tbl=&#39;seamless&#39;,tbl_id=&#39;vend_id&#39;)</span>

<span class="k">def</span> <span class="nf">remove_all_NaN</span><span class="p">(</span><span class="n">tbl</span><span class="p">):</span>
    
    <span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">d</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s">&quot;&quot;&quot; select column_name cols</span>
<span class="s">                      from INFORMATION_SCHEMA.COLUMNS </span>
<span class="s">                      where table_name = &#39;</span><span class="si">%s</span><span class="s">&#39;&quot;&quot;&quot;</span><span class="o">%</span><span class="k">tbl</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span><span class="o">.</span><span class="n">cols</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">d</span><span class="p">:</span>
        <span class="n">T</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;tbl&#39;</span><span class="p">:</span><span class="n">tbl</span><span class="p">,</span><span class="s">&#39;col&#39;</span><span class="p">:</span><span class="n">it</span><span class="p">}</span>
        <span class="n">cmd</span><span class="o">=</span><span class="s">&quot;&quot;&quot; update </span><span class="si">%(tbl)s</span><span class="s"> set </span><span class="si">%(col)s</span><span class="s"> = null</span>
<span class="s">                where (</span>
<span class="s">                    </span><span class="si">%(col)s</span><span class="s">::text=&#39;NaN&#39; </span>
<span class="s">                    or </span><span class="si">%(col)s</span><span class="s">::text=&#39;None&#39;</span>
<span class="s">                    or </span><span class="si">%(col)s</span><span class="s">::text ilike &#39;nan&#39;</span>
<span class="s">                    or </span><span class="si">%(col)s</span><span class="s">::text ilike &#39;nat&#39;) &quot;&quot;&quot;</span><span class="o">%</span><span class="k">T</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">it</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;phone&#39;</span><span class="p">)</span><span class="o">!=-</span><span class="mi">1</span> <span class="ow">and</span> <span class="n">it</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;display&#39;</span><span class="p">)</span><span class="o">==-</span><span class="mi">1</span><span class="p">):</span>
            <span class="n">cmd</span><span class="o">=</span><span class="s">&quot;&quot;&quot; update </span><span class="si">%(tbl)s</span><span class="s"> set </span><span class="si">%(col)s</span><span class="s"> = null</span>
<span class="s">            where </span><span class="si">%(col)s</span><span class="s"> = 0 &quot;&quot;&quot;</span><span class="o">%</span><span class="k">T</span>
            <span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>
    <span class="k">return</span>

<span class="k">def</span> <span class="nf">rename_all_cols_with_label</span><span class="p">(</span><span class="n">tbl</span><span class="p">,</span><span class="n">prefix</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">,</span><span class="n">exceptions</span><span class="o">=</span><span class="p">[]):</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">d</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s">&quot;&quot;&quot; select column_name cols</span>
<span class="s">                      from INFORMATION_SCHEMA.COLUMNS </span>
<span class="s">                      where table_name = &#39;</span><span class="si">%s</span><span class="s">&#39;&quot;&quot;&quot;</span><span class="o">%</span><span class="k">tbl</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span><span class="o">.</span><span class="n">cols</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
    <span class="n">base_cmd</span><span class="p">,</span><span class="n">s</span><span class="o">=</span><span class="s">&#39;ALTER TABLE </span><span class="si">%s</span><span class="s"> &#39;</span><span class="o">%</span><span class="k">tbl</span><span class="p">,</span><span class="s">&#39;&#39;</span>
    <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">d</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">it</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
            <span class="n">s</span><span class="o">+=</span><span class="n">base_cmd</span><span class="o">+</span><span class="s">&#39;rename column </span><span class="si">%(col)s</span><span class="s"> to </span><span class="si">%(pre)s%(col)s</span><span class="s">;</span><span class="se">\n</span><span class="s">&#39;</span><span class="o">%</span><span class="p">{</span><span class="s">&#39;col&#39;</span><span class="p">:</span><span class="n">it</span><span class="p">,</span><span class="s">&#39;pre&#39;</span><span class="p">:</span><span class="n">prefix</span><span class="p">}</span>
    <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s">&#39; ,&#39;</span><span class="p">)</span><span class="o">+</span><span class="s">&#39;;&#39;</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
    <span class="k">return</span>

<span class="k">def</span> <span class="nf">delete_pts_outside_mn</span><span class="p">():</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">        delete from all_info v</span>
<span class="s">        using</span>
<span class="s">            (</span>
<span class="s">                SELECT ST_Buffer(  ST_ConcaveHull(  (ST_Collect(f.the_geom)), 100, false  ),.0005) mn </span>
<span class="s">                FROM ( </span>
<span class="s">                SELECT *, (ST_Dump(geom)).geom As the_geom </span>
<span class="s">                FROM pluto</span>
<span class="s">                ) As f</span>
<span class="s">            ) as f2</span>
<span class="s">        where not st_containsproperly(mn,v.geom);</span>
<span class="s">    &quot;&quot;&quot;</span><span class="p">)</span>
    <span class="k">return</span>

<span class="c">## ----------------------</span>

<span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;drop table if exists all_info&quot;</span><span class="p">)</span>

<span class="c"># </span>
<span class="c"># CAREFUL with the &#39;c1&#39; &amp; &#39;c2&#39; below... the sequence order [ mn_vendors,seamless,yelp ] is essential #</span>
<span class="c"># </span>

<span class="n">c1</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">    select *</span>
<span class="s">    from </span>
<span class="s">        (select * from mnv mn) as f1</span>
<span class="s">    left join seamless sl on f1.seamless_id=sl.vend_id</span>
<span class="s">    right join yelp y on f1.yelp_id=y.id</span>
<span class="s">    &quot;&quot;&quot;</span>
<span class="n">grp</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="n">c1</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
<span class="n">grp_cols</span> <span class="o">=</span> <span class="n">grp</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

<span class="c"># ---- horizontally split up results with column cnt and rename</span>
<span class="n">c2</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;   </span>
<span class="s">    select mn_cnt,y_cnt,sl_cnt</span>
<span class="s">    from</span>
<span class="s">        (select count(*) mn_cnt from INFORMATION_SCHEMA.COLUMNS where table_name = &#39;mnv&#39;) as f1,</span>
<span class="s">        (select count(*) sl_cnt from INFORMATION_SCHEMA.COLUMNS where table_name = &#39;seamless&#39;) as f2,</span>
<span class="s">        (select count(*) y_cnt from INFORMATION_SCHEMA.COLUMNS where table_name = &#39;yelp&#39;) as f3</span>
<span class="s">    &quot;&quot;&quot;</span>
<span class="n">t</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="n">c2</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
<span class="n">t_cols</span><span class="o">=</span><span class="n">t</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

<span class="n">cnt_dict</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span><span class="n">t</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="mi">0</span><span class="p">,:]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()))</span>
<span class="n">tbl_dict</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;mn&#39;</span><span class="p">:</span><span class="s">&#39;mnv&#39;</span><span class="p">,</span><span class="s">&#39;sl&#39;</span><span class="p">:</span><span class="s">&#39;seamless&#39;</span><span class="p">,</span><span class="s">&#39;y&#39;</span><span class="p">:</span><span class="s">&#39;yelp&#39;</span><span class="p">}</span>

<span class="n">new_grp_cols</span><span class="p">,</span><span class="n">pt</span><span class="o">=</span><span class="p">[],</span><span class="mi">0</span>
<span class="k">for</span> <span class="n">cnt</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">cnt_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
    <span class="n">tbl_key</span> <span class="o">=</span> <span class="n">cnt</span><span class="p">[:</span><span class="n">cnt</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;_cnt&#39;</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">next_pt</span> <span class="o">=</span> <span class="n">pt</span><span class="o">+</span><span class="n">cnt_dict</span><span class="p">[</span><span class="n">cnt</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">pt</span><span class="p">,</span><span class="n">next_pt</span><span class="p">):</span>
        <span class="n">new_grp_cols</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">tbl_key</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">grp_cols</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="p">)</span>
    <span class="n">pt</span> <span class="o">=</span> <span class="n">next_pt</span>

<span class="nb">len</span><span class="p">(</span><span class="n">new_grp_cols</span><span class="p">)</span> <span class="o">==</span> <span class="nb">sum</span><span class="p">(</span><span class="n">cnt_dict</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
<span class="n">grp</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">new_grp_cols</span><span class="p">]</span>

<span class="c"># ---- clean up</span>
<span class="n">take_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;mn_camis&#39;</span><span class="p">,</span><span class="s">&#39;sl_vend_id&#39;</span><span class="p">,</span><span class="s">&#39;y_gid&#39;</span><span class="p">,</span><span class="s">&#39;mn_vend_name&#39;</span><span class="p">,</span><span class="s">&#39;sl_vend_name&#39;</span><span class="p">,</span><span class="s">&#39;y_vend_name&#39;</span><span class="p">,</span>
             <span class="s">&#39;mn_address&#39;</span><span class="p">,</span><span class="s">&#39;sl_address&#39;</span><span class="p">,</span><span class="s">&#39;y_display_address&#39;</span><span class="p">,</span><span class="s">&#39;y_neighborhoods&#39;</span><span class="p">,</span><span class="s">&#39;mn_zipcode&#39;</span><span class="p">,</span>
             <span class="s">&#39;sl_zipcode&#39;</span><span class="p">,</span><span class="s">&#39;y_postal_code&#39;</span><span class="p">,</span><span class="s">&#39;mn_phone&#39;</span><span class="p">,</span><span class="s">&#39;sl_phone&#39;</span><span class="p">,</span><span class="s">&#39;y_display_phone&#39;</span><span class="p">,</span>
             <span class="s">&#39;sl_sl_link&#39;</span><span class="p">,</span><span class="s">&#39;y_url&#39;</span><span class="p">,</span><span class="s">&#39;y_website&#39;</span><span class="p">,</span><span class="s">&#39;y_menu_page&#39;</span><span class="p">,</span><span class="s">&#39;y_menu_date_updated&#39;</span><span class="p">,</span><span class="s">&#39;y_menu_provider&#39;</span><span class="p">,</span>
             <span class="s">&#39;sl_inactive&#39;</span><span class="p">,</span><span class="s">&#39;y_is_claimed&#39;</span><span class="p">,</span><span class="s">&#39;y_is_closed&#39;</span><span class="p">,</span><span class="s">&#39;y_online_ordering&#39;</span><span class="p">,</span><span class="s">&#39;y_extra_info&#39;</span><span class="p">,</span><span class="s">&#39;y_hours&#39;</span><span class="p">,</span>
             <span class="s">&#39;mn_cuisinecode&#39;</span><span class="p">,</span><span class="s">&#39;sl_cuisine&#39;</span><span class="p">,</span><span class="s">&#39;y_categories&#39;</span><span class="p">,</span><span class="s">&#39;sl_description&#39;</span><span class="p">,</span>
             <span class="s">&#39;sl_price&#39;</span><span class="p">,</span><span class="s">&#39;y_price_range&#39;</span><span class="p">,</span><span class="s">&#39;sl_deliv_min&#39;</span><span class="p">,</span><span class="s">&#39;sl_deliv_fee&#39;</span><span class="p">,</span><span class="s">&#39;sl_perc_fee&#39;</span><span class="p">,</span><span class="s">&#39;sl_pickup_est&#39;</span><span class="p">,</span><span class="s">&#39;sl_deliv_est&#39;</span><span class="p">,</span>
             <span class="s">&#39;sl_rating&#39;</span><span class="p">,</span><span class="s">&#39;sl_rating_total&#39;</span><span class="p">,</span><span class="s">&#39;sl_rating_perc&#39;</span><span class="p">,</span><span class="s">&#39;y_rating&#39;</span><span class="p">,</span><span class="s">&#39;y_review_count&#39;</span><span class="p">,</span><span class="s">&#39;sl_reviews&#39;</span><span class="p">,</span>
             <span class="s">&#39;mn_inspdate&#39;</span><span class="p">,</span><span class="s">&#39;sl_upd_search_links&#39;</span><span class="p">,</span><span class="s">&#39;sl_upd_vend_content&#39;</span><span class="p">,</span><span class="s">&#39;y_last_api_update&#39;</span><span class="p">,</span><span class="s">&#39;y_hours_updated&#39;</span><span class="p">]</span>
<span class="n">grp</span> <span class="o">=</span> <span class="n">grp</span><span class="o">.</span><span class="n">ix</span><span class="p">[:,</span><span class="n">take_cols</span><span class="p">]</span>
<span class="n">take_cols_with_geom</span> <span class="o">=</span> <span class="n">take_cols</span> <span class="o">+</span> <span class="p">[</span><span class="s">&#39;geom&#39;</span><span class="p">]</span>

<span class="n">re_encode_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;mn_vend_name&#39;</span><span class="p">,</span><span class="s">&#39;sl_vend_name&#39;</span><span class="p">,</span><span class="s">&#39;y_vend_name&#39;</span><span class="p">,</span>
                  <span class="s">&#39;sl_description&#39;</span><span class="p">]</span>
<span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">re_encode_cols</span><span class="p">:</span>
    <span class="n">grp</span><span class="p">[</span><span class="n">it</span><span class="p">]</span> <span class="o">=</span> <span class="n">grp</span><span class="p">[</span><span class="n">it</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span> <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">==</span><span class="n">NoneType</span> <span class="k">else</span> <span class="n">codecs</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="s">&#39;utf8&#39;</span><span class="p">,</span><span class="s">&#39;ignore&#39;</span><span class="p">))</span>

<span class="n">phone_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;mn_phone&#39;</span><span class="p">,</span><span class="s">&#39;sl_phone&#39;</span><span class="p">]</span>
<span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">phone_cols</span><span class="p">:</span>
    <span class="n">grp</span><span class="p">[</span><span class="n">it</span><span class="p">]</span> <span class="o">=</span> <span class="n">grp</span><span class="p">[</span><span class="n">it</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="mi">0</span> <span class="k">if</span> <span class="n">s</span><span class="o">.</span><span class="n">is_integer</span><span class="p">()</span><span class="o">==</span><span class="bp">False</span> <span class="k">else</span> <span class="nb">int</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>

<span class="n">title_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;mn_vend_name&#39;</span><span class="p">,</span><span class="s">&#39;sl_vend_name&#39;</span><span class="p">,</span><span class="s">&#39;y_vend_name&#39;</span><span class="p">,</span>
              <span class="s">&#39;mn_address&#39;</span><span class="p">,</span><span class="s">&#39;sl_address&#39;</span><span class="p">,</span><span class="s">&#39;y_display_address&#39;</span><span class="p">]</span>
<span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">title_cols</span><span class="p">:</span>
    <span class="n">grp</span><span class="p">[</span><span class="n">it</span><span class="p">]</span> <span class="o">=</span> <span class="n">grp</span><span class="p">[</span><span class="n">it</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">.</span><span class="n">title</span><span class="p">())</span>

<span class="n">datetime_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;mn_inspdate&#39;</span><span class="p">,</span><span class="s">&#39;sl_upd_search_links&#39;</span><span class="p">,</span><span class="s">&#39;sl_upd_vend_content&#39;</span><span class="p">,</span><span class="s">&#39;y_last_api_update&#39;</span><span class="p">,</span>
                 <span class="s">&#39;y_menu_date_updated&#39;</span><span class="p">,</span><span class="s">&#39;y_hours_updated&#39;</span><span class="p">]</span>
<span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">datetime_cols</span><span class="p">:</span>
    <span class="n">grp</span><span class="p">[</span><span class="n">it</span><span class="p">]</span> <span class="o">=</span> <span class="n">grp</span><span class="p">[</span><span class="n">it</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>

<span class="c"># ---- push to pgSQL</span>
<span class="n">grp</span><span class="p">[</span><span class="s">&#39;y_hours&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">grp</span><span class="o">.</span><span class="n">y_hours</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="bp">None</span> <span class="k">if</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">==</span><span class="s">&#39;nan&#39;</span> <span class="ow">or</span> <span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">==</span><span class="s">&#39;None&#39;</span><span class="p">)</span> <span class="k">else</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">it</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="s">&#39;: &#39;</span><span class="o">+</span><span class="n">it</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="nb">eval</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">))])</span> <span class="p">)</span>
<span class="n">grp</span><span class="p">[</span><span class="s">&#39;y_extra_info&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">grp</span><span class="o">.</span><span class="n">y_extra_info</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="bp">None</span> <span class="k">if</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">==</span><span class="s">&#39;nan&#39;</span> <span class="ow">or</span> <span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">==</span><span class="s">&#39;None&#39;</span><span class="p">)</span> <span class="k">else</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">it</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="s">&#39;: &#39;</span><span class="o">+</span><span class="n">it</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="nb">eval</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">))])</span> <span class="p">)</span>
<span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span> <span class="s">&quot;&quot;&quot;drop table if exists all_info;&quot;&quot;&quot;</span><span class="p">)</span>
<span class="n">grp</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s">&#39;all_info&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
<span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">    alter table all_info add column glob_id serial primary key;</span>
<span class="s">    update all_info set glob_id = nextval(pg_get_serial_sequence(&#39;all_info&#39;,&#39;glob_id&#39;));</span>
<span class="s">    &quot;&quot;&quot;</span><span class="p">)</span>

<span class="c"># ---- make first part of DB</span>
<span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">    ALTER TABLE all_info </span>
<span class="s">        drop column index;</span>

<span class="s">    ALTER TABLE all_info </span>
<span class="s">        add column lat double precision,</span>
<span class="s">        add column lon double precision,</span>
<span class="s">        add column geom geometry(Point,4326),</span>
<span class="s">        add column new_notes text,</span>
<span class="s">        add column follow_up text,</span>
<span class="s">        add column old_notes text,</span>
<span class="s">        add column mark_for_edit text;</span>

<span class="s">    UPDATE all_info c set geom = t_geom</span>
<span class="s">    from (select t.camis t_id,t.geom t_geom from mnv t where geom is not null) as f1</span>
<span class="s">    where c.mn_camis = t_id</span>
<span class="s">    and (c.mn_camis is not null and ( not c.mn_camis::text ilike &#39;nan&#39; ) );</span>

<span class="s">    UPDATE all_info c set geom = t_geom</span>
<span class="s">    from (select t.gid t_id,t.geom t_geom from yelp t where geom is not null) as f1</span>
<span class="s">    where c.y_gid = t_id</span>
<span class="s">    and (c.y_gid is not null and ( not c.y_gid::text ilike &#39;nan&#39; ) );</span>

<span class="s">    UPDATE all_info c set geom = t_geom</span>
<span class="s">    from (select t.vend_id t_id,t.geom t_geom from seamless t where geom is not null) as f1</span>
<span class="s">    where c.sl_vend_id = t_id</span>
<span class="s">    and (c.sl_vend_id is not null and ( not c.sl_vend_id::text ilike &#39;nan&#39; ) );</span>
<span class="s">    &quot;&quot;&quot;</span><span class="p">)</span>

<span class="c"># ---- account for all mnv records</span>
<span class="n">uniq_grp_mn_ids</span> <span class="o">=</span> <span class="n">grp</span><span class="p">[</span><span class="n">grp</span><span class="o">.</span><span class="n">mn_camis</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">==</span><span class="bp">False</span><span class="p">]</span><span class="o">.</span><span class="n">mn_camis</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="n">all_mn_ids</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">    select distinct camis from mnv </span>
<span class="s">    where geom is not null</span>
<span class="s">    and (</span>
<span class="s">        camis is not null </span>
<span class="s">        and ( not camis::text ilike &#39;nan&#39; )</span>
<span class="s">        and ( not camis::text ilike &#39;nat&#39; ) </span>
<span class="s">        )</span>
<span class="s">    &quot;&quot;&quot;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
<span class="k">if</span> <span class="ow">not</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">all_mn_ids</span><span class="o">.</span><span class="n">camis</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span><span class="o">==</span><span class="nb">sorted</span><span class="p">(</span><span class="n">uniq_grp_mn_ids</span><span class="p">):</span>
    
    <span class="n">rem_mn_ids</span> <span class="o">=</span> <span class="n">all_mn_ids</span><span class="p">[(</span><span class="n">all_mn_ids</span><span class="o">.</span><span class="n">camis</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">uniq_grp_mn_ids</span><span class="p">)</span><span class="o">==</span><span class="bp">False</span><span class="p">)]</span><span class="o">.</span><span class="n">camis</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span> <span class="s">&quot;&quot;&quot;drop table if exists tmp;&quot;&quot;&quot;</span><span class="p">)</span>
    <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s">&#39;camis&#39;</span><span class="p">:</span><span class="n">rem_mn_ids</span><span class="p">})</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s">&#39;tmp&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">        alter table tmp add column gid serial primary key;</span>
<span class="s">        update tmp set gid = nextval(pg_get_serial_sequence(&#39;tmp&#39;,&#39;gid&#39;));</span>
<span class="s">    &quot;&quot;&quot;</span><span class="p">)</span>

    <span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span> <span class="s">&quot;&quot;&quot;drop table if exists tmp2;&quot;&quot;&quot;</span><span class="p">)</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">        create table tmp2 as</span>
<span class="s">        select m.* from </span>
<span class="s">            mnv m,</span>
<span class="s">            (select array_agg(t.camis) A from tmp t where t.camis is not null) as f1</span>
<span class="s">        where m.geom is not null</span>
<span class="s">        and (array[m.camis] &amp;&amp; A);</span>
<span class="s">        </span>
<span class="s">        alter table tmp2 add column gid serial primary key;</span>
<span class="s">        update tmp2 set gid = nextval(pg_get_serial_sequence(&#39;tmp2&#39;,&#39;gid&#39;));</span>
<span class="s">        &quot;&quot;&quot;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>

    <span class="n">rename_all_cols_with_label</span><span class="p">(</span><span class="n">tbl</span><span class="o">=</span><span class="s">&#39;tmp2&#39;</span><span class="p">,</span><span class="n">prefix</span><span class="o">=</span><span class="s">&#39;mn_&#39;</span><span class="p">,</span><span class="n">exceptions</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;geom&#39;</span><span class="p">])</span>
    
    <span class="n">rem_mn_records</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s">&#39;select * from tmp2&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
    <span class="n">new_rem_records_cols</span> <span class="o">=</span> <span class="n">rem_mn_records</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">len</span><span class="p">(</span><span class="n">all_mn_ids</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">uniq_grp_mn_ids</span><span class="p">)</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">rem_mn_records</span><span class="o">.</span><span class="n">mn_camis</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">tolist</span><span class="p">()):</span>
        <span class="k">print</span> <span class="s">&#39;Missing mnv records&#39;</span>
        <span class="k">raise</span> <span class="ne">SystemError</span><span class="p">()</span>

    <span class="c"># -- Remove all &#39;NaN&#39;</span>
    <span class="n">tbl</span> <span class="o">=</span> <span class="s">&#39;tmp2&#39;</span>
    <span class="n">remove_all_NaN</span><span class="p">(</span><span class="n">tbl</span><span class="p">)</span>

    <span class="n">insert_cols</span> <span class="o">=</span> <span class="p">[</span><span class="n">it</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">new_rem_records_cols</span> <span class="k">if</span> <span class="n">take_cols_with_geom</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">it</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">insert_cols</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">insert_cols</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s">&#39;[]&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&quot;&#39;&quot;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span>
    <span class="n">T</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;insert_cols&#39;</span><span class="p">:</span><span class="n">insert_cols</span><span class="p">}</span>
    <span class="n">cmd</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;   insert into all_info (</span><span class="si">%(insert_cols)s</span><span class="s">)</span>
<span class="s">                select </span><span class="si">%(insert_cols)s</span><span class="s"> from tmp2</span>
<span class="s">          &quot;&quot;&quot;</span><span class="o">%</span><span class="k">T</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>

<span class="c"># ---- account for all yelp records</span>
<span class="n">uniq_grp_y_gids</span> <span class="o">=</span> <span class="n">grp</span><span class="p">[(</span><span class="n">grp</span><span class="o">.</span><span class="n">y_gid</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="bp">True</span> <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">isdigit</span><span class="p">()</span> <span class="k">else</span> <span class="bp">False</span><span class="p">)</span><span class="o">==</span><span class="bp">True</span><span class="p">)]</span><span class="o">.</span><span class="n">y_gid</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="n">all_y_gids</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">    select distinct gid from yelp </span>
<span class="s">    where geom is not null</span>
<span class="s">    and (</span>
<span class="s">        gid is not null </span>
<span class="s">        and ( not gid::text ilike &#39;nan&#39; )</span>
<span class="s">        and ( not gid::text ilike &#39;nat&#39; ) </span>
<span class="s">        )</span>
<span class="s">    &quot;&quot;&quot;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
<span class="k">if</span> <span class="ow">not</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">all_y_gids</span><span class="o">.</span><span class="n">gid</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span><span class="o">==</span><span class="nb">sorted</span><span class="p">(</span><span class="n">uniq_grp_y_gids</span><span class="p">):</span>
    
    <span class="n">rem_y_gids</span> <span class="o">=</span> <span class="n">all_y_gids</span><span class="p">[(</span><span class="n">all_y_gids</span><span class="o">.</span><span class="n">gid</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">uniq_grp_y_gids</span><span class="p">)</span><span class="o">==</span><span class="bp">False</span><span class="p">)]</span><span class="o">.</span><span class="n">gid</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span> <span class="s">&quot;&quot;&quot;drop table if exists tmp;&quot;&quot;&quot;</span><span class="p">)</span>
    <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s">&#39;gid&#39;</span><span class="p">:</span><span class="n">rem_y_gids</span><span class="p">})</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s">&#39;tmp&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">        alter table tmp add column tid serial primary key;</span>
<span class="s">        update tmp set tid = nextval(pg_get_serial_sequence(&#39;tmp&#39;,&#39;tid&#39;));</span>
<span class="s">        &quot;&quot;&quot;</span><span class="p">)</span>
    
    <span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;drop table if exists tmp2;&quot;</span><span class="p">)</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">        create table tmp2 as</span>
<span class="s">        select y.* from </span>
<span class="s">            yelp y,</span>
<span class="s">            (select array_agg(t.gid::integer) A from tmp t where t.gid is not null) as f1</span>
<span class="s">        where y.geom is not null</span>
<span class="s">        and (array[y.gid] &amp;&amp; A);</span>
<span class="s">        </span>
<span class="s">        alter table tmp2 add column tid serial primary key;</span>
<span class="s">        update tmp2 set tid = nextval(pg_get_serial_sequence(&#39;tmp2&#39;,&#39;tid&#39;));</span>
<span class="s">        &quot;&quot;&quot;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
    
    <span class="n">rename_all_cols_with_label</span><span class="p">(</span><span class="n">tbl</span><span class="o">=</span><span class="s">&#39;tmp2&#39;</span><span class="p">,</span><span class="n">prefix</span><span class="o">=</span><span class="s">&#39;y_&#39;</span><span class="p">,</span><span class="n">exceptions</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;geom&#39;</span><span class="p">])</span>
    
    <span class="n">rem_y_records</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s">&#39;select * from tmp2&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
    <span class="n">new_rem_records_cols</span> <span class="o">=</span> <span class="n">rem_y_records</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">len</span><span class="p">(</span><span class="n">all_y_gids</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">uniq_grp_y_gids</span><span class="p">)</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">rem_y_records</span><span class="o">.</span><span class="n">gid</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">tolist</span><span class="p">()):</span>
        <span class="k">print</span> <span class="s">&#39;Missing yelp records&#39;</span>
        <span class="k">raise</span> <span class="ne">SystemError</span><span class="p">()</span>
    
    <span class="n">tbl</span><span class="o">=</span><span class="s">&#39;tmp2&#39;</span>
    <span class="n">remove_all_NaN</span><span class="p">(</span><span class="n">tbl</span><span class="p">)</span>
    
    <span class="n">new_rem_records_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;y_&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">it</span><span class="p">)</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">rem_y_records</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">tolist</span><span class="p">()]</span>
    <span class="n">rem_y_records</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">new_rem_records_cols</span><span class="p">]</span>
    <span class="n">z</span> <span class="o">=</span> <span class="n">rem_y_records</span><span class="o">.</span><span class="n">ix</span><span class="p">[:,</span><span class="n">take_cols_with_geom</span><span class="p">]</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;drop table if exists tmp;&#39;</span><span class="p">)</span>
    <span class="n">z</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s">&#39;tmp&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>

    <span class="c"># -- Remove all &#39;NaN&#39;</span>
    <span class="n">tbl</span> <span class="o">=</span> <span class="s">&#39;tmp&#39;</span>
    <span class="n">remove_all_NaN</span><span class="p">(</span><span class="n">tbl</span><span class="p">)</span>
    
    <span class="n">insert_cols</span> <span class="o">=</span> <span class="p">[</span><span class="n">it</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">new_rem_records_cols</span> <span class="k">if</span> <span class="n">take_cols_with_geom</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">it</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">insert_cols</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">insert_cols</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s">&#39;[]&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&quot;&#39;&quot;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span>
    <span class="n">T</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;insert_cols&#39;</span><span class="p">:</span><span class="n">insert_cols</span><span class="p">}</span>
    <span class="n">cmd</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;   insert into all_info (</span><span class="si">%(insert_cols)s</span><span class="s">)</span>
<span class="s">                select </span><span class="si">%(insert_cols)s</span><span class="s"> from tmp</span>
<span class="s">          &quot;&quot;&quot;</span><span class="o">%</span><span class="k">T</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>

<span class="c"># ---- account for all seamless records</span>
<span class="n">uniq_grp_sl_ids</span> <span class="o">=</span> <span class="n">grp</span><span class="p">[</span><span class="n">grp</span><span class="o">.</span><span class="n">sl_vend_id</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">is_integer</span><span class="p">())</span><span class="o">==</span><span class="bp">True</span><span class="p">]</span><span class="o">.</span><span class="n">sl_vend_id</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="n">all_sl_ids</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">    select distinct vend_id id from seamless </span>
<span class="s">    where geom is not null</span>
<span class="s">    and (</span>
<span class="s">        vend_id is not null </span>
<span class="s">        and ( not vend_id::text ilike &#39;nan&#39; )</span>
<span class="s">        and ( not vend_id::text ilike &#39;nat&#39; ) </span>
<span class="s">        )</span>
<span class="s">    &quot;&quot;&quot;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
<span class="k">if</span> <span class="ow">not</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">all_sl_ids</span><span class="o">.</span><span class="n">id</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span><span class="o">==</span><span class="nb">sorted</span><span class="p">(</span><span class="n">uniq_grp_sl_ids</span><span class="p">):</span>
    
    <span class="n">rem_sl_ids</span> <span class="o">=</span> <span class="n">all_sl_ids</span><span class="p">[(</span><span class="n">all_sl_ids</span><span class="o">.</span><span class="n">id</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">uniq_grp_sl_ids</span><span class="p">)</span><span class="o">==</span><span class="bp">False</span><span class="p">)]</span><span class="o">.</span><span class="n">id</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span> <span class="s">&quot;&quot;&quot;drop table if exists tmp;&quot;&quot;&quot;</span><span class="p">)</span>
    <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s">&#39;vend_id&#39;</span><span class="p">:</span><span class="n">rem_sl_ids</span><span class="p">})</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s">&#39;tmp&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">        alter table tmp add column tid serial primary key;</span>
<span class="s">        update tmp set tid = nextval(pg_get_serial_sequence(&#39;tmp&#39;,&#39;tid&#39;));</span>
<span class="s">        &quot;&quot;&quot;</span><span class="p">)</span>
    
    <span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span> <span class="s">&quot;&quot;&quot;drop table if exists tmp2;&quot;&quot;&quot;</span><span class="p">)</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">        create table tmp2 as</span>
<span class="s">        select s.* from </span>
<span class="s">            seamless s,</span>
<span class="s">            (select array_agg(t.vend_id) A from tmp t) as f1</span>
<span class="s">        where s.geom is not null</span>
<span class="s">        and (array[s.vend_id] &amp;&amp; A);</span>
<span class="s">    </span>
<span class="s">        alter table tmp2 add column tid serial primary key;</span>
<span class="s">        update tmp2 set tid = nextval(pg_get_serial_sequence(&#39;tmp2&#39;,&#39;tid&#39;));</span>
<span class="s">        &quot;&quot;&quot;</span><span class="p">)</span>
    
    <span class="n">rename_all_cols_with_label</span><span class="p">(</span><span class="n">tbl</span><span class="o">=</span><span class="s">&#39;tmp2&#39;</span><span class="p">,</span><span class="n">prefix</span><span class="o">=</span><span class="s">&#39;sl_&#39;</span><span class="p">,</span><span class="n">exceptions</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;geom&#39;</span><span class="p">])</span>

    <span class="n">rem_sl_records</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s">&#39;select * from tmp2&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
    <span class="n">new_rem_records_cols</span> <span class="o">=</span> <span class="n">rem_sl_records</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">len</span><span class="p">(</span><span class="n">all_sl_ids</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">uniq_grp_sl_ids</span><span class="p">)</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">rem_sl_records</span><span class="o">.</span><span class="n">sl_vend_id</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">tolist</span><span class="p">()):</span>
        <span class="k">print</span> <span class="s">&#39;Missing seamless records&#39;</span>
        <span class="k">raise</span> <span class="ne">SystemError</span><span class="p">()</span>

    <span class="c"># -- Remove all &#39;NaN&#39;</span>
    <span class="n">tbl</span> <span class="o">=</span> <span class="s">&#39;tmp&#39;</span>
    <span class="n">remove_all_NaN</span><span class="p">(</span><span class="n">tbl</span><span class="p">)</span>
    
    <span class="n">insert_cols</span> <span class="o">=</span> <span class="p">[</span><span class="n">it</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">new_rem_records_cols</span> <span class="k">if</span> <span class="n">take_cols_with_geom</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">it</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">insert_cols</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">insert_cols</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s">&#39;[]&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&quot;&#39;&quot;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span>
    <span class="n">T</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;insert_cols&#39;</span><span class="p">:</span><span class="n">insert_cols</span><span class="p">}</span>
    <span class="n">cmd</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;   insert into all_info (</span><span class="si">%(insert_cols)s</span><span class="s">)</span>
<span class="s">                select </span><span class="si">%(insert_cols)s</span><span class="s"> from tmp2</span>
<span class="s">          &quot;&quot;&quot;</span><span class="o">%</span><span class="k">T</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>

<span class="n">re_encode_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;mn_vend_name&#39;</span><span class="p">,</span><span class="s">&#39;sl_vend_name&#39;</span><span class="p">,</span><span class="s">&#39;y_vend_name&#39;</span><span class="p">,</span>
                  <span class="s">&#39;sl_description&#39;</span><span class="p">]</span>
<span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">re_encode_cols</span><span class="p">:</span>
    <span class="n">grp</span><span class="p">[</span><span class="n">it</span><span class="p">]</span> <span class="o">=</span> <span class="n">grp</span><span class="p">[</span><span class="n">it</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="bp">None</span> <span class="k">if</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">==</span><span class="n">NoneType</span> <span class="ow">or</span> <span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">==</span><span class="s">&#39;nan&#39;</span><span class="p">)</span> <span class="k">else</span> <span class="n">codecs</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="s">&#39;utf8&#39;</span><span class="p">,</span><span class="s">&#39;ignore&#39;</span><span class="p">))</span>

<span class="n">title_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;mn_vend_name&#39;</span><span class="p">,</span><span class="s">&#39;sl_vend_name&#39;</span><span class="p">,</span><span class="s">&#39;y_vend_name&#39;</span><span class="p">]</span>
<span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">title_cols</span><span class="p">:</span>
    <span class="n">grp</span><span class="p">[</span><span class="n">it</span><span class="p">]</span> <span class="o">=</span> <span class="n">grp</span><span class="p">[</span><span class="n">it</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">.</span><span class="n">title</span><span class="p">())</span>

<span class="n">datetime_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;mn_inspdate&#39;</span><span class="p">,</span><span class="s">&#39;sl_upd_search_links&#39;</span><span class="p">,</span><span class="s">&#39;sl_upd_vend_content&#39;</span><span class="p">,</span><span class="s">&#39;y_last_api_update&#39;</span><span class="p">,</span>
                 <span class="s">&#39;y_menu_date_updated&#39;</span><span class="p">,</span><span class="s">&#39;y_hours_updated&#39;</span><span class="p">]</span>
<span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">datetime_cols</span><span class="p">:</span>
    <span class="n">grp</span><span class="p">[</span><span class="n">it</span><span class="p">]</span> <span class="o">=</span> <span class="n">grp</span><span class="p">[</span><span class="n">it</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
    
<span class="c"># update geom to match Google Coord/Projection System</span>


<span class="c"># conn.set_isolation_level(0)</span>
<span class="c"># cur.execute(&quot;&quot;&quot;</span>
<span class="c"># ALTER TABLE all_info </span>
<span class="c">#     ALTER COLUMN geom TYPE geometry(Point, 3857) USING ST_Transform(ST_SetSRID(geom,4326),3857);</span>

<span class="c"># UPDATE all_info set</span>
<span class="c">#     lat = st_y(geom::geometry(Point,3857)),</span>
<span class="c">#     lon = st_x(geom::geometry(Point,3857));</span>

<span class="c"># &quot;&quot;&quot;)</span>

<span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">    UPDATE all_info set</span>
<span class="s">        lat = st_y(ST_SetSRID(geom::geometry(Point,4326),4326)),</span>
<span class="s">        lon = st_x(ST_SetSRID(geom::geometry(Point,4326),4326));</span>

<span class="s">    &quot;&quot;&quot;</span><span class="p">)</span>


<span class="c"># -- Final Yelp check</span>
<span class="n">all_y_id</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">    select distinct gid id from yelp</span>
<span class="s">    where (gid is not null and gid::text!=&#39;NaN&#39; and geom is not null)</span>
<span class="s">    &quot;&quot;&quot;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
<span class="n">y_id_in_grp</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">    select distinct y_gid::integer id from all_info </span>
<span class="s">    where (y_gid is not null and y_gid::text!=&#39;NaN&#39;);</span>
<span class="s">    &quot;&quot;&quot;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
<span class="k">if</span> <span class="ow">not</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">all_y_id</span><span class="p">)</span><span class="o">==</span><span class="nb">sorted</span><span class="p">(</span><span class="n">y_id_in_grp</span><span class="p">):</span>
    <span class="k">print</span> <span class="s">&#39;missing yelp records_2&#39;</span>

<span class="c"># -- Final Seamless check</span>
<span class="n">all_sl_id</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">    select distinct vend_id id from seamless</span>
<span class="s">    where (vend_id is not null and geom is not null)</span>
<span class="s">    &quot;&quot;&quot;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
<span class="n">sl_id_in_grp</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">    select distinct sl_vend_id id from all_info </span>
<span class="s">    where (sl_vend_id is not null);</span>
<span class="s">    &quot;&quot;&quot;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
<span class="k">if</span> <span class="ow">not</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">all_sl_id</span><span class="p">)</span><span class="o">==</span><span class="nb">sorted</span><span class="p">(</span><span class="n">sl_id_in_grp</span><span class="p">):</span>
    <span class="k">print</span> <span class="s">&#39;missing seamless records_2&#39;</span>

<span class="n">remove_all_NaN</span><span class="p">(</span><span class="n">tbl</span><span class="o">=</span><span class="s">&#39;all_info&#39;</span><span class="p">)</span>

<span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">    ALTER TABLE all_info </span>
<span class="s">        ALTER COLUMN mn_zipcode TYPE bigint USING mn_zipcode::bigint,</span>
<span class="s">        ALTER COLUMN sl_zipcode TYPE bigint USING sl_zipcode::bigint,</span>
<span class="s">        ALTER COLUMN y_postal_code TYPE bigint USING y_postal_code::bigint,</span>
<span class="s">        ALTER COLUMN mn_camis TYPE bigint USING mn_camis::bigint,</span>
<span class="s">        ALTER COLUMN y_gid TYPE bigint USING y_gid::bigint,</span>
<span class="s">        ALTER COLUMN mn_cuisinecode TYPE bigint USING mn_cuisinecode::bigint,</span>
<span class="s">        ALTER COLUMN sl_rating TYPE bigint USING sl_rating::bigint,</span>
<span class="s">        ALTER COLUMN sl_rating_total TYPE bigint USING sl_rating_total::bigint,</span>
<span class="s">        ALTER COLUMN y_rating TYPE bigint USING y_rating::bigint,</span>
<span class="s">        ALTER COLUMN y_review_count TYPE bigint USING y_review_count::bigint,</span>
<span class="s">        ALTER COLUMN sl_reviews TYPE bigint USING sl_reviews::bigint;</span>

<span class="s">    ALTER TABLE all_info </span>
<span class="s">        ALTER COLUMN mn_inspdate TYPE timestamp without time zone USING mn_inspdate::timestamp without time zone,</span>
<span class="s">        ALTER COLUMN y_menu_date_updated TYPE timestamp without time zone USING y_menu_date_updated::timestamp without time zone,</span>
<span class="s">        ALTER COLUMN sl_upd_search_links TYPE timestamp with time zone USING sl_upd_search_links::timestamp with time zone,</span>
<span class="s">        ALTER COLUMN sl_upd_vend_content TYPE timestamp with time zone USING sl_upd_vend_content::timestamp with time zone,</span>
<span class="s">        ALTER COLUMN y_last_api_update TYPE timestamp with time zone USING y_last_api_update::timestamp with time zone,</span>
<span class="s">        ALTER COLUMN y_hours_updated TYPE timestamp with time zone USING y_hours_updated::timestamp with time zone;</span>

<span class="s">    ALTER TABLE all_info</span>
<span class="s">        ADD COLUMN map_group integer;</span>
<span class="s">    &quot;&quot;&quot;</span><span class="p">)</span>

<span class="n">delete_pts_outside_mn</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### All_vend.csv to gDrive</span>
<span class="n">T</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;base_file_path&#39;</span><span class="p">:</span><span class="s">&#39;/Users/admin/gDrive/Aporo/marketing/all_info&#39;</span><span class="p">,</span>
     <span class="s">&#39;file_ext&#39;</span><span class="p">:</span><span class="s">&#39;.csv&#39;</span><span class="p">}</span>
<span class="n">map_groups</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s">&#39;select distinct map_group from all_info&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span><span class="o">.</span><span class="n">map_group</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="n">drop_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;geom&#39;</span><span class="p">,</span><span class="s">&#39;sl_upd_search_links&#39;</span><span class="p">,</span><span class="s">&#39;mn_cuisinecode&#39;</span><span class="p">,</span>
                 <span class="s">&#39;mn_zipcode&#39;</span><span class="p">,</span><span class="s">&#39;sl_zipcode&#39;</span><span class="p">,</span><span class="s">&#39;y_postal_code&#39;</span><span class="p">,</span>
                 <span class="s">&#39;y_last_api_update&#39;</span><span class="p">,</span><span class="s">&#39;sl_rating_perc&#39;</span><span class="p">,</span><span class="s">&#39;map_group&#39;</span><span class="p">]</span>
<span class="k">for</span> <span class="n">m_grp</span> <span class="ow">in</span> <span class="n">map_groups</span><span class="p">:</span>
    <span class="n">T</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s">&#39;m_grp&#39;</span><span class="p">:</span><span class="n">m_grp</span><span class="p">})</span>
    <span class="n">grp_cnt</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s">&#39;select count(*) c from all_info where map_group = </span><span class="si">%(m_grp)s</span><span class="s">&#39;</span><span class="o">%</span><span class="k">T</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span><span class="o">.</span><span class="n">c</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">grp_cnt</span><span class="o">&lt;=</span><span class="mi">2000</span><span class="p">:</span>
        <span class="n">grp</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">                select * from all_info</span>
<span class="s">                where map_group = </span><span class="si">%(m_grp)s</span><span class="s"> </span>
<span class="s">                order by glob_id asc&quot;&quot;&quot;</span><span class="o">%</span><span class="k">T</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
        <span class="n">grp</span> <span class="o">=</span> <span class="n">grp</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">drop_cols</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">f_path</span> <span class="o">=</span> <span class="n">T</span><span class="p">[</span><span class="s">&#39;base_file_path&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s">&#39;_grp_</span><span class="si">%(m_grp)s</span><span class="s">&#39;</span><span class="o">%</span><span class="k">T</span> <span class="o">+</span> <span class="n">T</span><span class="p">[</span><span class="s">&#39;file_ext&#39;</span><span class="p">]</span>
        <span class="n">grp</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">f_path</span><span class="p">,</span><span class="n">index</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">encoding</span><span class="o">=</span><span class="s">&#39;utf-8&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">grp_size</span> <span class="o">=</span> <span class="mi">2000</span>
        <span class="n">grp_num</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="mi">2</span> <span class="o">+</span> <span class="nb">float</span><span class="p">(</span><span class="n">grp_cnt</span><span class="p">)</span><span class="o">//</span><span class="nb">float</span><span class="p">(</span><span class="n">grp_size</span><span class="p">))</span>
        <span class="n">offset</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">z</span><span class="o">=</span><span class="p">[]</span>
        <span class="n">T</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s">&#39;limit&#39;</span><span class="p">:</span><span class="n">grp_size</span><span class="p">,</span>
                  <span class="s">&#39;offset&#39;</span><span class="p">:</span><span class="n">offset</span><span class="p">})</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">grp_num</span><span class="p">):</span>
            <span class="n">grp</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">                select * from all_info </span>
<span class="s">                where map_group = </span><span class="si">%(m_grp)s</span><span class="s"></span>
<span class="s">                order by glob_id desc </span>
<span class="s">                limit </span><span class="si">%(limit)s</span><span class="s"> offset </span><span class="si">%(offset)s</span><span class="s"></span>
<span class="s">                              &quot;&quot;&quot;</span><span class="o">%</span><span class="k">T</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
            <span class="n">z</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">grp</span><span class="p">))</span>
            <span class="n">T</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s">&#39;offset&#39;</span><span class="p">:</span><span class="n">i</span><span class="o">*</span><span class="n">grp_size</span><span class="p">})</span>
            <span class="n">grp</span> <span class="o">=</span> <span class="n">grp</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">drop_cols</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">f_path</span> <span class="o">=</span> <span class="n">T</span><span class="p">[</span><span class="s">&#39;base_file_path&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s">&#39;_grp_</span><span class="si">%(m_grp)s</span><span class="s">_&#39;</span><span class="o">%</span><span class="k">T</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">+</span> <span class="n">T</span><span class="p">[</span><span class="s">&#39;file_ext&#39;</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">os_path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">f_path</span><span class="p">):</span>
                <span class="n">os_cmd</span><span class="p">(</span><span class="s">&#39;rm &#39;</span><span class="o">+</span><span class="n">f_path</span><span class="p">)</span>
            <span class="n">grp</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">f_path</span><span class="p">,</span><span class="n">index</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">encoding</span><span class="o">=</span><span class="s">&#39;utf-8&#39;</span><span class="p">)</span>
        
    
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># Divide Data by Geolocation</span>

<span class="kn">import</span> <span class="nn">geopandas</span> <span class="kn">as</span> <span class="nn">gd</span>
<span class="o">%</span><span class="k">matplotlib</span> <span class="n">inline</span>

<span class="k">def</span> <span class="nf">perpendicular_degrees_from_degrees</span><span class="p">(</span><span class="n">st_deg</span><span class="p">,</span><span class="n">sorted_clockwise</span><span class="o">=</span><span class="s">&#39;always&#39;</span><span class="p">):</span>
    <span class="n">pos</span> <span class="o">=</span> <span class="n">st_deg</span> <span class="o">+</span> <span class="mi">90</span>
    <span class="k">if</span> <span class="n">pos</span><span class="o">&gt;</span><span class="mi">360</span><span class="p">:</span> <span class="n">pos</span> <span class="o">=</span> <span class="n">pos</span> <span class="o">-</span> <span class="mi">360</span>
    <span class="n">neg</span> <span class="o">=</span> <span class="n">st_deg</span> <span class="o">-</span> <span class="mi">90</span>
    <span class="k">if</span> <span class="n">neg</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">:</span>   <span class="n">neg</span> <span class="o">=</span> <span class="mi">360</span> <span class="o">+</span> <span class="n">neg</span>
    <span class="n">a</span><span class="p">,</span><span class="n">b</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">([</span><span class="n">pos</span><span class="p">,</span><span class="n">neg</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">a</span><span class="p">,</span><span class="n">b</span>

<span class="n">show_info</span><span class="o">=</span><span class="bp">True</span>
<span class="n">min_v</span><span class="p">,</span><span class="n">max_v</span> <span class="o">=</span> <span class="mf">1900.0</span><span class="p">,</span><span class="mf">2000.0</span>
<span class="n">street_to_divide_by</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
<span class="n">T</span><span class="o">=</span><span class="p">{}</span>

<span class="c"># divide by points</span>
<span class="n">bot_pt</span> <span class="o">=</span> <span class="p">(</span><span class="mf">40.699857</span><span class="p">,</span><span class="o">-</span><span class="mf">74.025184</span><span class="p">)</span>
<span class="n">top_pt</span> <span class="o">=</span> <span class="p">(</span><span class="mf">40.88103</span><span class="p">,</span><span class="o">-</span><span class="mf">73.89526</span><span class="p">)</span>

<span class="c"># divide-by-street       NOT FULLY SETUP YET (2014.11.22)</span>
<span class="c"># street_to_divide_by = 42</span>

<span class="c"># ---------------------</span>
<span class="c"># ---------------------</span>


<span class="c"># set all map_group to null</span>
<span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">    update all_info v</span>
<span class="s">    set map_group = null</span>
<span class="s">    &quot;&quot;&quot;</span><span class="p">)</span>

<span class="c"># [ divide-by-street ] get angles</span>
<span class="k">if</span> <span class="n">street_to_divide_by</span> <span class="o">!=</span> <span class="s">&#39;&#39;</span><span class="p">:</span>
    <span class="n">c</span><span class="o">=</span>  <span class="s">&quot;&quot;&quot;</span>
<span class="s">        SELECT </span>
<span class="s">            (ST_Y(s_pt), ST_X(s_pt)) s_pts,</span>
<span class="s">            (ST_Y(e_pt), ST_X(e_pt)) e_pts,</span>
<span class="s">            degrees( ST_Azimuth(s_pt,e_pt) ) degrees,</span>
<span class="s">            g</span>
<span class="s">        FROM</span>
<span class="s">            (</span>
<span class="s">            SELECT </span>
<span class="s">                ST_StartPoint(geom) s_pt,</span>
<span class="s">                ST_EndPoint(geom) e_pt,</span>
<span class="s">                geom g</span>
<span class="s">            FROM </span>
<span class="s">                address_idx </span>
<span class="s">            WHERE geom is not null and street ilike &#39;</span><span class="si">%s%s</span><span class="s">&#39;</span>
<span class="s">                ) as f1</span>
<span class="s">        &quot;&quot;&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">street_to_divide_by</span><span class="p">,</span><span class="s">&#39;</span><span class="si">%%</span><span class="s">&#39;</span><span class="p">)</span>

    <span class="n">g</span> <span class="o">=</span> <span class="n">gd</span><span class="o">.</span><span class="n">read_postgis</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="n">conn</span><span class="p">,</span><span class="s">&#39;g&#39;</span><span class="p">)</span>

    <span class="n">st_start_coords</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">([</span><span class="s">&#39;lon&#39;</span><span class="p">,</span><span class="s">&#39;lat&#39;</span><span class="p">],</span><span class="n">g</span><span class="o">.</span><span class="n">s_pts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s">&#39;()&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;,&#39;</span><span class="p">)))</span>
    <span class="n">st_end_coords</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">([</span><span class="s">&#39;lon&#39;</span><span class="p">,</span><span class="s">&#39;lat&#39;</span><span class="p">],</span><span class="n">g</span><span class="o">.</span><span class="n">e_pts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s">&#39;()&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;,&#39;</span><span class="p">)))</span>
    <span class="n">T</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s">&#39;st_start_coords&#39;</span><span class="p">:</span><span class="s">&quot;SELECT ST_GeomFromText(&#39;POINT(</span><span class="si">%(lat)s</span><span class="s"> </span><span class="si">%(lon)s</span><span class="s">)&#39;,4326) t_l_pt&quot;</span><span class="o">%</span><span class="k">st_start_coords</span><span class="p">,</span>
              <span class="s">&#39;st_end_coords&#39;</span><span class="p">:</span><span class="s">&quot;SELECT ST_GeomFromText(&#39;POINT(</span><span class="si">%(lat)s</span><span class="s"> </span><span class="si">%(lon)s</span><span class="s">)&#39;,4326) t_r_pt&quot;</span><span class="o">%</span><span class="k">st_end_coords</span><span class="p">})</span>

    <span class="n">st_angle</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">degrees</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">u_angle</span><span class="p">,</span><span class="n">d_angle</span> <span class="o">=</span> <span class="n">perpendicular_degrees_from_degrees</span><span class="p">(</span><span class="n">st_angle</span><span class="p">)</span>
    <span class="n">r_angle</span><span class="p">,</span><span class="n">l_angle</span> <span class="o">=</span> <span class="n">perpendicular_degrees_from_degrees</span><span class="p">(</span><span class="n">u_angle</span><span class="p">)</span>
    <span class="n">T</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s">&#39;l_angle&#39;</span><span class="p">:</span><span class="n">l_angle</span><span class="p">,</span><span class="s">&#39;r_angle&#39;</span><span class="p">:</span><span class="n">r_angle</span><span class="p">,</span>
              <span class="s">&#39;d_angle&#39;</span><span class="p">:</span><span class="n">d_angle</span><span class="p">,</span><span class="s">&#39;u_angle&#39;</span><span class="p">:</span><span class="n">u_angle</span><span class="p">})</span>

    <span class="c"># Using angle, find approximate lines on each side where line doesn&#39;t touch MN</span>

<span class="c"># make Manhattan geoms and start geom collection</span>
<span class="n">base_geom</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">MN</span> <span class="o">=</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">    SELECT </span>
<span class="s">        ST_AsEWKT( mn_geom ) mn_geom,</span>
<span class="s">        ST_AsEWKT( mn_e ) mn_e</span>
<span class="s">    FROM (</span>
<span class="s">        SELECT mn_geom,ST_Envelope(mn_geom) mn_e</span>
<span class="s">        FROM (</span>
<span class="s">            SELECT ST_Buffer(  ST_ConcaveHull(  (ST_Collect(f.the_geom)), 100, false  ), </span>
<span class="s">                               .0005) as mn_geom </span>
<span class="s">            FROM ( SELECT *, (ST_Dump(geom)).geom As the_geom </span>
<span class="s">            FROM pluto) As f</span>
<span class="s">            ) as f1</span>
<span class="s">        ) as f2;</span>
<span class="s">    &quot;&quot;&quot;</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="n">MN</span><span class="p">,</span><span class="n">conn</span><span class="p">)</span>

<span class="n">mn_geom</span><span class="o">=</span><span class="s">&quot;ST_GeomFromText(&#39;</span><span class="si">%s</span><span class="s">&#39;,4326) geom&quot;</span><span class="o">%</span><span class="k">p</span><span class="o">.</span><span class="n">mn_geom</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;;&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
<span class="n">base_geom</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">gd</span><span class="o">.</span><span class="n">read_postgis</span><span class="p">(</span><span class="s">&#39;select </span><span class="si">%s</span><span class="s">&#39;</span><span class="o">%</span><span class="k">mn_geom</span><span class="p">,</span><span class="n">conn</span><span class="p">)</span><span class="o">.</span><span class="n">geom</span><span class="p">)</span>
<span class="k">if</span> <span class="n">street_to_divide_by</span> <span class="o">!=</span> <span class="s">&#39;&#39;</span><span class="p">:</span>
    <span class="n">mn_e</span><span class="o">=</span><span class="s">&quot;ST_GeomFromText(&#39;</span><span class="si">%s</span><span class="s">&#39;,4326) geom&quot;</span><span class="o">%</span><span class="k">p</span><span class="o">.</span><span class="n">mn_e</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;;&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">base_geom</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">gd</span><span class="o">.</span><span class="n">read_postgis</span><span class="p">(</span><span class="s">&#39;select </span><span class="si">%s</span><span class="s">&#39;</span><span class="o">%</span><span class="k">mn_e</span><span class="p">,</span><span class="n">conn</span><span class="p">)</span><span class="o">.</span><span class="n">geom</span><span class="p">)</span>

    <span class="n">outer_box</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s">&#39;select box2d(</span><span class="si">%s</span><span class="s">) b;&#39;</span><span class="o">%</span><span class="k">mn_e_b</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;geom&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">),</span><span class="n">conn</span><span class="p">)</span>
    <span class="n">a_b_l</span><span class="p">,</span><span class="n">a_t_r</span> <span class="o">=</span> <span class="n">outer_box</span><span class="o">.</span><span class="n">b</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s">&#39;BOX()&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;,&#39;</span><span class="p">)</span> <span class="c"># absolute bottom left, etc...</span>
    <span class="n">a_b_l</span><span class="p">,</span><span class="n">a_t_r</span> <span class="o">=</span> <span class="n">a_b_l</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39; &#39;</span><span class="p">),</span><span class="n">a_t_r</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39; &#39;</span><span class="p">)</span>


<span class="c"># make points (bot_pt,top_pt) at each end of MN</span>
<span class="n">bot_pt_pg</span> <span class="o">=</span> <span class="s">&quot;SELECT ST_GeomFromText(&#39;POINT(</span><span class="si">%s</span><span class="s"> </span><span class="si">%s</span><span class="s">)&#39;,4326) bot_pt&quot;</span><span class="o">%</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">bot_pt</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span><span class="nb">str</span><span class="p">(</span><span class="n">bot_pt</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
<span class="n">top_pt_pg</span> <span class="o">=</span> <span class="s">&quot;SELECT ST_GeomFromText(&#39;POINT(</span><span class="si">%s</span><span class="s"> </span><span class="si">%s</span><span class="s">)&#39;,4326) top_pt&quot;</span><span class="o">%</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">top_pt</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span><span class="nb">str</span><span class="p">(</span><span class="n">top_pt</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
<span class="n">base_geom</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">gd</span><span class="o">.</span><span class="n">read_postgis</span><span class="p">(</span><span class="n">bot_pt_pg</span><span class="p">,</span><span class="n">conn</span><span class="p">,</span><span class="s">&#39;bot_pt&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">bot_pt</span><span class="p">)</span>
<span class="n">base_geom</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">gd</span><span class="o">.</span><span class="n">read_postgis</span><span class="p">(</span><span class="n">top_pt_pg</span><span class="p">,</span><span class="n">conn</span><span class="p">,</span><span class="s">&#39;top_pt&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">top_pt</span><span class="p">)</span>


<span class="c"># make line (k_line) connecting points</span>
<span class="n">T</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;bot_pt&#39;</span><span class="p">:</span><span class="n">bot_pt_pg</span><span class="p">,</span><span class="s">&#39;top_pt&#39;</span><span class="p">:</span><span class="n">top_pt_pg</span><span class="p">}</span>
<span class="n">c</span><span class="o">=</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">    select ST_MakeLine(bot_pt,top_pt) k_line</span>
<span class="s">    from</span>
<span class="s">        (</span><span class="si">%(bot_pt)s</span><span class="s">) as f1,</span>
<span class="s">        (</span><span class="si">%(top_pt)s</span><span class="s">) as f2</span>
<span class="s">    &quot;&quot;&quot;</span><span class="o">%</span><span class="k">T</span>
<span class="n">base_geom</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">gd</span><span class="o">.</span><span class="n">read_postgis</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="n">conn</span><span class="p">,</span><span class="s">&#39;k_line&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">k_line</span><span class="p">)</span>


<span class="c"># get length (k_line_len) of k_line (google says 12.9 miles)</span>
<span class="n">feet_per_meter</span> <span class="o">=</span> <span class="mf">3.28084</span>
<span class="n">miles_per_foot</span> <span class="o">=</span> <span class="mf">0.000189394</span>
<span class="n">miles_per_meter</span> <span class="o">=</span> <span class="mf">0.000621371</span>
<span class="n">T</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s">&#39;m_to_ft&#39;</span><span class="p">:</span><span class="n">feet_per_meter</span><span class="p">,</span><span class="s">&#39;ft_to_mi&#39;</span><span class="p">:</span><span class="n">miles_per_foot</span><span class="p">,</span><span class="s">&#39;m_to_mi&#39;</span><span class="p">:</span><span class="n">miles_per_meter</span><span class="p">})</span>

<span class="n">c</span><span class="o">=</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">    select ( </span><span class="si">%(m_to_mi)s</span><span class="s"> * ST_Distance_Sphere(bot_pt,top_pt) ) distance_in_miles</span>
<span class="s">    from</span>
<span class="s">        (</span><span class="si">%(bot_pt)s</span><span class="s">) as f1,</span>
<span class="s">        (</span><span class="si">%(top_pt)s</span><span class="s">) as f2</span>
<span class="s">    &quot;&quot;&quot;</span><span class="o">%</span><span class="k">T</span>
<span class="n">k_line_len</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span><span class="o">.</span><span class="n">distance_in_miles</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<span class="n">proj_lat_dist</span> <span class="o">=</span> <span class="p">(</span><span class="n">k_line_len</span> <span class="o">/</span> <span class="mf">5.0</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">T</span><span class="p">[</span><span class="s">&#39;m_to_mi&#39;</span><span class="p">]</span> <span class="p">)</span>
<span class="n">proj_lon_dist</span> <span class="o">=</span> <span class="p">(</span><span class="n">k_line_len</span> <span class="o">/</span> <span class="mf">10.0</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">T</span><span class="p">[</span><span class="s">&#39;m_to_mi&#39;</span><span class="p">]</span> <span class="p">)</span>
<span class="n">T</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s">&#39;proj_lat_dist&#39;</span><span class="p">:</span><span class="n">proj_lat_dist</span><span class="p">,</span>
          <span class="s">&#39;proj_lon_dist&#39;</span><span class="p">:</span><span class="n">proj_lon_dist</span><span class="p">})</span>


<span class="c"># get azimuth angle (k_line_angle) of connecting line</span>
<span class="n">c</span><span class="o">=</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">    select degrees( ST_Azimuth(bot_pt,top_pt) ) degrees</span>
<span class="s">    from</span>
<span class="s">        (</span><span class="si">%(bot_pt)s</span><span class="s">) as f1,</span>
<span class="s">        (</span><span class="si">%(top_pt)s</span><span class="s">) as f2</span>
<span class="s">    &quot;&quot;&quot;</span><span class="o">%</span><span class="k">T</span>
<span class="n">k_line_angle</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span><span class="o">.</span><span class="n">degrees</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>


<span class="c"># get angles (l_angle,r_angle) for perpendicular lines on left and right</span>
<span class="n">r_angle</span><span class="p">,</span><span class="n">l_angle</span> <span class="o">=</span> <span class="n">perpendicular_degrees_from_degrees</span><span class="p">(</span><span class="n">k_line_angle</span><span class="p">)</span>
<span class="n">u_angle</span><span class="p">,</span><span class="n">d_angle</span> <span class="o">=</span> <span class="n">perpendicular_degrees_from_degrees</span><span class="p">(</span><span class="n">l_angle</span><span class="p">)</span>
<span class="n">T</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s">&#39;l_angle&#39;</span><span class="p">:</span><span class="n">l_angle</span><span class="p">,</span><span class="s">&#39;r_angle&#39;</span><span class="p">:</span><span class="n">r_angle</span><span class="p">,</span>
          <span class="s">&#39;d_angle&#39;</span><span class="p">:</span><span class="n">d_angle</span><span class="p">,</span><span class="s">&#39;u_angle&#39;</span><span class="p">:</span><span class="n">u_angle</span><span class="p">})</span>


<span class="c"># get base points by projecting perpendicular at bottom of k_line</span>
<span class="n">c</span><span class="o">=</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">    select </span>
<span class="s">        ST_MakeLine(l_pt,r_pt) new_line,</span>
<span class="s">        (ST_Y(l_pt), ST_X(l_pt)) l_pt,</span>
<span class="s">        (ST_Y(r_pt), ST_X(r_pt)) r_pt</span>
<span class="s">    from</span>
<span class="s">        (</span>
<span class="s">        select </span>
<span class="s">            ST_Project(bot_pt,</span><span class="si">%(proj_lat_dist)s</span><span class="s">,radians(</span><span class="si">%(l_angle)s</span><span class="s">))::geometry(Point,4326) l_pt,</span>
<span class="s">            ST_Project(bot_pt,</span><span class="si">%(proj_lat_dist)s</span><span class="s">,radians(</span><span class="si">%(r_angle)s</span><span class="s">))::geometry(Point,4326) r_pt</span>
<span class="s">        from</span>
<span class="s">            (</span><span class="si">%(bot_pt)s</span><span class="s">) as f1</span>
<span class="s">        ) as f3</span>
<span class="s">    &quot;&quot;&quot;</span><span class="o">%</span><span class="k">T</span>
<span class="n">g</span> <span class="o">=</span> <span class="n">gd</span><span class="o">.</span><span class="n">read_postgis</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="n">conn</span><span class="p">,</span><span class="s">&#39;new_line&#39;</span><span class="p">)</span>
<span class="n">l_coords</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">([</span><span class="s">&#39;lon&#39;</span><span class="p">,</span><span class="s">&#39;lat&#39;</span><span class="p">],</span><span class="n">g</span><span class="o">.</span><span class="n">l_pt</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s">&#39;()&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;,&#39;</span><span class="p">)))</span>
<span class="n">r_coords</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">([</span><span class="s">&#39;lon&#39;</span><span class="p">,</span><span class="s">&#39;lat&#39;</span><span class="p">],</span><span class="n">g</span><span class="o">.</span><span class="n">r_pt</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s">&#39;()&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;,&#39;</span><span class="p">)))</span>
<span class="n">T</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s">&#39;b_l_pt&#39;</span><span class="p">:</span><span class="s">&quot;SELECT ST_GeomFromText(&#39;POINT(</span><span class="si">%(lat)s</span><span class="s"> </span><span class="si">%(lon)s</span><span class="s">)&#39;,4326) b_l_pt&quot;</span><span class="o">%</span><span class="k">l_coords</span><span class="p">,</span>
          <span class="s">&#39;b_r_pt&#39;</span><span class="p">:</span><span class="s">&quot;SELECT ST_GeomFromText(&#39;POINT(</span><span class="si">%(lat)s</span><span class="s"> </span><span class="si">%(lon)s</span><span class="s">)&#39;,4326) b_r_pt&quot;</span><span class="o">%</span><span class="k">r_coords</span><span class="p">})</span>
<span class="k">def</span> <span class="nf">get_point_cnt</span><span class="p">(</span><span class="n">T</span><span class="p">,</span><span class="n">geoms</span><span class="o">=</span><span class="p">[]):</span>
    <span class="n">geoms</span><span class="o">=</span><span class="p">[]</span>

    <span class="c">## print &#39;\n\n THIS IS NOT CHECKING FOR POINTS BELOW STARTING POINT. \n\n&#39;</span>

    <span class="c"># project points perpendicular line (T_line) up k_line</span>
    <span class="n">c</span><span class="o">=</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">        select </span>
<span class="s">            ST_MakeLine(t_l_pt,t_r_pt) new_line,</span>
<span class="s">            (ST_Y(t_l_pt), ST_X(t_l_pt)) t_l_pt,</span>
<span class="s">            (ST_Y(t_r_pt), ST_X(t_r_pt)) t_r_pt</span>
<span class="s">        from</span>
<span class="s">            (</span>
<span class="s">            select </span>
<span class="s">                ST_Project(b_l_pt,</span><span class="si">%(proj_lon_dist)s</span><span class="s">,radians(</span><span class="si">%(u_angle)s</span><span class="s">))::geometry(Point,4326) t_l_pt,</span>
<span class="s">                ST_Project(b_r_pt,</span><span class="si">%(proj_lon_dist)s</span><span class="s">,radians(</span><span class="si">%(u_angle)s</span><span class="s">))::geometry(Point,4326) t_r_pt</span>
<span class="s">            from</span>
<span class="s">                (</span><span class="si">%(b_l_pt)s</span><span class="s">) as f1,</span>
<span class="s">                (</span><span class="si">%(b_r_pt)s</span><span class="s">) as f2</span>
<span class="s">            ) as f3</span>
<span class="s">        &quot;&quot;&quot;</span><span class="o">%</span><span class="k">T</span>
    <span class="n">g</span> <span class="o">=</span> <span class="n">gd</span><span class="o">.</span><span class="n">read_postgis</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="n">conn</span><span class="p">,</span><span class="s">&#39;new_line&#39;</span><span class="p">)</span>
    <span class="n">l_coords</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">([</span><span class="s">&#39;lon&#39;</span><span class="p">,</span><span class="s">&#39;lat&#39;</span><span class="p">],</span><span class="n">g</span><span class="o">.</span><span class="n">t_l_pt</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s">&#39;()&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;,&#39;</span><span class="p">)))</span>
    <span class="n">r_coords</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">([</span><span class="s">&#39;lon&#39;</span><span class="p">,</span><span class="s">&#39;lat&#39;</span><span class="p">],</span><span class="n">g</span><span class="o">.</span><span class="n">t_r_pt</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s">&#39;()&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;,&#39;</span><span class="p">)))</span>
    <span class="n">T</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s">&#39;t_l_pt&#39;</span><span class="p">:</span><span class="s">&quot;SELECT ST_GeomFromText(&#39;POINT(</span><span class="si">%(lat)s</span><span class="s"> </span><span class="si">%(lon)s</span><span class="s">)&#39;,4326) t_l_pt&quot;</span><span class="o">%</span><span class="k">l_coords</span><span class="p">,</span>
              <span class="s">&#39;t_r_pt&#39;</span><span class="p">:</span><span class="s">&quot;SELECT ST_GeomFromText(&#39;POINT(</span><span class="si">%(lat)s</span><span class="s"> </span><span class="si">%(lon)s</span><span class="s">)&#39;,4326) t_r_pt&quot;</span><span class="o">%</span><span class="k">r_coords</span><span class="p">})</span>

    <span class="c"># make box with points from two lines</span>
    <span class="n">c</span><span class="o">=</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">        SELECT </span>
<span class="s">            ST_ConcaveHull( ST_LineFromMultiPoint( ST_Collect( array[t_l_pt,t_r_pt,b_l_pt,b_r_pt] ) ),</span>
<span class="s">                            100,False) box               </span>
<span class="s">        FROM</span>
<span class="s">            (</span><span class="si">%(t_l_pt)s</span><span class="s">) as f1,</span>
<span class="s">            (</span><span class="si">%(t_r_pt)s</span><span class="s">) as f2,</span>
<span class="s">            (</span><span class="si">%(b_l_pt)s</span><span class="s">) as f3,</span>
<span class="s">            (</span><span class="si">%(b_r_pt)s</span><span class="s">) as f4    </span>
<span class="s">        &quot;&quot;&quot;</span><span class="o">%</span><span class="k">T</span>
    <span class="n">g</span> <span class="o">=</span> <span class="n">gd</span><span class="o">.</span><span class="n">read_postgis</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="n">conn</span><span class="p">,</span><span class="s">&#39;box&#39;</span><span class="p">)</span>
    <span class="n">geoms</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">box</span><span class="p">)</span>
    
    <span class="c"># check if any points in box</span>
    <span class="n">c</span><span class="o">=</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">        SELECT count(*) cnt</span>
<span class="s">        FROM </span>
<span class="s">            all_info v,</span>
<span class="s">            (</span>
<span class="s">                SELECT </span>
<span class="s">                    ST_ConcaveHull( ST_LineFromMultiPoint( ST_Collect( array[t_l_pt,t_r_pt,b_l_pt,b_r_pt] ) ),</span>
<span class="s">                                    100,False) box               </span>
<span class="s">                FROM</span>
<span class="s">                    (</span><span class="si">%(t_l_pt)s</span><span class="s">) as f1,</span>
<span class="s">                    (</span><span class="si">%(t_r_pt)s</span><span class="s">) as f2,</span>
<span class="s">                    (</span><span class="si">%(b_l_pt)s</span><span class="s">) as f3,</span>
<span class="s">                    (</span><span class="si">%(b_r_pt)s</span><span class="s">) as f4</span>
<span class="s">            ) as f5</span>
<span class="s">        WHERE ST_ContainsProperly(box,v.geom);</span>
<span class="s">        &quot;&quot;&quot;</span><span class="o">%</span><span class="k">T</span>
    <span class="n">cnt</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="n">conn</span><span class="p">)</span><span class="o">.</span><span class="n">cnt</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    
    <span class="k">return</span> <span class="n">cnt</span><span class="p">,</span><span class="n">T</span><span class="p">,</span><span class="n">geoms</span>

<span class="c"># final iteration</span>
<span class="k">def</span> <span class="nf">update_map_groups</span><span class="p">(</span><span class="n">min_v</span><span class="o">=</span><span class="mf">1800.0</span><span class="p">,</span><span class="n">max_v</span><span class="o">=</span><span class="mf">2000.0</span><span class="p">,</span>
                      <span class="n">base_geom</span><span class="o">=</span><span class="p">[],</span><span class="n">show_info</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="n">min_v</span><span class="p">,</span><span class="n">max_v</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">min_v</span><span class="p">),</span><span class="nb">float</span><span class="p">(</span><span class="n">max_v</span><span class="p">)</span>
    <span class="n">box_num</span><span class="p">,</span><span class="n">saved_boxes</span><span class="p">,</span><span class="n">last_move</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,[],</span><span class="s">&#39;start&#39;</span>
    <span class="k">while</span> <span class="n">last_move</span><span class="o">!=</span><span class="s">&#39;complete&#39;</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">show_info</span><span class="o">==</span><span class="bp">True</span><span class="p">:</span> <span class="k">print</span> <span class="n">box_num</span><span class="p">,</span><span class="s">&#39;</span><span class="se">\t\t</span><span class="s"> box_num&#39;</span>
        <span class="n">cnt</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">incr_seg</span><span class="p">,</span><span class="n">last_cnt</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span><span class="mi">0</span>
        <span class="k">while</span> <span class="ow">not</span> <span class="p">(</span><span class="n">min_v</span><span class="o">&lt;=</span><span class="n">cnt</span><span class="o">&lt;=</span><span class="n">max_v</span><span class="p">):</span>
            <span class="n">cnt</span><span class="p">,</span><span class="n">T_tmp</span><span class="p">,</span><span class="n">box</span> <span class="o">=</span> <span class="n">get_point_cnt</span><span class="p">(</span><span class="n">T</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">cnt</span><span class="o">&lt;</span><span class="n">min_v</span><span class="p">:</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">last_move</span><span class="o">==</span><span class="s">&#39;increase&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">cnt</span><span class="o">==</span><span class="n">last_cnt</span><span class="p">):</span> 
                    <span class="n">last_move</span> <span class="o">=</span> <span class="s">&#39;complete&#39;</span>
                    <span class="k">break</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">incr_seg</span> <span class="o">=</span> <span class="p">(</span><span class="n">min_v</span><span class="o">-</span><span class="n">cnt</span><span class="p">)</span><span class="o">/</span><span class="n">min_v</span>
                    <span class="n">T</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s">&#39;proj_lon_dist&#39;</span><span class="p">:</span><span class="n">T</span><span class="p">[</span><span class="s">&#39;proj_lon_dist&#39;</span><span class="p">]</span><span class="o">+</span><span class="p">(</span><span class="n">incr_seg</span><span class="o">*</span><span class="n">T</span><span class="p">[</span><span class="s">&#39;proj_lon_dist&#39;</span><span class="p">])})</span>
                    <span class="n">last_move</span> <span class="o">=</span> <span class="s">&#39;increase&#39;</span>
                    <span class="n">last_cnt</span> <span class="o">=</span> <span class="n">cnt</span>

            <span class="k">elif</span> <span class="n">cnt</span><span class="o">&gt;</span><span class="n">max_v</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">incr_seg</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>  <span class="n">decr_seg</span> <span class="o">=</span> <span class="mf">0.5</span>
                <span class="k">else</span><span class="p">:</span> 
                    <span class="n">decr_seg</span> <span class="o">=</span> <span class="o">.</span><span class="mi">5</span> <span class="o">*</span> <span class="n">incr_seg</span>
                    <span class="n">incr_seg</span> <span class="o">=</span> <span class="n">decr_seg</span>
                <span class="n">T</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s">&#39;proj_lon_dist&#39;</span><span class="p">:</span><span class="n">T</span><span class="p">[</span><span class="s">&#39;proj_lon_dist&#39;</span><span class="p">]</span><span class="o">-</span><span class="p">(</span><span class="n">decr_seg</span><span class="o">*</span><span class="n">T</span><span class="p">[</span><span class="s">&#39;proj_lon_dist&#39;</span><span class="p">])})</span>
                <span class="n">last_move</span> <span class="o">=</span> <span class="s">&#39;decrease&#39;</span>
            <span class="k">if</span> <span class="n">show_info</span><span class="o">==</span><span class="bp">True</span><span class="p">:</span> 
                <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">min_v</span><span class="o">&lt;=</span><span class="n">cnt</span><span class="o">&lt;=</span><span class="n">max_v</span><span class="p">):</span>
                    <span class="k">print</span> <span class="n">cnt</span><span class="p">,</span><span class="s">&#39;</span><span class="se">\t\t</span><span class="s"> Last Count&#39;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">print</span> <span class="n">cnt</span><span class="p">,</span><span class="s">&#39;</span><span class="se">\t\t</span><span class="s"> Save Count&#39;</span>


        <span class="n">saved_boxes</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">box</span><span class="p">)</span>

        <span class="n">box_txt</span> <span class="o">=</span> <span class="s">&quot;ST_GeomFromText(&#39;</span><span class="si">%s</span><span class="s">&#39;,4326)&quot;</span><span class="o">%</span><span class="k">box</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">to_wkt</span><span class="p">()</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">            update all_info v</span>
<span class="s">            set map_group = </span><span class="si">%s</span><span class="s"></span>
<span class="s">            from </span><span class="si">%s</span><span class="s"> box</span>
<span class="s">            where ST_ContainsProperly(box,v.geom)</span>
<span class="s">            &quot;&quot;&quot;</span><span class="o">%</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">box_num</span><span class="p">),</span><span class="n">box_txt</span><span class="p">))</span>

        <span class="n">T</span><span class="o">.</span><span class="n">update</span><span class="p">({</span> <span class="s">&#39;b_l_pt&#39;</span><span class="p">:</span><span class="n">T_tmp</span><span class="p">[</span><span class="s">&#39;t_l_pt&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;t_l_pt&#39;</span><span class="p">,</span><span class="s">&#39;b_l_pt&#39;</span><span class="p">),</span>
                   <span class="s">&#39;b_r_pt&#39;</span><span class="p">:</span><span class="n">T_tmp</span><span class="p">[</span><span class="s">&#39;t_r_pt&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;t_r_pt&#39;</span><span class="p">,</span><span class="s">&#39;b_r_pt&#39;</span><span class="p">),</span>
                   <span class="s">&#39;t_l_pt&#39;</span><span class="p">:</span><span class="n">T_tmp</span><span class="p">[</span><span class="s">&#39;t_l_pt&#39;</span><span class="p">],</span><span class="s">&#39;t_r_pt&#39;</span><span class="p">:</span><span class="n">T_tmp</span><span class="p">[</span><span class="s">&#39;t_r_pt&#39;</span><span class="p">],})</span>

        <span class="n">box_num</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="k">if</span> <span class="n">last_move</span><span class="o">==</span><span class="s">&#39;complete&#39;</span><span class="p">:</span>
            <span class="k">break</span>

    <span class="k">if</span> <span class="n">show_info</span><span class="o">==</span><span class="bp">True</span><span class="p">:</span> <span class="n">gd</span><span class="o">.</span><span class="n">GeoSeries</span><span class="p">(</span><span class="n">base_geom</span><span class="o">+</span><span class="n">saved_boxes</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
    
    <span class="k">return</span> <span class="n">saved_boxes</span>

<span class="n">saved_geom</span> <span class="o">=</span> <span class="n">update_map_groups</span><span class="p">(</span><span class="n">min_v</span><span class="o">=</span><span class="mf">1800.0</span><span class="p">,</span><span class="n">max_v</span><span class="o">=</span><span class="mf">2000.0</span><span class="p">,</span>
                               <span class="n">base_geom</span><span class="o">=</span><span class="n">base_geom</span><span class="p">,</span><span class="n">show_info</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">gd</span><span class="o">.</span><span class="n">GeoSeries</span><span class="p">(</span><span class="n">base_geom</span><span class="o">+</span><span class="n">saved_geom</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># DB Check:</span>
<span class="n">cmd1</span><span class="o">=</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">select count(distinct m.address) </span>
<span class="s">from </span>
<span class="s">    mnv m,</span>
<span class="s">    (select array_agg(g.orig_addr) A from geocoded g) as f1 </span>
<span class="s">where m.geom is null and (not array[m.address] &amp;&amp; A)</span>
<span class="s">&quot;&quot;&quot;</span>
<span class="c"># 3548 --  6 every 30 sec, 12 every min</span>
<span class="n">cmd3</span><span class="o">=</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">select count(*) from yelp where hours_updated is null;</span>
<span class="s">&quot;&quot;&quot;</span>
<span class="o">%</span><span class="k">sql</span> <span class="n">postgres</span><span class="nd">@routing</span> <span class="err">$</span><span class="n">cmd3</span>
<span class="c"># (4113/12.0)/60</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># Create KML</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">See here: https://developers.google.com/kml/documentation/kmlelementsinmaps</span>
<span class="sd">&quot;&quot;&quot;</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[8]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### Load Libraries</span>
<span class="kn">from</span> <span class="nn">sys</span> <span class="kn">import</span> <span class="n">path</span> <span class="k">as</span> <span class="n">sys_path</span>
<span class="n">sys_path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;/Users/admin/SERVER2/BD_Scripts/geolocation&#39;</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">f_postgres</span> <span class="kn">import</span> <span class="n">geoparse</span><span class="p">,</span><span class="n">ST_PREFIX_DICT</span><span class="p">,</span><span class="n">ST_SUFFIX_DICT</span><span class="p">,</span><span class="n">add_table_primary_serial_key</span>
<span class="kn">from</span> <span class="nn">f_vendor_postgre</span> <span class="kn">import</span> <span class="n">find_address_idx_matches</span>
<span class="kn">from</span> <span class="nn">f_vendor_postgre</span> <span class="kn">import</span> <span class="n">get_bldg_street_idx</span>
<span class="kn">from</span> <span class="nn">geoCode</span> <span class="kn">import</span> <span class="n">getGPScoord</span>
<span class="kn">from</span> <span class="nn">re</span> <span class="kn">import</span> <span class="n">search</span> <span class="k">as</span> <span class="n">re_search</span> <span class="c"># re_search(&#39;pattern&#39;,&#39;string&#39;)</span>
<span class="kn">from</span> <span class="nn">re</span> <span class="kn">import</span> <span class="n">sub</span> <span class="k">as</span> <span class="n">re_sub</span>  <span class="c"># re_sub(&#39;pattern&#39;,&#39;repl&#39;,&#39;string&#39;,&#39;count&#39;)</span>

<span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">sleep</span>
<span class="kn">from</span> <span class="nn">pygeocoder</span> <span class="kn">import</span> <span class="n">Geocoder</span>
<span class="kn">from</span> <span class="nn">shapely.geometry</span> <span class="kn">import</span> <span class="n">Point</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s">&#39;display.max_rows&#39;</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span>
<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s">r&#39;postgresql://postgres:postgres@localhost/routing&#39;</span><span class="p">,</span>
                       <span class="n">encoding</span><span class="o">=</span><span class="s">&#39;utf-8&#39;</span><span class="p">,</span>
                       <span class="n">echo</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

<span class="n">BASE_SAVE_PATH</span> <span class="o">=</span> <span class="s">&#39;/Users/admin/Projects/GIS/table_data/&#39;</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[1]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### Pull Vendor Data</span>
<span class="n">f</span><span class="o">=</span><span class="s">&#39;/Users/admin/SERVER2/BD_Scripts/RD/RD-seth/NYC-addresses.csv&#39;</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">ix</span><span class="p">[:,[</span><span class="s">&#39;Vendor #&#39;</span><span class="p">,</span><span class="s">&#39;addr_num&#39;</span><span class="p">,</span><span class="s">&#39;addr_street&#39;</span><span class="p">,</span><span class="s">&#39;address&#39;</span><span class="p">,</span><span class="s">&#39;zipcode&#39;</span><span class="p">,</span><span class="s">&#39;Lat.&#39;</span><span class="p">,</span><span class="s">&#39;Long.&#39;</span><span class="p">]]</span>
<span class="n">df</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;Vendor #&#39;</span><span class="p">:</span><span class="s">&#39;seam_id&#39;</span><span class="p">,</span>
                   <span class="s">&#39;Lat.&#39;</span><span class="p">:</span><span class="s">&#39;lat&#39;</span><span class="p">,</span>
                   <span class="s">&#39;Long.&#39;</span><span class="p">:</span><span class="s">&#39;lon&#39;</span><span class="p">},</span><span class="n">inplace</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="s">&#39;clean_addr&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">address</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&#39;latin-1&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s">&#39;utf8&#39;</span><span class="p">,</span> <span class="s">&#39;replace&#39;</span><span class="p">))</span>
<span class="n">df</span><span class="p">[</span><span class="s">&#39;addr_num&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">clean_addr</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="p">[:</span><span class="n">s</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39; &#39;</span><span class="p">)]</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
<span class="n">df</span><span class="p">[</span><span class="s">&#39;addr_street&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">clean_addr</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="p">[</span><span class="n">s</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39; &#39;</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s">&#39;address&#39;</span><span class="p">,</span><span class="s">&#39;clean_addr&#39;</span><span class="p">,</span><span class="s">&#39;lat&#39;</span><span class="p">,</span><span class="s">&#39;lon&#39;</span><span class="p">],</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">geoparse</span><span class="p">(</span><span class="n">df</span><span class="p">,</span><span class="s">&#39;addr_street&#39;</span><span class="p">,</span><span class="s">&#39;addr_street&#39;</span><span class="p">)</span>
<span class="n">df_uniq_st</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">addr_street</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="n">ur</span><span class="p">,</span><span class="n">r</span><span class="p">,</span><span class="n">TCL</span> <span class="o">=</span> <span class="n">get_bldg_street_idx</span><span class="p">(</span> <span class="n">df</span><span class="p">,</span>
                                <span class="n">addr_num_col</span><span class="o">=</span><span class="s">&#39;addr_num&#39;</span><span class="p">,</span>
                                <span class="n">addr_street_col</span><span class="o">=</span><span class="s">&#39;addr_street&#39;</span><span class="p">,</span>
                                <span class="n">zipcode_col</span><span class="o">=</span><span class="s">&#39;zipcode&#39;</span><span class="p">,</span>
                                <span class="n">show_info</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="k">print</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">),</span><span class="s">&#39;TOTAL addresses from CSV</span><span class="se">\n</span><span class="s">&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">df_uniq_st</span><span class="p">)),</span><span class="s">&#39;unique ways&#39;</span>
<span class="k">print</span> <span class="nb">len</span><span class="p">(</span><span class="n">ur</span><span class="p">),</span><span class="s">&#39;recognized ways ( &#39;</span><span class="p">,</span><span class="nb">round</span><span class="p">(</span><span class="mi">100</span><span class="o">*</span><span class="nb">float</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ur</span><span class="p">)</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">df_uniq_st</span><span class="p">))),</span><span class="mi">2</span><span class="p">),</span><span class="s">&#39;% )</span><span class="se">\n</span><span class="s">&#39;</span>
<span class="k">print</span> <span class="s">&#39;ur:r:TCL&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ur</span><span class="p">))</span><span class="o">+</span><span class="s">&#39;:&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">r</span><span class="p">))</span><span class="o">+</span><span class="s">&#39;:&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">TCL</span><span class="p">))</span>
<span class="k">print</span> <span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_text output_pyerr">
<pre>
<span class="ansired">---------------------------------------------------------------------------</span>
<span class="ansired">NameError</span>                                 Traceback (most recent call last)
<span class="ansigreen">&lt;ipython-input-1-3283f9e57a1d&gt;</span> in <span class="ansicyan">&lt;module&gt;</span><span class="ansiblue">()</span>
<span class="ansigreen">      1</span> f<span class="ansiblue">=</span><span class="ansiblue">&apos;/Users/admin/SERVER2/BD_Scripts/RD/RD-seth/NYC-addresses.csv&apos;</span><span class="ansiblue"></span>
<span class="ansigreen">----&gt; 2</span><span class="ansired"> </span>df <span class="ansiblue">=</span> pd<span class="ansiblue">.</span>read_csv<span class="ansiblue">(</span>f<span class="ansiblue">)</span><span class="ansiblue"></span>
<span class="ansigreen">      3</span> df <span class="ansiblue">=</span> df<span class="ansiblue">.</span>ix<span class="ansiblue">[</span><span class="ansiblue">:</span><span class="ansiblue">,</span><span class="ansiblue">[</span><span class="ansiblue">&apos;Vendor #&apos;</span><span class="ansiblue">,</span><span class="ansiblue">&apos;addr_num&apos;</span><span class="ansiblue">,</span><span class="ansiblue">&apos;addr_street&apos;</span><span class="ansiblue">,</span><span class="ansiblue">&apos;address&apos;</span><span class="ansiblue">,</span><span class="ansiblue">&apos;zipcode&apos;</span><span class="ansiblue">,</span><span class="ansiblue">&apos;Lat.&apos;</span><span class="ansiblue">,</span><span class="ansiblue">&apos;Long.&apos;</span><span class="ansiblue">]</span><span class="ansiblue">]</span><span class="ansiblue"></span>
<span class="ansigreen">      4</span> df.rename(columns={&apos;Vendor #&apos;:&apos;seam_id&apos;,
<span class="ansigreen">      5</span>                    <span class="ansiblue">&apos;Lat.&apos;</span><span class="ansiblue">:</span><span class="ansiblue">&apos;lat&apos;</span><span class="ansiblue">,</span><span class="ansiblue"></span>

<span class="ansired">NameError</span>: name &apos;pd&apos; is not defined</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">## Get Nodes for Matched Street Names</span>

<span class="n">ur</span><span class="p">[</span><span class="s">&#39;good&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">False</span>
<span class="n">ur</span><span class="p">[</span><span class="s">&#39;good&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ur</span><span class="o">.</span><span class="n">ix</span><span class="p">[:,[</span><span class="s">&#39;zipcode&#39;</span><span class="p">,</span>
                    <span class="s">&#39;bldg_street_idx&#39;</span><span class="p">,</span>
                    <span class="s">&#39;addr_num&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="bp">True</span> <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">isdigit</span><span class="p">())</span><span class="o">&amp;</span>
                                                          <span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">isdigit</span><span class="p">())</span><span class="o">&amp;</span>
                                                          <span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">isdigit</span><span class="p">())</span> <span class="p">)</span> <span class="k">else</span> <span class="bp">False</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">good_idx</span> <span class="o">=</span> <span class="n">ur</span><span class="p">[</span><span class="n">ur</span><span class="o">.</span><span class="n">good</span><span class="o">==</span><span class="bp">True</span><span class="p">]</span><span class="o">.</span><span class="n">index</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">ur</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">good_idx</span><span class="p">,:]</span>
<span class="n">m</span><span class="p">[</span><span class="s">&#39;idx&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">ix</span><span class="p">[:,</span>
          <span class="p">[</span><span class="s">&#39;bldg_street_idx&#39;</span><span class="p">,</span><span class="s">&#39;addr_num&#39;</span><span class="p">]</span>
          <span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">+</span><span class="s">&#39;.&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%05d</span><span class="s">&#39;</span><span class="o">%</span><span class="k">eval</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">])),</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="n">from_lbl</span><span class="p">,</span><span class="n">to_lbl</span><span class="o">=</span><span class="s">&#39;idx&#39;</span><span class="p">,</span><span class="s">&#39;geom&#39;</span>
<span class="n">T</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;1&#39;</span><span class="p">:</span><span class="nb">str</span><span class="p">(</span><span class="n">m</span><span class="p">[</span><span class="n">from_lbl</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()),</span>
     <span class="s">&#39;2&#39;</span><span class="p">:</span><span class="n">from_lbl</span><span class="p">,</span>
     <span class="s">&#39;3&#39;</span><span class="p">:</span><span class="n">to_lbl</span><span class="p">}</span>
<span class="n">cmd</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">    SELECT </span><span class="si">%(2)s</span><span class="s">, l.geom </span><span class="si">%(3)s</span><span class="s"></span>
<span class="s">    FROM lot_pts l</span>
<span class="s">    INNER JOIN unnest(array[</span><span class="si">%(1)s</span><span class="s">]) </span><span class="si">%(2)s</span><span class="s"></span>
<span class="s">    ON to_number(</span><span class="si">%(2)s</span><span class="s">,&#39;00000D00000&#39;) &lt;= l.lot_idx_end</span>
<span class="s">    WHERE l.lot_idx_start &lt;= to_number(</span><span class="si">%(2)s</span><span class="s">,&#39;99999D99999&#39;)</span>
<span class="s">    &quot;&quot;&quot;</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span><span class="s">&#39; &#39;</span><span class="p">)</span> <span class="o">%</span> <span class="n">T</span>
<span class="c"># print cmd</span>
<span class="n">matched_res</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql_query</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
<span class="n">matched_res_idx_list</span> <span class="o">=</span> <span class="n">matched_res</span><span class="o">.</span><span class="n">idx</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="n">m</span><span class="p">[</span><span class="n">m</span><span class="o">.</span><span class="n">idx</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">matched_res_idx_list</span><span class="p">)],</span><span class="n">right</span><span class="o">=</span><span class="n">matched_res</span><span class="p">,</span>
         <span class="n">how</span><span class="o">=</span><span class="s">&#39;left&#39;</span><span class="p">,</span><span class="n">on</span><span class="o">=</span><span class="s">&#39;idx&#39;</span><span class="p">)</span>

<span class="n">idx_geom_map</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">matched_res_idx_list</span><span class="p">,</span><span class="n">matched_res</span><span class="o">.</span><span class="n">geom</span><span class="o">.</span><span class="n">tolist</span><span class="p">()))</span>

<span class="k">print</span> <span class="nb">len</span><span class="p">(</span><span class="n">matched_res</span><span class="p">),</span><span class="s">&#39;matched lots&#39;</span>
<span class="k">print</span> <span class="n">matched_res</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">## Get Nodes for Unmatched Street Names</span>

<span class="c">### Identify matched street names but unmatched lots</span>
<span class="n">res_idx</span> <span class="o">=</span> <span class="n">matched_res</span><span class="o">.</span><span class="n">idx</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="n">z</span> <span class="o">=</span> <span class="n">m</span><span class="p">[</span><span class="n">m</span><span class="o">.</span><span class="n">idx</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">res_idx</span><span class="p">)</span><span class="o">==</span><span class="bp">False</span><span class="p">]</span>
<span class="n">z</span> <span class="o">=</span> <span class="n">z</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s">&#39;good&#39;</span><span class="p">],</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="k">print</span> <span class="nb">len</span><span class="p">(</span><span class="n">z</span><span class="p">),</span><span class="s">&#39;unmatched lots&#39;</span>

<span class="c">### Combine remaining addresses to be located</span>
<span class="n">R</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">TCL</span><span class="p">,</span><span class="n">ignore_index</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">R</span><span class="p">[</span><span class="s">&#39;idx&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span>
<span class="n">R</span> <span class="o">=</span> <span class="n">R</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">z</span><span class="p">,</span><span class="n">ignore_index</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">R</span> <span class="o">=</span> <span class="n">R</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s">&#39;norm_addr_num&#39;</span><span class="p">,</span><span class="s">&#39;norm_addr&#39;</span><span class="p">,</span><span class="s">&#39;body&#39;</span><span class="p">],</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="k">print</span> <span class="nb">len</span><span class="p">(</span><span class="n">R</span><span class="p">),</span><span class="s">&#39;total unmatched addr.s&#39;</span>
<span class="k">print</span> <span class="n">R</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>

<span class="c">### Run Google Geocode for Non-Street Name Matches</span>
<span class="n">all_addr</span> <span class="o">=</span> <span class="n">R</span><span class="o">.</span><span class="n">full_address</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">getGPScoord</span><span class="p">(</span><span class="n">all_addr</span><span class="p">,</span><span class="n">printGPS</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">savePath</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">,)</span>

<span class="n">matched_addr</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="n">d</span><span class="o">.</span><span class="n">res_i</span><span class="o">==-</span><span class="mi">1</span><span class="p">]</span>
<span class="n">merged_res</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="n">R</span><span class="p">,</span><span class="n">right</span><span class="o">=</span><span class="n">matched_addr</span><span class="p">,</span><span class="n">how</span><span class="o">=</span><span class="s">&#39;left&#39;</span><span class="p">,</span><span class="n">left_on</span><span class="o">=</span><span class="s">&#39;full_address&#39;</span><span class="p">,</span><span class="n">right_on</span><span class="o">=</span><span class="s">&#39;orig_addr&#39;</span><span class="p">)</span>

<span class="n">addr_to_check</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">d</span><span class="o">.</span><span class="n">index</span><span class="o">-</span><span class="n">matched_addr</span><span class="o">.</span><span class="n">index</span><span class="p">,:]</span>
<span class="n">addr_to_check_list</span> <span class="o">=</span> <span class="n">addr_to_check</span><span class="o">.</span><span class="n">orig_addr</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

<span class="n">merged_res</span> <span class="o">=</span> <span class="n">merged_res</span><span class="p">[</span><span class="n">merged_res</span><span class="o">.</span><span class="n">full_address</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">addr_to_check_list</span><span class="p">)</span><span class="o">==</span><span class="bp">False</span><span class="p">]</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="c">### Copy g_matched vars to g_coded table, which will be incorporated into initial search </span>
<span class="n">u_res</span> <span class="o">=</span> <span class="n">unmatched_res</span> <span class="o">=</span> <span class="n">merged_res</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s">&#39;seam_id&#39;</span><span class="p">,</span><span class="s">&#39;addr_num&#39;</span><span class="p">,</span><span class="s">&#39;addr_street&#39;</span><span class="p">,</span><span class="s">&#39;zipcode&#39;</span><span class="p">,</span><span class="s">&#39;full_address&#39;</span><span class="p">,</span>
                 <span class="s">&#39;addr_valid&#39;</span><span class="p">,</span><span class="s">&#39;res_i&#39;</span><span class="p">],</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">u_res</span><span class="p">[</span><span class="s">&#39;tmp&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">u_res</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="s">&#39;POINT(</span><span class="si">%(lat)f</span><span class="s"> </span><span class="si">%(lng)f</span><span class="s">)&#39;</span> <span class="o">%</span> <span class="n">s</span><span class="p">[</span><span class="s">&#39;location&#39;</span><span class="p">])</span>
<span class="n">u_res</span><span class="p">[</span><span class="s">&#39;res_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">u_res</span><span class="o">.</span><span class="n">res_data</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&quot;u&#39;&quot;</span><span class="p">,</span><span class="s">&#39;&quot;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&quot;&#39;&quot;</span><span class="p">,</span><span class="s">&#39;&quot;&#39;</span><span class="p">))</span>

<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;drop table if exists g_coded&#39;</span><span class="p">)</span>
<span class="n">cmd</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">create table g_coded (</span>
<span class="s">    bldg_street_idx text,</span>
<span class="s">    idx text,</span>
<span class="s">    form_addr text,</span>
<span class="s">    orig_addr text,</span>
<span class="s">    partial_match text,</span>
<span class="s">    res_data text,</span>
<span class="s">    tmp text,</span>
<span class="s">    geom geometry(Point,4326)</span>
<span class="s">);</span>
<span class="s">&quot;&quot;&quot;</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>
<span class="n">u_res</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s">&#39;geometry&#39;</span><span class="p">,</span><span class="s">&#39;lat&#39;</span><span class="p">,</span><span class="s">&#39;lon&#39;</span><span class="p">],</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s">&quot;g_coded&quot;</span><span class="p">,</span><span class="n">engine</span><span class="p">,</span><span class="n">if_exists</span><span class="o">=</span><span class="s">&#39;append&#39;</span><span class="p">,</span><span class="n">index</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="n">add_table_primary_serial_key</span><span class="p">(</span><span class="s">&#39;g_coded&#39;</span><span class="p">,</span><span class="s">&#39;id&#39;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;update g_coded set geom = ST_GeomFromText(tmp,4326)&quot;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[29]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### Combine Nodes and Save to &quot;vendors&quot;</span>
<span class="n">first_matched</span> <span class="o">=</span> <span class="n">matched_res</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="n">idx_seam_id_map</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">idx</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span><span class="n">m</span><span class="o">.</span><span class="n">seam_id</span><span class="o">.</span><span class="n">tolist</span><span class="p">()))</span>
<span class="n">first_matched</span><span class="p">[</span><span class="s">&#39;seam_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">first_matched</span><span class="o">.</span><span class="n">idx</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">idx_seam_id_map</span><span class="p">)</span>
<span class="n">seam_id_full_address_map</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">seam_id</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span><span class="n">m</span><span class="o">.</span><span class="n">full_address</span><span class="o">.</span><span class="n">tolist</span><span class="p">()))</span>
<span class="n">first_matched</span><span class="p">[</span><span class="s">&#39;full_address&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">first_matched</span><span class="o">.</span><span class="n">seam_id</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">seam_id_full_address_map</span><span class="p">)</span>
<span class="n">first_matched</span> <span class="o">=</span> <span class="n">first_matched</span><span class="o">.</span><span class="n">ix</span><span class="p">[:,[</span><span class="s">&#39;seam_id&#39;</span><span class="p">,</span><span class="s">&#39;full_address&#39;</span><span class="p">,</span><span class="s">&#39;geom&#39;</span><span class="p">]]</span>

<span class="c"># second_matched_idx = </span>
<span class="n">second_m</span> <span class="o">=</span> <span class="n">R</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span><span class="c">#m.ix[second_matched_idx,:]</span>
<span class="n">addr_seam_id_map</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">second_m</span><span class="o">.</span><span class="n">full_address</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span><span class="n">second_m</span><span class="o">.</span><span class="n">seam_id</span><span class="o">.</span><span class="n">tolist</span><span class="p">()))</span>
<span class="n">second_matched</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql_query</span><span class="p">(</span><span class="s">&quot;select 0 seam_id,orig_addr full_address,geom from g_coded where tmp is not null&quot;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
<span class="c"># engine.execute(&quot;update g_coded set tmp = null&quot;)</span>
<span class="n">second_matched</span><span class="p">[</span><span class="s">&#39;seam_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">second_matched</span><span class="o">.</span><span class="n">full_address</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">addr_seam_id_map</span><span class="p">)</span>
<span class="n">second_matched</span> <span class="o">=</span> <span class="n">second_matched</span><span class="o">.</span><span class="n">ix</span><span class="p">[:,[</span><span class="s">&#39;seam_id&#39;</span><span class="p">,</span><span class="s">&#39;full_address&#39;</span><span class="p">,</span><span class="s">&#39;geom&#39;</span><span class="p">]]</span>

<span class="n">new_queue</span> <span class="o">=</span> <span class="n">first_matched</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">second_matched</span><span class="p">,</span><span class="n">ignore_index</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="k">print</span> <span class="nb">len</span><span class="p">(</span><span class="n">new_queue</span><span class="p">)</span>
<span class="n">new_queue</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;drop table if exists vendors&#39;</span><span class="p">)</span>
<span class="n">cmd</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">create table vendors (</span>
<span class="s">    index integer,</span>
<span class="s">    seam_id integer,</span>
<span class="s">    full_address text,</span>
<span class="s">    geom geometry(Point,4326)</span>
<span class="s">);</span>
<span class="s">&quot;&quot;&quot;</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>
<span class="k">print</span> <span class="nb">len</span><span class="p">(</span><span class="n">new_queue</span><span class="p">)</span>
<span class="k">print</span> <span class="n">new_queue</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
<span class="n">new_queue</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s">&quot;vendors&quot;</span><span class="p">,</span><span class="n">engine</span><span class="p">,</span><span class="n">if_exists</span><span class="o">=</span><span class="s">&#39;append&#39;</span><span class="p">,</span><span class="n">index</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="n">add_table_primary_serial_key</span><span class="p">(</span><span class="s">&#39;vendors&#39;</span><span class="p">,</span><span class="s">&#39;id&#39;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>332
   seam_id                       full_address  \
0    29378  33 leonard st, New York, NY 10013   
1     4182  349 greenwich, New York, NY 10013   
2    24077  505 broome st, New York, NY 10013   
3    11483    2 rector st, New York, NY 10006   
4     3445    262 bleeker, New York, NY 10012   

                                                geom  
0  0101000020E6100000B8F674AB768052C0A35DD00BF35B...  
1  0101000020E61000001A49C6E2AA8052C032757B47FD5B...  
2  0101000020E610000080943C812E8052C07B462B2B945C...  
3  0101000020E6100000E76A1E39D68052C0A39E5561995A...  
4  0101000020E61000001E76BD1F338052C0376036C59F5D...  
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1>Need to:</h1>
<ol>
<li>use translate method</li>
<li>have google backup (pay now for high-volume availability?)</li>
<li>be able use gps to locate point on mn_ways</li>
<li>add node to db</li>
<li>simply mn_ways_vertices_pgr</li>
<li>retrieve distances for multi-dijkstra</li>
</ol>
<h2>To Do:</h2>
<ol>
<li>google api (note for geopy) for remainder <ul>
<li>error goes to me</li>
</ul>
</li>
<li>code all addresses for nodes</li>
</ol>
<ol>
<li>create layer of nodes from addresses</li>
</ol>
<ol>
<li>find all distances between them</li>
</ol>

<pre><code>- get all permutations for a set of two points


</code></pre>
<ol>
<li>as the orders come in, assign them to dg with smallest effect on current route (i.e., least add'l time)</li>
</ol>
<ol>
<li>for each round: take lowest order/min as candidates for redistribution</li>
</ol>

<pre><code>- option is always available for pooling improv. plugin


</code></pre>
<ol>
<li>for segments along path with most overlapping area, consider switching close points and keep switch if improv.</li>
</ol>
<ol>
<li>in all cases, order MUST be committed before available DG are None.</li>
</ol>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[7]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># add encoding?</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="nb">reload</span><span class="p">(</span><span class="n">sys</span><span class="p">)</span>
<span class="n">sys</span><span class="o">.</span><span class="n">setdefaultencoding</span><span class="p">(</span><span class="s">&#39;UTF8&#39;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># drop encoding?</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="nb">reload</span><span class="p">(</span><span class="n">sys</span><span class="p">)</span>
<span class="n">sys</span><span class="o">.</span><span class="n">setdefaultencoding</span><span class="p">(</span><span class="s">&#39;ascii&#39;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[1]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">ibk</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[2]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># Libraries</span>
<span class="n">THIS_NOTEBOOK</span> <span class="o">=</span> <span class="s">&#39;aporo_web_scraping&#39;</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s">&#39;expand_frame_repr&#39;</span><span class="p">,</span><span class="bp">False</span><span class="p">)</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s">&#39;display.max_columns&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s">&#39;display.max_rows&#39;</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s">&#39;display.width&#39;</span><span class="p">,</span><span class="mi">180</span><span class="p">)</span>
<span class="n">np</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">np</span>
<span class="n">np</span><span class="o">.</span><span class="n">set_printoptions</span><span class="p">(</span><span class="n">linewidth</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span><span class="n">threshold</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span>
<span class="kn">import</span> <span class="nn">geopandas</span> <span class="kn">as</span> <span class="nn">gd</span>
<span class="kn">from</span> <span class="nn">types</span> <span class="kn">import</span> <span class="n">NoneType</span>
<span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">sleep</span> <span class="k">as</span> <span class="n">delay</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span>
<span class="kn">from</span> <span class="nn">logging</span> <span class="kn">import</span> <span class="n">getLogger</span>
<span class="kn">from</span> <span class="nn">logging</span> <span class="kn">import</span> <span class="n">INFO</span> <span class="k">as</span> <span class="n">logging_info</span>
<span class="n">getLogger</span><span class="p">(</span><span class="s">&#39;sqlalchemy.dialects.postgresql&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging_info</span><span class="p">)</span>
<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s">r&#39;postgresql://postgres:postgres@192.168.3.52:8800/routing&#39;</span><span class="p">,</span>
                       <span class="n">encoding</span><span class="o">=</span><span class="s">&#39;utf-8&#39;</span><span class="p">,</span>
                       <span class="n">echo</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

<span class="o">%</span><span class="k">load_ext</span> <span class="n">sql</span>
<span class="c"># %sql postgresql://postgres:postgres@localhost/routing</span>
<span class="o">%</span><span class="k">sql</span> <span class="n">postgresql</span><span class="p">:</span><span class="o">//</span><span class="n">postgres</span><span class="p">:</span><span class="n">postgres</span><span class="nd">@192.168.3.52</span><span class="p">:</span><span class="mi">8800</span><span class="o">/</span><span class="n">routing</span>
<span class="o">%</span><span class="k">config</span> <span class="n">SqlMagic</span><span class="o">.</span><span class="n">feedback</span><span class="o">=</span><span class="bp">False</span>
            
<span class="c"># import HTML and codecs</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">from</span> <span class="nn">os</span> <span class="kn">import</span> <span class="n">getcwd</span>
<span class="n">workDir</span> <span class="o">=</span> <span class="n">getcwd</span><span class="p">()</span><span class="o">+</span><span class="s">&#39;/&#39;</span>
<span class="kn">from</span> <span class="nn">os.path</span> <span class="kn">import</span> <span class="n">abspath</span>
<span class="kn">from</span> <span class="nn">sys</span> <span class="kn">import</span> <span class="n">path</span> <span class="k">as</span> <span class="n">py_path</span>
<span class="n">py_path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">abspath</span><span class="p">(</span><span class="n">workDir</span><span class="o">+</span><span class="s">&#39;../../html&#39;</span><span class="p">))</span>
<span class="kn">from</span> <span class="nn">HTML_API</span> <span class="kn">import</span> <span class="n">getTagsByAttr</span><span class="p">,</span><span class="n">getAllTag</span><span class="p">,</span><span class="n">getInnerElement</span><span class="p">,</span><span class="n">getTagContents</span>
<span class="kn">from</span> <span class="nn">HTML_API</span> <span class="kn">import</span> <span class="n">google</span><span class="p">,</span><span class="n">safe_url</span><span class="p">,</span><span class="n">getInnerHTML</span><span class="p">,</span><span class="n">FindAllTags</span><span class="p">,</span><span class="n">getSoup</span>
<span class="kn">from</span> <span class="nn">webpage_scrape</span> <span class="kn">import</span> <span class="n">scraper</span>
<span class="kn">import</span> <span class="nn">codecs</span>
<span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">sleep</span>
<span class="kn">import</span> <span class="nn">datetime</span> <span class="kn">as</span> <span class="nn">dt</span>
<span class="kn">from</span> <span class="nn">urllib</span> <span class="kn">import</span> <span class="n">quote_plus</span><span class="p">,</span><span class="n">unquote</span>
<span class="kn">from</span> <span class="nn">re</span> <span class="kn">import</span> <span class="n">findall</span> <span class="k">as</span> <span class="n">re_findall</span>
<span class="kn">from</span> <span class="nn">re</span> <span class="kn">import</span> <span class="n">sub</span> <span class="k">as</span> <span class="n">re_sub</span>
<span class="n">py_path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">abspath</span><span class="p">(</span><span class="n">workDir</span><span class="o">+</span><span class="s">&#39;/../../files_folders&#39;</span><span class="p">))</span>
<span class="kn">from</span> <span class="nn">API_system</span> <span class="kn">import</span> <span class="n">beep</span><span class="p">,</span><span class="n">get_input</span>

<span class="kn">import</span> <span class="nn">psycopg2</span>
<span class="n">conn</span> <span class="o">=</span> <span class="n">psycopg2</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&quot;dbname=&#39;routing&#39; user=&#39;postgres&#39; host=&#39;192.168.3.52&#39; password=&#39;&#39; port=8800&quot;</span><span class="p">);</span>
<span class="n">cur</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># Functions</span>

<span class="c"># seamless f(x)s</span>
<span class="k">def</span> <span class="nf">update_pgsql_with_seamless_page_content</span><span class="p">(</span><span class="n">br</span><span class="p">):</span>
    <span class="n">html</span> <span class="o">=</span> <span class="n">codecs</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">br</span><span class="o">.</span><span class="n">source</span><span class="p">(),</span><span class="s">&#39;utf8&#39;</span><span class="p">,</span><span class="s">&#39;ignore&#39;</span><span class="p">)</span>
    <span class="n">seamless_link</span> <span class="o">=</span> <span class="n">br</span><span class="o">.</span><span class="n">get_url</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">seamless_link</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;http&#39;</span><span class="p">)</span><span class="o">!=</span><span class="mi">0</span><span class="p">:</span> <span class="n">seamless_link</span><span class="o">=</span><span class="s">&#39;http://www.seamless.com/food-delivery/&#39;</span><span class="o">+</span><span class="n">seamless_link</span>
    <span class="n">vendor_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">seamless_link</span><span class="p">[</span><span class="n">seamless_link</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">rfind</span><span class="p">(</span><span class="s">&#39;.&#39;</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">2</span><span class="p">])</span>
    
    <span class="n">t</span> <span class="o">=</span> <span class="n">getTagsByAttr</span><span class="p">(</span><span class="n">html</span><span class="p">,</span> <span class="s">&#39;span&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;id&#39;</span><span class="p">:</span><span class="s">&#39;VendorName&#39;</span><span class="p">},</span><span class="n">contents</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">t</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">a</span> <span class="o">=</span> <span class="n">getTagsByAttr</span><span class="p">(</span><span class="n">html</span><span class="p">,</span> <span class="s">&#39;div&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;id&#39;</span><span class="p">:</span><span class="s">&#39;Bummer&#39;</span><span class="p">},</span><span class="n">contents</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
            <span class="n">b</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;Bummer!&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">vend_name</span> <span class="o">=</span> <span class="n">b</span><span class="p">[:</span><span class="n">b</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;(&#39;</span><span class="p">)]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">addr</span> <span class="o">=</span> <span class="n">re_findall</span><span class="p">(</span><span class="s">r&#39;[(](.*)[)]&#39;</span><span class="p">,</span><span class="n">b</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">T</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;vendor_id&#39;</span><span class="p">:</span><span class="n">vendor_id</span><span class="p">,</span><span class="s">&#39;vend_name&#39;</span><span class="p">:</span><span class="n">vend_name</span><span class="p">,</span><span class="s">&#39;addr&#39;</span><span class="p">:</span><span class="n">addr</span><span class="p">}</span>
            <span class="n">cmd</span> <span class="o">=</span>   <span class="s">&quot;&quot;&quot;</span>
<span class="s">                    update seamless </span>
<span class="s">                    set </span>
<span class="s">                        inactive = true,</span>
<span class="s">                        vend_name = </span><span class="si">%(vend_name)s</span><span class="s">,</span>
<span class="s">                        address = </span><span class="si">%(addr)s</span><span class="s">,</span>
<span class="s">                        upd_vend_content = &#39;now&#39;::timestamp with time zone</span>
<span class="s">                    where vend_id = </span><span class="si">%(vendor_id)s</span><span class="s"></span>
<span class="s">                    &quot;&quot;&quot;</span><span class="o">%</span><span class="k">T</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">T</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;vendor_id&#39;</span><span class="p">:</span><span class="n">vendor_id</span><span class="p">}</span>
            <span class="n">cmd</span> <span class="o">=</span>   <span class="s">&quot;&quot;&quot;</span>
<span class="s">                    update seamless </span>
<span class="s">                    set </span>
<span class="s">                        inactive = true,</span>
<span class="s">                        upd_vend_content = &#39;now&#39;::timestamp with time zone</span>
<span class="s">                    where vend_id = </span><span class="si">%(vendor_id)s</span><span class="s"></span>
<span class="s">                    &quot;&quot;&quot;</span><span class="o">%</span><span class="k">T</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">vend_name</span> <span class="o">=</span> <span class="n">t</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">getText</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

    <span class="n">addr</span> <span class="o">=</span> <span class="n">getTagsByAttr</span><span class="p">(</span><span class="n">html</span><span class="p">,</span> <span class="s">&#39;span&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;itemprop&#39;</span><span class="p">:</span><span class="s">&#39;streetAddress&#39;</span><span class="p">},</span><span class="n">contents</span><span class="o">=</span><span class="bp">False</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">contents</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">addr</span> <span class="o">=</span> <span class="n">addr</span><span class="p">[:</span><span class="n">addr</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;(&#39;</span><span class="p">)]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
    <span class="n">z</span> <span class="o">=</span> <span class="n">getTagsByAttr</span><span class="p">(</span><span class="n">html</span><span class="p">,</span> <span class="s">&#39;span&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;itemprop&#39;</span><span class="p">:</span><span class="s">&#39;postalCode&#39;</span><span class="p">},</span><span class="n">contents</span><span class="o">=</span><span class="bp">False</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">contents</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="k">if</span> <span class="n">z</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;-&#39;</span><span class="p">)</span><span class="o">!=-</span><span class="mi">1</span><span class="p">:</span>
        <span class="n">zipcode</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">z</span><span class="p">[:</span><span class="n">z</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;-&#39;</span><span class="p">)])</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">zipcode</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">z</span><span class="p">)</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">getTagsByAttr</span><span class="p">(</span><span class="n">html</span><span class="p">,</span> <span class="s">&#39;span&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;itemprop&#39;</span><span class="p">:</span><span class="s">&#39;telephone&#39;</span><span class="p">},</span><span class="n">contents</span><span class="o">=</span><span class="bp">False</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">contents</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">excl_chars</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;(&#39;</span><span class="p">,</span><span class="s">&#39;)&#39;</span><span class="p">,</span><span class="s">&#39;-&#39;</span><span class="p">,</span><span class="s">&#39;x&#39;</span><span class="p">,</span><span class="s">&#39;/&#39;</span><span class="p">,</span><span class="s">&#39;,&#39;</span><span class="p">,</span><span class="s">&#39; &#39;</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">excl_chars</span><span class="p">:</span> <span class="n">p</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">it</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span>
    <span class="n">phone</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">strip</span><span class="p">()[:</span><span class="mi">10</span><span class="p">])</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">phone</span><span class="p">))</span><span class="o">!=</span><span class="mi">10</span><span class="p">:</span>
        <span class="n">beep</span><span class="p">()</span>
        <span class="k">raise</span> <span class="ne">SystemError</span><span class="p">()</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">price</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">getTagsByAttr</span><span class="p">(</span><span class="n">html</span><span class="p">,</span> <span class="s">&#39;span&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span><span class="s">&#39;price-text&#39;</span><span class="p">},</span><span class="n">contents</span><span class="o">=</span><span class="bp">False</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">getText</span><span class="p">()</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s">&#39;$&#39;</span><span class="p">))</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="n">price</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">rating</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">getTagsByAttr</span><span class="p">(</span><span class="n">html</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span><span class="s">&#39;user-rating&#39;</span><span class="p">},</span><span class="n">contents</span><span class="o">=</span><span class="bp">False</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">img</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s">&#39;alt&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39; &#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">rating_total</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">getTagsByAttr</span><span class="p">(</span><span class="n">html</span><span class="p">,</span> <span class="s">&#39;span&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;itemprop&#39;</span><span class="p">:</span><span class="s">&#39;ratingCount&#39;</span><span class="p">,</span>
                                          <span class="s">&#39;id&#39;</span><span class="p">:</span><span class="s">&#39;TotalRatings&#39;</span><span class="p">},</span><span class="n">contents</span><span class="o">=</span><span class="bp">False</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">getText</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;ratings&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
        <span class="n">rating_perc</span> <span class="o">=</span> <span class="n">rating_total</span><span class="o">/</span><span class="n">rating</span>
        <span class="n">reviews</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">getTagsByAttr</span><span class="p">(</span><span class="n">html</span><span class="p">,</span> <span class="s">&#39;span&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;itemprop&#39;</span><span class="p">:</span><span class="s">&#39;reviewCount&#39;</span><span class="p">,</span>
                                                 <span class="s">&#39;id&#39;</span><span class="p">:</span><span class="s">&#39;TotalReviews&#39;</span><span class="p">},</span><span class="n">contents</span><span class="o">=</span><span class="bp">False</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">getText</span><span class="p">())</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="n">rating</span> <span class="o">=</span> <span class="n">rating_total</span> <span class="o">=</span> <span class="n">rating_perc</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="n">reviews</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">v</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;Delivery Estimate:&#39;</span><span class="p">)</span>
    <span class="n">deliv_est</span> <span class="o">=</span> <span class="s">&#39;-&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">re_findall</span><span class="p">(</span><span class="s">r&#39;\d+&#39;</span><span class="p">,</span> <span class="n">html</span><span class="p">[</span><span class="n">v</span><span class="p">:</span><span class="n">v</span><span class="o">+</span><span class="nb">len</span><span class="p">(</span><span class="s">&#39;Delivery Estimate:&#39;</span><span class="p">)</span><span class="o">+</span><span class="mi">100</span><span class="p">]</span> <span class="p">))</span>
    <span class="n">v</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;Delivery Minimum:&#39;</span><span class="p">)</span>
    <span class="n">deliv_min</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s">&#39;.&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">re_findall</span><span class="p">(</span><span class="s">r&#39;\d+&#39;</span><span class="p">,</span> <span class="n">html</span><span class="p">[</span><span class="n">v</span><span class="p">:</span><span class="n">v</span><span class="o">+</span><span class="nb">len</span><span class="p">(</span><span class="s">&#39;Delivery Minimum:&#39;</span><span class="p">)</span><span class="o">+</span><span class="mi">100</span><span class="p">]</span> <span class="p">)[:</span><span class="mi">2</span><span class="p">]))</span>
    <span class="n">pickup_est</span> <span class="o">=</span> <span class="s">&#39;-&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">re_findall</span><span class="p">(</span><span class="s">r&#39;\d+&#39;</span><span class="p">,</span> <span class="n">getTagsByAttr</span><span class="p">(</span><span class="n">html</span><span class="p">,</span> <span class="s">&#39;span&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span><span class="s">&#39;ready-time&#39;</span><span class="p">},</span><span class="n">contents</span><span class="o">=</span><span class="bp">False</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">getText</span><span class="p">()))</span>
    <span class="n">v</span> <span class="o">=</span> <span class="n">getTagsByAttr</span><span class="p">(</span><span class="n">html</span><span class="p">,</span> <span class="s">&#39;div&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span><span class="s">&#39;estimates&#39;</span><span class="p">,</span>
                         <span class="s">&#39;id&#39;</span><span class="p">:</span><span class="s">&#39;RestaurantDetails&#39;</span><span class="p">},</span><span class="n">contents</span><span class="o">=</span><span class="bp">False</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">estimates_blob</span> <span class="o">=</span> <span class="n">re_sub</span><span class="p">(</span><span class="s">r&#39;\s+&#39;</span><span class="p">,</span> <span class="s">&#39; &#39;</span><span class="p">,</span> <span class="n">v</span><span class="o">.</span><span class="n">findAll</span><span class="p">(</span><span class="s">&#39;span&#39;</span><span class="p">)[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">getText</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">))</span>
    <span class="n">description</span> <span class="o">=</span> <span class="n">getTagsByAttr</span><span class="p">(</span><span class="n">html</span><span class="p">,</span> <span class="s">&#39;meta&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;property&#39;</span><span class="p">:</span><span class="s">&#39;og:description&#39;</span><span class="p">},</span><span class="n">contents</span><span class="o">=</span><span class="bp">False</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s">&#39;content&#39;</span><span class="p">]</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">cuisine</span> <span class="o">=</span> <span class="n">getTagsByAttr</span><span class="p">(</span><span class="n">html</span><span class="p">,</span> <span class="s">&#39;li&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;itemprop&#39;</span><span class="p">:</span><span class="s">&#39;servesCuisine&#39;</span><span class="p">},</span><span class="n">contents</span><span class="o">=</span><span class="bp">False</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">contents</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="n">cuisine</span> <span class="o">=</span> <span class="bp">None</span>

    <span class="n">page_vars</span> <span class="o">=</span> <span class="p">[</span><span class="n">seamless_link</span><span class="p">,</span><span class="n">vendor_id</span><span class="p">,</span><span class="n">vend_name</span><span class="p">,</span><span class="n">addr</span><span class="p">,</span><span class="n">zipcode</span><span class="p">,</span><span class="n">phone</span><span class="p">,</span><span class="n">price</span><span class="p">,</span>
                 <span class="n">rating</span><span class="p">,</span><span class="n">rating_total</span><span class="p">,</span><span class="n">rating_perc</span><span class="p">,</span><span class="n">description</span><span class="p">,</span><span class="n">reviews</span><span class="p">,</span>
                 <span class="n">deliv_est</span><span class="p">,</span><span class="n">deliv_min</span><span class="p">,</span><span class="n">pickup_est</span><span class="p">,</span><span class="n">cuisine</span><span class="p">,</span><span class="n">estimates_blob</span><span class="p">]</span>
    <span class="n">a</span> <span class="o">=</span> <span class="s">&#39;sl_link,vend_id,vend_name,address,zipcode,phone,price&#39;</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;,&#39;</span><span class="p">)</span>
    <span class="n">b</span> <span class="o">=</span> <span class="s">&#39;rating,rating_total,rating_perc,description&#39;</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;,&#39;</span><span class="p">)</span>
    <span class="n">c</span> <span class="o">=</span> <span class="s">&#39;reviews,deliv_est,deliv_min,pickup_est,cuisine,estimates_blob&#39;</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;,&#39;</span><span class="p">)</span>
    <span class="n">var_names</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span> <span class="o">+</span> <span class="n">c</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;drop table if exists tmp&#39;</span><span class="p">)</span>
    <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="n">page_vars</span><span class="p">],</span><span class="n">columns</span><span class="o">=</span><span class="n">var_names</span><span class="p">)</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s">&#39;tmp&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>

    <span class="c"># upsert to seamless</span>
    <span class="n">cmd</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">        with upd as (</span>
<span class="s">            update seamless s</span>
<span class="s">            set</span>
<span class="s">                vend_name = t.vend_name,</span>
<span class="s">                address = t.address,</span>
<span class="s">                zipcode = t.zipcode,</span>
<span class="s">                phone = t.phone,</span>
<span class="s">                price = t.price,</span>
<span class="s">                rating = t.rating,</span>
<span class="s">                rating_total = t.rating_total,</span>
<span class="s">                rating_perc = t.rating_perc,</span>
<span class="s">                description = t.description,</span>
<span class="s">                reviews = t.reviews,</span>
<span class="s">                deliv_est = t.deliv_est,</span>
<span class="s">                deliv_min = t.deliv_min,</span>
<span class="s">                pickup_est = t.pickup_est,</span>
<span class="s">                cuisine = t.cuisine,</span>
<span class="s">                estimates_blob = t.estimates_blob,</span>
<span class="s">                upd_vend_content = &#39;now&#39;::timestamp with time zone now</span>
<span class="s">            from tmp t</span>
<span class="s">            where s.vend_id = t.vend_id</span>
<span class="s">            returning t.vend_id vend_id</span>
<span class="s">        )</span>
<span class="s">        insert into seamless ( sl_link,</span>
<span class="s">                               vend_id,</span>
<span class="s">                               vend_name,</span>
<span class="s">                               address,</span>
<span class="s">                               zipcode,</span>
<span class="s">                               phone,</span>
<span class="s">                               price,</span>
<span class="s">                               rating,</span>
<span class="s">                               rating_total,</span>
<span class="s">                               rating_perc,</span>
<span class="s">                               description,</span>
<span class="s">                               reviews,</span>
<span class="s">                               deliv_est,</span>
<span class="s">                               deliv_min,</span>
<span class="s">                               pickup_est,</span>
<span class="s">                               cuisine,</span>
<span class="s">                               estimates_blob,</span>
<span class="s">                               upd_vend_content)</span>
<span class="s">        select</span>
<span class="s">            t.sl_link,</span>
<span class="s">            t.vend_id,</span>
<span class="s">            t.vend_name,</span>
<span class="s">            t.address,</span>
<span class="s">            t.zipcode,</span>
<span class="s">            t.phone,</span>
<span class="s">            t.price,</span>
<span class="s">            t.rating,</span>
<span class="s">            t.rating_total,</span>
<span class="s">            t.rating_perc,</span>
<span class="s">            t.description,</span>
<span class="s">            t.reviews,</span>
<span class="s">            t.deliv_est,</span>
<span class="s">            t.deliv_min,</span>
<span class="s">            t.pickup_est,</span>
<span class="s">            t.cuisine,</span>
<span class="s">            t.estimates_blob,</span>
<span class="s">            &#39;now&#39;::timestamp with time zone now</span>
<span class="s">        from</span>
<span class="s">            tmp t,</span>
<span class="s">            (select array_agg(f.vend_id) upd_vend_ids from upd f) as f1</span>
<span class="s">        where (not upd_vend_ids &amp;&amp; array[t.vend_id]</span>
<span class="s">            or upd_vend_ids is null);&quot;&quot;&quot;</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;drop table tmp;&quot;</span><span class="p">)</span>
    <span class="k">return</span>

<span class="k">def</span> <span class="nf">get_sl_addr_search_results</span><span class="p">(</span><span class="n">src</span><span class="p">):</span>

    <span class="n">br</span><span class="o">=</span><span class="n">scraper</span><span class="p">(</span><span class="s">&#39;firefox&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">browser</span>
    <span class="n">only_delivery</span><span class="o">=</span><span class="bp">True</span>

    <span class="c">#------------goto main page, identify PDF-page url, goto PDF-page url</span>
    <span class="n">base_url</span><span class="o">=</span><span class="s">&#39;http://www.seamless.com/food-delivery/&#39;</span>
    <span class="n">url</span> <span class="o">=</span> <span class="s">&#39;http://www.seamless.com/&#39;</span>
    <span class="n">br</span><span class="o">.</span><span class="n">open_page</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="n">br</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">find_element_by_id</span><span class="p">(</span><span class="s">&quot;fancybox-close&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>

    <span class="n">d</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="n">src</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>

    <span class="c">#i=0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">d</span><span class="p">)):</span>
        <span class="n">street</span><span class="p">,</span><span class="n">zipcode</span><span class="p">,</span><span class="n">gid</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">i</span><span class="p">,[</span><span class="s">&#39;address&#39;</span><span class="p">,</span><span class="s">&#39;zipcode&#39;</span><span class="p">,</span><span class="s">&#39;gid&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
        <span class="n">address</span> <span class="o">=</span> <span class="n">street</span><span class="o">.</span><span class="n">title</span><span class="p">()</span> <span class="o">+</span> <span class="s">&#39;, New York, NY, &#39;</span> <span class="o">+</span> <span class="n">zipcode</span>
        <span class="k">if</span> <span class="n">only_delivery</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span> <span class="n">br</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">find_element_by_id</span><span class="p">(</span><span class="s">&quot;DeliveryOptionSelection&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>
        <span class="n">sleep</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
        <span class="n">br</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">find_element_by_name</span><span class="p">(</span><span class="s">&quot;singleAddressEntry&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">send_keys</span><span class="p">(</span><span class="n">address</span><span class="p">)</span>
        <span class="n">br</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">find_element_by_name</span><span class="p">(</span><span class="s">&quot;singleAddressEntry&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">send_keys</span><span class="p">(</span><span class="s">u&#39;</span><span class="se">\ue007</span><span class="s">&#39;</span><span class="p">)</span>
        <span class="n">sleep</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">br</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">find_element_by_id</span><span class="p">(</span><span class="s">&quot;MessageArea&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;Your exact address could not be located by our system.&#39;</span><span class="p">)</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="n">br</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">find_element_by_name</span><span class="p">(</span><span class="s">&quot;singleAddressEntry&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">br</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">find_element_by_class_name</span><span class="p">(</span><span class="s">&quot;error-header&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;Your exact address could not be located by our system.&#39;</span><span class="p">)</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="n">br</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">find_element_by_name</span><span class="p">(</span><span class="s">&quot;singleAddressEntry&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">br</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">find_element_by_class_name</span><span class="p">(</span><span class="s">&quot;error-header&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&quot;We can&#39;t find your address.&quot;</span><span class="p">)</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="n">br</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">find_element_by_id</span><span class="p">(</span><span class="s">&quot;fancybox-close&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>
            <span class="n">br</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">find_element_by_name</span><span class="p">(</span><span class="s">&quot;singleAddressEntry&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">a</span><span class="o">=</span><span class="n">br</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">execute_script</span><span class="p">(</span><span class="s">&#39;return document.body.scrollHeight;&#39;</span><span class="p">)</span>
            <span class="n">br</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">execute_script</span><span class="p">(</span><span class="s">&quot;window.scrollTo(0, document.body.scrollHeight);&quot;</span><span class="p">)</span>
            <span class="n">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
            <span class="n">b</span><span class="o">=</span><span class="n">br</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">execute_script</span><span class="p">(</span><span class="s">&#39;return document.body.scrollHeight;&#39;</span><span class="p">)</span>
            <span class="n">br</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">execute_script</span><span class="p">(</span><span class="s">&quot;window.scrollTo(0, document.body.scrollHeight);&quot;</span><span class="p">)</span>
            <span class="n">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
            <span class="k">while</span> <span class="n">a</span> <span class="o">!=</span> <span class="n">b</span><span class="p">:</span>
                <span class="n">a</span><span class="o">=</span><span class="n">br</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">execute_script</span><span class="p">(</span><span class="s">&#39;return document.body.scrollHeight;&#39;</span><span class="p">)</span>
                <span class="n">br</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">execute_script</span><span class="p">(</span><span class="s">&quot;window.scrollTo(0, document.body.scrollHeight);&quot;</span><span class="p">)</span>
                <span class="n">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
                <span class="n">b</span><span class="o">=</span><span class="n">br</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">execute_script</span><span class="p">(</span><span class="s">&#39;return document.body.scrollHeight;&#39;</span><span class="p">)</span>
        <span class="c"># --- 2. update pgsql:seamless with address search results</span>
        <span class="n">html</span> <span class="o">=</span> <span class="n">codecs</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">br</span><span class="o">.</span><span class="n">source</span><span class="p">(),</span><span class="s">&#39;utf8&#39;</span><span class="p">,</span><span class="s">&#39;ignore&#39;</span><span class="p">)</span>
        <span class="n">z</span> <span class="o">=</span> <span class="n">getTagsByAttr</span><span class="p">(</span><span class="n">html</span><span class="p">,</span> <span class="s">&#39;div&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span><span class="s">&#39;restaurant-name&#39;</span><span class="p">},</span><span class="n">contents</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="n">open_res_total</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">z</span><span class="p">)</span>
        <span class="n">h</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="n">a</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s">&#39;href&#39;</span><span class="p">],</span><span class="n">z</span><span class="p">))</span>
        <span class="n">h</span> <span class="o">=</span> <span class="n">h</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">base_url</span> <span class="o">+</span> <span class="n">s</span> <span class="k">if</span> <span class="n">s</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;http&#39;</span><span class="p">)</span><span class="o">==-</span><span class="mi">1</span> <span class="k">else</span> <span class="n">s</span><span class="p">)</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="n">a</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s">&#39;title&#39;</span><span class="p">],</span><span class="n">z</span><span class="p">))</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span> <span class="s">&quot;&quot;&quot;drop table if exists tmp;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s">&#39;sl_link&#39;</span><span class="p">:</span><span class="n">h</span><span class="p">,</span><span class="s">&#39;search_link_blob&#39;</span><span class="p">:</span><span class="n">t</span><span class="p">})</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s">&#39;tmp&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>

        <span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">            alter table tmp add column id serial;</span>
<span class="s">            update tmp set id = nextval(pg_get_serial_sequence(&#39;tmp&#39;,&#39;id&#39;));</span>
<span class="s">            alter table tmp add primary key (id);</span>

<span class="s">            alter table tmp add column vend_id bigint;</span>

<span class="s">            update tmp</span>
<span class="s">            set vend_id = substring(sl_link from &#39;[[:punct:]]([[:digit:]]*)[[:punct:]][r]$&#39;)::bigint</span>
<span class="s">            where vend_id is null;</span>
<span class="s">            &quot;&quot;&quot;</span><span class="p">)</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">                            with upd as (</span>
<span class="s">                                update seamless s</span>
<span class="s">                                set </span>
<span class="s">                                    search_link_blob = t.search_link_blob,</span>
<span class="s">                                    upd_search_links = now</span>
<span class="s">                                from tmp t</span>
<span class="s">                                left join (select &#39;now&#39;::timestamp now) as f1 on true is true</span>
<span class="s">                                where s.vend_id = t.vend_id</span>
<span class="s">                                returning s.vend_id vend_id</span>
<span class="s">                            )                   </span>
<span class="s">                            insert into seamless (  </span>
<span class="s">                                sl_link,</span>
<span class="s">                                vend_id,</span>
<span class="s">                                search_link_blob,</span>
<span class="s">                                upd_search_links </span>
<span class="s">                                )</span>
<span class="s">                            select t.sl_link,t.vend_id,t.search_link_blob,now</span>
<span class="s">                            from </span>
<span class="s">                                tmp t,</span>
<span class="s">                                (select &#39;now&#39;::timestamp now) as f1,</span>
<span class="s">                                (select array_agg(f.vend_id) all_vend_id from seamless f) as f2</span>
<span class="s">                            where not all_vend_id @&gt; array[t.vend_id];</span>

<span class="s">                            drop table if exists tmp;</span>
<span class="s">                        &quot;&quot;&quot;</span><span class="p">)</span>
        <span class="c"># --- 3. update pgsql:seamless_closed with seamless address search results</span>
        <span class="n">br</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">find_element_by_id</span><span class="p">(</span><span class="s">&quot;ShowClosedVendorsLink&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>
        <span class="n">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
        <span class="n">html</span> <span class="o">=</span> <span class="n">codecs</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">br</span><span class="o">.</span><span class="n">source</span><span class="p">(),</span><span class="s">&#39;utf8&#39;</span><span class="p">,</span><span class="s">&#39;ignore&#39;</span><span class="p">)</span>
        <span class="n">z</span><span class="o">=</span><span class="n">getTagsByAttr</span><span class="p">(</span><span class="n">html</span><span class="p">,</span> <span class="s">&#39;div&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span><span class="s">&#39;closed1&#39;</span><span class="p">},</span><span class="n">contents</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="n">closed_res_total</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">z</span><span class="p">)</span>
        <span class="n">tmp</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="p">[</span><span class="n">a</span><span class="o">.</span><span class="n">contents</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\t</span><span class="s">&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()]</span><span class="o">+</span>
                             <span class="n">a</span><span class="o">.</span><span class="n">span</span><span class="o">.</span><span class="n">contents</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\t</span><span class="s">&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;open&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;-&#39;</span><span class="p">),</span><span class="n">z</span><span class="p">)</span>
        <span class="n">T</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;day&#39;</span><span class="p">:</span><span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(),</span><span class="s">&#39;%a&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()}</span>
        <span class="n">cols</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="s">&#39;vend_name,opens_</span><span class="si">%(day)s</span><span class="s">,closes_</span><span class="si">%(day)s</span><span class="s">&#39;</span><span class="o">%</span><span class="k">T</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;,&#39;</span><span class="p">)</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">tmp</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="n">cols</span><span class="p">)</span>
        <span class="n">x</span><span class="p">[</span><span class="n">cols</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="n">cols</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="s">&#39;%I:%M %p&#39;</span><span class="p">),</span><span class="s">&#39;%H:%M&#39;</span><span class="p">))</span>
        <span class="n">x</span><span class="p">[</span><span class="n">cols</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="n">cols</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="s">&#39;%I:%M %p&#39;</span><span class="p">),</span><span class="s">&#39;%H:%M&#39;</span><span class="p">))</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span> <span class="s">&quot;&quot;&quot;drop table if exists tmp;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="n">x</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s">&#39;tmp&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">            alter table tmp add column id serial;</span>
<span class="s">            update tmp set id = nextval(pg_get_serial_sequence(&#39;tmp&#39;,&#39;id&#39;));</span>
<span class="s">            alter table tmp add primary key (id);</span>
<span class="s">            &quot;&quot;&quot;</span><span class="p">)</span>
        <span class="c"># upsert</span>
        <span class="n">check</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s">&#39;select count(*) cnt from seamless_closed&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span><span class="o">.</span><span class="n">cnt</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">check</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">                            insert into seamless_closed (  </span>
<span class="s">                                vend_name,</span>
<span class="s">                                opens_</span><span class="si">%(day)s</span><span class="s">,</span>
<span class="s">                                closes_</span><span class="si">%(day)s</span><span class="s">,</span>
<span class="s">                                last_updated )</span>
<span class="s">                            select </span>
<span class="s">                                t.vend_name,</span>
<span class="s">                                t.opens_</span><span class="si">%(day)s</span><span class="s">::time with time zone,</span>
<span class="s">                                t.closes_</span><span class="si">%(day)s</span><span class="s">::time with time zone,</span>
<span class="s">                                now</span>
<span class="s">                            from </span>
<span class="s">                                tmp t,</span>
<span class="s">                                (select &#39;now&#39;::timestamp with time zone now) as f1;</span>

<span class="s">                            drop table if exists tmp;</span>
<span class="s">                        &quot;&quot;&quot;</span><span class="o">%</span><span class="k">T</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">                            with upd as (</span>
<span class="s">                                update seamless_closed s</span>
<span class="s">                                set </span>
<span class="s">                                    opens_</span><span class="si">%(day)s</span><span class="s"> = t.opens_</span><span class="si">%(day)s</span><span class="s">::time with time zone,</span>
<span class="s">                                    closes_</span><span class="si">%(day)s</span><span class="s"> = t.closes_</span><span class="si">%(day)s</span><span class="s">::time with time zone,</span>
<span class="s">                                    last_updated = now</span>
<span class="s">                                from </span>
<span class="s">                                    tmp t,</span>
<span class="s">                                    (select &#39;now&#39;::timestamp now) as f1</span>
<span class="s">                                where s.vend_name = t.vend_name</span>
<span class="s">                                returning s.vend_name vend_name</span>
<span class="s">                            )                   </span>
<span class="s">                            insert into seamless_closed (  </span>
<span class="s">                                vend_name,</span>
<span class="s">                                opens_</span><span class="si">%(day)s</span><span class="s">,</span>
<span class="s">                                closes_</span><span class="si">%(day)s</span><span class="s">,</span>
<span class="s">                                last_updated )</span>
<span class="s">                            select </span>
<span class="s">                                t.vend_name,</span>
<span class="s">                                t.opens_</span><span class="si">%(day)s</span><span class="s">::time with time zone,</span>
<span class="s">                                t.closes_</span><span class="si">%(day)s</span><span class="s">::time with time zone,</span>
<span class="s">                                now</span>
<span class="s">                            from </span>
<span class="s">                                tmp t,</span>
<span class="s">                                (select &#39;now&#39;::timestamp with time zone now) as f1,</span>
<span class="s">                                (select array_agg(f.vend_name) all_vend_names from seamless_closed f) as f2</span>
<span class="s">                            where not all_vend_names @&gt; array[t.vend_name];</span>

<span class="s">                            drop table if exists tmp;</span>
<span class="s">                        &quot;&quot;&quot;</span><span class="o">%</span><span class="k">T</span><span class="p">)</span>
        <span class="c"># --- 4. update pgsql:scrape_lattice</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;  update scrape_lattice</span>
<span class="s">                            set </span>
<span class="s">                                sl_open_cnt=</span><span class="si">%s</span><span class="s">,</span>
<span class="s">                                sl_closed_cnt=</span><span class="si">%s</span><span class="s">,</span>
<span class="s">                                sl_updated=&#39;now&#39;::timestamp with time zone </span>
<span class="s">                        where gid=</span><span class="si">%s</span><span class="s">&quot;&quot;&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">open_res_total</span><span class="p">,</span>
                                         <span class="n">closed_res_total</span><span class="p">,</span>
                                         <span class="n">gid</span><span class="p">))</span>
        <span class="c"># --- 5. put in new address -- repeat</span>
        <span class="n">addresses</span><span class="o">=</span><span class="n">br</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">find_element_by_xpath</span><span class="p">(</span><span class="s">&quot;//select[@id=&#39;Address&#39;]&quot;</span><span class="p">)</span>
        <span class="n">last_option</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">addresses</span><span class="o">.</span><span class="n">find_elements_by_tag_name</span><span class="p">(</span><span class="s">&#39;option&#39;</span><span class="p">))</span><span class="o">-</span><span class="mi">1</span>
        <span class="n">addresses</span><span class="o">.</span><span class="n">find_elements_by_tag_name</span><span class="p">(</span><span class="s">&#39;option&#39;</span><span class="p">)[</span><span class="n">last_option</span><span class="p">]</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>
        <span class="n">sleep</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
    <span class="n">br</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>

<span class="c"># yelp functions</span>

<span class="kn">import</span> <span class="nn">rauth</span>
<span class="kn">from</span> <span class="nn">json</span> <span class="kn">import</span> <span class="n">dumps</span> <span class="k">as</span> <span class="n">j_dump</span>

<span class="n">CONSUMER_KEY</span> <span class="o">=</span> <span class="s">&#39;QzH1O3EktEQt89kegeaUxQ&#39;</span>
<span class="n">CONSUMER_SECRET</span> <span class="o">=</span> <span class="s">&#39;Q_GtZiKGtRvqQSTjGOSgsuogkTE&#39;</span>
<span class="n">TOKEN</span> <span class="o">=</span> <span class="s">&#39;6T7dDEQhf41FA2DIajIDZxsm4RwvBdM9&#39;</span>
<span class="n">TOKEN_SECRET</span> <span class="o">=</span> <span class="s">&#39;YNaWq3LCjlQu9ir4Ibo-Zp6ELKI&#39;</span>

<span class="k">def</span> <span class="nf">yelp_search_api</span><span class="p">(</span><span class="n">location</span><span class="p">,</span><span class="n">radius_in_meters</span><span class="p">):</span>
    <span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">params</span><span class="p">[</span><span class="s">&quot;term&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;restaurant&quot;</span>
    <span class="n">params</span><span class="p">[</span><span class="s">&#39;location&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">location</span>
    <span class="n">params</span><span class="p">[</span><span class="s">&quot;radius_filter&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">radius_in_meters</span><span class="p">)</span>
    <span class="n">api_url</span> <span class="o">=</span> <span class="s">&#39;http://api.yelp.com/v2/search&#39;</span>
    <span class="k">return</span> <span class="n">get_results</span><span class="p">(</span><span class="n">params</span><span class="p">,</span><span class="n">api_url</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">get_results</span><span class="p">(</span><span class="n">params</span><span class="p">,</span><span class="n">url</span><span class="p">):</span>   
    <span class="n">session</span> <span class="o">=</span> <span class="n">rauth</span><span class="o">.</span><span class="n">OAuth1Session</span><span class="p">(</span>
                <span class="n">consumer_key</span> <span class="o">=</span> <span class="n">CONSUMER_KEY</span>
                <span class="p">,</span><span class="n">consumer_secret</span> <span class="o">=</span> <span class="n">CONSUMER_SECRET</span>
                <span class="p">,</span><span class="n">access_token</span> <span class="o">=</span> <span class="n">TOKEN</span>
                <span class="p">,</span><span class="n">access_token_secret</span> <span class="o">=</span> <span class="n">TOKEN_SECRET</span><span class="p">)</span>
    <span class="n">request</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
    <span class="n">session</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>   
    <span class="k">return</span> <span class="n">data</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># DB Check --</span>
<span class="n">cmd1</span><span class="o">=</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">select count(*) from scrape_lattice</span>
<span class="s">                    where yelp_updated is null</span>
<span class="s">                    or age(&#39;now&#39;::timestamp with time zone,yelp_updated) &gt; interval &#39;1 day&#39;</span>

<span class="s">&quot;&quot;&quot;</span>
<span class="n">cmd2</span><span class="o">=</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">select * from yelp limit 1</span>
<span class="s">&quot;&quot;&quot;</span>
<span class="o">%</span><span class="k">sql</span> <span class="n">postgres</span><span class="nd">@routing</span> <span class="err">$</span><span class="n">cmd1</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Seamless:">Seamless:<a class="anchor-link" href="#Seamless:">&#182;</a></h1>
</div>
</div>
</div>

<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># __ create seamless_closed</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">    drop table if exists seamless_closed;</span>
<span class="s">    create table seamless_closed (</span>
<span class="s">        id serial primary key,</span>
<span class="s">        vend_name text,</span>
<span class="s">        sl_link text,</span>

<span class="s">        opens_mon time with time zone,</span>
<span class="s">        closes_mon time with time zone,</span>

<span class="s">        opens_tue time with time zone,</span>
<span class="s">        closes_tue time with time zone,</span>

<span class="s">        opens_wed time with time zone,</span>
<span class="s">        closes_wed time with time zone,</span>

<span class="s">        opens_thu time with time zone,</span>
<span class="s">        closes_thu time with time zone,</span>

<span class="s">        opens_fri time with time zone,</span>
<span class="s">        closes_fri time with time zone,</span>

<span class="s">        opens_sat time with time zone,</span>
<span class="s">        closes_sat time with time zone,</span>

<span class="s">        opens_sun time with time zone,</span>
<span class="s">        closes_sun time with time zone,</span>
<span class="s">        </span>
<span class="s">        inactive boolean default false,</span>
<span class="s">        inactive_on timestamp with time zone,</span>

<span class="s">        upd_seamless boolean default false,</span>
<span class="s">        last_updated timestamp with time zone</span>
<span class="s">    );</span>
<span class="s">    update seamless_closed set id = nextval(pg_get_serial_sequence(&#39;seamless_closed&#39;,&#39;id&#39;));</span>
<span class="s">    &quot;&quot;&quot;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># 1. get results from seamless address search and update pgsql -- worked 2014.11.16</span>

<span class="n">src</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;   select gid,address,zipcode from scrape_lattice</span>
<span class="s">            where address is null</span>
<span class="s">            or sl_updated is null</span>
<span class="s">            or age(&#39;now&#39;::timestamp with time zone,seamless_updated) &gt; interval &#39;1 day&#39;</span>
<span class="s">      &quot;&quot;&quot;</span>

<span class="o">!</span>pkill -f firefox

<span class="k">try</span><span class="p">:</span>
    <span class="n">get_sl_addr_search_results</span><span class="p">()</span>
    <span class="n">beep</span><span class="p">()</span>
    <span class="n">beep</span><span class="p">()</span>
    <span class="k">print</span> <span class="s">&#39;done!&#39;</span>
<span class="k">except</span><span class="p">:</span>
    <span class="n">beep</span><span class="p">()</span>
    <span class="n">br</span><span class="o">=</span><span class="n">scraper</span><span class="p">(</span><span class="s">&#39;firefox&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">browser</span>
    <span class="n">only_delivery</span><span class="o">=</span><span class="bp">True</span>

    <span class="c">#------------goto main page, identify PDF-page url, goto PDF-page url</span>
    <span class="n">base_url</span><span class="o">=</span><span class="s">&#39;http://www.seamless.com/food-delivery/&#39;</span>
    <span class="n">url</span> <span class="o">=</span> <span class="s">&#39;http://www.seamless.com/&#39;</span>
    <span class="n">br</span><span class="o">.</span><span class="n">open_page</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="n">br</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">find_element_by_id</span><span class="p">(</span><span class="s">&quot;fancybox-close&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>

    <span class="n">d</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="n">src</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>

    <span class="c">#i=0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">d</span><span class="p">)):</span>
        <span class="n">street</span><span class="p">,</span><span class="n">zipcode</span><span class="p">,</span><span class="n">gid</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">i</span><span class="p">,[</span><span class="s">&#39;address&#39;</span><span class="p">,</span><span class="s">&#39;zipcode&#39;</span><span class="p">,</span><span class="s">&#39;gid&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
        <span class="n">address</span> <span class="o">=</span> <span class="n">street</span><span class="o">.</span><span class="n">title</span><span class="p">()</span> <span class="o">+</span> <span class="s">&#39;, New York, NY, &#39;</span> <span class="o">+</span> <span class="n">zipcode</span>
        <span class="k">if</span> <span class="n">only_delivery</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span> <span class="n">br</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">find_element_by_id</span><span class="p">(</span><span class="s">&quot;DeliveryOptionSelection&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>
        <span class="n">sleep</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
        <span class="n">br</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">find_element_by_name</span><span class="p">(</span><span class="s">&quot;singleAddressEntry&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">send_keys</span><span class="p">(</span><span class="n">address</span><span class="p">)</span>
        <span class="n">br</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">find_element_by_name</span><span class="p">(</span><span class="s">&quot;singleAddressEntry&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">send_keys</span><span class="p">(</span><span class="s">u&#39;</span><span class="se">\ue007</span><span class="s">&#39;</span><span class="p">)</span>
        <span class="n">sleep</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">br</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">find_element_by_id</span><span class="p">(</span><span class="s">&quot;MessageArea&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;Your exact address could not be located by our system.&#39;</span><span class="p">)</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="n">br</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">find_element_by_name</span><span class="p">(</span><span class="s">&quot;singleAddressEntry&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">br</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">find_element_by_class_name</span><span class="p">(</span><span class="s">&quot;error-header&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;Your exact address could not be located by our system.&#39;</span><span class="p">)</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="n">br</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">find_element_by_name</span><span class="p">(</span><span class="s">&quot;singleAddressEntry&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">br</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">find_element_by_class_name</span><span class="p">(</span><span class="s">&quot;error-header&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&quot;We can&#39;t find your address.&quot;</span><span class="p">)</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="n">br</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">find_element_by_id</span><span class="p">(</span><span class="s">&quot;fancybox-close&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>
            <span class="n">br</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">find_element_by_name</span><span class="p">(</span><span class="s">&quot;singleAddressEntry&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">a</span><span class="o">=</span><span class="n">br</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">execute_script</span><span class="p">(</span><span class="s">&#39;return document.body.scrollHeight;&#39;</span><span class="p">)</span>
            <span class="n">br</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">execute_script</span><span class="p">(</span><span class="s">&quot;window.scrollTo(0, document.body.scrollHeight);&quot;</span><span class="p">)</span>
            <span class="n">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
            <span class="n">b</span><span class="o">=</span><span class="n">br</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">execute_script</span><span class="p">(</span><span class="s">&#39;return document.body.scrollHeight;&#39;</span><span class="p">)</span>
            <span class="n">br</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">execute_script</span><span class="p">(</span><span class="s">&quot;window.scrollTo(0, document.body.scrollHeight);&quot;</span><span class="p">)</span>
            <span class="n">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
            <span class="k">while</span> <span class="n">a</span> <span class="o">!=</span> <span class="n">b</span><span class="p">:</span>
                <span class="n">a</span><span class="o">=</span><span class="n">br</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">execute_script</span><span class="p">(</span><span class="s">&#39;return document.body.scrollHeight;&#39;</span><span class="p">)</span>
                <span class="n">br</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">execute_script</span><span class="p">(</span><span class="s">&quot;window.scrollTo(0, document.body.scrollHeight);&quot;</span><span class="p">)</span>
                <span class="n">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
                <span class="n">b</span><span class="o">=</span><span class="n">br</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">execute_script</span><span class="p">(</span><span class="s">&#39;return document.body.scrollHeight;&#39;</span><span class="p">)</span>
        <span class="c"># --- 2. update pgsql:seamless with address search results</span>
        <span class="n">html</span> <span class="o">=</span> <span class="n">codecs</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">br</span><span class="o">.</span><span class="n">source</span><span class="p">(),</span><span class="s">&#39;utf8&#39;</span><span class="p">,</span><span class="s">&#39;ignore&#39;</span><span class="p">)</span>
        <span class="n">z</span> <span class="o">=</span> <span class="n">getTagsByAttr</span><span class="p">(</span><span class="n">html</span><span class="p">,</span> <span class="s">&#39;div&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span><span class="s">&#39;restaurant-name&#39;</span><span class="p">},</span><span class="n">contents</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="n">open_res_total</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">z</span><span class="p">)</span>
        <span class="n">h</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="n">a</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s">&#39;href&#39;</span><span class="p">],</span><span class="n">z</span><span class="p">))</span>
        <span class="n">h</span> <span class="o">=</span> <span class="n">h</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">base_url</span> <span class="o">+</span> <span class="n">s</span> <span class="k">if</span> <span class="n">s</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;http&#39;</span><span class="p">)</span><span class="o">==-</span><span class="mi">1</span> <span class="k">else</span> <span class="n">s</span><span class="p">)</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="n">a</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s">&#39;title&#39;</span><span class="p">],</span><span class="n">z</span><span class="p">))</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span> <span class="s">&quot;&quot;&quot;drop table if exists tmp;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s">&#39;sl_link&#39;</span><span class="p">:</span><span class="n">h</span><span class="p">,</span><span class="s">&#39;search_link_blob&#39;</span><span class="p">:</span><span class="n">t</span><span class="p">})</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s">&#39;tmp&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>

        <span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">            alter table tmp add column id serial;</span>
<span class="s">            update tmp set id = nextval(pg_get_serial_sequence(&#39;tmp&#39;,&#39;id&#39;));</span>
<span class="s">            alter table tmp add primary key (id);</span>

<span class="s">            alter table tmp add column vend_id bigint;</span>

<span class="s">            update tmp</span>
<span class="s">            set vend_id = substring(sl_link from &#39;[[:punct:]]([[:digit:]]*)[[:punct:]][r]$&#39;)::bigint</span>
<span class="s">            where vend_id is null;</span>
<span class="s">            &quot;&quot;&quot;</span><span class="p">)</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">                            with upd as (</span>
<span class="s">                                update seamless s</span>
<span class="s">                                set </span>
<span class="s">                                    search_link_blob = t.search_link_blob,</span>
<span class="s">                                    upd_search_links = now</span>
<span class="s">                                from tmp t</span>
<span class="s">                                left join (select &#39;now&#39;::timestamp now) as f1 on true is true</span>
<span class="s">                                where s.vend_id = t.vend_id</span>
<span class="s">                                returning s.vend_id vend_id</span>
<span class="s">                            )                   </span>
<span class="s">                            insert into seamless (  </span>
<span class="s">                                sl_link,</span>
<span class="s">                                vend_id,</span>
<span class="s">                                search_link_blob,</span>
<span class="s">                                upd_search_links </span>
<span class="s">                                )</span>
<span class="s">                            select t.sl_link,t.vend_id,t.search_link_blob,now</span>
<span class="s">                            from </span>
<span class="s">                                tmp t,</span>
<span class="s">                                (select &#39;now&#39;::timestamp now) as f1,</span>
<span class="s">                                (select array_agg(f.vend_id) all_vend_id from seamless f) as f2</span>
<span class="s">                            where not all_vend_id @&gt; array[t.vend_id];</span>

<span class="s">                            drop table if exists tmp;</span>
<span class="s">                        &quot;&quot;&quot;</span><span class="p">)</span>
        <span class="c"># --- 3. update pgsql:seamless_closed with seamless address search results</span>
        <span class="n">br</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">find_element_by_id</span><span class="p">(</span><span class="s">&quot;ShowClosedVendorsLink&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>
        <span class="n">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
        <span class="n">html</span> <span class="o">=</span> <span class="n">codecs</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">br</span><span class="o">.</span><span class="n">source</span><span class="p">(),</span><span class="s">&#39;utf8&#39;</span><span class="p">,</span><span class="s">&#39;ignore&#39;</span><span class="p">)</span>
        <span class="n">z</span><span class="o">=</span><span class="n">getTagsByAttr</span><span class="p">(</span><span class="n">html</span><span class="p">,</span> <span class="s">&#39;div&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span><span class="s">&#39;closed1&#39;</span><span class="p">},</span><span class="n">contents</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="n">closed_res_total</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">z</span><span class="p">)</span>
        <span class="n">tmp</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="p">[</span><span class="n">a</span><span class="o">.</span><span class="n">contents</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\t</span><span class="s">&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()]</span><span class="o">+</span>
                             <span class="n">a</span><span class="o">.</span><span class="n">span</span><span class="o">.</span><span class="n">contents</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\t</span><span class="s">&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;open&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;-&#39;</span><span class="p">),</span><span class="n">z</span><span class="p">)</span>
        <span class="n">T</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;day&#39;</span><span class="p">:</span><span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(),</span><span class="s">&#39;%a&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()}</span>
        <span class="n">cols</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="s">&#39;vend_name,opens_</span><span class="si">%(day)s</span><span class="s">,closes_</span><span class="si">%(day)s</span><span class="s">&#39;</span><span class="o">%</span><span class="k">T</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;,&#39;</span><span class="p">)</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">tmp</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="n">cols</span><span class="p">)</span>
        <span class="n">x</span><span class="p">[</span><span class="n">cols</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="n">cols</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="s">&#39;%I:%M %p&#39;</span><span class="p">),</span><span class="s">&#39;%H:%M&#39;</span><span class="p">))</span>
        <span class="n">x</span><span class="p">[</span><span class="n">cols</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="n">cols</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="s">&#39;%I:%M %p&#39;</span><span class="p">),</span><span class="s">&#39;%H:%M&#39;</span><span class="p">))</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span> <span class="s">&quot;&quot;&quot;drop table if exists tmp;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="n">x</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s">&#39;tmp&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">            alter table tmp add column id serial;</span>
<span class="s">            update tmp set id = nextval(pg_get_serial_sequence(&#39;tmp&#39;,&#39;id&#39;));</span>
<span class="s">            alter table tmp add primary key (id);</span>
<span class="s">            &quot;&quot;&quot;</span><span class="p">)</span>
        <span class="c"># upsert</span>
        <span class="n">check</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s">&#39;select count(*) cnt from seamless_closed&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span><span class="o">.</span><span class="n">cnt</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">check</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">                            insert into seamless_closed (  </span>
<span class="s">                                vend_name,</span>
<span class="s">                                opens_</span><span class="si">%(day)s</span><span class="s">,</span>
<span class="s">                                closes_</span><span class="si">%(day)s</span><span class="s">,</span>
<span class="s">                                last_updated )</span>
<span class="s">                            select </span>
<span class="s">                                t.vend_name,</span>
<span class="s">                                t.opens_</span><span class="si">%(day)s</span><span class="s">::time with time zone,</span>
<span class="s">                                t.closes_</span><span class="si">%(day)s</span><span class="s">::time with time zone,</span>
<span class="s">                                now</span>
<span class="s">                            from </span>
<span class="s">                                tmp t,</span>
<span class="s">                                (select &#39;now&#39;::timestamp with time zone now) as f1;</span>

<span class="s">                            drop table if exists tmp;</span>
<span class="s">                        &quot;&quot;&quot;</span><span class="o">%</span><span class="k">T</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">                            with upd as (</span>
<span class="s">                                update seamless_closed s</span>
<span class="s">                                set </span>
<span class="s">                                    opens_</span><span class="si">%(day)s</span><span class="s"> = t.opens_</span><span class="si">%(day)s</span><span class="s">::time with time zone,</span>
<span class="s">                                    closes_</span><span class="si">%(day)s</span><span class="s"> = t.closes_</span><span class="si">%(day)s</span><span class="s">::time with time zone,</span>
<span class="s">                                    last_updated = now</span>
<span class="s">                                from </span>
<span class="s">                                    tmp t,</span>
<span class="s">                                    (select &#39;now&#39;::timestamp now) as f1</span>
<span class="s">                                where s.vend_name = t.vend_name</span>
<span class="s">                                returning s.vend_name vend_name</span>
<span class="s">                            )                   </span>
<span class="s">                            insert into seamless_closed (  </span>
<span class="s">                                vend_name,</span>
<span class="s">                                opens_</span><span class="si">%(day)s</span><span class="s">,</span>
<span class="s">                                closes_</span><span class="si">%(day)s</span><span class="s">,</span>
<span class="s">                                last_updated )</span>
<span class="s">                            select </span>
<span class="s">                                t.vend_name,</span>
<span class="s">                                t.opens_</span><span class="si">%(day)s</span><span class="s">::time with time zone,</span>
<span class="s">                                t.closes_</span><span class="si">%(day)s</span><span class="s">::time with time zone,</span>
<span class="s">                                now</span>
<span class="s">                            from </span>
<span class="s">                                tmp t,</span>
<span class="s">                                (select &#39;now&#39;::timestamp with time zone now) as f1,</span>
<span class="s">                                (select array_agg(f.vend_name) all_vend_names from seamless_closed f) as f2</span>
<span class="s">                            where not all_vend_names @&gt; array[t.vend_name];</span>

<span class="s">                            drop table if exists tmp;</span>
<span class="s">                        &quot;&quot;&quot;</span><span class="o">%</span><span class="k">T</span><span class="p">)</span>
        <span class="c"># --- 4. update pgsql:scrape_lattice</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;  update scrape_lattice</span>
<span class="s">                            set </span>
<span class="s">                                sl_open_cnt=</span><span class="si">%s</span><span class="s">,</span>
<span class="s">                                sl_closed_cnt=</span><span class="si">%s</span><span class="s">,</span>
<span class="s">                                sl_updated=&#39;now&#39;::timestamp with time zone </span>
<span class="s">                        where gid=</span><span class="si">%s</span><span class="s">&quot;&quot;&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">open_res_total</span><span class="p">,</span>
                                         <span class="n">closed_res_total</span><span class="p">,</span>
                                         <span class="n">gid</span><span class="p">))</span>
        <span class="c"># --- 5. put in new address -- repeat</span>
        <span class="n">addresses</span><span class="o">=</span><span class="n">br</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">find_element_by_xpath</span><span class="p">(</span><span class="s">&quot;//select[@id=&#39;Address&#39;]&quot;</span><span class="p">)</span>
        <span class="n">last_option</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">addresses</span><span class="o">.</span><span class="n">find_elements_by_tag_name</span><span class="p">(</span><span class="s">&#39;option&#39;</span><span class="p">))</span><span class="o">-</span><span class="mi">1</span>
        <span class="n">addresses</span><span class="o">.</span><span class="n">find_elements_by_tag_name</span><span class="p">(</span><span class="s">&#39;option&#39;</span><span class="p">)[</span><span class="n">last_option</span><span class="p">]</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>
        <span class="n">sleep</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># 2. get url and html for closed vendors -- worked 2014.11.18</span>

<span class="o">!</span>pkill -f firefox

<span class="c"># new SL vendors not yet added to seamless DB</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">    select vend_name from seamless_closed sc</span>
<span class="s">    where upd_seamless is false</span>
<span class="s">    &quot;&quot;&quot;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>

<span class="n">x</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">vend_name</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="n">base_url</span><span class="o">=</span><span class="s">&#39;http://www.seamless.com/food-delivery/&#39;</span>

<span class="c"># br=scraper(&#39;phantom&#39;).browser</span>
<span class="n">br</span><span class="o">=</span><span class="n">scraper</span><span class="p">(</span><span class="s">&#39;firefox&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">browser</span>

<span class="n">stop</span><span class="o">=</span><span class="bp">False</span>
<span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">x</span><span class="p">:</span>
    <span class="n">url</span><span class="o">=</span><span class="s">&#39;http://www.google.com/search?as_q=&#39;</span><span class="o">+</span><span class="n">quote_plus</span><span class="p">(</span><span class="n">it</span><span class="p">)</span><span class="o">+</span><span class="s">&#39;&amp;as_sitesearch=www.seamless.com&amp;as_occt=any&amp;btnI=1&#39;</span>
    <span class="n">br</span><span class="o">.</span><span class="n">open_page</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="n">z</span><span class="o">=</span><span class="n">br</span><span class="o">.</span><span class="n">get_url</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">z</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;google&#39;</span><span class="p">)</span><span class="o">!=-</span><span class="mi">1</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">z</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;/sorry/&#39;</span><span class="p">)</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="n">beep</span><span class="p">()</span>
            <span class="n">end</span><span class="o">=</span><span class="bp">False</span>
            <span class="k">while</span> <span class="n">end</span> <span class="o">==</span> <span class="bp">False</span><span class="p">:</span>
                <span class="n">z</span><span class="o">=</span><span class="n">get_input</span><span class="p">(</span><span class="s">&quot;Captcha code?&quot;</span><span class="p">)</span>
                <span class="n">end</span><span class="o">=</span><span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">q</span><span class="o">=</span><span class="n">codecs</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">br</span><span class="o">.</span><span class="n">source</span><span class="p">(),</span><span class="s">&#39;utf8&#39;</span><span class="p">,</span><span class="s">&#39;ignore&#39;</span><span class="p">)</span>
            <span class="n">a</span><span class="o">=</span><span class="n">google</span><span class="p">()</span>
            <span class="n">url</span><span class="o">=</span><span class="n">a</span><span class="o">.</span><span class="n">get_results</span><span class="p">(</span><span class="n">q</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">url</span>
            <span class="n">br</span><span class="o">.</span><span class="n">open_page</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>  <span class="c"># added this last -- does it work correctly?  NEED TO TEST</span>

    <span class="n">z</span><span class="o">=</span><span class="n">url</span>
    <span class="k">if</span> <span class="n">z</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;http&#39;</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span> <span class="n">sl_link</span> <span class="o">=</span> <span class="n">z</span>
    <span class="k">else</span><span class="p">:</span> <span class="n">sl_link</span> <span class="o">=</span> <span class="n">base_url</span> <span class="o">+</span> <span class="n">z</span>

    <span class="n">vendor_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">z</span><span class="p">[</span><span class="n">z</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">rfind</span><span class="p">(</span><span class="s">&#39;.&#39;</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">2</span><span class="p">])</span>
    <span class="n">html</span> <span class="o">=</span> <span class="n">codecs</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">br</span><span class="o">.</span><span class="n">source</span><span class="p">(),</span><span class="s">&#39;utf8&#39;</span><span class="p">,</span><span class="s">&#39;ignore&#39;</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">vend_name</span> <span class="o">=</span> <span class="n">getTagsByAttr</span><span class="p">(</span><span class="n">html</span><span class="p">,</span> <span class="s">&#39;span&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;id&#39;</span><span class="p">:</span><span class="s">&#39;VendorName&#39;</span><span class="p">},</span><span class="n">contents</span><span class="o">=</span><span class="bp">False</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">getText</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">continue_processing</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">                    update seamless_closed </span>
<span class="s">                    set </span>
<span class="s">                        inactive = true,</span>
<span class="s">                        inactive_on = &#39;now&#39;::timestamp with time zone,</span>
<span class="s">                        sl_link = &#39;</span><span class="si">%s</span><span class="s">&#39;</span>
<span class="s">                    where vend_name ilike concat(&#39;</span><span class="si">%%</span><span class="s">&#39;,&#39;</span><span class="si">%s</span><span class="s">&#39;,&#39;</span><span class="si">%%</span><span class="s">&#39;)&quot;&quot;&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">sl_link</span><span class="p">,</span><span class="n">it</span><span class="p">[:</span><span class="n">it</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&quot;&#39;&quot;</span><span class="p">)]))</span>
        <span class="n">continue_processing</span> <span class="o">=</span> <span class="bp">False</span>

    <span class="k">if</span> <span class="n">continue_processing</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span>
    
        <span class="k">if</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">                select count(*) c from seamless</span>
<span class="s">                where vend_id = &#39;</span><span class="si">%(vend_id)s</span><span class="s">&#39;</span>
<span class="s">                &quot;&quot;&quot;</span><span class="o">%</span><span class="p">{</span><span class="s">&#39;vend_id&#39;</span><span class="p">:</span><span class="n">vendor_id</span><span class="p">},</span><span class="n">engine</span><span class="p">)</span><span class="o">.</span><span class="n">c</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">pass</span>
        
        <span class="k">else</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>    <span class="n">br</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">find_element_by_id</span><span class="p">(</span><span class="s">&quot;fancybox-close&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>
            <span class="k">except</span><span class="p">:</span> <span class="k">pass</span>

            <span class="n">update_pgsql_with_seamless_page_content</span><span class="p">(</span><span class="n">br</span><span class="p">)</span>
        
        <span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">                update seamless_closed sc</span>
<span class="s">                set </span>
<span class="s">                    upd_seamless = true,</span>
<span class="s">                    sl_link = &#39;</span><span class="si">%(sl_link)s</span><span class="s">&#39;</span>
<span class="s">                from seamless s</span>
<span class="s">                where s.vend_id = &#39;</span><span class="si">%(v_id)s</span><span class="s">&#39;</span>
<span class="s">                    &quot;&quot;&quot;</span><span class="o">%</span><span class="p">{</span><span class="s">&#39;v_id&#39;</span><span class="p">:</span><span class="n">vendor_id</span><span class="p">,</span>
                        <span class="s">&#39;sl_link&#39;</span><span class="p">:</span><span class="n">sl_link</span><span class="p">})</span>

    <span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">        update seamless_closed sc</span>
<span class="s">        set </span>
<span class="s">            last_updated = &#39;now&#39;::timestamp with time zone,</span>
<span class="s">            sl_link = &#39;</span><span class="si">%s</span><span class="s">&#39;</span>
<span class="s">        where vend_name ilike concat(&#39;</span><span class="si">%%</span><span class="s">&#39;,&#39;</span><span class="si">%s</span><span class="s">&#39;,&#39;</span><span class="si">%%</span><span class="s">&#39;)&quot;&quot;&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">sl_link</span><span class="p">,</span><span class="n">it</span><span class="p">[:</span><span class="n">it</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&quot;&#39;&quot;</span><span class="p">)]))</span>

<span class="k">print</span> <span class="s">&#39;done!&#39;</span>
<span class="n">beep</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># 3. scrape all known sl vendors -- worked 2014.11.17</span>
<span class="o">!</span>pkill -f firefox

<span class="c"># d = pd.read_sql(&quot;&quot;&quot; select id,sl_link from seamless</span>
<span class="c">#                     where upd_vend_content is null</span>
<span class="c">#                     or address is null</span>
<span class="c">#                     or age(&#39;now&#39;::timestamp with time zone,upd_vend_content) &gt; interval &#39;1 day&#39;</span>
<span class="c">#                 &quot;&quot;&quot;,engine)</span>
                        
<span class="n">d</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s">&quot;&quot;&quot; </span>
<span class="s">                    </span>
<span class="s">                    select * from seamless </span>
<span class="s">                    where upd_vend_content is null</span>
<span class="s">                    and sl_link is not null</span>
<span class="s">                    </span>
<span class="s">                &quot;&quot;&quot;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
                                           
<span class="n">sl_links</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">sl_link</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

<span class="c"># br=scraper(&#39;phantom&#39;).browser</span>
<span class="n">br</span><span class="o">=</span><span class="n">scraper</span><span class="p">(</span><span class="s">&#39;firefox&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">browser</span>

<span class="n">base_url</span><span class="o">=</span><span class="s">&#39;http://www.seamless.com/food-delivery/&#39;</span>
<span class="n">first_link</span> <span class="o">=</span> <span class="n">sl_links</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">url</span><span class="o">=</span><span class="n">base_url</span><span class="o">+</span><span class="n">first_link</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">base_url</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span>
<span class="n">br</span><span class="o">.</span><span class="n">open_page</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">br</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">find_element_by_id</span><span class="p">(</span><span class="s">&quot;fancybox-close&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>
<span class="k">except</span><span class="p">:</span>
    <span class="k">pass</span>
<span class="n">update_pgsql_with_seamless_page_content</span><span class="p">(</span><span class="n">br</span><span class="p">)</span>
<span class="n">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="n">skipped</span><span class="o">=</span><span class="mi">0</span>
<span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">sl_links</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
    <span class="n">url</span><span class="o">=</span><span class="n">base_url</span><span class="o">+</span><span class="n">it</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">base_url</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span>
    <span class="n">br</span><span class="o">.</span><span class="n">open_page</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">update_pgsql_with_seamless_page_content</span><span class="p">(</span><span class="n">br</span><span class="p">)</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="n">beep</span><span class="p">()</span>
<span class="c">#         raise SystemError()</span>
        <span class="n">current_url</span> <span class="o">=</span> <span class="s">&quot;&#39;&quot;</span><span class="o">+</span><span class="n">br</span><span class="o">.</span><span class="n">get_url</span><span class="p">()</span><span class="o">+</span><span class="s">&quot;&#39;&quot;</span>
        <span class="o">%</span><span class="k">sql</span> <span class="n">postgres</span><span class="nd">@routing</span> <span class="n">update</span> <span class="n">seamless</span> <span class="nb">set</span> <span class="n">inactive</span><span class="o">=</span><span class="n">true</span> <span class="n">where</span> <span class="n">sl_link</span> <span class="o">=</span> <span class="err">$</span><span class="n">current_url</span>
        <span class="n">skipped</span><span class="o">+=</span><span class="mi">1</span>

<span class="n">beep</span><span class="p">()</span>
<span class="n">beep</span><span class="p">()</span>
<span class="k">print</span> <span class="n">skipped</span><span class="p">,</span><span class="s">&#39;skipped&#39;</span>
<span class="k">print</span> <span class="s">&#39;done!&#39;</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># code scraps for testing</span>

<span class="c"># open local html file</span>
<span class="c"># f=codecs.open(&#39;/Users/admin/Desktop/seamless/vendor_pages/9337.html&#39;,&#39;r&#39;,&#39;utf-8&#39;)</span>
<span class="c"># html=f.read()</span>
<span class="c"># f.close()</span>

<span class="c"># update_pgsql_with_seamless_page_content(br)</span>
<span class="c"># html=br.source()</span>
<span class="n">current_url</span> <span class="o">=</span> <span class="n">br</span><span class="o">.</span><span class="n">get_url</span><span class="p">()</span>
<span class="c"># %sql postgres@routing select count(*) from seamless where vend_id=5763</span>
<span class="o">%</span><span class="k">sql</span> <span class="n">postgres</span><span class="nd">@routing</span> <span class="n">update</span> <span class="n">seamless</span> <span class="nb">set</span> <span class="n">inactive</span><span class="o">=</span><span class="n">true</span> <span class="n">where</span> <span class="n">sl_link</span> <span class="o">=</span> <span class="err">$</span><span class="n">current_url</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># OLD (after 11/17/14 fix) -- cleanup f(x)s after initial pull  [ THIS SCRAPING NEEDS WORK !! ]</span>

<span class="c"># STEP 1:  populate &#39;vend_id&#39; from &#39;sl_link&#39;</span>
<span class="n">cmd1</span><span class="o">=</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">update seamless</span>
<span class="s">set vend_id = substring(sl_link from &#39;[[:punct:]]([[:digit:]]*)[[:punct:]][r]$&#39;)::integer</span>
<span class="s">where vend_id is null;</span>
<span class="s">&quot;&quot;&quot;</span>

<span class="c"># STEP 2:  add count of &#39;vend_id&#39; to &#39;vend_cnt&#39;</span>
<span class="n">cmd2</span><span class="o">=</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">drop table if exists tmp;</span>

<span class="s">create table tmp as</span>
<span class="s">select vend_id,(select sum(case b when s.vend_id then 1 else 0 end)</span>
<span class="s">                 from unnest(A) as dt(b)) vend_cnt</span>
<span class="s">from</span>
<span class="s">    (select array_agg(vend_id) A from seamless) as f1,</span>
<span class="s">    seamless s;</span>

<span class="s">alter table tmp add column id serial primary key;</span>
<span class="s">update tmp set id = nextval(pg_get_serial_sequence(&#39;tmp&#39;,&#39;id&#39;));</span>
<span class="s">&quot;&quot;&quot;</span>
<span class="n">cmd2</span><span class="o">=</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">update seamless s</span>
<span class="s">set vend_cnt = t.vend_cnt</span>
<span class="s">from tmp t</span>
<span class="s">where s.vend_id=t.vend_id;</span>
<span class="s">&quot;&quot;&quot;</span>
<span class="c"># drop table tmp;</span>

<span class="c"># %sql postgres@routing $cmd1</span>
<span class="o">%</span><span class="k">sql</span> <span class="n">postgres</span><span class="nd">@routing</span> <span class="err">$</span><span class="n">cmd2</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># --------------------------- check data for inconsistancies</span>
<span class="n">vend_without_vend_id</span> <span class="o">=</span> <span class="o">%</span><span class="k">sql</span> <span class="n">postgres</span><span class="nd">@routing</span> <span class="n">select</span> <span class="n">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="n">c</span> <span class="kn">from</span> <span class="nn">seamless</span> <span class="nn">where</span> <span class="nn">vend_id</span> <span class="nn">is</span> <span class="nn">null</span>
<span class="n">num_with_vend_id</span> <span class="o">=</span> <span class="o">%</span><span class="k">sql</span> <span class="n">postgres</span><span class="nd">@routing</span> <span class="n">select</span> <span class="n">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="n">c</span> <span class="kn">from</span> <span class="nn">seamless</span> <span class="nn">where</span> <span class="nn">vend_id</span> <span class="nn">is</span> <span class="nn">not</span> <span class="nn">null</span>
<span class="n">uniq_num_with_vend_id</span> <span class="o">=</span> <span class="o">%</span><span class="k">sql</span> <span class="n">postgres</span><span class="nd">@routing</span> <span class="n">select</span> <span class="n">count</span><span class="p">(</span><span class="n">distinct</span> <span class="n">vend_id</span><span class="p">)</span> <span class="n">c</span> <span class="kn">from</span> <span class="nn">seamless</span> <span class="nn">where</span> <span class="nn">vend_id</span> <span class="nn">is</span> <span class="nn">not</span> <span class="nn">null</span>

<span class="k">print</span> <span class="n">vend_without_vend_id</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span><span class="o">.</span><span class="n">c</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="s">&#39;</span><span class="se">\t</span><span class="s"> vend_without_vend_id&#39;</span>
<span class="k">print</span> <span class="n">num_with_vend_id</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span><span class="o">.</span><span class="n">c</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="s">&#39;</span><span class="se">\t</span><span class="s"> num_with_vend_id&#39;</span>
<span class="k">print</span> <span class="n">uniq_num_with_vend_id</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span><span class="o">.</span><span class="n">c</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="s">&#39;</span><span class="se">\t</span><span class="s"> uniq_num_with_vend_id&#39;</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># --------------------------- consolidate overlapping SEAMLESS data</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s">&#39;select * from seamless where vend_cnt&gt;1&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
<span class="n">d</span><span class="p">[</span><span class="s">&#39;upd_vend_content&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">upd_vend_content</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">)</span>
<span class="n">d</span><span class="p">[</span><span class="s">&#39;upd_vend_content&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">upd_vend_content</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="bp">None</span> <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">==</span><span class="s">&#39;nat&#39;</span> <span class="k">else</span> <span class="n">s</span><span class="p">)</span>
<span class="n">d</span><span class="p">[</span><span class="s">&#39;upd_search_links&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">upd_search_links</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">)</span>
<span class="n">d</span><span class="p">[</span><span class="s">&#39;upd_search_links&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">upd_search_links</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="bp">None</span> <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">==</span><span class="s">&#39;nat&#39;</span> <span class="k">else</span> <span class="n">s</span><span class="p">)</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">sort</span><span class="p">([</span><span class="s">&#39;vend_id&#39;</span><span class="p">,</span><span class="s">&#39;upd_vend_content&#39;</span><span class="p">,</span><span class="s">&#39;upd_search_links&#39;</span><span class="p">],</span><span class="n">ascending</span><span class="o">=</span><span class="p">[</span><span class="bp">True</span><span class="p">,</span><span class="bp">False</span><span class="p">,</span><span class="bp">False</span><span class="p">])</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="c"># take latest upd_vend_content updated as primary</span>
<span class="c"># add latest upd_search_links where not null</span>
<span class="n">g</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s">&#39;vend_id&#39;</span><span class="p">)</span>
<span class="n">g_keys</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">groups</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="n">f</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">ix</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">,:]</span>
<span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">g_keys</span><span class="p">:</span>
    <span class="n">vend</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">get_group</span><span class="p">(</span><span class="n">it</span><span class="p">)</span>

    <span class="n">r0</span> <span class="o">=</span> <span class="n">vend</span><span class="o">.</span><span class="n">irow</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">copy</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">r1</span> <span class="o">=</span> <span class="n">vend</span><span class="o">.</span><span class="n">irow</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">rd1</span><span class="o">=</span> <span class="n">r1</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
    <span class="n">skip_vals</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;none&#39;</span><span class="p">,</span><span class="s">&#39;nan&#39;</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">r1</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">skip_vals</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="nb">unicode</span><span class="p">(</span><span class="n">v</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>          <span class="c"># 1. if not a blnk/null value in secondary</span>
            <span class="k">if</span> <span class="n">skip_vals</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="nb">unicode</span><span class="p">(</span><span class="n">r0</span><span class="p">[</span><span class="n">k</span><span class="p">])</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span><span class="o">!=</span><span class="mi">0</span><span class="p">:</span>  <span class="c"># 2. and if blank/null value in primary</span>
                <span class="n">r0</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>                                   <span class="c"># 3. update primary from secondary</span>

    <span class="n">f</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">r0</span><span class="p">,</span><span class="n">ignore_index</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span> <span class="s">&quot;&quot;&quot;drop table if exists tmp;&quot;&quot;&quot;</span><span class="p">)</span>
<span class="n">f</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s">&#39;tmp&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
<span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">    alter table tmp add column gid serial primary key;</span>
<span class="s">    update tmp set gid = nextval(pg_get_serial_sequence(&#39;tmp&#39;,&#39;gid&#39;));</span>
<span class="s">    &quot;&quot;&quot;</span><span class="p">)</span>

<span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">delete from seamless s</span>
<span class="s">using (select array_agg(t.vend_id) A from tmp t) as f1</span>
<span class="s">where array[s.vend_id] &amp;&amp; A;</span>
<span class="s">&quot;&quot;&quot;</span><span class="p">)</span>


<span class="n">cmd</span><span class="o">=</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">create table tmp2 as</span>
<span class="s">select gid,upd_search_links from tmp</span>
<span class="s">where upd_search_links!=&#39;None&#39;;</span>

<span class="s">update tmp set upd_search_links_tmp = null;</span>

<span class="s">update tmp t set upd_search_links_tmp = t2.upd_search_links::timestamp with time zone</span>
<span class="s">from tmp2 t2</span>
<span class="s">where t2.gid = t.gid;</span>

<span class="s">drop table tmp2;</span>

<span class="s">create table tmp2 as</span>
<span class="s">select gid,upd_vend_content from tmp</span>
<span class="s">where upd_vend_content!=&#39;None&#39;;</span>

<span class="s">update tmp set upd_vend_content_tmp = null;</span>

<span class="s">update tmp t set upd_vend_content_tmp = t2.upd_vend_content::timestamp with time zone</span>
<span class="s">from tmp2 t2</span>
<span class="s">where t2.gid = t.gid;</span>

<span class="s">drop table tmp2;</span>

<span class="s">alter table tmp drop column upd_search_links;</span>
<span class="s">alter table tmp drop column upd_vend_content;</span>
<span class="s">alter table tmp rename column upd_search_links_tmp to upd_search_links;</span>
<span class="s">alter table tmp rename column upd_vend_content_tmp to upd_vend_content;</span>
<span class="s">&quot;&quot;&quot;</span>
<span class="c"># after removing all NaN using:</span>
<span class="c">#      update tmp set rating_perc = null where rating_perc::text=&#39;NaN&#39;</span>
<span class="c"># ...</span>
<span class="n">cmd</span><span class="o">=</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">insert into seamless (  sl_link,</span>
<span class="s">                        vend_id,</span>
<span class="s">                        vend_name,</span>
<span class="s">                        description,</span>
<span class="s">                        cuisine,</span>
<span class="s">                        catering,</span>
<span class="s">                        address,</span>
<span class="s">                        zipcode,</span>
<span class="s">                        phone,</span>
<span class="s">                        price,</span>
<span class="s">                        rating,</span>
<span class="s">                        rating_total,</span>
<span class="s">                        rating_perc,</span>
<span class="s">                        reviews,</span>
<span class="s">                        pickup_est,</span>
<span class="s">                        deliv_est,</span>
<span class="s">                        deliv_min,</span>
<span class="s">                        deliv_fee,</span>
<span class="s">                        perc_fee,</span>
<span class="s">                        search_link_blob,</span>
<span class="s">                        estimates_blob,</span>
<span class="s">                        upd_search_links,</span>
<span class="s">                        upd_vend_content,</span>
<span class="s">                        inactive,</span>
<span class="s">                        bbl,</span>
<span class="s">                        lot_cnt,</span>
<span class="s">                        geom,</span>
<span class="s">                        id,</span>
<span class="s">                        norm_addr,</span>
<span class="s">                        vend_cnt)</span>
<span class="s">select</span>
<span class="s">            t.sl_link,</span>
<span class="s">            t.vend_id,</span>
<span class="s">            t.vend_name,</span>
<span class="s">            t.description,</span>
<span class="s">            t.cuisine,</span>
<span class="s">            t.catering,</span>
<span class="s">            t.address,</span>
<span class="s">            t.zipcode,</span>
<span class="s">            t.phone,</span>
<span class="s">            t.price,</span>
<span class="s">            t.rating,</span>
<span class="s">            t.rating_total,</span>
<span class="s">            t.rating_perc,</span>
<span class="s">            t.reviews,</span>
<span class="s">            t.pickup_est,</span>
<span class="s">            t.deliv_est,</span>
<span class="s">            t.deliv_min,</span>
<span class="s">            t.deliv_fee,</span>
<span class="s">            t.perc_fee,</span>
<span class="s">            t.search_link_blob,</span>
<span class="s">            t.estimates_blob,</span>
<span class="s">            t.upd_search_links,</span>
<span class="s">            t.upd_vend_content,</span>
<span class="s">            t.inactive,</span>
<span class="s">            t.bbl,</span>
<span class="s">            t.lot_cnt,</span>
<span class="s">            t.geom,</span>
<span class="s">            t.id,</span>
<span class="s">            t.norm_addr,</span>
<span class="s">            t.vend_cnt</span>
<span class="s">from tmp t;</span>

<span class="s">drop table tmp;</span>
<span class="s">&quot;&quot;&quot;</span>
<span class="o">%</span><span class="k">sql</span> <span class="n">postgres</span><span class="nd">@routing</span> <span class="err">$</span><span class="n">cmd</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Yelp:">Yelp:<a class="anchor-link" href="#Yelp:">&#182;</a></h1>
</div>
</div>
</div>

<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># create table yelp</span>
<span class="n">cmd</span><span class="o">=</span><span class="s">&quot;&quot;&quot;</span>

<span class="s">CREATE TABLE yelp</span>
<span class="s">(</span>
<span class="s">  id serial primary key,</span>
<span class="s">  yelp_id text,</span>
<span class="s">  vend_name text,</span>
<span class="s">  phone integer,</span>
<span class="s">  address text,</span>
<span class="s">  city text,</span>
<span class="s">  state_code text,</span>
<span class="s">  postal_code integer,</span>
<span class="s">  display_phone text,</span>
<span class="s">  is_claimed boolean,</span>
<span class="s">  is_closed boolean,</span>
<span class="s">  menu_date_updated text,</span>
<span class="s">  menu_provider text,</span>
<span class="s">  rating double precision,</span>
<span class="s">  review_count integer,</span>
<span class="s">  categories text,</span>
<span class="s">  url text,</span>
<span class="s">  latitude double precision,</span>
<span class="s">  longitude double precision,</span>
<span class="s">  geo_accuracy double precision</span>

<span class="s">);</span>


<span class="s">&quot;&quot;&quot;</span>

<span class="o">%</span><span class="k">sql</span> <span class="n">postgres</span><span class="nd">@routing</span> <span class="err">$</span><span class="n">cmd</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># Yelp API info:</span>
<span class="n">pgs</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;General Info&#39;</span><span class="p">:</span> <span class="s">&#39;http://www.yelp.com/developers/documentation&#39;</span><span class="p">,</span>   <span class="c"># need to authenticate ..?..</span>
       <span class="s">&#39;Search API&#39;</span><span class="p">:</span> <span class="s">&#39;http://www.yelp.com/developers/documentation/v2/search_api&#39;</span><span class="p">,</span>
       <span class="s">&#39;Business API&#39;</span><span class="p">:</span> <span class="s">&#39;http://www.yelp.com/developers/documentation/v2/business&#39;</span><span class="p">}</span>

<span class="c"># r = urlopen(pgs[&#39;Search API&#39;]).read()</span>
<span class="c"># t = codecs.encode(r,&#39;utf8&#39;,&#39;ignore&#39;)</span>
<span class="c"># h = HTML(t); h</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># 0. get results from yelp address search and update pgsql</span>

<span class="kn">import</span> <span class="nn">sys</span>
<span class="nb">reload</span><span class="p">(</span><span class="n">sys</span><span class="p">)</span>
<span class="n">sys</span><span class="o">.</span><span class="n">setdefaultencoding</span><span class="p">(</span><span class="s">&#39;UTF8&#39;</span><span class="p">)</span>

<span class="k">try</span><span class="p">:</span>
    
<span class="c">#     s = pd.read_sql(&quot;&quot;&quot; select gid,address,zipcode from scrape_lattice</span>
<span class="c">#                         where yelp_updated is null</span>
<span class="c">#                         or age(&#39;now&#39;::timestamp with time zone,yelp_updated) &gt; interval &#39;1 day&#39;</span>
<span class="c">#                     &quot;&quot;&quot;,engine)</span>
    <span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s">&quot;&quot;&quot; select gid,address,zipcode from scrape_lattice where yelp_updated &gt; &#39;2014-11-24 18:22:59.045361-05&#39;::timestamp with time zone;</span>
<span class="s">                    &quot;&quot;&quot;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
    
    <span class="n">p</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">title</span><span class="p">()</span><span class="o">+</span><span class="s">&#39;, New York, NY &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">])),</span><span class="nb">zip</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">address</span><span class="p">,</span><span class="n">s</span><span class="o">.</span><span class="n">zipcode</span><span class="p">))</span>

    
    <span class="n">br</span><span class="o">=</span><span class="n">scraper</span><span class="p">(</span><span class="s">&#39;phantom&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">browser</span>
    <span class="c">#!pkill -f firefox</span>
    <span class="c"># br=scraper(&#39;firefox&#39;).browser</span>
    
    
    <span class="n">d_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;vend_name&#39;</span><span class="p">,</span><span class="s">&#39;url&#39;</span><span class="p">,</span><span class="s">&#39;phone&#39;</span><span class="p">]</span>
    <span class="n">base_url</span><span class="o">=</span><span class="s">&#39;http://www.yelp.com&#39;</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)):</span>
        <span class="n">gid</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="s">&#39;gid&#39;</span><span class="p">]</span>
        <span class="n">search_addr</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>

        <span class="n">url</span> <span class="o">=</span> <span class="n">base_url</span><span class="o">+</span><span class="s">&#39;/search?find_desc=&#39;</span><span class="o">+</span><span class="n">safe_url</span><span class="p">(</span><span class="s">&#39;restaurant&#39;</span><span class="p">)</span><span class="o">+</span><span class="s">&#39;&amp;find_loc=&#39;</span><span class="o">+</span><span class="n">safe_url</span><span class="p">(</span><span class="n">search_addr</span><span class="p">)</span>
        <span class="n">br</span><span class="o">.</span><span class="n">open_page</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">getTagsByAttr</span><span class="p">(</span><span class="n">br</span><span class="o">.</span><span class="n">source</span><span class="p">(),</span> <span class="s">&#39;div&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span><span class="s">&#39;no-results&#39;</span><span class="p">},</span><span class="n">contents</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span> <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">html</span> <span class="o">=</span> <span class="n">codecs</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">br</span><span class="o">.</span><span class="n">source</span><span class="p">(),</span><span class="s">&#39;utf8&#39;</span><span class="p">,</span><span class="s">&#39;ignore&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;ylist&#39;</span><span class="p">)</span><span class="o">==-</span><span class="mi">1</span><span class="p">:</span>
                <span class="n">res_num</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;  update scrape_lattice</span>
<span class="s">                                    set yelp_cnt=</span><span class="si">%s</span><span class="s">,</span>
<span class="s">                                    yelp_updated=&#39;now&#39;::timestamp with time zone </span>
<span class="s">                                where gid=</span><span class="si">%s</span><span class="s"></span>
<span class="s">                           &quot;&quot;&quot;</span><span class="o">%</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">res_num</span><span class="p">),</span><span class="n">gid</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">a</span> <span class="o">=</span> <span class="n">getTagsByAttr</span><span class="p">(</span><span class="n">html</span><span class="p">,</span> <span class="s">&#39;span&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span><span class="s">&#39;pagination-results-window&#39;</span><span class="p">},</span><span class="n">contents</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
                <span class="n">res_num</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">re_findall</span><span class="p">(</span><span class="s">r&#39;\d+&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="n">a</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;of&#39;</span><span class="p">)</span><span class="o">+</span><span class="mi">3</span><span class="p">:]))[</span><span class="mi">0</span><span class="p">])</span>
                <span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;  update scrape_lattice</span>
<span class="s">                                    set yelp_cnt=</span><span class="si">%s</span><span class="s">,</span>
<span class="s">                                    yelp_updated=&#39;now&#39;::timestamp with time zone </span>
<span class="s">                                 where gid=</span><span class="si">%s</span><span class="s"></span>
<span class="s">                           &quot;&quot;&quot;</span><span class="o">%</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">res_num</span><span class="p">),</span><span class="n">gid</span><span class="p">))</span>
                <span class="n">d</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">d_cols</span><span class="p">)</span>
                <span class="n">first_page</span><span class="p">,</span><span class="n">last_page</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span><span class="bp">False</span>

                <span class="k">while</span> <span class="n">last_page</span> <span class="o">==</span> <span class="bp">False</span><span class="p">:</span>

                    <span class="n">a</span> <span class="o">=</span> <span class="n">getTagsByAttr</span><span class="p">(</span><span class="n">html</span><span class="p">,</span> <span class="s">&#39;ul&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span><span class="s">&#39;ylist ylist-bordered search-results&#39;</span><span class="p">},</span><span class="n">contents</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
                    <span class="n">names</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">findAll</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span><span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span><span class="s">&#39;biz-name&#39;</span><span class="p">})</span>
                    <span class="n">names_proper</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">contents</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\xe2\x80\x99</span><span class="s">&#39;</span><span class="p">,</span><span class="s">&quot;&#39;&quot;</span><span class="p">)</span>
                                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">contents</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">0</span> <span class="k">else</span> <span class="s">&#39;&#39;</span><span class="p">,</span><span class="n">names</span><span class="p">)</span>
                    <span class="n">links</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">base_url</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s">&#39;href&#39;</span><span class="p">]),</span><span class="n">names</span><span class="p">)</span>
                    <span class="n">phones</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">findAll</span><span class="p">(</span><span class="s">&#39;span&#39;</span><span class="p">,</span><span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span><span class="s">&#39;biz-phone&#39;</span><span class="p">})</span>
                    <span class="n">phones_proper</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">re_findall</span><span class="p">(</span><span class="s">r&#39;\d+&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">))),</span><span class="n">phones</span><span class="p">)</span>

                    <span class="n">z</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;vend_name&#39;</span><span class="p">:</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">names_proper</span><span class="p">),</span>
                         <span class="s">&#39;url&#39;</span><span class="p">:</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">links</span><span class="p">),</span>
                         <span class="s">&#39;phone&#39;</span><span class="p">:</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">phones_proper</span><span class="p">)}</span>
                    <span class="n">d</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">z</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="n">d_cols</span><span class="p">),</span><span class="n">ignore_index</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>        

                    <span class="n">next_page</span> <span class="o">=</span> <span class="n">getSoup</span><span class="p">(</span><span class="n">html</span><span class="p">)</span><span class="o">.</span><span class="n">findAll</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span><span class="s">&#39;page-option prev-next&#39;</span><span class="p">})</span>
                    <span class="k">if</span> <span class="n">first_page</span><span class="o">==</span><span class="bp">True</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">next_page</span><span class="p">)</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>
                        <span class="n">next_page_link</span> <span class="o">=</span> <span class="n">base_url</span> <span class="o">+</span> <span class="n">next_page</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s">&#39;href&#39;</span><span class="p">]</span>
                        <span class="n">br</span><span class="o">.</span><span class="n">open_page</span><span class="p">(</span><span class="n">next_page_link</span><span class="p">)</span>
                        <span class="n">html</span> <span class="o">=</span> <span class="n">codecs</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">br</span><span class="o">.</span><span class="n">source</span><span class="p">(),</span><span class="s">&#39;utf8&#39;</span><span class="p">,</span><span class="s">&#39;ignore&#39;</span><span class="p">)</span>
                        <span class="n">first_page</span> <span class="o">=</span> <span class="bp">False</span>
                    <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">next_page</span><span class="p">)</span><span class="o">==</span><span class="mi">2</span><span class="p">:</span>
                        <span class="n">next_page_link</span> <span class="o">=</span> <span class="n">base_url</span> <span class="o">+</span> <span class="n">next_page</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s">&#39;href&#39;</span><span class="p">]</span>
                        <span class="n">br</span><span class="o">.</span><span class="n">open_page</span><span class="p">(</span><span class="n">next_page_link</span><span class="p">)</span>
                        <span class="n">html</span> <span class="o">=</span> <span class="n">codecs</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">br</span><span class="o">.</span><span class="n">source</span><span class="p">(),</span><span class="s">&#39;utf8&#39;</span><span class="p">,</span><span class="s">&#39;ignore&#39;</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">last_page</span> <span class="o">=</span> <span class="bp">True</span>
                        <span class="k">break</span>

                    <span class="c"># upsert to yelp</span>
                    <span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                    <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;drop table if exists tmp&#39;</span><span class="p">)</span>
                    <span class="n">d</span><span class="p">[</span><span class="s">&#39;id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="p">[</span><span class="n">s</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;/biz/&#39;</span><span class="p">)</span><span class="o">+</span><span class="mi">5</span><span class="p">:])</span>
                    <span class="n">d</span><span class="p">[</span><span class="s">&#39;phone_as_text&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">phone</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
                    <span class="n">d</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s">&#39;tmp&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>

                    <span class="n">cmd</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">                        with upd as (</span>
<span class="s">                            update yelp y</span>
<span class="s">                            set</span>
<span class="s">                                id = t.id,</span>
<span class="s">                                vend_name = t.vend_name,</span>
<span class="s">                                url = t.url,</span>
<span class="s">                                phone_as_text = t.phone_as_text,</span>
<span class="s">                                upd_search_links = &#39;now&#39;::timestamp with time zone</span>
<span class="s">                            from tmp t</span>
<span class="s">                            where y.url = t.url</span>
<span class="s">                            returning t.url url</span>
<span class="s">                        )</span>
<span class="s">                        insert into yelp ( id,</span>
<span class="s">                                           vend_name,</span>
<span class="s">                                           url,</span>
<span class="s">                                           phone_as_text,</span>
<span class="s">                                           upd_search_links)</span>
<span class="s">                        select</span>
<span class="s">                            t.id,</span>
<span class="s">                            t.vend_name,</span>
<span class="s">                            t.url,</span>
<span class="s">                            t.phone_as_text,</span>
<span class="s">                            &#39;now&#39;::timestamp with time zone</span>
<span class="s">                        from</span>
<span class="s">                            tmp t,</span>
<span class="s">                            (select array_agg(f.url) upd_vend_urls from upd f) as f2</span>
<span class="s">                        where (not upd_vend_urls &amp;&amp; array[t.url]</span>
<span class="s">                            or upd_vend_urls is null);&quot;&quot;&quot;</span>
                    <span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                    <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>
                    <span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                    <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;drop table tmp;&quot;&quot;&quot;</span><span class="p">)</span>
<span class="k">except</span><span class="p">:</span>
    <span class="k">pass</span>
<span class="n">beep</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># 1. get results from yelp Search API with scape lattice addresses and update pgsql -- worked 2014.11.17</span>

<span class="c"># s = pd.read_sql(&quot;&quot;&quot; select gid,address,zipcode from scrape_lattice</span>
<span class="c">#                     where yelp_updated is null</span>
<span class="c">#                     or age(&#39;now&#39;::timestamp with time zone,yelp_updated) &gt; interval &#39;1 day&#39;</span>
<span class="c">#                 &quot;&quot;&quot;,engine)</span>

<span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s">&quot;&quot;&quot; select gid,address,zipcode from scrape_lattice</span>
<span class="s">                    where yelp_updated&lt;=&#39;2014-11-24 18:21:07.012204-05:00&#39;::timestamp with time zone;</span>
<span class="s">                &quot;&quot;&quot;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>

<span class="n">p</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">title</span><span class="p">()</span><span class="o">+</span><span class="s">&#39;, New York, NY &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">])),</span><span class="nb">zip</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">address</span><span class="p">,</span><span class="n">s</span><span class="o">.</span><span class="n">zipcode</span><span class="p">))</span>

<span class="c"># (from scrape_lattice creation function) [ADD TO SETTINGS DB]</span>
<span class="n">pt_buff_in_miles</span> <span class="o">=</span> <span class="mf">0.2</span>
<span class="n">lattice_table_name</span> <span class="o">=</span> <span class="s">&#39;scrape_lattice&#39;</span>
<span class="c"># 1 miles = 1609.34 meters</span>
<span class="n">radius_in_meters</span> <span class="o">=</span> <span class="mi">1600</span> <span class="o">*</span> <span class="n">pt_buff_in_miles</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)):</span>
    <span class="n">gid</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="s">&#39;gid&#39;</span><span class="p">]</span>
    <span class="n">search_addr</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
    <span class="n">d</span> <span class="o">=</span> <span class="n">yelp_search_api</span><span class="p">(</span><span class="n">search_addr</span><span class="p">,</span><span class="n">radius_in_meters</span><span class="p">)</span>
    <span class="c"># try:</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;  update scrape_lattice</span>
<span class="s">                            set yelp_cnt=</span><span class="si">%s</span><span class="s">,</span>
<span class="s">                            yelp_updated=&#39;now&#39;::timestamp with time zone </span>
<span class="s">                        where gid=</span><span class="si">%s</span><span class="s"></span>
<span class="s">                   &quot;&quot;&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s">&#39;total&#39;</span><span class="p">],</span><span class="n">gid</span><span class="p">))</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="n">j_dump</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s">&#39;businesses&#39;</span><span class="p">]))</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
        <span class="n">all_res_cols</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
        <span class="n">df</span><span class="p">[</span><span class="s">&#39;vend_name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">name</span>
        <span class="k">if</span> <span class="n">all_res_cols</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s">&#39;phone&#39;</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
            <span class="n">df</span><span class="p">[</span><span class="s">&#39;phone&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">phone</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">isdigit</span><span class="p">()</span> <span class="k">else</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">df</span><span class="p">[</span><span class="s">&#39;phone&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="n">df</span><span class="p">[</span><span class="s">&#39;address&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span>
                                        <span class="bp">None</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="s">&#39;address&#39;</span><span class="p">])</span><span class="o">==</span><span class="mi">0</span>
                                        <span class="k">else</span> <span class="n">s</span><span class="p">[</span><span class="s">&#39;address&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">df</span><span class="p">[</span><span class="s">&#39;display_address&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span>
                                        <span class="bp">None</span> <span class="k">if</span> <span class="n">s</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s">&#39;display_address&#39;</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span>
                                        <span class="k">else</span> <span class="s">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="s">&#39;display_address&#39;</span><span class="p">]))</span>
        <span class="n">df</span><span class="p">[</span><span class="s">&#39;neighborhoods&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span>
                                        <span class="bp">None</span> <span class="k">if</span> <span class="n">s</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s">&#39;neighborhoods&#39;</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span>
                                        <span class="k">else</span> <span class="n">s</span><span class="p">[</span><span class="s">&#39;neighborhoods&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">df</span><span class="p">[</span><span class="s">&#39;city&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span>
                                     <span class="bp">None</span> <span class="k">if</span> <span class="n">s</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s">&#39;city&#39;</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span>
                                     <span class="k">else</span> <span class="n">s</span><span class="p">[</span><span class="s">&#39;city&#39;</span><span class="p">])</span>
        <span class="n">df</span><span class="p">[</span><span class="s">&#39;state_code&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span>
                                           <span class="bp">None</span> <span class="k">if</span> <span class="n">s</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s">&#39;state_code&#39;</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span>
                                           <span class="k">else</span> <span class="n">s</span><span class="p">[</span><span class="s">&#39;state_code&#39;</span><span class="p">])</span>        
        <span class="n">df</span><span class="p">[</span><span class="s">&#39;postal_code&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> 
                                            <span class="bp">None</span> <span class="k">if</span> <span class="n">s</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s">&#39;postal_code&#39;</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span>
                                            <span class="k">else</span> <span class="nb">int</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="s">&#39;postal_code&#39;</span><span class="p">]))</span>
        <span class="n">df</span><span class="p">[</span><span class="s">&#39;latitude&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span>
                                           <span class="bp">None</span> <span class="k">if</span> <span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s">&#39;coordinate&#39;</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span> <span class="ow">or</span> 
                                                    <span class="n">s</span><span class="p">[</span><span class="s">&#39;coordinate&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s">&#39;latitude&#39;</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span><span class="p">)</span>
                                           <span class="k">else</span> <span class="n">s</span><span class="p">[</span><span class="s">&#39;coordinate&#39;</span><span class="p">][</span><span class="s">&#39;latitude&#39;</span><span class="p">])</span>
        <span class="n">df</span><span class="p">[</span><span class="s">&#39;longitude&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span>
                                           <span class="bp">None</span> <span class="k">if</span> <span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s">&#39;coordinate&#39;</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span> <span class="ow">or</span> 
                                                    <span class="n">s</span><span class="p">[</span><span class="s">&#39;coordinate&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s">&#39;longitude&#39;</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span><span class="p">)</span>
                                           <span class="k">else</span> <span class="n">s</span><span class="p">[</span><span class="s">&#39;coordinate&#39;</span><span class="p">][</span><span class="s">&#39;longitude&#39;</span><span class="p">])</span>
        <span class="n">df</span><span class="p">[</span><span class="s">&#39;geo_accuracy&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> 
                                             <span class="bp">None</span> <span class="k">if</span> <span class="n">s</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s">&#39;geo_accuracy&#39;</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span>
                                             <span class="k">else</span> <span class="nb">int</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="s">&#39;geo_accuracy&#39;</span><span class="p">]))</span>
        <span class="k">if</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s">&#39;menu_date_updated&#39;</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
            <span class="n">df</span><span class="p">[</span><span class="s">&#39;menu_date_updated&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">df</span><span class="p">[</span><span class="s">&#39;menu_date_updated&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">menu_date_updated</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span>
                <span class="bp">None</span> <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">isdigit</span><span class="p">()</span><span class="o">==</span><span class="bp">False</span>
                <span class="k">else</span> <span class="n">datetime</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span>  <span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>  <span class="p">)</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">&#39;%Y-%m-</span><span class="si">%d</span><span class="s"> %H:%M:%S&#39;</span><span class="p">)</span> 
                                                                <span class="p">)</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">ix</span><span class="p">[:,[</span>   <span class="s">&#39;id&#39;</span><span class="p">,</span>
                         <span class="s">&#39;vend_name&#39;</span><span class="p">,</span>
                         <span class="s">&#39;phone&#39;</span><span class="p">,</span>
                         <span class="s">&#39;address&#39;</span><span class="p">,</span>
                         <span class="s">&#39;display_address&#39;</span><span class="p">,</span>
                         <span class="s">&#39;neighborhoods&#39;</span><span class="p">,</span>
                         <span class="s">&#39;city&#39;</span><span class="p">,</span>
                         <span class="s">&#39;state_code&#39;</span><span class="p">,</span>
                         <span class="s">&#39;postal_code&#39;</span><span class="p">,</span>
                         <span class="s">&#39;display_phone&#39;</span><span class="p">,</span>        
                         <span class="s">&#39;is_claimed&#39;</span><span class="p">,</span>
                         <span class="s">&#39;is_closed&#39;</span><span class="p">,</span>
                         <span class="s">&#39;menu_date_updated&#39;</span><span class="p">,</span>
                         <span class="s">&#39;menu_provider&#39;</span><span class="p">,</span>
                         <span class="s">&#39;rating&#39;</span><span class="p">,</span>
                         <span class="s">&#39;review_count&#39;</span><span class="p">,</span>
                         <span class="s">&#39;categories&#39;</span><span class="p">,</span>
                         <span class="s">&#39;url&#39;</span><span class="p">,</span>
                         <span class="s">&#39;latitude&#39;</span><span class="p">,</span>
                         <span class="s">&#39;longitude&#39;</span><span class="p">,</span>
                         <span class="s">&#39;geo_accuracy&#39;</span><span class="p">]]</span>

        <span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span> <span class="s">&quot;&quot;&quot;drop table if exists tmp;&quot;&quot;&quot;</span><span class="p">)</span>
        <span class="n">df</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s">&#39;tmp&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>

        <span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>

<span class="s">            alter table tmp add column gid serial primary key;</span>
<span class="s">            update tmp set gid = nextval(pg_get_serial_sequence(&#39;tmp&#39;,&#39;gid&#39;));</span>

<span class="s">            update tmp set phone = null where phone::text = &#39;NaN&#39;;</span>
<span class="s">            update tmp set postal_code = null where postal_code::text = &#39;NaN&#39;;</span>

<span class="s">            &quot;&quot;&quot;</span><span class="p">)</span>

        <span class="c"># upsert &#39;tmp&#39; to &#39;yelp&#39;</span>
        <span class="n">cmd</span><span class="o">=</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">        with upd as (</span>
<span class="s">            update yelp y</span>
<span class="s">            set</span>
<span class="s">                id = t.id,</span>
<span class="s">                vend_name = t.vend_name,</span>
<span class="s">                phone = t.phone::bigint,</span>
<span class="s">                address = t.address,</span>
<span class="s">                display_address = t.display_address,</span>
<span class="s">                neighborhoods = t.neighborhoods,</span>
<span class="s">                city = t.city,</span>
<span class="s">                state_code = t.state_code,</span>
<span class="s">                postal_code = t.postal_code::bigint,</span>
<span class="s">                display_phone = t.display_phone,</span>
<span class="s">                is_claimed = t.is_claimed,</span>
<span class="s">                is_closed = t.is_closed,</span>
<span class="s">                menu_date_updated = t.menu_date_updated,</span>
<span class="s">                menu_provider = t.menu_provider,</span>
<span class="s">                rating = t.rating,</span>
<span class="s">                review_count = t.review_count,</span>
<span class="s">                categories = t.categories,</span>
<span class="s">                url = t.url,</span>
<span class="s">                latitude = t.latitude,</span>
<span class="s">                longitude = t.longitude,</span>
<span class="s">                geo_accuracy = t.geo_accuracy,</span>
<span class="s">                last_api_update = &#39;now&#39;::timestamp with time zone</span>
<span class="s">            from tmp t</span>
<span class="s">            where y.id = t.id</span>
<span class="s">            returning t.id id</span>
<span class="s">        )</span>
<span class="s">        insert into yelp (  id,</span>
<span class="s">                            vend_name,</span>
<span class="s">                            phone,</span>
<span class="s">                            address,</span>
<span class="s">                            display_address,</span>
<span class="s">                            neighborhoods,</span>
<span class="s">                            city,</span>
<span class="s">                            state_code,</span>
<span class="s">                            postal_code,</span>
<span class="s">                            display_phone,</span>
<span class="s">                            is_claimed,</span>
<span class="s">                            is_closed,</span>
<span class="s">                            menu_date_updated,</span>
<span class="s">                            menu_provider,</span>
<span class="s">                            rating,</span>
<span class="s">                            review_count,</span>
<span class="s">                            categories,</span>
<span class="s">                            url,</span>
<span class="s">                            latitude,</span>
<span class="s">                            longitude,</span>
<span class="s">                            geo_accuracy,</span>
<span class="s">                            last_api_update</span>
<span class="s">                        )</span>
<span class="s">        select</span>
<span class="s">            t.id,</span>
<span class="s">            t.vend_name,</span>
<span class="s">            t.phone::bigint,</span>
<span class="s">            t.address,</span>
<span class="s">            t.display_address,</span>
<span class="s">            t.neighborhoods,</span>
<span class="s">            t.city,</span>
<span class="s">            t.state_code,</span>
<span class="s">            t.postal_code::bigint,</span>
<span class="s">            t.display_phone,</span>
<span class="s">            t.is_claimed,</span>
<span class="s">            t.is_closed,</span>
<span class="s">            t.menu_date_updated,</span>
<span class="s">            t.menu_provider,</span>
<span class="s">            t.rating,</span>
<span class="s">            t.review_count,</span>
<span class="s">            t.categories,</span>
<span class="s">            t.url,</span>
<span class="s">            t.latitude,</span>
<span class="s">            t.longitude,</span>
<span class="s">            t.geo_accuracy,</span>
<span class="s">            &#39;now&#39;::timestamp with time zone</span>
<span class="s">        from</span>
<span class="s">            tmp t,</span>
<span class="s">            (select array_agg(f.id) upd_ids from upd f) as f1</span>
<span class="s">        where (not upd_ids &amp;&amp; array[t.id]</span>
<span class="s">            or upd_ids is null);</span>


<span class="s">        drop table tmp;</span>

<span class="s">        &quot;&quot;&quot;</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>

<span class="k">print</span> <span class="s">&#39;done!&#39;</span>
<span class="n">beep</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">c1</span><span class="o">=</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">select count(*) from yelp </span>
<span class="s">where upd_search_links is not null</span>
<span class="s">and last_api_update is null</span>
<span class="s">&quot;&quot;&quot;</span>
<span class="c"># 7512</span>
<span class="n">c2</span><span class="o">=</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">select count(*) from yelp </span>
<span class="s">where age(&#39;now&#39;::timestamp with time zone,last_api_update) &lt; interval &#39;1 day&#39;</span>
<span class="s">&quot;&quot;&quot;</span>
<span class="c"># 3949</span>
<span class="n">c3</span><span class="o">=</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">select count(*) from scrape_lattice </span>
<span class="s">where yelp_updated&lt;=&#39;2014-11-24 18:21:07.012204-05:00&#39;::timestamp with time zone</span>
<span class="s">&#39;2014-11-24 18:44:31.38073-05&#39;</span>
<span class="s">&quot;&quot;&quot;</span>
<span class="c"># 2788</span>
<span class="c"># %sql postgres@routing $c1</span>
<span class="c"># %sql postgres@routing $c2</span>
<span class="c"># %sql postgres@routing $c1</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># 2. use yelp.url to get hours from each page and update pgsql -- worked 2014.11.03 </span>

<span class="c"># d = pd.read_sql(&quot;&quot;&quot; select gid,url from yelp</span>
<span class="c">#                     where hours_updated is null</span>
<span class="c">#                     or age(hours_updated,&#39;now&#39;::timestamp with time zone) &gt; interval &#39;1 day&#39;</span>
<span class="c">#                 &quot;&quot;&quot;,engine)</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s">&quot;&quot;&quot; select gid,url from yelp</span>
<span class="s">                    where hours_updated is null</span>
<span class="s">                &quot;&quot;&quot;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
                        
<span class="n">y_links</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="n">br</span><span class="o">=</span><span class="n">scraper</span><span class="p">(</span><span class="s">&#39;phantom&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">browser</span>
<span class="c"># !pkill -f firefox</span>
<span class="c"># br=scraper(&#39;firefox&#39;).browser</span>

<span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">y_links</span><span class="p">:</span>
    <span class="n">br</span><span class="o">.</span><span class="n">open_page</span><span class="p">(</span><span class="n">it</span><span class="p">)</span>
    <span class="n">html</span> <span class="o">=</span> <span class="n">codecs</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">br</span><span class="o">.</span><span class="n">source</span><span class="p">(),</span><span class="s">&#39;utf8&#39;</span><span class="p">,</span><span class="s">&#39;ignore&#39;</span><span class="p">)</span>

    <span class="c"># extract yelp page data</span>
    <span class="n">vend_data</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;url&#39;</span><span class="p">:</span><span class="n">it</span><span class="p">}</span>

    <span class="c"># biz info</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">s</span><span class="o">=</span><span class="n">getSoup</span><span class="p">(</span><span class="n">html</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;h3&#39;</span><span class="p">,</span><span class="n">text</span><span class="o">=</span><span class="s">&#39;More business info&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find_parent</span><span class="p">()</span>
        <span class="n">t</span><span class="o">=</span><span class="n">s</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;div&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span><span class="s">&#39;short-def-list&#39;</span><span class="p">},</span><span class="n">contents</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="n">d_keys</span><span class="o">=</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">get_text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s"> &#39;</span><span class="p">)),</span><span class="n">t</span><span class="o">.</span><span class="n">findAll</span><span class="p">(</span><span class="s">&#39;dt&#39;</span><span class="p">))</span>
        <span class="n">d_vals</span><span class="o">=</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">get_text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s"> &#39;</span><span class="p">)),</span><span class="n">t</span><span class="o">.</span><span class="n">findAll</span><span class="p">(</span><span class="s">&#39;dd&#39;</span><span class="p">))</span>
        <span class="n">d</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">d_keys</span><span class="p">,</span><span class="n">d_vals</span><span class="p">))</span>
        <span class="n">vend_data</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s">&#39;extra_info&#39;</span><span class="p">:</span><span class="nb">str</span><span class="p">(</span><span class="n">d</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&quot;&#39;&quot;</span><span class="p">,</span><span class="s">&#39;&quot;&#39;</span><span class="p">)})</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="n">vend_data</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s">&#39;extra_info&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">})</span>

    <span class="c"># hours info</span>
    <span class="n">t</span><span class="o">=</span><span class="n">getTagsByAttr</span><span class="p">(</span><span class="n">html</span><span class="p">,</span> <span class="s">&#39;table&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span><span class="s">&#39;table table-simple hours-table&#39;</span><span class="p">},</span><span class="n">contents</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">t</span><span class="p">)</span><span class="o">!=</span><span class="mi">0</span><span class="p">:</span>
        <span class="n">t</span><span class="o">=</span><span class="n">t</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">days</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">get_text</span><span class="p">()),</span><span class="n">t</span><span class="o">.</span><span class="n">findAll</span><span class="p">(</span><span class="s">&#39;th&#39;</span><span class="p">,</span><span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;scope&#39;</span><span class="p">:</span><span class="s">&#39;row&#39;</span><span class="p">}))</span>
        <span class="n">hours</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">get_text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s"> &#39;</span><span class="p">)),</span><span class="n">t</span><span class="o">.</span><span class="n">findAll</span><span class="p">(</span><span class="s">&#39;td&#39;</span><span class="p">,</span><span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span><span class="s">&#39;&#39;</span><span class="p">}))</span>
        <span class="n">h</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">days</span><span class="p">,</span><span class="n">hours</span><span class="p">))</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&quot;&#39;&quot;</span><span class="p">,</span><span class="s">&#39;&quot;&#39;</span><span class="p">)</span>
        <span class="n">vend_data</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s">&#39;hours&#39;</span><span class="p">:</span><span class="n">h</span><span class="p">})</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">vend_data</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s">&#39;hours&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">})</span>

    <span class="c"># biz website</span>
    <span class="n">t</span><span class="o">=</span><span class="n">getTagsByAttr</span><span class="p">(</span><span class="n">html</span><span class="p">,</span> <span class="s">&#39;div&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span><span class="s">&#39;biz-website&#39;</span><span class="p">},</span><span class="n">contents</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">t</span><span class="p">)</span><span class="o">!=</span><span class="mi">0</span><span class="p">:</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">t</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s">&#39;href&#39;</span><span class="p">]</span>
        <span class="n">s</span> <span class="o">=</span><span class="n">t</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;url=&#39;</span><span class="p">)</span><span class="o">+</span><span class="mi">4</span>
        <span class="n">e</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;&amp;&#39;</span><span class="p">,</span><span class="n">s</span><span class="p">)</span>
        <span class="n">biz_website</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">unquote</span><span class="p">(</span><span class="n">t</span><span class="p">[</span><span class="n">s</span><span class="p">:</span><span class="n">e</span><span class="p">]))</span>
        <span class="n">vend_data</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s">&#39;website&#39;</span><span class="p">:</span><span class="n">biz_website</span><span class="p">})</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">vend_data</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s">&#39;website&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">})</span>

    <span class="c"># non-yelp menu link</span>
    <span class="n">t</span><span class="o">=</span><span class="n">getTagsByAttr</span><span class="p">(</span><span class="n">html</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span><span class="s">&#39;i-wrap ig-wrap-common i-external-link-common-wrap ig-wrap-common-r external-menu&#39;</span><span class="p">},</span><span class="n">contents</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">t</span><span class="p">)</span><span class="o">!=</span><span class="mi">0</span><span class="p">:</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">t</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s">&#39;href&#39;</span><span class="p">]</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;url=&#39;</span><span class="p">)</span><span class="o">+</span><span class="mi">4</span>
        <span class="n">biz_menu_page</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">unquote</span><span class="p">(</span><span class="n">t</span><span class="p">[</span><span class="n">s</span><span class="p">:]))</span>
        <span class="n">vend_data</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s">&#39;menu_page&#39;</span><span class="p">:</span><span class="n">biz_menu_page</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&quot;&#39;&quot;</span><span class="p">,</span><span class="s">&quot;&#39;&#39;&quot;</span><span class="p">)})</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">vend_data</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s">&#39;menu_page&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">})</span>

    <span class="c"># price range</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">price_range</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">getTagsByAttr</span><span class="p">(</span><span class="n">html</span><span class="p">,</span> <span class="s">&#39;dd&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span><span class="s">&#39;nowrap price-description&#39;</span><span class="p">},</span><span class="n">contents</span><span class="o">=</span><span class="bp">False</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s"> $&#39;</span><span class="p">))</span>
        <span class="n">vend_data</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s">&#39;price_range&#39;</span><span class="p">:</span><span class="n">price_range</span><span class="p">})</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="n">vend_data</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s">&#39;price_range&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">})</span>

    <span class="c"># online ordering?</span>
    <span class="n">t</span><span class="o">=</span><span class="n">getTagsByAttr</span><span class="p">(</span><span class="n">html</span><span class="p">,</span> <span class="s">&#39;div&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;data-ro-mode-action&#39;</span><span class="p">:</span><span class="s">&#39;place an order&#39;</span><span class="p">},</span><span class="n">contents</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span> <span class="c"># null return</span>
    <span class="n">online_ordering</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">t</span><span class="p">)</span><span class="o">!=</span><span class="mi">0</span>
    <span class="c">#t=getTagsByAttr(html, &#39;div&#39;, {&#39;class&#39;:&#39;island platform yform js-platform no-js-hidden&#39;},contents=False)</span>
    <span class="n">vend_data</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s">&#39;online_ordering&#39;</span><span class="p">:</span><span class="n">online_ordering</span><span class="p">})</span>

    <span class="c"># push to pgsql</span>
    <span class="n">cmd</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">    update yelp set </span>
<span class="s">        extra_info = &#39;</span><span class="si">%(extra_info)s</span><span class="s">&#39;,</span>
<span class="s">        hours = &#39;</span><span class="si">%(hours)s</span><span class="s">&#39;,</span>
<span class="s">        hours_updated = &#39;now&#39;::timestamp with time zone,</span>
<span class="s">        menu_page = &#39;</span><span class="si">%(menu_page)s</span><span class="s">&#39;,</span>
<span class="s">        online_ordering=</span><span class="si">%(online_ordering)s</span><span class="s">,</span>
<span class="s">        price_range=&#39;</span><span class="si">%(price_range)s</span><span class="s">&#39;,</span>
<span class="s">        website = &#39;</span><span class="si">%(website)s</span><span class="s">&#39;</span>
<span class="s">    where url = &#39;</span><span class="si">%(url)s</span><span class="s">&#39;</span>

<span class="s">    &quot;&quot;&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">vend_data</span><span class="p">)</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>

<span class="k">print</span> <span class="s">&#39;done!&#39;</span>
<span class="n">beep</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Misc.">Misc.<a class="anchor-link" href="#Misc.">&#182;</a></h1>
</div>
</div>
</div>

<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># kill firefox instances on remote</span>

<span class="o">!</span>pkill -f firefox
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># list column info for database &#39;X&#39;</span>
<span class="n">X</span><span class="o">=</span><span class="s">&#39;yelp&#39;</span>
<span class="n">cmd</span><span class="o">=</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">select column_name, data_type, character_maximum_length </span>
<span class="s">from INFORMATION_SCHEMA.COLUMNS where table_name = &#39;</span><span class="si">%s</span><span class="s">&#39;</span>
<span class="s">&quot;&quot;&quot;</span><span class="o">%</span><span class="k">X</span>
<span class="n">cmd1</span><span class="o">=</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">select * from </span><span class="si">%s</span><span class="s"> limit 1</span>
<span class="s">&quot;&quot;&quot;</span><span class="o">%</span><span class="k">X</span>
<span class="o">%</span><span class="k">sql</span> <span class="n">postgres</span><span class="nd">@routing</span> <span class="err">$</span><span class="n">cmd1</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># from IPython.display import display</span>
<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">HTML</span>
<span class="n">html</span> <span class="o">=</span> <span class="n">HTML</span><span class="p">(</span><span class="n">h</span><span class="p">);</span> 
<span class="n">html</span><span class="o">.</span><span class="n">data</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[99]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># sample data</span>
<span class="n">pdf</span> <span class="o">=</span> <span class="n">sample_contract</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="s">&lt;!DOCTYPE pdf2xml SYSTEM &quot;pdf2xml.dtd&quot;&gt;</span>

<span class="s">&lt;pdf2xml producer=&quot;poppler&quot; version=&quot;0.22.5&quot;&gt;</span>
<span class="s">&lt;page number=&quot;1&quot; position=&quot;absolute&quot; top=&quot;0&quot; left=&quot;0&quot; height=&quot;1188&quot; width=&quot;918&quot;&gt;</span>
<span class="s">&lt;fontspec id=&quot;0&quot; size=&quot;14&quot; family=&quot;Times&quot; color=&quot;#717171&quot;/&gt;</span>
<span class="s">&lt;fontspec id=&quot;1&quot; size=&quot;19&quot; family=&quot;Times&quot; color=&quot;#000000&quot;/&gt;</span>
<span class="s">&lt;fontspec id=&quot;2&quot; size=&quot;14&quot; family=&quot;Times&quot; color=&quot;#000000&quot;/&gt;</span>
<span class="s">&lt;fontspec id=&quot;3&quot; size=&quot;15&quot; family=&quot;Times&quot; color=&quot;#000000&quot;/&gt;</span>
<span class="s">&lt;fontspec id=&quot;4&quot; size=&quot;14&quot; family=&quot;Times&quot; color=&quot;#000000&quot;/&gt;</span>
<span class="s">&lt;fontspec id=&quot;5&quot; size=&quot;15&quot; family=&quot;Times&quot; color=&quot;#000000&quot;/&gt;</span>
<span class="s">&lt;fontspec id=&quot;6&quot; size=&quot;14&quot; family=&quot;Times&quot; color=&quot;#212121&quot;/&gt;</span>
<span class="s">&lt;fontspec id=&quot;7&quot; size=&quot;14&quot; family=&quot;Times&quot; color=&quot;#000000&quot;/&gt;</span>
<span class="s">&lt;fontspec id=&quot;8&quot; size=&quot;-1&quot; family=&quot;Times&quot; color=&quot;#000000&quot;/&gt;</span>
<span class="s">&lt;text top=&quot;1118&quot; left=&quot;440&quot; width=&quot;42&quot; height=&quot;11&quot; font=&quot;0&quot;&gt;1 of 1 &lt;/text&gt;</span>
<span class="s">&lt;text top=&quot;37&quot; left=&quot;275&quot; width=&quot;373&quot; height=&quot;19&quot; font=&quot;1&quot;&gt;&lt;b&gt;SERVICE AGREEMENT â Trial Period &lt;/b&gt;&lt;/text&gt;</span>
<span class="s">&lt;text top=&quot;74&quot; left=&quot;143&quot; width=&quot;193&quot; height=&quot;15&quot; font=&quot;2&quot;&gt;IN THIS AGREEMENT, by &lt;/text&gt;</span>
<span class="s">&lt;text top=&quot;93&quot; left=&quot;194&quot; width=&quot;4&quot; height=&quot;15&quot; font=&quot;2&quot;&gt; &lt;/text&gt;</span>
<span class="s">&lt;text top=&quot;112&quot; left=&quot;194&quot; width=&quot;4&quot; height=&quot;15&quot; font=&quot;2&quot;&gt; &lt;/text&gt;</span>
<span class="s">&lt;text top=&quot;131&quot; left=&quot;194&quot; width=&quot;4&quot; height=&quot;15&quot; font=&quot;2&quot;&gt; &lt;/text&gt;</span>
<span class="s">&lt;text top=&quot;74&quot; left=&quot;467&quot; width=&quot;53&quot; height=&quot;15&quot; font=&quot;2&quot;&gt;and by  &lt;/text&gt;</span>
<span class="s">&lt;text top=&quot;93&quot; left=&quot;467&quot; width=&quot;4&quot; height=&quot;15&quot; font=&quot;2&quot;&gt; &lt;/text&gt;</span>
<span class="s">&lt;text top=&quot;112&quot; left=&quot;467&quot; width=&quot;4&quot; height=&quot;15&quot; font=&quot;2&quot;&gt; &lt;/text&gt;</span>
<span class="s">&lt;text top=&quot;131&quot; left=&quot;467&quot; width=&quot;4&quot; height=&quot;15&quot; font=&quot;2&quot;&gt; &lt;/text&gt;</span>
<span class="s">&lt;text top=&quot;187&quot; left=&quot;143&quot; width=&quot;4&quot; height=&quot;15&quot; font=&quot;2&quot;&gt; &lt;/text&gt;</span>
<span class="s">&lt;text top=&quot;187&quot; left=&quot;467&quot; width=&quot;4&quot; height=&quot;15&quot; font=&quot;2&quot;&gt; &lt;/text&gt;</span>
<span class="s">&lt;text top=&quot;222&quot; left=&quot;143&quot; width=&quot;8&quot; height=&quot;15&quot; font=&quot;2&quot;&gt;  &lt;/text&gt;</span>
<span class="s">&lt;text top=&quot;222&quot; left=&quot;332&quot; width=&quot;85&quot; height=&quot;15&quot; font=&quot;2&quot;&gt; (âAporoâ),  &lt;/text&gt;</span>
<span class="s">&lt;text top=&quot;222&quot; left=&quot;467&quot; width=&quot;8&quot; height=&quot;15&quot; font=&quot;2&quot;&gt;  &lt;/text&gt;</span>
<span class="s">&lt;text top=&quot;222&quot; left=&quot;656&quot; width=&quot;85&quot; height=&quot;15&quot; font=&quot;2&quot;&gt; (âClientâ),   &lt;/text&gt;</span>
<span class="s">&lt;text top=&quot;259&quot; left=&quot;100&quot; width=&quot;207&quot; height=&quot;15&quot; font=&quot;2&quot;&gt;the parties agree to as follows:  &lt;/text&gt;</span>
<span class="s">&lt;text top=&quot;298&quot; left=&quot;100&quot; width=&quot;17&quot; height=&quot;18&quot; font=&quot;3&quot;&gt;&lt;b&gt;I. &lt;/b&gt;&lt;/text&gt;</span>
<span class="s">&lt;text top=&quot;299&quot; left=&quot;140&quot; width=&quot;191&quot; height=&quot;15&quot; font=&quot;4&quot;&gt;&lt;b&gt;Background of Agreement &lt;/b&gt;&lt;/text&gt;</span>
<span class="s">&lt;text top=&quot;333&quot; left=&quot;140&quot; width=&quot;36&quot; height=&quot;19&quot; font=&quot;5&quot;&gt;1.01 &lt;/text&gt;</span>
<span class="s">&lt;text top=&quot;334&quot; left=&quot;194&quot; width=&quot;613&quot; height=&quot;15&quot; font=&quot;2&quot;&gt;Aporo is a logistics company with the aim of providing reliable and comprehensive delivery &lt;/text&gt;</span>
<span class="s">&lt;text top=&quot;353&quot; left=&quot;194&quot; width=&quot;365&quot; height=&quot;15&quot; font=&quot;2&quot;&gt;services as needed to clients in the restaurant business. &lt;/text&gt;</span>
<span class="s">&lt;text top=&quot;387&quot; left=&quot;140&quot; width=&quot;36&quot; height=&quot;19&quot; font=&quot;5&quot;&gt;1.02 &lt;/text&gt;</span>
<span class="s">&lt;text top=&quot;388&quot; left=&quot;194&quot; width=&quot;596&quot; height=&quot;15&quot; font=&quot;2&quot;&gt;In order to provide reliable services, Aporo initially requests that potential clients provide &lt;/text&gt;</span>
<span class="s">&lt;text top=&quot;407&quot; left=&quot;194&quot; width=&quot;381&quot; height=&quot;15&quot; font=&quot;2&quot;&gt;quantitative information about current delivery demands. &lt;/text&gt;</span>
<span class="s">&lt;text top=&quot;442&quot; left=&quot;140&quot; width=&quot;36&quot; height=&quot;19&quot; font=&quot;5&quot;&gt;1.03 &lt;/text&gt;</span>
<span class="s">&lt;text top=&quot;443&quot; left=&quot;194&quot; width=&quot;626&quot; height=&quot;15&quot; font=&quot;2&quot;&gt;Client is considering the services of Aporo and understands there will be a trial period prior to &lt;/text&gt;</span>
<span class="s">&lt;text top=&quot;462&quot; left=&quot;194&quot; width=&quot;319&quot; height=&quot;15&quot; font=&quot;2&quot;&gt;Aporo assuming any of Clientâs delivery needs. &lt;/text&gt;</span>
<span class="s">&lt;text top=&quot;497&quot; left=&quot;100&quot; width=&quot;24&quot; height=&quot;18&quot; font=&quot;3&quot;&gt;&lt;b&gt;II. &lt;/b&gt;&lt;/text&gt;</span>
<span class="s">&lt;text top=&quot;498&quot; left=&quot;140&quot; width=&quot;111&quot; height=&quot;15&quot; font=&quot;4&quot;&gt;&lt;b&gt;Aporo Services &lt;/b&gt;&lt;/text&gt;</span>
<span class="s">&lt;text top=&quot;531&quot; left=&quot;140&quot; width=&quot;33&quot; height=&quot;15&quot; font=&quot;2&quot;&gt;2.01 &lt;/text&gt;</span>
<span class="s">&lt;text top=&quot;531&quot; left=&quot;194&quot; width=&quot;81&quot; height=&quot;15&quot; font=&quot;2&quot;&gt;Aporo will: &lt;/text&gt;</span>
<span class="s">&lt;text top=&quot;552&quot; left=&quot;66&quot; width=&quot;4&quot; height=&quot;15&quot; font=&quot;2&quot;&gt; &lt;/text&gt;</span>
<span class="s">&lt;text top=&quot;574&quot; left=&quot;174&quot; width=&quot;496&quot; height=&quot;16&quot; font=&quot;6&quot;&gt;â¢  provide, and offer assistance to install, a printer driver for Clientâs use,  &lt;/text&gt;</span>
<span class="s">&lt;text top=&quot;604&quot; left=&quot;174&quot; width=&quot;654&quot; height=&quot;16&quot; font=&quot;6&quot;&gt;â¢  receive Clientâs food orders from any web ordering services such as Seamless, GrubHub, Yelp, &lt;/text&gt;</span>
<span class="s">&lt;text top=&quot;631&quot; left=&quot;194&quot; width=&quot;44&quot; height=&quot;15&quot; font=&quot;6&quot;&gt;etcâ¦, &lt;/text&gt;</span>
<span class="s">&lt;text top=&quot;662&quot; left=&quot;174&quot; width=&quot;597&quot; height=&quot;16&quot; font=&quot;6&quot;&gt;â¢  analyze and assess Clientâs delivery needs for a period of time no longer than 2 weeks, &lt;/text&gt;</span>
<span class="s">&lt;text top=&quot;692&quot; left=&quot;174&quot; width=&quot;628&quot; height=&quot;16&quot; font=&quot;6&quot;&gt;â¢  consult with Client and provide, if requested, a price schedule intended to reduce direct and &lt;/text&gt;</span>
<span class="s">&lt;text top=&quot;719&quot; left=&quot;194&quot; width=&quot;433&quot; height=&quot;15&quot; font=&quot;6&quot;&gt;indirect costs associated with Clientâs current delivery operation. &lt;/text&gt;</span>
<span class="s">&lt;text top=&quot;748&quot; left=&quot;174&quot; width=&quot;4&quot; height=&quot;15&quot; font=&quot;6&quot;&gt; &lt;/text&gt;</span>
<span class="s">&lt;text top=&quot;767&quot; left=&quot;100&quot; width=&quot;424&quot; height=&quot;15&quot; font=&quot;4&quot;&gt;&lt;b&gt;III.   Addition Terms and/or Conditions to this Agreement: &lt;/b&gt;&lt;/text&gt;</span>
<span class="s">&lt;text top=&quot;799&quot; left=&quot;86&quot; width=&quot;4&quot; height=&quot;15&quot; font=&quot;2&quot;&gt; &lt;/text&gt;</span>
<span class="s">&lt;text top=&quot;799&quot; left=&quot;120&quot; width=&quot;4&quot; height=&quot;15&quot; font=&quot;2&quot;&gt; &lt;/text&gt;</span>
<span class="s">&lt;text top=&quot;799&quot; left=&quot;140&quot; width=&quot;4&quot; height=&quot;15&quot; font=&quot;2&quot;&gt; &lt;/text&gt;</span>
<span class="s">&lt;text top=&quot;831&quot; left=&quot;86&quot; width=&quot;4&quot; height=&quot;15&quot; font=&quot;2&quot;&gt; &lt;/text&gt;</span>
<span class="s">&lt;text top=&quot;864&quot; left=&quot;86&quot; width=&quot;4&quot; height=&quot;15&quot; font=&quot;2&quot;&gt; &lt;/text&gt;</span>
<span class="s">&lt;text top=&quot;896&quot; left=&quot;86&quot; width=&quot;4&quot; height=&quot;15&quot; font=&quot;2&quot;&gt; &lt;/text&gt;</span>
<span class="s">&lt;text top=&quot;929&quot; left=&quot;89&quot; width=&quot;4&quot; height=&quot;15&quot; font=&quot;2&quot;&gt; &lt;/text&gt;</span>
<span class="s">&lt;text top=&quot;929&quot; left=&quot;429&quot; width=&quot;4&quot; height=&quot;15&quot; font=&quot;2&quot;&gt; &lt;/text&gt;</span>
<span class="s">&lt;text top=&quot;929&quot; left=&quot;505&quot; width=&quot;4&quot; height=&quot;15&quot; font=&quot;2&quot;&gt; &lt;/text&gt;</span>
<span class="s">&lt;text top=&quot;981&quot; left=&quot;90&quot; width=&quot;326&quot; height=&quot;15&quot; font=&quot;2&quot;&gt;_______________________________________ &lt;/text&gt;</span>
<span class="s">&lt;text top=&quot;948&quot; left=&quot;429&quot; width=&quot;4&quot; height=&quot;15&quot; font=&quot;2&quot;&gt; &lt;/text&gt;</span>
<span class="s">&lt;text top=&quot;981&quot; left=&quot;506&quot; width=&quot;326&quot; height=&quot;15&quot; font=&quot;2&quot;&gt;_______________________________________ &lt;/text&gt;</span>
<span class="s">&lt;text top=&quot;1000&quot; left=&quot;91&quot; width=&quot;342&quot; height=&quot;15&quot; font=&quot;2&quot;&gt;Seth Chase                                                    Date   &lt;/text&gt;</span>
<span class="s">&lt;text top=&quot;1000&quot; left=&quot;798&quot; width=&quot;35&quot; height=&quot;15&quot; font=&quot;2&quot;&gt;Date &lt;/text&gt;</span>
<span class="s">&lt;text top=&quot;1019&quot; left=&quot;89&quot; width=&quot;66&quot; height=&quot;15&quot; font=&quot;7&quot;&gt;&lt;i&gt;Principal &lt;/i&gt;&lt;/text&gt;</span>
<span class="s">&lt;text top=&quot;1019&quot; left=&quot;429&quot; width=&quot;4&quot; height=&quot;15&quot; font=&quot;2&quot;&gt; &lt;/text&gt;</span>
<span class="s">&lt;text top=&quot;1019&quot; left=&quot;505&quot; width=&quot;4&quot; height=&quot;15&quot; font=&quot;2&quot;&gt; &lt;/text&gt;</span>
<span class="s">&lt;text top=&quot;1038&quot; left=&quot;86&quot; width=&quot;4&quot; height=&quot;15&quot; font=&quot;2&quot;&gt; &lt;/text&gt;</span>
<span class="s">&lt;text top=&quot;117&quot; left=&quot;523&quot; width=&quot;162&quot; height=&quot;17&quot; font=&quot;4&quot;&gt;&lt;b&gt;Quick Bytes Wifi CafÃ© &lt;/b&gt;&lt;/text&gt;</span>
<span class="s">&lt;text top=&quot;139&quot; left=&quot;524&quot; width=&quot;143&quot; height=&quot;15&quot; font=&quot;2&quot;&gt;300 St. Markâs Place &lt;/text&gt;</span>
<span class="s">&lt;text top=&quot;160&quot; left=&quot;524&quot; width=&quot;150&quot; height=&quot;15&quot; font=&quot;2&quot;&gt;New York, NY 10006 &lt;/text&gt;</span>
<span class="s">&lt;text top=&quot;194&quot; left=&quot;523&quot; width=&quot;107&quot; height=&quot;17&quot; font=&quot;4&quot;&gt;&lt;b&gt;(212) 555-5555 &lt;/b&gt;&lt;/text&gt;</span>
<span class="s">&lt;text top=&quot;193&quot; left=&quot;200&quot; width=&quot;107&quot; height=&quot;17&quot; font=&quot;4&quot;&gt;&lt;b&gt;(646) 389-3450 &lt;/b&gt;&lt;/text&gt;</span>
<span class="s">&lt;text top=&quot;139&quot; left=&quot;200&quot; width=&quot;146&quot; height=&quot;15&quot; font=&quot;2&quot;&gt;121 Madison Avenue &lt;/text&gt;</span>
<span class="s">&lt;text top=&quot;160&quot; left=&quot;200&quot; width=&quot;189&quot; height=&quot;15&quot; font=&quot;2&quot;&gt;New York, NY 10016-7043 &lt;/text&gt;</span>
<span class="s">&lt;text top=&quot;117&quot; left=&quot;199&quot; width=&quot;155&quot; height=&quot;17&quot; font=&quot;4&quot;&gt;&lt;b&gt;Aporo Delivery, LLC &lt;/b&gt;&lt;/text&gt;</span>
<span class="s">&lt;text top=&quot;954&quot; left=&quot;176&quot; width=&quot;155&quot; height=&quot;17&quot; font=&quot;4&quot;&gt;&lt;b&gt;Aporo Delivery, LLC &lt;/b&gt;&lt;/text&gt;</span>
<span class="s">&lt;text top=&quot;108&quot; left=&quot;540&quot; width=&quot;0&quot; height=&quot;0&quot; font=&quot;8&quot;&gt;&lt;b&gt;TA4L&lt;/b&gt;&lt;/text&gt;</span>
<span class="s">&lt;/page&gt;</span>
<span class="s">&lt;/pdf2xml&gt;</span>
<span class="s">&quot;&quot;&quot;</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># create admin user</span>
<span class="o">%</span><span class="k">reload_ext</span> <span class="n">sql</span>
<span class="o">%</span><span class="k">sql</span> <span class="n">postgresql</span><span class="p">:</span><span class="o">//</span><span class="n">postgres</span><span class="p">:</span><span class="n">postgres</span><span class="nd">@192.168.3.52</span><span class="p">:</span><span class="mi">8800</span><span class="o">/</span><span class="n">aprinto</span>
<span class="o">%</span><span class="k">sql</span> <span class="n">postgres</span><span class="nd">@aprinto</span> <span class="n">insert</span> <span class="n">into</span> <span class="n">aprinto_admin</span><span class="p">(</span><span class="n">created</span><span class="p">,</span><span class="n">admin_name</span><span class="p">)</span> <span class="n">values</span><span class="p">(</span><span class="s">&#39;now&#39;</span><span class="p">::</span><span class="n">timestamp</span> <span class="k">with</span> <span class="n">time</span> <span class="n">zone</span><span class="p">,</span><span class="s">&#39;seth&#39;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[104]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># admin f(x)s</span>
<span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span> <span class="k">as</span> <span class="n">soup</span>
<span class="kn">from</span> <span class="nn">re</span> <span class="kn">import</span> <span class="n">findall</span> <span class="k">as</span> <span class="n">re_findall</span>
<span class="kn">from</span> <span class="nn">re</span> <span class="kn">import</span> <span class="n">sub</span> <span class="k">as</span> <span class="n">re_sub</span>
<span class="kn">from</span> <span class="nn">pandas</span> <span class="kn">import</span> <span class="n">DataFrame</span> <span class="k">as</span> <span class="n">pd_DataFrame</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span>
<span class="c"># from logging import getLogger</span>
<span class="c"># from logging import INFO as logging_info</span>
<span class="c"># getLogger(&#39;sqlalchemy.dialects.postgresql&#39;).setLevel(logging_info)</span>
<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s">r&#39;postgresql://postgres:postgres@192.168.3.52:8800/aprinto&#39;</span><span class="p">,</span>
                       <span class="n">encoding</span><span class="o">=</span><span class="s">&#39;utf-8&#39;</span><span class="p">,</span>
                       <span class="n">echo</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">psycopg2</span> <span class="kn">import</span> <span class="n">connect</span> <span class="k">as</span> <span class="n">psycopg2_connect</span>
<span class="n">conn</span> <span class="o">=</span> <span class="n">psycopg2_connect</span><span class="p">(</span><span class="s">&quot;dbname=&#39;aprinto&#39; user=&#39;postgres&#39; host=&#39;192.168.3.52&#39; password=&#39;&#39; port=8800&quot;</span><span class="p">);</span>
<span class="n">cur</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
<span class="c"># Add encoding</span>
<span class="kn">from</span> <span class="nn">sys</span> <span class="kn">import</span> <span class="n">setdefaultencoding</span> <span class="k">as</span> <span class="n">sys_setdefaultencoding</span>
<span class="nb">reload</span><span class="p">(</span><span class="n">sys</span><span class="p">)</span>
<span class="n">sys_setdefaultencoding</span><span class="p">(</span><span class="s">&#39;utf8&#39;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">add_new_vendor_info</span><span class="p">(</span><span class="n">g</span><span class="o">=</span><span class="s">&#39;Parsed PDF&#39;</span><span class="p">):</span>
    <span class="n">parties</span> <span class="o">=</span> <span class="n">g</span><span class="p">[</span> <span class="p">((</span><span class="mi">115</span><span class="o">&lt;=</span><span class="n">g</span><span class="o">.</span><span class="n">top</span><span class="p">)</span><span class="o">&amp;</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">top</span><span class="o">&lt;=</span><span class="mi">165</span><span class="p">))</span> <span class="p">]</span>
    <span class="n">c</span> <span class="o">=</span> <span class="n">g</span><span class="p">[</span> <span class="p">((</span><span class="mi">520</span><span class="o">&lt;=</span><span class="n">g</span><span class="o">.</span><span class="n">left</span><span class="p">)</span><span class="o">&amp;</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">left</span><span class="o">&lt;=</span><span class="mi">530</span><span class="p">))</span> <span class="p">]</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s">&#39;top&#39;</span><span class="p">)</span>
    <span class="n">c</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="nb">unicode</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s">&#39;ignore&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
    <span class="n">vend_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;vend_name&#39;</span><span class="p">,</span><span class="s">&#39;vend_addr&#39;</span><span class="p">,</span><span class="s">&#39;vend_tel&#39;</span><span class="p">]</span>
    <span class="n">T</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">vend_cols</span><span class="p">,[</span><span class="n">c</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">(),</span><span class="n">c</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">+</span><span class="s">&#39;, &#39;</span><span class="o">+</span><span class="n">c</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">(),</span><span class="n">re_sub</span><span class="p">(</span><span class="s">r&#39;[\W_]+&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">c</span><span class="p">[</span><span class="mi">3</span><span class="p">])]))</span>
    <span class="n">v_cnt</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s">&quot;select count(*) c from aprinto_vendor where vend_tel = &#39;</span><span class="si">%(vend_tel)s</span><span class="s">&#39;&quot;</span><span class="o">%</span><span class="k">T</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span><span class="o">.</span><span class="n">c</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">v_cnt</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">            insert into aprinto_vendor(created,vend_name,vend_addr,vend_tel)</span>
<span class="s">            VALUES (&#39;now&#39;::timestamp with time zone,&#39;</span><span class="si">%(vend_name)s</span><span class="s">&#39;,&#39;</span><span class="si">%(vend_addr)s</span><span class="s">&#39;,&#39;</span><span class="si">%(vend_tel)s</span><span class="s">&#39;)&quot;&quot;&quot;</span><span class="o">%</span><span class="k">T</span><span class="p">)</span>
    <span class="k">return</span>

<span class="k">def</span> <span class="nf">parse_pdf_from_admin</span><span class="p">(</span><span class="n">pdf</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A UUID is generated on each install of the Aporo printer driver.  Aprinto only processes PDFs from</span>
<span class="sd">    authenticated printer drivers, which have either admin or vendor credentials.  All other printer </span>
<span class="sd">    drivers are considered &quot;potential_clients.&quot;</span>
<span class="sd">    </span>
<span class="sd">    One way to authenticate users is:</span>
<span class="sd">    </span>
<span class="sd">        1. Print a completed contract from a printer driver registered with admin credentials.</span>
<span class="sd">        2. Parse PDF, get client info from contract, and update DB.</span>
<span class="sd">        3. Wait for same PDF from &quot;potential_client&quot;</span>
<span class="sd">        </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">soup</span><span class="p">(</span><span class="n">pdf</span><span class="p">)</span><span class="o">.</span><span class="n">findAll</span><span class="p">(</span><span class="s">&#39;page&#39;</span><span class="p">)</span>
    <span class="n">cols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;page&#39;</span><span class="p">,</span><span class="s">&#39;font&#39;</span><span class="p">,</span><span class="s">&#39;top&#39;</span><span class="p">,</span><span class="s">&#39;left&#39;</span><span class="p">,</span><span class="s">&#39;width&#39;</span><span class="p">,</span><span class="s">&#39;height&#39;</span><span class="p">,</span><span class="s">&#39;text&#39;</span><span class="p">]</span>
    <span class="n">g</span> <span class="o">=</span> <span class="n">pd_DataFrame</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">cols</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">pg</span> <span class="ow">in</span> <span class="n">x</span><span class="p">:</span>
        <span class="n">pg</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">idx</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">pg</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span>
        <span class="n">pg</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">pg</span><span class="p">)</span>
        <span class="n">line_iter</span> <span class="o">=</span> <span class="n">re_findall</span><span class="p">(</span><span class="s">r&#39;(&lt;text.*?&lt;/text&gt;)&#39;</span><span class="p">,</span><span class="n">pg</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">line_iter</span><span class="p">:</span>
            <span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;page&#39;</span><span class="p">]</span><span class="o">+</span><span class="n">re_findall</span><span class="p">(</span><span class="s">&#39;([a-zA-Z]+)+\=&#39;</span><span class="p">,</span> <span class="n">it</span><span class="p">)</span><span class="o">+</span><span class="p">[</span><span class="s">&#39;text&#39;</span><span class="p">]</span>
            <span class="n">text_attrs</span> <span class="o">=</span> <span class="n">it</span><span class="p">[</span><span class="mi">5</span><span class="p">:</span><span class="n">it</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;&gt;&#39;</span><span class="p">)]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">text_contents</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">soup</span><span class="p">(</span><span class="n">it</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
            <span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="n">idx</span><span class="p">]</span><span class="o">+</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">s</span><span class="p">),</span><span class="n">re_findall</span><span class="p">(</span><span class="s">&#39;[0-9]+&#39;</span><span class="p">,</span> <span class="n">text_attrs</span><span class="p">))</span><span class="o">+</span><span class="p">[</span><span class="n">text_contents</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">text_contents</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="o">!=</span> <span class="s">&#39;&#39;</span><span class="p">:</span>
                <span class="n">g</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)),</span><span class="n">ignore_index</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

    <span class="n">chk_trial_period</span>   <span class="o">=</span>  <span class="n">g</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s">&#39;top&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s">&#39;SERVICE AGREEMENT â Trial Period&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span><span class="o">!=</span><span class="mi">0</span>
    <span class="k">if</span> <span class="n">chk_trial_period</span><span class="p">:</span>  <span class="n">add_new_vendor_info</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>

    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># unknown f(x)s</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="sd">&quot;&quot;&quot;</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># vendor f(x)s</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># ALL F(X)s</span>

<span class="c"># parse_pdf_from_admin(pdf)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Testing-for-APRINTO-server">Testing for APRINTO server<a class="anchor-link" href="#Testing-for-APRINTO-server">&#182;</a></h1>
</div>
</div>
</div>

<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Load-Libraries:">Load Libraries:<a class="anchor-link" href="#Load-Libraries:">&#182;</a></h2>
</div>
</div>
</div>

<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[1]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># Libraries</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">HTML</span>
<span class="c"># r = urlopen(&#39;http://0.0.0.0:8080/&#39;).read()</span>
<span class="c"># h = HTML(r); h</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s">&#39;expand_frame_repr&#39;</span><span class="p">,</span><span class="bp">False</span><span class="p">)</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s">&#39;display.max_columns&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s">&#39;display.max_rows&#39;</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s">&#39;display.width&#39;</span><span class="p">,</span><span class="mi">180</span><span class="p">)</span>
<span class="n">np</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">np</span>
<span class="n">np</span><span class="o">.</span><span class="n">set_printoptions</span><span class="p">(</span><span class="n">linewidth</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span><span class="n">threshold</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span>
<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s">r&#39;postgresql://postgres:postgres@192.168.2.50:8800/routing&#39;</span><span class="p">,</span>
                       <span class="n">encoding</span><span class="o">=</span><span class="s">&#39;utf-8&#39;</span><span class="p">,</span>
                       <span class="n">echo</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

<span class="kn">from</span> <span class="nn">sys</span> <span class="kn">import</span> <span class="n">argv</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">from</span> <span class="nn">urllib2</span> <span class="kn">import</span> <span class="n">urlopen</span><span class="p">,</span><span class="n">Request</span>
<span class="kn">from</span> <span class="nn">poster.encode</span> <span class="kn">import</span> <span class="n">multipart_encode</span>
<span class="kn">from</span> <span class="nn">poster.streaminghttp</span> <span class="kn">import</span> <span class="n">register_openers</span>
<span class="kn">from</span> <span class="nn">uuid</span> <span class="kn">import</span> <span class="n">uuid4</span> <span class="k">as</span> <span class="n">get_guid</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span> <span class="k">as</span> <span class="n">DT</span>
<span class="kn">from</span> <span class="nn">uuid</span> <span class="kn">import</span> <span class="n">getnode</span> <span class="k">as</span> <span class="n">get_mac</span>

<span class="n">macs</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;Macbook&#39;</span><span class="p">:</span><span class="s">&#39;105773427819682&#39;</span><span class="p">,</span>
        <span class="s">&#39;MacBookPro&#39;</span><span class="p">:</span><span class="s">&#39;117637351435&#39;</span><span class="p">,}</span>

<span class="n">this_mac</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">get_mac</span><span class="p">())</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[9]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># Functions</span>
<span class="k">def</span> <span class="nf">post_json</span><span class="p">(</span><span class="n">all_data</span><span class="p">,</span><span class="n">p_url</span><span class="p">,</span><span class="n">show_post</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">show_resp</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>

    <span class="k">if</span> <span class="n">show_post</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">&#39;</span><span class="se">\t\t\t</span><span class="s">JSON Posted:</span><span class="se">\n</span><span class="s">&#39;</span>
        <span class="k">print</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">all_data</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">sort_keys</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

    <span class="n">json_data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">all_data</span><span class="p">)</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;Content-type&#39;</span><span class="p">:</span> <span class="s">&#39;application/json&#39;</span><span class="p">}</span>
    <span class="n">req</span> <span class="o">=</span> <span class="n">Request</span><span class="p">(</span><span class="n">p_url</span><span class="p">,</span> <span class="n">json_data</span><span class="p">,</span> <span class="n">headers</span><span class="p">)</span>
    <span class="n">f</span> <span class="o">=</span> <span class="n">urlopen</span><span class="p">(</span><span class="n">req</span><span class="p">)</span>
    <span class="k">print</span> <span class="n">f</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
    <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">show_resp</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">parsed</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
            <span class="k">print</span> <span class="s">&#39;</span><span class="se">\t\t\t</span><span class="s">Server Response:</span><span class="se">\n</span><span class="s">&#39;</span>
            <span class="k">print</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">parsed</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">sort_keys</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">print</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">NON-JSON RESPONE</span><span class="se">\n\n\t\t\t</span><span class="s">Server Response:</span><span class="se">\n</span><span class="s">&#39;</span>
            <span class="k">print</span> <span class="n">response</span>

    <span class="k">return</span> <span class="n">response</span>

<span class="k">def</span> <span class="nf">check</span><span class="p">(</span><span class="n">post_action</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">,</span><span class="n">show_info</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">show_post</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">show_resp</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="n">p_url</span> <span class="o">=</span> <span class="n">BASE_URL</span><span class="o">+</span><span class="s">&#39;/api/check/&#39;</span>
    <span class="k">if</span> <span class="n">show_info</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span> <span class="k">print</span> <span class="s">&#39;</span><span class="se">\n\t\t</span><span class="s">TEST #1: printer driver check-in&#39;</span><span class="p">,</span><span class="n">post_action</span><span class="p">,</span><span class="s">&#39;</span><span class="se">\n\t\t\t</span><span class="s">URL:&#39;</span><span class="p">,</span><span class="n">p_url</span>
    <span class="n">guid</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">get_guid</span><span class="p">())</span>
    <span class="n">data</span> <span class="o">=</span> <span class="p">[{</span>
              <span class="s">&#39;pdf_id&#39;</span> <span class="p">:</span> <span class="n">guid</span><span class="p">,</span>
              <span class="s">&#39;printer_id&#39;</span> <span class="p">:</span> <span class="s">&#39;printer_id1&#39;</span><span class="p">,</span>
<span class="c">#               &#39;machine_id&#39; : &#39;12c61d88-5d0c-44af-a5fc-734f6327e1ec&#39;,</span>
<span class="c">#               &#39;machine_id&#39; : &#39;admin1&#39;,</span>
                <span class="s">&#39;machine_id&#39;</span> <span class="p">:</span> <span class="s">&#39;vendor1&#39;</span><span class="p">,</span>
              <span class="s">&#39;application_name&#39;</span> <span class="p">:</span> <span class="s">&#39;application_name1&#39;</span><span class="p">,</span>
              <span class="s">&#39;doc_name&#39;</span> <span class="p">:</span> <span class="s">&#39;test_unit_1&#39;</span>
            <span class="p">}]</span>

    <span class="n">resp</span> <span class="o">=</span> <span class="n">post_json</span><span class="p">(</span><span class="n">data</span><span class="p">,</span><span class="n">p_url</span><span class="p">,</span><span class="n">show_post</span><span class="p">,</span><span class="n">show_resp</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">show_info</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span> <span class="k">print</span> <span class="s">&#39;</span><span class="se">\n\t\t\t</span><span class="s">--&gt; #1 SUCCESS</span><span class="se">\n</span><span class="s">&#39;</span>
    <span class="k">return</span> <span class="n">guid</span>

<span class="k">def</span> <span class="nf">upload_pdf</span><span class="p">(</span><span class="n">guid</span><span class="p">,</span><span class="n">uploadfile</span><span class="p">,</span><span class="n">upload_file_url</span><span class="p">,</span><span class="n">show_info</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">show_post</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">show_resp</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">show_info</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span> <span class="k">print</span> <span class="s">&#39;</span><span class="se">\t\t</span><span class="s">TEST #2: upload_pdf --&gt;&#39;</span><span class="p">,</span><span class="n">uploadfile</span><span class="p">,</span><span class="s">&#39;</span><span class="se">\n\n\t\t\t</span><span class="s">URL:&#39;</span><span class="p">,</span><span class="n">upload_file_url</span>
    <span class="n">opener</span> <span class="o">=</span> <span class="n">register_openers</span><span class="p">()</span>

    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;local_document&#39;</span><span class="p">:</span> <span class="nb">open</span><span class="p">(</span><span class="n">uploadfile</span><span class="p">,</span><span class="s">&#39;rb&#39;</span><span class="p">),</span>
              <span class="s">&#39;pdf_id&#39;</span> <span class="p">:</span> <span class="n">guid</span><span class="p">}</span>

    <span class="n">datagen</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">multipart_encode</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
    <span class="n">R</span> <span class="o">=</span> <span class="n">Request</span><span class="p">(</span><span class="n">upload_file_url</span><span class="p">,</span> <span class="n">datagen</span><span class="p">,</span> <span class="n">headers</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">show_resp</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">&#39;</span><span class="se">\n\n\t\t\t</span><span class="s">URL Post Request:&#39;</span>
        <span class="k">print</span> <span class="s">&#39;</span><span class="se">\n\t\t\t\t</span><span class="s">Headers:&#39;</span>
        <span class="k">print</span> <span class="s">&#39;</span><span class="se">\n\t\t\t\t\t</span><span class="s">&#39;</span><span class="p">,</span><span class="n">R</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span>
        <span class="k">print</span> <span class="s">&#39;</span><span class="se">\n\t\t\t\t</span><span class="s">Params:&#39;</span>
        <span class="k">print</span> <span class="s">&#39;</span><span class="se">\n\t\t\t\t\t</span><span class="s">&#39;</span><span class="p">,</span><span class="n">params</span><span class="p">,</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span>
        <span class="k">print</span> <span class="s">&#39;</span><span class="se">\t\t\t\t</span><span class="s">Total Size:&#39;</span>
        <span class="k">print</span> <span class="s">&#39;</span><span class="se">\n\t\t\t\t\t</span><span class="s">&#39;</span><span class="p">,</span><span class="n">R</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">total</span><span class="p">,</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span>

    <span class="n">response</span> <span class="o">=</span> <span class="n">opener</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">R</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">show_post</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">&#39;</span><span class="se">\n\t\t\t</span><span class="s">Server Response:&#39;</span>
        <span class="k">print</span> <span class="s">&#39;</span><span class="se">\n\t\t\t\t</span><span class="s">&#39;</span><span class="p">,</span><span class="n">response</span><span class="o">.</span><span class="n">read</span><span class="p">(),</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span>

    <span class="k">if</span> <span class="n">show_info</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span> <span class="k">print</span> <span class="s">&#39;</span><span class="se">\n\t\t\t</span><span class="s">--&gt; #2 SUCCESS</span><span class="se">\n</span><span class="s">&#39;</span>
    <span class="k">return</span> <span class="bp">True</span>

<span class="k">def</span> <span class="nf">upload_test</span><span class="p">(</span><span class="n">uploadfile</span><span class="p">,</span><span class="n">upload_file_url</span><span class="p">,</span><span class="n">show_info</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="n">guid</span> <span class="o">=</span> <span class="n">check</span><span class="p">(</span><span class="n">post_action</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">,</span><span class="n">show_info</span><span class="o">=</span><span class="n">show_info</span><span class="p">,</span><span class="n">show_post</span><span class="o">=</span><span class="n">show_info</span><span class="p">,</span><span class="n">show_resp</span><span class="o">=</span><span class="n">show_info</span><span class="p">)</span>
    <span class="n">upload_pdf</span><span class="p">(</span><span class="n">guid</span><span class="p">,</span><span class="n">uploadfile</span><span class="p">,</span><span class="n">upload_file_url</span><span class="p">,</span><span class="n">show_info</span><span class="o">=</span><span class="n">show_info</span><span class="p">,</span><span class="n">show_post</span><span class="o">=</span><span class="n">show_info</span><span class="p">,</span><span class="n">show_resp</span><span class="o">=</span><span class="n">show_info</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Conduct-Testing:">Conduct Testing:<a class="anchor-link" href="#Conduct-Testing:">&#182;</a></h2>
</div>
</div>
</div>

<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># SET TARGET FOR TEST</span>
<span class="n">BASE_URL</span> <span class="o">=</span> <span class="s">&#39;http://printer.aporodelivery.com&#39;</span>
<span class="c"># BASE_URL = &#39;http://printer.aporodelivery.com:8088&#39;</span>
<span class="c"># BASE_URL = &#39;http://ec2-54-88-101-190.compute-1.amazonaws.com&#39;</span>
<span class="c"># BASE_URL = &#39;http://192.168.3.52:8088&#39;</span>
<span class="k">print</span> <span class="n">BASE_URL</span>
<span class="o">!</span>cat /etc/hosts | grep aporo
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># Test #1 -- printer-driver-to-aprinto</span>

<span class="c"># servers = pd.read_sql(&#39;select * from servers&#39;,engine)</span>
<span class="n">TEST_TAG</span> <span class="o">=</span> <span class="s">&#39;aprinto&#39;</span>
<span class="c"># BASE_URL = servers[servers.tag==TEST_TAG].ix[:,[&#39;web_service&#39;,&#39;location&#39;,&#39;port&#39;]]</span>
<span class="c"># BASE_URL = BASE_URL.apply(lambda s: str(s[0])+&#39;://&#39;+str(s[1])+&#39;:&#39;+str(s[2]),axis=1).tolist()[0]</span>

<span class="c"># uploadfile=&#39;/Users/admin/Desktop/vendor_sample.pdf&#39;</span>
<span class="n">uploadfile</span><span class="o">=</span><span class="s">&#39;/Users/admin/Desktop/test.pdf&#39;</span>
<span class="n">upload_file_url</span><span class="o">=</span><span class="n">BASE_URL</span>

<span class="c"># show_info=True</span>
<span class="n">show_info</span><span class="o">=</span><span class="bp">False</span>

<span class="k">if</span> <span class="n">show_info</span><span class="o">==</span><span class="bp">True</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">&#39;</span><span class="se">\n\t</span><span class="s">Testing &quot;&#39;</span><span class="o">+</span><span class="n">TEST_TAG</span><span class="o">+</span><span class="s">&#39;&quot;...</span><span class="se">\n</span><span class="s">&#39;</span>
    <span class="k">print</span> <span class="s">&#39;</span><span class="se">\t</span><span class="s">Base URL:&#39;</span><span class="p">,</span><span class="n">BASE_URL</span><span class="p">,</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span>

<span class="n">upload_test</span><span class="p">(</span><span class="n">uploadfile</span><span class="p">,</span><span class="n">upload_file_url</span><span class="p">,</span><span class="n">show_info</span><span class="o">=</span><span class="n">show_info</span><span class="p">)</span>

<span class="k">print</span> <span class="s">&#39;</span><span class="se">\n\t</span><span class="s">Testing COMPLETE</span><span class="se">\n</span><span class="s">&#39;</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># Test #2 -- aprinto-to-GG</span>
<span class="n">user_id</span> <span class="o">=</span> <span class="s">&#39;544963fce4b00f942bc97027&#39;</span>
<span class="n">satellite_id</span> <span class="o">=</span> <span class="s">&#39;544963fce4b00f942bc9702e&#39;</span>
<span class="n">post_url</span> <span class="o">=</span> <span class="s">&#39;http://admin.gnamgnamapp.it/ws/v2/&#39;</span><span class="o">+</span><span class="n">user_id</span><span class="o">+</span><span class="s">&#39;/aporoOrders&#39;</span>
<span class="c"># post_url = &#39;http://93.148.124.46:9000/ws/v2/&#39;+user_id+&#39;/aporoOrders&#39;</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">[{</span>
            <span class="s">&#39;satellite_id&#39;</span><span class="p">:</span><span class="n">satellite_id</span><span class="p">,</span>
            <span class="s">&#39;cust_name&#39;</span><span class="p">:</span><span class="s">&#39;fat tony&#39;</span><span class="p">,</span>
            <span class="s">&#39;cust_tel&#39;</span><span class="p">:</span><span class="s">&#39;555-555-5555&#39;</span><span class="p">,</span>
            <span class="s">&#39;cust_addr&#39;</span><span class="p">:</span><span class="s">&#39;10 east 20th st., new york, ny 10003&#39;</span><span class="p">,</span>
            <span class="s">&#39;cust_cross_st&#39;</span><span class="p">:</span><span class="s">&#39;20th st. &amp; 5th ave.&#39;</span><span class="p">,</span>
            <span class="s">&#39;price&#39;</span><span class="p">:</span><span class="s">&#39;20.00&#39;</span><span class="p">,</span>
            <span class="s">&#39;tip&#39;</span><span class="p">:</span><span class="s">&#39;5.00&#39;</span><span class="p">,</span>
            <span class="s">&#39;order_uuid&#39;</span><span class="p">:</span><span class="s">&#39;53c556e8-cf22-49eb-af3b-db4c42363188&#39;</span><span class="p">,</span>
            <span class="s">&#39;order_time&#39;</span><span class="p">:</span><span class="s">&#39;2014102320:47:55-0400&#39;</span><span class="p">,</span>
            <span class="s">&#39;order_tag&#39;</span><span class="p">:</span><span class="s">&#39;ABCD&#39;</span><span class="p">,</span>
            <span class="s">&#39;vend_name&#39;</span><span class="p">:</span><span class="s">&#39;test1&#39;</span><span class="p">,</span>
            <span class="s">&#39;vend_addr&#39;</span><span class="p">:</span><span class="s">&#39;120 east 30th st, new york, ny 10016&#39;</span><span class="p">,</span>
            <span class="s">&#39;recipient_emails&#39;</span><span class="p">:</span><span class="s">&quot;[&#39;seth.t.chase@gmail.com&#39;,&#39;gnamgnamdeliv@gmail.com&#39;]&quot;</span><span class="p">,</span>
            <span class="p">}</span>
        <span class="p">]</span>
<span class="c"># show_post,show_resp = True,True</span>
<span class="c"># resp = post_json(data,post_url,show_post,show_resp)</span>

<span class="n">json_data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s">&#39;utf-8&#39;</span><span class="p">)</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;Content-type&#39;</span><span class="p">:</span> <span class="s">&#39;application/json&#39;</span><span class="p">}</span>
<span class="kn">from</span> <span class="nn">post_json</span> <span class="kn">import</span> <span class="n">post_it</span>
<span class="n">post_it</span><span class="p">(</span><span class="n">post_url</span><span class="p">,</span><span class="n">json_data</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># Test #3 -- download driver</span>

<span class="o">!</span>/opt/local/bin/wget <span class="nv">$BASE_URL</span>/static/downloads/AporoDelivery_Setup.exe
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="View-Pages:">View Pages:<a class="anchor-link" href="#View-Pages:">&#182;</a></h2>
</div>
</div>
</div>

<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># view Upload Page</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">urlopen</span><span class="p">(</span><span class="n">BASE_URL</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="n">h</span> <span class="o">=</span> <span class="n">HTML</span><span class="p">(</span><span class="n">r</span><span class="p">);</span> <span class="n">h</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># get remote file -- NEEDS WORK</span>
<span class="n">share_folder</span> <span class="o">=</span> <span class="s">&#39;/User/admin/Desktop/seamless&#39;</span>
<span class="o">!</span>mkdir -p <span class="nv">$share_folder</span>
<span class="o">!</span>scp -r admin@192.168.2.52:<span class="nv">$share_folder</span> <span class="nv">$share_folder</span>
<span class="c">#!ssh myusername@ssh.myhost.net &quot;mkdir -p $2&quot;</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="kn">import</span> <span class="nn">HTML_API</span>
<span class="o">%</span><span class="k">pfile</span> <span class="n">HTML_API</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[1]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># import pandas+</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s">&#39;expand_frame_repr&#39;</span><span class="p">,</span><span class="bp">False</span><span class="p">)</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s">&#39;display.max_columns&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s">&#39;display.max_rows&#39;</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s">&#39;display.width&#39;</span><span class="p">,</span><span class="mi">180</span><span class="p">)</span>
<span class="n">np</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">np</span>
<span class="n">np</span><span class="o">.</span><span class="n">set_printoptions</span><span class="p">(</span><span class="n">linewidth</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span><span class="n">threshold</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span>
<span class="kn">import</span> <span class="nn">geopandas</span> <span class="kn">as</span> <span class="nn">gd</span>
<span class="kn">from</span> <span class="nn">types</span> <span class="kn">import</span> <span class="n">NoneType</span>
<span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">sleep</span> <span class="k">as</span> <span class="n">delay</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span>

<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s">r&#39;postgresql://postgres:postgres@192.168.2.50:8800/routing&#39;</span><span class="p">,</span>
                       <span class="n">encoding</span><span class="o">=</span><span class="s">&#39;utf-8&#39;</span><span class="p">,</span>
                       <span class="n">echo</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

<span class="o">%</span><span class="k">load_ext</span> <span class="n">sql</span>
<span class="c"># %sql postgresql://postgres:postgres@localhost/routing</span>
<span class="o">%</span><span class="k">sql</span> <span class="n">postgresql</span><span class="p">:</span><span class="o">//</span><span class="n">postgres</span><span class="p">:</span><span class="n">postgres</span><span class="nd">@192.168.2.50</span><span class="p">:</span><span class="mi">8800</span><span class="o">/</span><span class="n">routing</span>
<span class="c"># import HTML and codecs</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">codecs</span>
<span class="nb">reload</span><span class="p">(</span><span class="n">sys</span><span class="p">)</span>
<span class="n">sys</span><span class="o">.</span><span class="n">setdefaultencoding</span><span class="p">(</span><span class="s">&#39;UTF8&#39;</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">os</span> <span class="kn">import</span> <span class="n">getcwd</span>
<span class="n">workDir</span> <span class="o">=</span> <span class="n">getcwd</span><span class="p">()</span><span class="o">+</span><span class="s">&#39;/&#39;</span>
<span class="kn">from</span> <span class="nn">os.path</span> <span class="kn">import</span> <span class="n">abspath</span>
<span class="kn">from</span> <span class="nn">sys</span> <span class="kn">import</span> <span class="n">path</span> <span class="k">as</span> <span class="n">py_path</span>
<span class="n">py_path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">abspath</span><span class="p">(</span><span class="n">workDir</span><span class="o">+</span><span class="s">&#39;../html&#39;</span><span class="p">))</span>
<span class="kn">from</span> <span class="nn">HTML_API</span> <span class="kn">import</span> <span class="n">getTagsByAttr</span><span class="p">,</span><span class="n">getAllTag</span><span class="p">,</span><span class="n">getInnerElement</span><span class="p">,</span><span class="n">getTagContents</span>
<span class="kn">from</span> <span class="nn">webpage_scrape</span> <span class="kn">import</span> <span class="n">scraper</span>
<span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">sleep</span>
<span class="kn">import</span> <span class="nn">datetime</span> <span class="kn">as</span> <span class="nn">dt</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre> 
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Example:-CitiBike-data">Example: CitiBike data<a class="anchor-link" href="#Example:-CitiBike-data">&#182;</a></h1>
</div>
</div>
</div>

<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[1]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="kn">from</span> <span class="nn">urllib2</span> <span class="kn">import</span> <span class="n">urlopen</span>
<span class="kn">from</span> <span class="nn">cStringIO</span> <span class="kn">import</span> <span class="n">StringIO</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">from</span> <span class="nn">pyproj</span> <span class="kn">import</span> <span class="n">Proj</span>
<span class="kn">from</span> <span class="nn">shapely.geometry</span> <span class="kn">import</span> <span class="n">Point</span>
<span class="kn">from</span> <span class="nn">geopandas</span> <span class="kn">import</span> <span class="n">GeoSeries</span><span class="p">,</span> <span class="n">GeoDataFrame</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[2]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">pylab</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s">&#39;figure.figsize&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mf">10.0</span><span class="p">,</span> <span class="mf">8.0</span><span class="p">)</span>
<span class="c">#%config InlineBackend.figure_format = &#39;svg&#39;</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>NYC borough boundaries downloaded from <a href="http://www.nyc.gov/html/dcp/download/bytes/nybb_13a.zip">Bytes of the Big Apple</a></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[3]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">boros</span> <span class="o">=</span> <span class="n">GeoDataFrame</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="s">&#39;nybb.shp&#39;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Load real time bike station data from <a href="http://citibikenyc.com">CitiBike</a> json API:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[4]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="k">try</span><span class="p">:</span>
    <span class="n">url</span> <span class="o">=</span> <span class="s">&#39;http://citibikenyc.com/stations/json&#39;</span>
    <span class="n">f</span> <span class="o">=</span> <span class="n">urlopen</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="nb">buffer</span> <span class="o">=</span> <span class="n">StringIO</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
    <span class="n">c</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="nb">buffer</span><span class="p">)</span>
    <span class="k">print</span> <span class="s">&quot;Loaded Citibike data&quot;</span>
<span class="k">except</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">&quot;Reading cached data&quot;</span>
    <span class="n">c</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="s">&#39;citibike.json&#39;</span><span class="p">))</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;citibike.json&#39;</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">))</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">GeoDataFrame</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="s">&#39;stationBeanList&#39;</span><span class="p">])</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>Loaded Citibike data
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[5]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">s</span> <span class="o">=</span> <span class="n">GeoSeries</span><span class="p">([</span><span class="n">Point</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s">&#39;longitude&#39;</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s">&#39;latitude&#39;</span><span class="p">])])</span>
<span class="n">df</span><span class="p">[</span><span class="s">&#39;geometry&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">s</span>
<span class="n">df</span><span class="o">.</span><span class="n">crs</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;init&#39;</span><span class="p">:</span> <span class="s">&#39;epsg:4326&#39;</span><span class="p">,</span> <span class="s">&#39;no_defs&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">}</span>
<span class="n">df</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">total_bounds</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">
    Out[5]:</div>


<div class="output_text output_subarea output_pyout">
<pre>(-74.01713445, 40.680342422999999, -73.950047975900006, 40.770513000000001)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[6]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">df</span><span class="o">.</span><span class="n">to_crs</span><span class="p">(</span><span class="n">boros</span><span class="o">.</span><span class="n">crs</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">total_bounds</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">
    Out[6]:</div>


<div class="output_text output_subarea output_pyout">
<pre>(979499.5403944857, 187146.60521020592, 998104.68869063177, 219995.67072442052)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[7]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">manhattan</span> <span class="o">=</span> <span class="n">boros</span><span class="o">.</span><span class="n">geometry</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
<span class="n">brooklyn</span> <span class="o">=</span> <span class="n">boros</span><span class="o">.</span><span class="n">geometry</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
<span class="n">in_mn</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">within</span><span class="p">(</span><span class="n">manhattan</span><span class="p">)</span>
<span class="n">in_bk</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">within</span><span class="p">(</span><span class="n">brooklyn</span><span class="p">)</span>
<span class="k">print</span> <span class="nb">sum</span><span class="p">(</span><span class="n">in_mn</span><span class="p">),</span> <span class="s">&#39;stations in Manhattan&#39;</span>
<span class="k">print</span> <span class="nb">sum</span><span class="p">(</span><span class="n">in_bk</span><span class="p">),</span> <span class="s">&#39;stations in Brooklyn&#39;</span>
<span class="k">print</span> <span class="nb">sum</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s">&#39;availableBikes&#39;</span><span class="p">][</span><span class="n">in_mn</span><span class="p">]),</span> <span class="s">&#39;available bikes in Manhattan&#39;</span>
<span class="k">print</span> <span class="nb">sum</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s">&#39;availableBikes&#39;</span><span class="p">][</span><span class="n">in_bk</span><span class="p">]),</span> <span class="s">&#39;available bikes in Brooklyn&#39;</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>252 stations in Manhattan
79 stations in Brooklyn
4017 available bikes in Manhattan
607 available bikes in Brooklyn
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[8]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">block</span> <span class="o">=</span> <span class="mi">260</span>
<span class="n">mp</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s">&#39;geometry&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unary_union</span>
<span class="n">geoms</span> <span class="o">=</span> <span class="p">[</span><span class="n">mp</span><span class="p">]</span>
<span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">):</span>
    <span class="n">contour</span> <span class="o">=</span> <span class="n">mp</span><span class="o">.</span><span class="n">buffer</span><span class="p">(</span><span class="n">r</span> <span class="o">*</span> <span class="n">block</span><span class="p">)</span>
    <span class="n">geoms</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">contour</span><span class="p">)</span>
<span class="n">zones</span> <span class="o">=</span> <span class="n">GeoSeries</span><span class="p">(</span><span class="n">geoms</span><span class="p">)</span>
<span class="n">zones</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">
    Out[8]:</div>


<div class="output_text output_subarea output_pyout">
<pre>&lt;matplotlib.axes.AxesSubplot at 0x10beabf50&gt;</pre>
</div>

</div>

<div class="output_area"><div class="prompt"></div>


<div class="output_png output_subarea ">
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAWMAAAHfCAYAAACFyrnvAAAABHNCSVQICAgIfAhkiAAAAAlwSFlz
AAALEgAACxIB0t1+/AAAIABJREFUeJzs3XdUVNfC9/HvzNB7FaQJSG+iAmJD7L1iL7FrooklaiyJ
scWSxNg1MSb23rvYsaCg2FAUpKoo0jtDm5n3j/GSeO998tz7PomSZH/Wci3cM+fM2WeG32z22Wdv
iUqlUiEIgiC8V9L3fQCCIAiCCGNBEIRaQYSxIAhCLSDCWBAEoRYQYSwIglALiDAWBEGoBX4zjF+8
eEHr1q3x9vYmNDSU3bt3AzBjxgw8PT1p1KgRU6ZMQS6XA5CWloauri4NGzakYcOGTJgwoWZfT548
oVGjRjg7O/P555/XlFdVVTF69Gjq1atHaGgor1+/rnnswIEDuLu74+7uzsGDB3/XiguCINQqqt+Q
kZGhunfvnkqlUqmys7NVTk5OqqKiItW5c+dUCoVCpVAoVGPGjFH99NNPKpVKpUpNTVX5+Pj82311
7txZtXfvXlVOTo6qefPmqtu3b6tUKpVq3759qrCwMFVpaalq6dKlqokTJ6pUKpVKoVConJ2dVQ8f
PlQ9ePBAVb9+/d86VEEQhD+132wZW1tb4+/vD4CFhQXe3t7ExMTQvn17pFIpUqmUjh07cuXKlf81
9BMSEhgwYADm5ub06dOH6OhoAKKjoxk6dCh6enqMGzeupjwuLg4fHx98fHzw8/PDy8uLuLi4/+t3
jyAIQq30H/cZJyUlERcXR1BQ0FvlmzZtonv37jX/T01Nxd/fn/Hjx/PgwYOabevUqVPzHC8vL6Ki
ogC4desWXl5eAJiZmZGZmUl5eTnR0dE15f+8jSAIwl+Nxn/ypOLiYgYMGMDKlSvR19evKV+4cCGG
hob069cPABsbG168eIGpqSlnzpxh2LBhxMbGovqnO65VKhUSiaTm518//s/P/bV/bPNrLi4uJCcn
/yfVEARB+I/Vr1+fpKSkd/Z6/2vLuKqqirCwMIYNG0bPnj1ryrdu3crZs2fZuXNnTZmWlhampqYA
dO7cGQ0NDZKSknB1dSUzM7PmeY8fP6ZJkyYANGnShMePHwOQl5eHlZUVOjo6b5X/8za/lpycXBPo
f8V/8+bNe+/HIOon6vZ3rN+7buT9ZhirVCpGjx6Nj48PU6ZMqSkPDw/n22+/5fjx4+jo6NSU5+Tk
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
EAjELNl1jQgfb5ysrbkQfZ9GYQuTJk36B0bqvy/+oWJcU1PDiBEj2Lx5M6qqqn96nomJCbm5uWhr
a3P9+nXGjRtHYmLiH4TTYrFY+kEQi8Xtfv73RNZ/9uFZvXq19N+hoaGEhob+A0/1Cb+hoKCA0vJy
Qjt25ENpCXmlZfTp5ExpVS3Rr7K4sWYMzc2tLD98l5Ujg/F3NONtfik7rzwnLb8MAy1VxnR1o3sH
W7bN7MGYHy8Q0dGWvLIa3Nq8fuPTPzDI167d37CnpzWrTj6iuKoOC30N3hdVkpD+gYA2H4Wj914z
s7snIU6Swu9qrseq4YF8tvc2gzs5IRAIcDbX5+xXw7gYl8r6M3EsHewvlXv52Box8qfLvM4swtPG
CE1VRVJzS3C3NiKnqJLYN9l8qKhDTUkeT2sj/BzM/mZW3Z+Nu78HB1M9jn45kMUHb3MmNpUQV3NJ
KnRtI3GpBVQ3NLFlWncp11xR08CzdxIFhY6aMr72ZnS0NSLuTR5hXjZMCPdk7amHqCjK4WllwOvs
EjZeimfx0EAALsalMbqzG3MGSP6/aP8tZvXxxtPakBfvP/D1kfsoyMvSLGxFTVmB9ZO6YWWgRUVt
AyuPRJOUU0p/X3u2TO2FgoIcK47cxlRPg96BbuQUVRCTlMmayZNYse8UDmZ6DOzsiba6Cgt+voJn
XCqTwzvgaW2M5e/4+/qmZiIfvGZf1EtsjLU59/1EdDRU2XT8Pu8KKrix9BuahULWHTnCgoUL/88z
8aKjo4mOjv4/e/3/sBgLhUKGDBnCuHHjGDBgwN89V0FBAQUFyRKrV69efPXVV6Snp2Nvb99OzJ2S
koK/v2Sm4O/vT0pKCo6OjpSXl2NoaIiSkhL+/v7tXJxSUlIYN27c33zd3xfjT/jP4+nTpxjq6qKk
qMjjh4k4mhogLydLbOJ73Cz10dVQ5eqTNIy11QhxtySzqJJZO28wLdyDRQO8ySiq5scLT2lqbqGf
vyMjQpw5cvcVivKyNLXtyqspKVBe29judasb24ztlRSkO/Y1Dc1othXTwoo67IzbpyfbGWvT1GbD
+RvkZWVQkJOlu5dVO92topwsHWwMScsvw9PGCCMtVTI+lHMg6gVxafl0cjLFREeN/LIGLj5JQyyG
b8aEYm+qQ0ZhJcJWEX6Opvxw5jFJOaXSTbjU/DIU5GSZ3F2i3X3+vhCZqJesOn6f8tpGNFQU8LI2
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
gg==
"
>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[9]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">nyc</span> <span class="o">=</span> <span class="n">boros</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">unary_union</span>
<span class="n">zones</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">nyc</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="s">&#39;Set1&#39;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">
    Out[9]:</div>


<div class="output_text output_subarea output_pyout">
<pre>&lt;matplotlib.axes.AxesSubplot at 0x10c408090&gt;</pre>
</div>

</div>

<div class="output_area"><div class="prompt"></div>


<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
rkJggg==
"
>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Load cleaned version of MTA subway station locations from <a href="http://spatialityblog.com/2010/07/08/mta-gis-data-update/">Steven Romalewski's Spatiality blog</a>:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[10]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">subways</span> <span class="o">=</span> <span class="n">GeoDataFrame</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="s">&#39;nyctsubwaystops_100627_curcleaned.shp&#39;</span><span class="p">)</span>
<span class="n">subways</span><span class="o">.</span><span class="n">to_crs</span><span class="p">(</span><span class="n">boros</span><span class="o">.</span><span class="n">crs</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">boros</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="n">subways</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">
    Out[10]:</div>


<div class="output_text output_subarea output_pyout">
<pre>&lt;matplotlib.axes.AxesSubplot at 0x10c1f3ad0&gt;</pre>
</div>

</div>

<div class="output_area"><div class="prompt"></div>


<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
Q9WvX1+lpaWpO3fuqObNm6uMjAw1bdo09eGHH6qcnBw1YsQINWPGDKWUUikpKcrd3V1dunRJRURE
qCZNmuh+19tvv63WrFmjbty4oVq3bq2io6OVUkqtXbtW9e7dW2VlZakpU6aoESNGKKWUys/PV66u
rio2Nlb9/vvvys3NTS/Zdu/erfLz81V+fr4aMmSIWrp0qdFle1I+pZS6fPmyeuutt9Rrr72mbt68
aVL5YmNjlZ+fnzpz5oxSSqnU1FSTytevXz+1du1apZRSv/zyi+rfv7/R5Nu/f786duyYatSokW6b
oT9Lhg8frqZNm6YyMzNVz549VWhoaIlnO378uEpOTlZKKRUZGanatm1bqrM9b74Hevfurfr27atm
zpxpcvlat26tO19aWprKz883mXw7d+5UXbt2VUopdfv2beXs7KzS09MNns9gV4QOHTpE06ZNsbOz
o1KlSnTo0IHDhw8TFRXF4MGDsbS0JCgoqNDCi8ayWOPjspnKQpSPywfw6aefMn369EL7m0q+sLAw
Bg8eTL169QCoWbOmSeWrUqUKN2/eRKvVcvPmTd1CqsaQr6iFXw39WRIVFcXQoUOxsbEhICBAd0xJ
ZvP29qZ27dq64+Li4nT/Gy6N2Z43H8DmzZtxdXUttM6cqeRLTU2lXLly9OnTBwA7Ozvd45ZMIZ+t
rS13797l7t27ZGRkUK5cOaytrQ2ez2CNULt27YiKiuLChQskJyezY8cODh06RHR0NA0aNAAK7jR7
cGlXo9EUuVjjuXPnHlms8ciRI0DBH8aDfyzPslhjSWd72I8//ki3bt10dRpLtifl27JlCw4ODnh5
eRXa31Ty7dq1i7i4OHx8fBgyZAgJCQkmk+/w4cPMnDmTOXPmYGdnx/z583UNrbHle8CQnyXZ2dmk
pqZStWpVADw8PIo15+OyPWz16tW0bNmSChUqGFW2J+XLzMxk+vTpjB8/vtD+ppJv9+7d2NnZ0blz
Zzp16sTq1atNKl+rVq3w8/PD3t4eV1dXFi1ahIWFhcHzvfTK0i/KxsaG2bNnM2LECG7dukXjxo2x
tLR8rifOlvRijS+qqGwPLzNQGhaifBlF5TM3N2fKlCns3r37kZpMIZ+lpSU5OTmkpaVx4MABwsPD
+fDDD9m3b59J5LOwsCAwMJCPPvqIYcOG8cMPPxAUFMS6deuMLt+znPNZaniZPCX99Oyn/e7Y2Fi+
/vpr9uzZU+T+pTnbk2oYP348o0aNwtra+ok1G2u+nJwcjhw5wpEjR7C2tqZLly60atXKZPL9+uuv
REdHc/nyZa5fv86bb77JiRMnDJ7PoJOlu3Xrxo4dO/j3v/+NVqvF39+f5s2b6yZpJiYm0rx5c+B/
Cy8+8GCxxrp16z51sUbgkcUaH/5dDx9TktngfwtRrly5UrevsWUrKl+HDh24cOECr7/+Oi4uLiQl
JdGsWTNSUlJMIp+/vz9+fn7069ePihUr0q1bN06dOkVOTo7J5Dt48CBBQUGYmZkxePBg9u/f/0it
xpIPMOhniZWVFbVq1SI9Pb1Ecj4uG0BSUhJ9+vRhxYoVuLi4AFCvXj2jyfakfFFRUfzzn//ExcWF
OXPm8N1337FgwQKTydeyZUvat2+Pq6srtWvX5u2332bXrl0mk2///v307t0bOzs76tevT6tWrYiO
jjZ4PoM2QqmpqQCEh4cTFxdH06ZN8fX1JSQkhOzsbEJCQnQLLBrbYo0PZ4uNjaVp06YmtRDln/O1
adOGlJQULly4wIULF3BwcODYsWPY29sbfb64uDiaNWtGy5Yt2blzJ0opNBoNbm5uWFlZmUS+pk2b
0qFDB7Zu3QrAli1b6Ny5M2Ccfz8f1GDIzxJfX1+WLFlCVlYWq1at0h1TktkyMjLo2rUr06ZNo2XL
loWOMZZsT8q3f/9+3WfMyJEjGTduHP/4xz9MJp+HhwcJCQmkp6eTlZXFb7/9RseOHU0m35tvvklY
WBi5ubncuHGDmJgY2rRpY/h8T5xKXcLatm2r3N3dlY+Pj9JoNEqpgpnk3bt3V46Ojurdd99Vd+7c
0e0/e/Zs5ebmpjw8PNT+/ft12+Pj41WTJk3Ua6+9poKDg3Xbc3NzVWBgoHJ0dFTt27fX3U2hVMFM
9Hr16ql69eqpdevW6SVb3bp1lZOTk/L29lbe3t5q+PDhRpntcfke5uLiortrzFTy5eXlqWHDhqkG
DRqoHj16qKioKJPKFxcXp/r376+8vLzU+++/rxITE40mX//+/VWdOnWUhYWFcnBwUCEhIQb/LLl6
9apq166dcnR0VEFBQSovL6/Es02aNEnZ2NjoPmO8vb3V9evXS2225833sPHjx6tZs2bpXptKvk2b
NilPT0/l5+en5s2bZ1L58vLy1BdffKF8fHxUu3bt1IoVK0pFPllQUQghhBBllkGHxoQQQgghDEka
ISGEEEKUWdIICSGEEKLMkkZICCGEEGWWNEJCCCGEKLOkERJCCCFEmSWNkBBCCCHKrP8DJ+E4bpGX
AJYAAAAASUVORK5CYII=
"
>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[11]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">subways</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">
    Out[11]:</div>

<div class="output_html rendered_html output_subarea output_pyout">
<pre>
&lt;class 'geopandas.geodataframe.GeoDataFrame'&gt;
Int64Index: 493 entries, 0 to 492
Data columns (total 15 columns):
LOCATION_T    493  non-null values
NAME_CUR      493  non-null values
PARENT_STA    493  non-null values
Routes_ALL    492  non-null values
Routes_OFF    492  non-null values
Routes_WKD    492  non-null values
STOP_CODE     493  non-null values
STOP_DESC     493  non-null values
STOP_ID       493  non-null values
STOP_LAT      493  non-null values
STOP_LON      493  non-null values
STOP_NAME     493  non-null values
STOP_URL      493  non-null values
ZONE_ID       493  non-null values
geometry      493  non-null values
dtypes: float64(2), int64(6), object(7)
</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[12]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">subways</span><span class="p">[</span><span class="s">&#39;bike_distance&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">subways</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">distance</span><span class="p">(</span><span class="n">mp</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[13]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">subways</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s">&#39;bike_distance&#39;</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="What-subway-stations-are-less-than-1-block-from-a-CitiBike-station?">What subway stations are less than 1 block from a CitiBike station?<a class="anchor-link" href="#What-subway-stations-are-less-than-1-block-from-a-CitiBike-station?">&#182;</a></h4>
</div>
</div>
</div>

<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[14]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="nb">len</span><span class="p">(</span><span class="n">subways</span><span class="p">[</span><span class="n">subways</span><span class="p">[</span><span class="s">&#39;bike_distance&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">260</span><span class="p">])</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">
    Out[14]:</div>


<div class="output_text output_subarea output_pyout">
<pre>41</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[15]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">subways</span><span class="p">[</span><span class="n">subways</span><span class="p">[</span><span class="s">&#39;bike_distance&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">260</span><span class="p">]</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">
    Out[15]:</div>

<div class="output_html rendered_html output_subarea output_pyout">
<div style="max-height:1000px;max-width:1500px;overflow:auto;">
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>LOCATION_T</th>
      <th>NAME_CUR</th>
      <th>PARENT_STA</th>
      <th>Routes_ALL</th>
      <th>Routes_OFF</th>
      <th>Routes_WKD</th>
      <th>STOP_CODE</th>
      <th>STOP_DESC</th>
      <th>STOP_ID</th>
      <th>STOP_LAT</th>
      <th>STOP_LON</th>
      <th>STOP_NAME</th>
      <th>STOP_URL</th>
      <th>ZONE_ID</th>
      <th>geometry</th>
      <th>bike_distance</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>144</th>
      <td> 0</td>
      <td>                 51TH STREET</td>
      <td> 0</td>
      <td>    4, 6, 6X</td>
      <td>       4, 6</td>
      <td>       6, 6X</td>
      <td> 0</td>
      <td> 0</td>
      <td> 630</td>
      <td> 40.757107</td>
      <td>-73.971920</td>
      <td>                51TH STREET - LEXINGTON</td>
      <td> 0</td>
      <td> 0</td>
      <td> POINT (992029.3760274292435497 215112.44386741...</td>
      <td>  46.296726</td>
    </tr>
    <tr>
      <th>211</th>
      <td> 0</td>
      <td>        CLINTON - WASHINGTON</td>
      <td> 0</td>
      <td>        A, C</td>
      <td>       A, C</td>
      <td>           C</td>
      <td> 0</td>
      <td> 0</td>
      <td> A44</td>
      <td> 40.683263</td>
      <td>-73.965838</td>
      <td>                   CLINTON - WASHINGTON</td>
      <td> 0</td>
      <td> 0</td>
      <td> POINT (993724.8454718440771103 188209.40608920...</td>
      <td>  46.682524</td>
    </tr>
    <tr>
      <th>64 </th>
      <td> 0</td>
      <td>               FULTON STREET</td>
      <td> 0</td>
      <td>        2, 3</td>
      <td>       2, 3</td>
      <td>        2, 3</td>
      <td> 0</td>
      <td> 0</td>
      <td> 229</td>
      <td> 40.709416</td>
      <td>-74.006571</td>
      <td>                          FULTON STREET</td>
      <td> 0</td>
      <td> 0</td>
      <td> POINT (982428.2450188983930275 197735.93816920...</td>
      <td>  53.198352</td>
    </tr>
    <tr>
      <th>344</th>
      <td> 0</td>
      <td>              CLASSON AVENUE</td>
      <td> 0</td>
      <td>           G</td>
      <td>          G</td>
      <td>           G</td>
      <td> 0</td>
      <td> 0</td>
      <td> G34</td>
      <td> 40.688873</td>
      <td>-73.960070</td>
      <td>                         CLASSON AVENUE</td>
      <td> 0</td>
      <td> 0</td>
      <td> POINT (995323.6709855881053954 190253.96867972...</td>
      <td>  66.914476</td>
    </tr>
    <tr>
      <th>29 </th>
      <td> 0</td>
      <td>                 14TH STREET</td>
      <td> 0</td>
      <td>     1, 2, 3</td>
      <td>    1, 2, 3</td>
      <td>     1, 2, 3</td>
      <td> 0</td>
      <td> 0</td>
      <td> 132</td>
      <td> 40.737826</td>
      <td>-74.000201</td>
      <td>                     14TH STREET - 7 AV</td>
      <td> 0</td>
      <td> 0</td>
      <td> POINT (984194.2981757809175178 208086.51014474...</td>
      <td>  70.609422</td>
    </tr>
    <tr>
      <th>25 </th>
      <td> 0</td>
      <td>          34TH ST - PENN STA</td>
      <td> 0</td>
      <td>     1, 2, 3</td>
      <td>    1, 2, 3</td>
      <td>     1, 2, 3</td>
      <td> 0</td>
      <td> 0</td>
      <td> 128</td>
      <td> 40.750373</td>
      <td>-73.991057</td>
      <td>                   34TH ST. - PENN STA.</td>
      <td> 0</td>
      <td> 0</td>
      <td> POINT (986727.8487967300461605 212657.90902494...</td>
      <td>  72.088107</td>
    </tr>
    <tr>
      <th>264</th>
      <td> 0</td>
      <td>   WEST 4 ST - WASHINGTON SQ</td>
      <td> 0</td>
      <td>  B, D, F, M</td>
      <td> B, D, F, M</td>
      <td>  B, D, F, M</td>
      <td> 0</td>
      <td> 0</td>
      <td> D20</td>
      <td> 40.732338</td>
      <td>-74.000495</td>
      <td>              WEST 4 ST - WASHINGTON SQ</td>
      <td> 0</td>
      <td> 0</td>
      <td> POINT (984112.8125671034213156 206087.05948621...</td>
      <td>  73.108384</td>
    </tr>
    <tr>
      <th>202</th>
      <td> 0</td>
      <td>     WEST 4 ST - UPPER LEVEL</td>
      <td> 0</td>
      <td>     A, C, E</td>
      <td>    A, C, E</td>
      <td>     A, C, E</td>
      <td> 0</td>
      <td> 0</td>
      <td> A32</td>
      <td> 40.732338</td>
      <td>-74.000495</td>
      <td> WEST 4 ST - UPPER LEVEL - WASHINTON SQ</td>
      <td> 0</td>
      <td> 0</td>
      <td> POINT (984112.8125671034213156 206087.05948621...</td>
      <td>  73.108384</td>
    </tr>
    <tr>
      <th>379</th>
      <td> 0</td>
      <td>    UNION SQUARE - 14 STREET</td>
      <td> 0</td>
      <td>           L</td>
      <td>          L</td>
      <td>           L</td>
      <td> 0</td>
      <td> 0</td>
      <td> L03</td>
      <td> 40.734789</td>
      <td>-73.990730</td>
      <td>               UNION SQUARE - 14 STREET</td>
      <td> 0</td>
      <td> 0</td>
      <td> POINT (986819.0519664773019031 206980.17122261...</td>
      <td>  88.709241</td>
    </tr>
    <tr>
      <th>468</th>
      <td> 0</td>
      <td>           FRANKLIN - FULTON</td>
      <td> 0</td>
      <td>          FS</td>
      <td>         FS</td>
      <td>          FS</td>
      <td> 0</td>
      <td> 0</td>
      <td> S01</td>
      <td> 40.680596</td>
      <td>-73.955827</td>
      <td>                      FRANKLIN - FULTON</td>
      <td> 0</td>
      <td> 0</td>
      <td> POINT (996501.8904273939551786 187238.98248850...</td>
      <td>  93.778460</td>
    </tr>
    <tr>
      <th>33 </th>
      <td> 0</td>
      <td>             FRANKLIN STREET</td>
      <td> 0</td>
      <td>        1, 2</td>
      <td>       1, 2</td>
      <td>           1</td>
      <td> 0</td>
      <td> 0</td>
      <td> 136</td>
      <td> 40.719318</td>
      <td>-74.006886</td>
      <td>                  FRANKLIN STREET - IRT</td>
      <td> 0</td>
      <td> 0</td>
      <td> POINT (982341.1974872518330812 201343.54471072...</td>
      <td>  95.605657</td>
    </tr>
    <tr>
      <th>66 </th>
      <td> 0</td>
      <td>                CLARK STREET</td>
      <td> 0</td>
      <td>        2, 3</td>
      <td>       2, 3</td>
      <td>        2, 3</td>
      <td> 0</td>
      <td> 0</td>
      <td> 231</td>
      <td> 40.697466</td>
      <td>-73.993086</td>
      <td>                           CLARK STREET</td>
      <td> 0</td>
      <td> 0</td>
      <td> POINT (986167.1925104620167986 193382.20318109...</td>
      <td> 111.225469</td>
    </tr>
    <tr>
      <th>452</th>
      <td> 0</td>
      <td>                COURT STREET</td>
      <td> 0</td>
      <td>        N, R</td>
      <td>       N, R</td>
      <td>           R</td>
      <td> 0</td>
      <td> 0</td>
      <td> R28</td>
      <td> 40.694100</td>
      <td>-73.991777</td>
      <td>                           COURT STREET</td>
      <td> 0</td>
      <td> 0</td>
      <td> POINT (986530.2820280743762851 192155.90130567...</td>
      <td> 118.711249</td>
    </tr>
    <tr>
      <th>150</th>
      <td> 0</td>
      <td>           ASTOR PL - 8TH ST</td>
      <td> 0</td>
      <td>    4, 6, 6X</td>
      <td>       4, 6</td>
      <td>       6, 6X</td>
      <td> 0</td>
      <td> 0</td>
      <td> 636</td>
      <td> 40.730054</td>
      <td>-73.991070</td>
      <td>              ASTOR PL-8TH ST-LEXINGTON</td>
      <td> 0</td>
      <td> 0</td>
      <td> POINT (986725.0015453442465514 205255.05267647...</td>
      <td> 119.770376</td>
    </tr>
    <tr>
      <th>453</th>
      <td> 0</td>
      <td>             LAWRENCE STREET</td>
      <td> 0</td>
      <td>        N, R</td>
      <td>       N, R</td>
      <td>           R</td>
      <td> 0</td>
      <td> 0</td>
      <td> R29</td>
      <td> 40.692180</td>
      <td>-73.985942</td>
      <td>                        LAWRENCE STREET</td>
      <td> 0</td>
      <td> 0</td>
      <td> POINT (988148.4710910519352183 191456.59461087...</td>
      <td> 123.398057</td>
    </tr>
    <tr>
      <th>146</th>
      <td> 0</td>
      <td>                 33RD STREET</td>
      <td> 0</td>
      <td>    4, 6, 6X</td>
      <td>       4, 6</td>
      <td>       6, 6X</td>
      <td> 0</td>
      <td> 0</td>
      <td> 632</td>
      <td> 40.746081</td>
      <td>-73.982076</td>
      <td>                33RD STREET - LEXINGTON</td>
      <td> 0</td>
      <td> 0</td>
      <td> POINT (989216.5462419623509049 211094.57719528...</td>
      <td> 138.982620</td>
    </tr>
    <tr>
      <th>110</th>
      <td> 0</td>
      <td>               BOWLING GREEN</td>
      <td> 0</td>
      <td>        4, 5</td>
      <td>       4, 5</td>
      <td>        4, 5</td>
      <td> 0</td>
      <td> 0</td>
      <td> 420</td>
      <td> 40.704817</td>
      <td>-74.014065</td>
      <td>                          BOWLING GREEN</td>
      <td> 0</td>
      <td> 0</td>
      <td> POINT (980350.3269596468890086 196060.62890152...</td>
      <td> 141.074685</td>
    </tr>
    <tr>
      <th>111</th>
      <td> 0</td>
      <td>                BOROUGH HALL</td>
      <td> 0</td>
      <td>        4, 5</td>
      <td>       4, 5</td>
      <td>        4, 5</td>
      <td> 0</td>
      <td> 0</td>
      <td> 423</td>
      <td> 40.692404</td>
      <td>-73.990151</td>
      <td>                           BOROUGH HALL</td>
      <td> 0</td>
      <td> 0</td>
      <td> POINT (986981.2500260559609160 191538.04511447...</td>
      <td> 143.559130</td>
    </tr>
    <tr>
      <th>65 </th>
      <td> 0</td>
      <td>           WALL - WILLIAM ST</td>
      <td> 0</td>
      <td>        2, 3</td>
      <td>       2, 3</td>
      <td>        2, 3</td>
      <td> 0</td>
      <td> 0</td>
      <td> 230</td>
      <td> 40.706821</td>
      <td>-74.009100</td>
      <td>                      WALL - WILLIAM ST</td>
      <td> 0</td>
      <td> 0</td>
      <td> POINT (981727.0026338548632339 196790.56422357...</td>
      <td> 144.929036</td>
    </tr>
    <tr>
      <th>286</th>
      <td> 0</td>
      <td>          WORLD TRADE CENTER</td>
      <td> 0</td>
      <td>           E</td>
      <td>          E</td>
      <td>           E</td>
      <td> 0</td>
      <td> 0</td>
      <td> E01</td>
      <td> 40.712582</td>
      <td>-74.009781</td>
      <td>                     WORLD TRADE CENTER</td>
      <td> 0</td>
      <td> 0</td>
      <td> POINT (981538.4280721555696800 198889.49082954...</td>
      <td> 167.690080</td>
    </tr>
    <tr>
      <th>153</th>
      <td> 0</td>
      <td>                CANAL STREET</td>
      <td> 0</td>
      <td>    4, 6, 6X</td>
      <td>       4, 6</td>
      <td>       6, 6X</td>
      <td> 0</td>
      <td> 0</td>
      <td> 639</td>
      <td> 40.718803</td>
      <td>-74.000193</td>
      <td>                           CANAL STREET</td>
      <td> 0</td>
      <td> 0</td>
      <td> POINT (984196.4998937002383173 201155.83945951...</td>
      <td> 168.431615</td>
    </tr>
    <tr>
      <th>440</th>
      <td> 0</td>
      <td>        TIMES SQUARE - 42 ST</td>
      <td> 0</td>
      <td>     N, Q, R</td>
      <td>    N, Q, R</td>
      <td>     N, Q, R</td>
      <td> 0</td>
      <td> 0</td>
      <td> R16</td>
      <td> 40.754672</td>
      <td>-73.986754</td>
      <td>                   TIMES SQUARE - 42 ST</td>
      <td> 0</td>
      <td> 0</td>
      <td> POINT (987919.8498279451159760 214224.32476743...</td>
      <td> 175.614456</td>
    </tr>
    <tr>
      <th>152</th>
      <td> 0</td>
      <td>               SPRING STREET</td>
      <td> 0</td>
      <td>    4, 6, 6X</td>
      <td>       4, 6</td>
      <td>       6, 6X</td>
      <td> 0</td>
      <td> 0</td>
      <td> 638</td>
      <td> 40.722301</td>
      <td>-73.997141</td>
      <td>                SPRING STREET-LEXINGTON</td>
      <td> 0</td>
      <td> 0</td>
      <td> POINT (985042.4807051534298807 202430.28120299...</td>
      <td> 177.608606</td>
    </tr>
    <tr>
      <th>154</th>
      <td> 0</td>
      <td> BROOKLYN BRIDGE - CITY HALL</td>
      <td> 0</td>
      <td> 4, 5, 6, 6X</td>
      <td>    4, 5, 6</td>
      <td> 4, 5, 6, 6X</td>
      <td> 0</td>
      <td> 0</td>
      <td> 640</td>
      <td> 40.713065</td>
      <td>-74.004131</td>
      <td>              BROOKLYN BRIDGE-CITY HALL</td>
      <td> 0</td>
      <td> 0</td>
      <td> POINT (983104.7773761419812217 199065.33800586...</td>
      <td> 179.154057</td>
    </tr>
    <tr>
      <th>437</th>
      <td> 0</td>
      <td>          5TH AVENUE - 59 ST</td>
      <td> 0</td>
      <td>     N, Q, R</td>
      <td>    N, Q, R</td>
      <td>     N, Q, R</td>
      <td> 0</td>
      <td> 0</td>
      <td> R13</td>
      <td> 40.764811</td>
      <td>-73.973347</td>
      <td>                     5TH AVENUE - 59 ST</td>
      <td> 0</td>
      <td> 0</td>
      <td> POINT (991633.1812181912828237 217919.14007588...</td>
      <td> 181.966930</td>
    </tr>
    <tr>
      <th>63 </th>
      <td> 0</td>
      <td>                  PARK PLACE</td>
      <td> 0</td>
      <td>        2, 3</td>
      <td>       2, 3</td>
      <td>        2, 3</td>
      <td> 0</td>
      <td> 0</td>
      <td> 228</td>
      <td> 40.713051</td>
      <td>-74.008811</td>
      <td>                             PARK PLACE</td>
      <td> 0</td>
      <td> 0</td>
      <td> POINT (981807.3569002770818770 199060.33322413...</td>
      <td> 193.206210</td>
    </tr>
    <tr>
      <th>447</th>
      <td> 0</td>
      <td>       CANAL STREET / TUNNEL</td>
      <td> 0</td>
      <td>        N, R</td>
      <td>       N, R</td>
      <td>           R</td>
      <td> 0</td>
      <td> 0</td>
      <td> R23</td>
      <td> 40.719527</td>
      <td>-74.001775</td>
      <td>                  CANAL STREET / TUNNEL</td>
      <td> 0</td>
      <td> 0</td>
      <td> POINT (983757.9706885487539694 201419.61978007...</td>
      <td> 199.384739</td>
    </tr>
    <tr>
      <th>455</th>
      <td> 0</td>
      <td>   PACIFIC STREET - ATLANTIC</td>
      <td> 0</td>
      <td>     D, N, R</td>
      <td>    D, N, R</td>
      <td>     D, N, R</td>
      <td> 0</td>
      <td> 0</td>
      <td> R31</td>
      <td> 40.683666</td>
      <td>-73.978810</td>
      <td>              PACIFIC STREET - ATLANTIC</td>
      <td> 0</td>
      <td> 0</td>
      <td> POINT (990127.0202370891347528 188355.09395690...</td>
      <td> 201.003312</td>
    </tr>
    <tr>
      <th>451</th>
      <td> 0</td>
      <td>  WHITEHALL ST - SOUTH FERRY</td>
      <td> 0</td>
      <td>        N, R</td>
      <td>       N, R</td>
      <td>           R</td>
      <td> 0</td>
      <td> 0</td>
      <td> R27</td>
      <td> 40.703087</td>
      <td>-74.012994</td>
      <td>             WHITEHALL ST - SOUTH FERRY</td>
      <td> 0</td>
      <td> 0</td>
      <td> POINT (980647.1797695906134322 195430.29227482...</td>
      <td> 209.317385</td>
    </tr>
    <tr>
      <th>30 </th>
      <td> 0</td>
      <td>    CHRISTOPHER - SHERIDAN S</td>
      <td> 0</td>
      <td>        1, 2</td>
      <td>       1, 2</td>
      <td>           1</td>
      <td> 0</td>
      <td> 0</td>
      <td> 133</td>
      <td> 40.733422</td>
      <td>-74.002906</td>
      <td>               CHRISTOPHER - SHERIDAN S</td>
      <td> 0</td>
      <td> 0</td>
      <td> POINT (983444.6258696077857167 206482.00762564...</td>
      <td> 214.939800</td>
    </tr>
    <tr>
      <th>233</th>
      <td> 0</td>
      <td>                 57TH STREET</td>
      <td> 0</td>
      <td>           F</td>
      <td>          F</td>
      <td>           F</td>
      <td> 0</td>
      <td> 0</td>
      <td> B10</td>
      <td> 40.763971</td>
      <td>-73.977451</td>
      <td>                            57TH STREET</td>
      <td> 0</td>
      <td> 0</td>
      <td> POINT (990496.4057980824727565 217612.78110756...</td>
      <td> 215.129488</td>
    </tr>
    <tr>
      <th>299</th>
      <td> 0</td>
      <td>               EAST BROADWAY</td>
      <td> 0</td>
      <td>           F</td>
      <td>          F</td>
      <td>           F</td>
      <td> 0</td>
      <td> 0</td>
      <td> F16</td>
      <td> 40.713715</td>
      <td>-73.990173</td>
      <td>                          EAST BROADWAY</td>
      <td> 0</td>
      <td> 0</td>
      <td> POINT (986974.2781306741526350 199302.27855590...</td>
      <td> 217.541106</td>
    </tr>
    <tr>
      <th>149</th>
      <td> 0</td>
      <td>      14TH STREET - UNION SQ</td>
      <td> 0</td>
      <td> 4, 5, 6, 6X</td>
      <td>    4, 5, 6</td>
      <td> 4, 5, 6, 6X</td>
      <td> 0</td>
      <td> 0</td>
      <td> 635</td>
      <td> 40.734673</td>
      <td>-73.989951</td>
      <td>     14TH STREET - LEXINGTON - UNION SQ</td>
      <td> 0</td>
      <td> 0</td>
      <td> POINT (987034.9458625873085111 206937.93258355...</td>
      <td> 223.912820</td>
    </tr>
    <tr>
      <th>213</th>
      <td> 0</td>
      <td>             NOSTRAND AVENUE</td>
      <td> 0</td>
      <td>        A, C</td>
      <td>       A, C</td>
      <td>        A, C</td>
      <td> 0</td>
      <td> 0</td>
      <td> A46</td>
      <td> 40.680438</td>
      <td>-73.950426</td>
      <td>                        NOSTRAND AVENUE</td>
      <td> 0</td>
      <td> 0</td>
      <td> POINT (997999.9524234756827354 187182.22013890...</td>
      <td> 224.666183</td>
    </tr>
    <tr>
      <th>32 </th>
      <td> 0</td>
      <td>                CANAL STREET</td>
      <td> 0</td>
      <td>        1, 2</td>
      <td>       1, 2</td>
      <td>           1</td>
      <td> 0</td>
      <td> 0</td>
      <td> 135</td>
      <td> 40.722854</td>
      <td>-74.006277</td>
      <td>                     CANAL STREET - IRT</td>
      <td> 0</td>
      <td> 0</td>
      <td> POINT (982510.1048944095382467 202631.80555372...</td>
      <td> 227.607107</td>
    </tr>
    <tr>
      <th>145</th>
      <td> 0</td>
      <td>       GRAND CENTRAL - 42 ST</td>
      <td> 0</td>
      <td> 4, 5, 6, 6X</td>
      <td>    4, 5, 6</td>
      <td> 4, 5, 6, 6X</td>
      <td> 0</td>
      <td> 0</td>
      <td> 631</td>
      <td> 40.751776</td>
      <td>-73.976848</td>
      <td>      GRAND CENTRAL - LEXINGTON - 42 ST</td>
      <td> 0</td>
      <td> 0</td>
      <td> POINT (990664.6199910029536113 213169.78841024...</td>
      <td> 239.768312</td>
    </tr>
    <tr>
      <th>23 </th>
      <td> 0</td>
      <td>                 50TH STREET</td>
      <td> 0</td>
      <td>        1, 2</td>
      <td>       1, 2</td>
      <td>           1</td>
      <td> 0</td>
      <td> 0</td>
      <td> 126</td>
      <td> 40.761728</td>
      <td>-73.983849</td>
      <td>                       50TH STREET-BWAY</td>
      <td> 0</td>
      <td> 0</td>
      <td> POINT (988724.2160682404646650 216795.19093156...</td>
      <td> 244.701644</td>
    </tr>
    <tr>
      <th>37 </th>
      <td> 0</td>
      <td>        SOUTH FERRY - A LOOP</td>
      <td> 0</td>
      <td>        None</td>
      <td>       None</td>
      <td>        None</td>
      <td> 0</td>
      <td> 0</td>
      <td> 140</td>
      <td> 40.701411</td>
      <td>-74.013205</td>
      <td>                   SOUTH FERRY (A LOOP)</td>
      <td> 0</td>
      <td> 0</td>
      <td> POINT (980588.5841761393239722 194819.68421093...</td>
      <td> 249.023753</td>
    </tr>
    <tr>
      <th>441</th>
      <td> 0</td>
      <td>     34TH STREET - HERALD SQ</td>
      <td> 0</td>
      <td>     N, Q, R</td>
      <td>    N, Q, R</td>
      <td>     N, Q, R</td>
      <td> 0</td>
      <td> 0</td>
      <td> R17</td>
      <td> 40.749567</td>
      <td>-73.987950</td>
      <td>                34TH STREET - HERALD SQ</td>
      <td> 0</td>
      <td> 0</td>
      <td> POINT (987588.7497721284162253 212364.36041824...</td>
      <td> 250.339118</td>
    </tr>
    <tr>
      <th>26 </th>
      <td> 0</td>
      <td>                 28TH STREET</td>
      <td> 0</td>
      <td>        1, 2</td>
      <td>       1, 2</td>
      <td>           1</td>
      <td> 0</td>
      <td> 0</td>
      <td> 129</td>
      <td> 40.747215</td>
      <td>-73.993365</td>
      <td>                     28TH STREET - 7 AV</td>
      <td> 0</td>
      <td> 0</td>
      <td> POINT (986088.4553448115475476 211507.29123174...</td>
      <td> 257.000565</td>
    </tr>
    <tr>
      <th>24 </th>
      <td> 0</td>
      <td>          42ND ST - TIMES SQ</td>
      <td> 0</td>
      <td>     1, 2, 3</td>
      <td>    1, 2, 3</td>
      <td>     1, 2, 3</td>
      <td> 0</td>
      <td> 0</td>
      <td> 127</td>
      <td> 40.755290</td>
      <td>-73.987495</td>
      <td>                   42ND ST. - TIMES SQ.</td>
      <td> 0</td>
      <td> 0</td>
      <td> POINT (987714.5210899838712066 214449.45205993...</td>
      <td> 259.584020</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">optparse</span>

<span class="n">LOGGING_LEVELS</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;critical&#39;</span><span class="p">:</span> <span class="n">logging</span><span class="o">.</span><span class="n">CRITICAL</span><span class="p">,</span>
                  <span class="s">&#39;error&#39;</span><span class="p">:</span> <span class="n">logging</span><span class="o">.</span><span class="n">ERROR</span><span class="p">,</span>
                  <span class="s">&#39;warning&#39;</span><span class="p">:</span> <span class="n">logging</span><span class="o">.</span><span class="n">WARNING</span><span class="p">,</span>
                  <span class="s">&#39;info&#39;</span><span class="p">:</span> <span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">,</span>
                  <span class="s">&#39;debug&#39;</span><span class="p">:</span> <span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">}</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
  <span class="n">parser</span> <span class="o">=</span> <span class="n">optparse</span><span class="o">.</span><span class="n">OptionParser</span><span class="p">()</span>
  <span class="n">parser</span><span class="o">.</span><span class="n">add_option</span><span class="p">(</span><span class="s">&#39;-l&#39;</span><span class="p">,</span> <span class="s">&#39;--logging-level&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;Logging level&#39;</span><span class="p">)</span>
  <span class="n">parser</span><span class="o">.</span><span class="n">add_option</span><span class="p">(</span><span class="s">&#39;-f&#39;</span><span class="p">,</span> <span class="s">&#39;--logging-file&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&#39;Logging file name&#39;</span><span class="p">)</span>
  <span class="p">(</span><span class="n">options</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
  <span class="n">logging_level</span> <span class="o">=</span> <span class="n">LOGGING_LEVELS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">options</span><span class="o">.</span><span class="n">logging_level</span><span class="p">,</span> <span class="n">logging</span><span class="o">.</span><span class="n">NOTSET</span><span class="p">)</span>
  <span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">logging_level</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="n">options</span><span class="o">.</span><span class="n">logging_file</span><span class="p">,</span>
                      <span class="n">format</span><span class="o">=</span><span class="s">&#39;</span><span class="si">%(asctime)s</span><span class="s"> </span><span class="si">%(levelname)s</span><span class="s">: </span><span class="si">%(message)s</span><span class="s">&#39;</span><span class="p">,</span>
                      <span class="n">datefmt</span><span class="o">=</span><span class="s">&#39;%Y-%m-</span><span class="si">%d</span><span class="s"> %H:%M:%S&#39;</span><span class="p">)</span>

  <span class="c"># Your program goes here.</span>
  <span class="c"># You can access command-line arguments using the args variable.</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
  <span class="n">main</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>how to use the above:</p>
<p>By default, the logging module prints critical, error and warning messages. To change this so that all levels are printed, use:</p>
<p>$ ./your-program.py --logging=debug
To send log messages to a file called debug.log, use:</p>
<p>$ ./your-program.py --logging-level=debug --logging-file=debug.log</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2>Get Coordinates Between Diff CRS Geometries:</h2>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="kn">from</span> <span class="nn">pyproj</span> <span class="kn">import</span> <span class="n">Proj</span><span class="p">,</span> <span class="n">transform</span>

<span class="kn">from</span> <span class="nn">urllib2</span> <span class="kn">import</span> <span class="n">urlopen</span>
<span class="k">def</span> <span class="nf">get_epsg</span><span class="p">(</span><span class="n">check_code</span><span class="p">):</span>
    <span class="n">x</span><span class="o">=</span> <span class="s">&#39;http://www.spatialreference.org/ref/esri/</span><span class="si">%s</span><span class="s">/proj4/&#39;</span> <span class="o">%</span> <span class="n">check_code</span>
    <span class="k">return</span> <span class="n">urlopen</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="c"># inProj = Proj(&#39;+proj=lcc +lat_1=40.66666666666666 +lat_2=41.03333333333333 +lat_0=40.16666666666666 +lon_0=-74 +x_0=300000 +y_0=0 +datum=NAD83 +units=us-ft +no_defs&#39;)</span>

<span class="c"># Converting from lion to WGS 84</span>
<span class="c"># inProj = Proj(get_epsg(&#39;102718&#39;))</span>
<span class="c"># outProj = Proj(init=&#39;epsg:4326&#39;)</span>
<span class="c"># x1,y1 = 982640,208523</span>

<span class="c"># Converting from WGS84 to lion</span>
<span class="n">inProj</span> <span class="o">=</span> <span class="n">Proj</span><span class="p">(</span><span class="n">init</span><span class="o">=</span><span class="s">&#39;epsg:4326&#39;</span><span class="p">)</span>
<span class="n">outProj</span> <span class="o">=</span> <span class="n">Proj</span><span class="p">(</span><span class="n">get_epsg</span><span class="p">(</span><span class="s">&#39;102718&#39;</span><span class="p">))</span>
<span class="n">x1</span><span class="p">,</span><span class="n">y1</span> <span class="o">=</span> <span class="o">-</span><span class="mf">73.98468</span><span class="p">,</span><span class="mf">40.74531</span>

<span class="n">x2</span><span class="p">,</span><span class="n">y2</span> <span class="o">=</span> <span class="n">transform</span><span class="p">(</span><span class="n">inProj</span><span class="p">,</span><span class="n">outProj</span><span class="p">,</span><span class="n">x1</span><span class="p">,</span><span class="n">y1</span><span class="p">)</span>
<span class="k">print</span> <span class="n">x2</span><span class="p">,</span><span class="n">y2</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2>Open OpenStreetMap Source (*.osm):</h2>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="kn">import</span> <span class="nn">ogr</span>
<span class="n">driver</span> <span class="o">=</span> <span class="n">ogr</span><span class="o">.</span><span class="n">GetDriverByName</span><span class="p">(</span><span class="s">&#39;OSM&#39;</span><span class="p">)</span>
<span class="n">srcFile</span> <span class="o">=</span> <span class="s">&#39;/Users/admin/Projects/GIS/NYC_gov_data/lion/lion_wgs84.osm&#39;</span>
<span class="n">datasource</span> <span class="o">=</span> <span class="n">driver</span><span class="o">.</span><span class="n">Open</span><span class="p">(</span><span class="n">srcFile</span><span class="p">)</span>
<span class="n">osm_layer</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="n">GetLayer</span><span class="p">()</span>
<span class="n">osm_feature</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">GetFeature</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">a</span><span class="o">=</span><span class="n">osm_feature</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">a</span><span class="p">)):</span>
    <span class="k">print</span> <span class="s">&#39;</span><span class="se">\t</span><span class="s">&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2>Open Shapefile Source:</h2>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="kn">import</span> <span class="nn">os.path</span>  
<span class="kn">import</span> <span class="nn">osgeo.ogr</span>  

<span class="c"># srcFile = &#39;/Users/admin/Projects/GIS/NYC_gov_data/Manhattan/MNMapPLUTO_wgs84.shp&#39;</span>
<span class="n">srcFile</span> <span class="o">=</span> <span class="s">&#39;/Users/admin/Projects/GIS/NYC_gov_data/lion/lion_wgs84.shp&#39;</span>
<span class="n">shapefile</span> <span class="o">=</span> <span class="n">osgeo</span><span class="o">.</span><span class="n">ogr</span><span class="o">.</span><span class="n">Open</span><span class="p">(</span><span class="n">srcFile</span><span class="p">)</span>  
<span class="n">layer</span> <span class="o">=</span> <span class="n">shapefile</span><span class="o">.</span><span class="n">GetLayer</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">feature</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">GetFeature</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># To get CRS:</span>
<span class="c"># print layer.GetSpatialRef()</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># To get extent:</span>
<span class="c"># layer.GetExtent()</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># To check if there is a geometry column (for routing)</span>
<span class="c"># layer.GetGeometryColumn()</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># To get list of all features/columns:</span>
<span class="c"># a=feature.keys()</span>
<span class="c"># for i in range(0,len(a)):</span>
<span class="c">#     print &#39;\t&#39;+str(a[i])</span>

<span class="c"># b=feature.items()</span>
<span class="c"># for k,v in b.iteritems():</span>
<span class="c">#     print &#39;\t&#39;+str(k)+&#39;\t&#39;+str(v)</span>

<span class="c"># print layer.GetFeatureCount()</span>
<span class="c"># print feature.ExportToJson()</span>

<span class="c"># print feature.GetField(&quot;NAME&quot;).decode(&quot;utf-8&quot;) </span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># for i in range(layer.GetFeatureCount()):  </span>
<span class="c">#     feature = layer.GetFeature(i)  </span>
<span class="c">#     name = feature.GetField(&quot;NAME&quot;).decode(&quot;utf-8&quot;)  </span>
<span class="c">#     wkt = feature.GetGeometryRef().ExportToWkt()  </span>
<span class="c">#     break</span>
<span class="c">#     cursor.execute(&quot;INSERT INTO countries (name,outline) &quot; +&quot;VALUES (%s, ST_GeometryFromText(%s, &quot; +&quot;4326))&quot;, (name.encode(&quot;utf8&quot;), wkt))  </span>

<span class="c"># connection.commit()</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[15]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># User Info</span>
<span class="n">client_id</span><span class="o">=</span><span class="s">&#39;212864198017-k5lpqune6ka16pt6jh88eovjhrlk4khk.apps.googleusercontent.com&#39;</span>
<span class="n">client_secret</span><span class="o">=</span><span class="s">&#39;nUqaZrknnBZRiNVyOsFxn-0i&#39;</span>
<span class="n">api_key</span><span class="o">=</span><span class="s">&#39;AIzaSyC_3Q2UaeUacxHhrtrK9a58ObdSh-KWsZE&#39;</span>
<span class="n">proj_id</span> <span class="o">=</span> <span class="s">&#39;212864198017&#39;</span>
<span class="n">proj_name</span><span class="o">=</span><span class="s">&#39;aporodeliverynyc&#39;</span>
<span class="n">map_project_id</span> <span class="o">=</span> <span class="s">&#39;09028650456231885293&#39;</span>
<span class="n">map_project_name</span> <span class="o">=</span> <span class="s">&#39;Aporo&#39;</span>
<span class="n">test_url</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;https://www.googleapis.com/mapsengine/v1/tables/12421761926155747447-06672618218968397709/features</span>
<span class="s">  ?maxResults=500</span>
<span class="s">  &amp;version=published</span>
<span class="s">  &amp;key={</span><span class="si">%s</span><span class="s">}&quot;&quot;&quot;</span><span class="o">%</span><span class="k">api_key</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># Maps Engine Authentication</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="kn">from</span> <span class="nn">apiclient.discovery</span> <span class="kn">import</span> <span class="n">build</span>
<span class="kn">from</span> <span class="nn">oauth2client.client</span> <span class="kn">import</span> <span class="n">flow_from_clientsecrets</span>
<span class="kn">from</span> <span class="nn">oauth2client.file</span> <span class="kn">import</span> <span class="n">Storage</span>
<span class="kn">from</span> <span class="nn">oauth2client.tools</span> <span class="kn">import</span> <span class="n">run</span>

<span class="n">CLIENT_SECRETS_FILE</span> <span class="o">=</span> <span class="s">&quot;../creds/client_secrets.json&quot;</span>

<span class="c"># This OAuth 2.0 access scope allows for full read/write access to the</span>
<span class="c"># authenticated user&#39;s account.</span>
<span class="n">MAPENGINE_READ_WRITE_SCOPE</span> <span class="o">=</span> <span class="s">&quot;https://www.googleapis.com/auth/mapsengine&quot;</span>
<span class="n">MAPENGINE_API_SERVICE_NAME</span> <span class="o">=</span> <span class="s">&quot;mapsengine&quot;</span>
<span class="n">MAPENGINE_API_VERSION</span> <span class="o">=</span> <span class="s">&quot;v1&quot;</span>

<span class="n">flow</span> <span class="o">=</span> <span class="n">flow_from_clientsecrets</span><span class="p">(</span><span class="n">CLIENT_SECRETS_FILE</span><span class="p">,</span>
                               <span class="n">scope</span><span class="o">=</span><span class="n">MAPENGINE_READ_WRITE_SCOPE</span><span class="p">)</span>
<span class="n">OAUTH2_STORAGE</span> <span class="o">=</span> <span class="s">&#39;oauth2.dat&#39;</span>
<span class="n">storage</span> <span class="o">=</span> <span class="n">Storage</span><span class="p">(</span><span class="n">OAUTH2_STORAGE</span><span class="p">)</span>
<span class="n">credentials</span> <span class="o">=</span> <span class="n">storage</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>

<span class="k">if</span> <span class="n">credentials</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">or</span> <span class="n">credentials</span><span class="o">.</span><span class="n">invalid</span><span class="p">:</span>
    <span class="n">credentials</span> <span class="o">=</span> <span class="n">run</span><span class="p">(</span><span class="n">flow</span><span class="p">,</span> <span class="n">storage</span><span class="p">)</span>

<span class="n">x</span> <span class="o">=</span> <span class="n">build</span><span class="p">(</span><span class="n">MAPENGINE_API_SERVICE_NAME</span><span class="p">,</span>
             <span class="n">MAPENGINE_API_VERSION</span><span class="p">,</span>
             <span class="n">http</span><span class="o">=</span><span class="n">credentials</span><span class="o">.</span><span class="n">authorize</span><span class="p">(</span><span class="n">httplib2</span><span class="o">.</span><span class="n">Http</span><span class="p">()))</span>

<span class="kn">import</span> <span class="nn">httplib2</span>
<span class="n">http</span> <span class="o">=</span> <span class="n">httplib2</span><span class="o">.</span><span class="n">Http</span><span class="p">()</span>
<span class="n">http</span> <span class="o">=</span> <span class="n">credentials</span><span class="o">.</span><span class="n">authorize</span><span class="p">(</span><span class="n">http</span><span class="p">)</span>

<span class="kn">from</span> <span class="nn">oauth2client.file</span> <span class="kn">import</span> <span class="n">Storage</span>
<span class="n">storage</span> <span class="o">=</span> <span class="n">Storage</span><span class="p">(</span><span class="s">&#39;oauth2.dat&#39;</span><span class="p">)</span>
<span class="n">storage</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">credentials</span><span class="p">)</span>
<span class="n">credentials</span> <span class="o">=</span> <span class="n">storage</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># Maps Engine API Queries</span>
<span class="n">table_list_url</span> <span class="o">=</span> <span class="s">&#39;https://www.googleapis.com/mapsengine/v1/tables?key={</span><span class="si">%s</span><span class="s">}&#39;</span><span class="o">%</span><span class="k">api_key</span>
<span class="n">layer_list_url</span> <span class="o">=</span> <span class="s">&#39;https://www.googleapis.com/mapsengine/v1/layers?key={</span><span class="si">%s</span><span class="s">}&#39;</span><span class="o">%</span><span class="k">api_key</span>
<span class="n">asset_list_url</span> <span class="o">=</span> <span class="s">&#39;https://www.googleapis.com/mapsengine/v1/assets?key={</span><span class="si">%s</span><span class="s">}&#39;</span><span class="o">%</span><span class="k">api_key</span>
<span class="n">layer_permissions</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;https://www.googleapis.com/mapsengine/v1/layers/09028650456231885293/permissions?key={</span><span class="si">%s</span><span class="s">}&quot;&quot;&quot;</span><span class="o">%</span><span class="k">api_key</span>
<span class="n">map_list_url</span> <span class="o">=</span> <span class="s">&#39;https://www.googleapis.com/mapsengine/v1/maps?key={</span><span class="si">%s</span><span class="s">}&#39;</span><span class="o">%</span><span class="k">api_key</span>
<span class="n">http</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="n">asset_list_url</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># Fusion Tables Authentication</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="kn">from</span> <span class="nn">apiclient.discovery</span> <span class="kn">import</span> <span class="n">build</span>
<span class="kn">from</span> <span class="nn">oauth2client.client</span> <span class="kn">import</span> <span class="n">flow_from_clientsecrets</span>
<span class="kn">from</span> <span class="nn">oauth2client.file</span> <span class="kn">import</span> <span class="n">Storage</span>
<span class="kn">from</span> <span class="nn">oauth2client.tools</span> <span class="kn">import</span> <span class="n">run</span>

<span class="n">CLIENT_SECRETS_FILE</span> <span class="o">=</span> <span class="s">&quot;../creds/client_secrets.json&quot;</span>

<span class="n">FUSIONTABLES_READ_WRITE_SCOPE</span> <span class="o">=</span> <span class="s">&quot;https://www.googleapis.com/auth/fusiontables&quot;</span>
<span class="n">FUSIONTABLES_API_SERVICE_NAME</span> <span class="o">=</span> <span class="s">&quot;fusiontables&quot;</span>
<span class="n">FUSIONTABLES_API_VERSION</span> <span class="o">=</span> <span class="s">&quot;v2&quot;</span>

<span class="n">flow</span> <span class="o">=</span> <span class="n">flow_from_clientsecrets</span><span class="p">(</span><span class="n">CLIENT_SECRETS_FILE</span><span class="p">,</span>
                               <span class="n">scope</span><span class="o">=</span><span class="n">FUSIONTABLES_READ_WRITE_SCOPE</span><span class="p">)</span>
<span class="n">OAUTH2_STORAGE</span> <span class="o">=</span> <span class="s">&#39;</span><span class="si">%s</span><span class="s">_oauth2.dat&#39;</span><span class="o">%</span><span class="k">FUSIONTABLES_API_SERVICE_NAME</span>
<span class="n">storage</span> <span class="o">=</span> <span class="n">Storage</span><span class="p">(</span><span class="n">OAUTH2_STORAGE</span><span class="p">)</span>
<span class="n">credentials</span> <span class="o">=</span> <span class="n">storage</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>

<span class="k">if</span> <span class="n">credentials</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">or</span> <span class="n">credentials</span><span class="o">.</span><span class="n">invalid</span><span class="p">:</span>
    <span class="n">credentials</span> <span class="o">=</span> <span class="n">run</span><span class="p">(</span><span class="n">flow</span><span class="p">,</span> <span class="n">storage</span><span class="p">)</span>

<span class="n">x</span> <span class="o">=</span> <span class="n">build</span><span class="p">(</span><span class="n">FUSIONTABLES_API_SERVICE_NAME</span><span class="p">,</span>
             <span class="n">FUSIONTABLES_API_VERSION</span><span class="p">,</span>
             <span class="n">http</span><span class="o">=</span><span class="n">credentials</span><span class="o">.</span><span class="n">authorize</span><span class="p">(</span><span class="n">httplib2</span><span class="o">.</span><span class="n">Http</span><span class="p">()))</span>

<span class="kn">import</span> <span class="nn">httplib2</span>
<span class="n">http</span> <span class="o">=</span> <span class="n">httplib2</span><span class="o">.</span><span class="n">Http</span><span class="p">()</span>
<span class="n">http</span> <span class="o">=</span> <span class="n">credentials</span><span class="o">.</span><span class="n">authorize</span><span class="p">(</span><span class="n">http</span><span class="p">)</span>

<span class="n">storage</span> <span class="o">=</span> <span class="n">Storage</span><span class="p">(</span><span class="n">OAUTH2_STORAGE</span><span class="p">)</span>
<span class="n">storage</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">credentials</span><span class="p">)</span>
<span class="n">credentials</span> <span class="o">=</span> <span class="n">storage</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[31]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># Fusion Tables API Queries</span>
<span class="n">table_list_url</span> <span class="o">=</span> <span class="s">&#39;https://www.googleapis.com/fusiontables/v2/tables?key={</span><span class="si">%s</span><span class="s">}&#39;</span><span class="o">%</span><span class="k">api_key</span>
<span class="n">http</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="n">table_list_url</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">
    Out[31]:</div>


<div class="output_text output_subarea output_pyout">
<pre>({&apos;-content-encoding&apos;: &apos;gzip&apos;,
  &apos;alternate-protocol&apos;: &apos;443:quic,p=0.02&apos;,
  &apos;cache-control&apos;: &apos;private, max-age=0, must-revalidate, no-transform&apos;,
  &apos;content-length&apos;: &apos;912&apos;,
  &apos;content-location&apos;: &apos;https://www.googleapis.com/fusiontables/v2/tables?key={AIzaSyC_3Q2UaeUacxHhrtrK9a58ObdSh-KWsZE}&apos;,
  &apos;content-type&apos;: &apos;application/json; charset=UTF-8&apos;,
  &apos;date&apos;: &apos;Tue, 25 Nov 2014 07:11:26 GMT&apos;,
  &apos;etag&apos;: &apos;&quot;PPgrmNoAMR0GM6l-lmUtIHk48Kw/t3bwbB3qH4svcmvMTORVtOPlApQ&quot;&apos;,
  &apos;expires&apos;: &apos;Tue, 25 Nov 2014 07:11:26 GMT&apos;,
  &apos;server&apos;: &apos;GSE&apos;,
  &apos;status&apos;: &apos;200&apos;,
  &apos;transfer-encoding&apos;: &apos;chunked&apos;,
  &apos;vary&apos;: &apos;Origin, X-Origin&apos;,
  &apos;x-content-type-options&apos;: &apos;nosniff&apos;,
  &apos;x-frame-options&apos;: &apos;SAMEORIGIN&apos;,
  &apos;x-xss-protection&apos;: &apos;1; mode=block&apos;},
 &apos;{\n &quot;kind&quot;: &quot;fusiontables#tableList&quot;,\n &quot;items&quot;: [\n  {\n   &quot;kind&quot;: &quot;fusiontables#table&quot;,\n   &quot;tableId&quot;: &quot;1VrFbTwYEBISYEMR3ViX0ff2on9wcYXgFps7PqeU&quot;,\n   &quot;name&quot;: &quot;New Table&quot;,\n   &quot;columns&quot;: [\n    {\n     &quot;kind&quot;: &quot;fusiontables#column&quot;,\n     &quot;columnId&quot;: 0,\n     &quot;name&quot;: &quot;Text&quot;,\n     &quot;type&quot;: &quot;STRING&quot;,\n     &quot;formatPattern&quot;: &quot;NONE&quot;,\n     &quot;validateData&quot;: false\n    },\n    {\n     &quot;kind&quot;: &quot;fusiontables#column&quot;,\n     &quot;columnId&quot;: 1,\n     &quot;name&quot;: &quot;Number&quot;,\n     &quot;type&quot;: &quot;NUMBER&quot;,\n     &quot;formatPattern&quot;: &quot;NONE&quot;,\n     &quot;validateData&quot;: false\n    },\n    {\n     &quot;kind&quot;: &quot;fusiontables#column&quot;,\n     &quot;columnId&quot;: 2,\n     &quot;name&quot;: &quot;Location&quot;,\n     &quot;type&quot;: &quot;LOCATION&quot;,\n     &quot;formatPattern&quot;: &quot;NONE&quot;,\n     &quot;validateData&quot;: false\n    },\n    {\n     &quot;kind&quot;: &quot;fusiontables#column&quot;,\n     &quot;columnId&quot;: 3,\n     &quot;name&quot;: &quot;Date&quot;,\n     &quot;type&quot;: &quot;DATETIME&quot;,\n     &quot;formatPattern&quot;: &quot;NONE&quot;,\n     &quot;validateData&quot;: false\n    }\n   ],\n   &quot;isExportable&quot;: true\n  }\n ]\n}\n&apos;)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[7]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### Load Libraries</span>
<span class="kn">from</span> <span class="nn">os</span> <span class="kn">import</span> <span class="n">getcwd</span>
<span class="n">this_cwd</span> <span class="o">=</span> <span class="n">getcwd</span><span class="p">()</span><span class="o">+</span><span class="s">&#39;/&#39;</span>
<span class="kn">from</span> <span class="nn">sys</span> <span class="kn">import</span> <span class="n">path</span> <span class="k">as</span> <span class="n">sys_path</span>
<span class="n">sys_path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">this_cwd</span><span class="o">+</span><span class="s">&#39;../../geolocation&#39;</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">f_postgres</span> <span class="kn">import</span> <span class="n">geom_inside_street_box</span><span class="p">,</span><span class="n">make_column_primary_serial_key</span>
<span class="kn">import</span> <span class="nn">geopandas</span> <span class="kn">as</span> <span class="nn">gd</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s">&#39;display.max_rows&#39;</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span>
<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s">r&#39;postgresql://postgres:postgres@192.168.2.50:8800/routing&#39;</span><span class="p">,</span>
                       <span class="n">encoding</span><span class="o">=</span><span class="s">&#39;utf-8&#39;</span><span class="p">,</span>
                       <span class="n">echo</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">seamless</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### Assumptions</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">Assumption</span><span class="p">(</span><span class="n">get_var</span><span class="o">=</span><span class="s">&#39;all&#39;</span><span class="p">)</span>
<span class="nb">sorted</span><span class="p">([</span><span class="n">it</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">a</span><span class="o">.</span><span class="n">iteritems</span><span class="p">()])</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### Initial Var Setup</span>
<span class="k">if</span> <span class="n">global_op_vars</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span>
    <span class="k">global</span> <span class="n">sim_data</span><span class="p">,</span><span class="n">order_q</span><span class="p">,</span><span class="n">order_delivered</span><span class="p">,</span><span class="n">dg_pool</span><span class="p">,</span><span class="n">dg_pool_pt</span><span class="p">,</span><span class="n">dg_q</span><span class="p">,</span><span class="n">dg_delivered</span>
<span class="k">else</span><span class="p">:</span> <span class="k">global</span> <span class="n">sim_data</span>
<span class="n">global_simulation_vars</span><span class="p">()</span>

<span class="n">makeData</span><span class="o">=</span><span class="bp">False</span>

<span class="k">if</span> <span class="n">makeData</span><span class="o">==</span><span class="bp">True</span><span class="p">:</span> <span class="n">sim_data</span> <span class="o">=</span> <span class="n">make_simulation_data_from_real_data</span><span class="p">()</span>
<span class="k">else</span><span class="p">:</span> <span class="n">sim_data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql_table</span><span class="p">(</span><span class="s">&#39;sim_data&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">,</span><span class="n">index_col</span><span class="o">=</span><span class="s">&#39;deliv_id&#39;</span><span class="p">)</span>
<span class="n">sim_data</span> <span class="o">=</span> <span class="n">sim_data</span><span class="o">.</span><span class="n">sort_index</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;order_time&#39;</span><span class="p">,</span><span class="s">&#39;vend_id&#39;</span><span class="p">],</span> <span class="n">ascending</span><span class="o">=</span><span class="p">[</span><span class="bp">True</span><span class="p">,</span><span class="bp">True</span><span class="p">])</span>

<span class="n">globalVars_plus</span> <span class="o">=</span> <span class="n">init_global_vars</span><span class="p">(</span><span class="n">load</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">save</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">resume</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

<span class="n">order_q</span><span class="p">,</span><span class="n">order_delivered</span><span class="p">,</span><span class="n">dg_q</span><span class="p">,</span><span class="n">dg_delivered</span><span class="p">,</span><span class="n">dg_pool</span><span class="p">,</span><span class="n">dg_pool_pt</span><span class="p">,</span><span class="n">program_stats</span><span class="p">,</span><span class="n">stpt</span> <span class="o">=</span> <span class="n">globalVars_plus</span>
<span class="n">globalVars</span> <span class="o">=</span> <span class="n">order_q</span><span class="p">,</span><span class="n">order_delivered</span><span class="p">,</span><span class="n">dg_q</span><span class="p">,</span><span class="n">dg_delivered</span><span class="p">,</span><span class="n">dg_pool</span><span class="p">,</span><span class="n">dg_pool_pt</span>

<span class="n">stpt</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">print</span> <span class="s">&#39;starting at&#39;</span><span class="p">,</span><span class="n">stpt</span>
<span class="n">pt</span><span class="o">=</span><span class="mi">0</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### iteration through orders</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">stpt</span><span class="p">,</span><span class="n">totalTime</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
    <span class="n">now</span><span class="o">=</span><span class="n">i</span>

    <span class="c"># maintain lists of data</span>
    <span class="n">globalVars</span> <span class="o">=</span> <span class="n">update_global_vars</span><span class="p">(</span><span class="n">globalVars</span><span class="p">,</span><span class="s">&#39;update per minute&#39;</span><span class="p">,</span><span class="n">now</span><span class="p">)</span>

    <span class="c"># export data on a regular basis</span>
    <span class="k">if</span> <span class="n">pt</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>
        <span class="n">pt</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="n">save</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span> <span class="n">x</span> <span class="o">=</span> <span class="n">export_all_data</span><span class="p">(</span><span class="n">globalVars</span><span class="p">,</span><span class="n">program_stats</span><span class="p">)</span>
    <span class="n">pt</span><span class="o">+=</span><span class="mi">1</span>

    <span class="c"># process all current orders</span>
    <span class="n">ordersNow</span><span class="o">=</span><span class="n">sim_data</span><span class="p">[(</span><span class="n">sim_data</span><span class="o">.</span><span class="n">order_time</span> <span class="o">==</span> <span class="n">now</span><span class="p">)]</span>
    <span class="n">t1</span><span class="o">=</span><span class="n">time</span><span class="p">()</span>

    <span class="n">globalVars</span> <span class="o">=</span> <span class="n">order_by_min</span><span class="p">(</span><span class="n">globalVars</span><span class="p">,</span><span class="n">ordersNow</span><span class="p">,</span><span class="n">errorCheck</span><span class="o">=</span><span class="n">errorCheck</span><span class="p">)</span>
    <span class="c"># print &#39;finished&#39;</span>
    <span class="c"># systemError()</span>

    <span class="c"># for j in range(0,len(ordersNow.index)):</span>
    <span class="c">#     thisOrder=ordersNow.iloc[j,:].copy()</span>
    <span class="c">#     thisOrder[&#39;deliv_id&#39;] = ordersNow.index[j]</span>
    <span class="c">#     # if thisOrder[&#39;deliv_id&#39;] == 384:</span>
    <span class="c">#     globalVars = getBestDG(globalVars,thisOrder,errorCheck=errorCheck)</span>
    <span class="c"># raise SystemError</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ordersNow</span><span class="o">.</span><span class="n">index</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">program_stats</span> <span class="o">=</span> <span class="n">program_stats</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="n">i</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">ordersNow</span><span class="o">.</span><span class="n">index</span><span class="p">),</span><span class="nb">round</span><span class="p">((</span><span class="n">time</span><span class="p">()</span><span class="o">-</span><span class="n">t1</span><span class="p">)</span><span class="o">/</span><span class="nb">len</span><span class="p">(</span><span class="n">ordersNow</span><span class="o">.</span><span class="n">index</span><span class="p">),</span><span class="mi">2</span><span class="p">),</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">())],</span><span class="n">index</span><span class="o">=</span><span class="n">program_stats</span><span class="o">.</span><span class="n">columns</span><span class="p">),</span><span class="n">ignore_index</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="k">print</span> <span class="s">&#39;minute&#39;</span><span class="o">+</span><span class="s">&#39;</span><span class="se">\t</span><span class="s">&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">+</span><span class="s">&#39;</span><span class="se">\t</span><span class="s">&#39;</span><span class="o">+</span><span class="s">&#39;orders=&#39;</span><span class="o">+</span><span class="s">&#39;</span><span class="se">\t</span><span class="s">&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ordersNow</span><span class="o">.</span><span class="n">index</span><span class="p">))</span><span class="o">+</span><span class="s">&#39;</span><span class="se">\t</span><span class="s">&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">((</span><span class="n">time</span><span class="p">()</span><span class="o">-</span><span class="n">t1</span><span class="p">)</span><span class="o">/</span><span class="nb">len</span><span class="p">(</span><span class="n">ordersNow</span><span class="o">.</span><span class="n">index</span><span class="p">))</span><span class="o">+</span><span class="s">&#39;</span><span class="se">\t</span><span class="s">&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">time</span><span class="p">())</span>


<span class="c"># move remaining orders at close to &#39;delivered&#39;</span>
<span class="k">if</span> <span class="n">now</span> <span class="o">==</span> <span class="n">totalTime</span><span class="p">:</span> <span class="n">globalVars</span> <span class="o">=</span> <span class="n">update_global_vars</span><span class="p">(</span><span class="n">globalVars</span><span class="p">,</span><span class="s">&#39;update per minute&#39;</span><span class="p">,</span><span class="n">globalVars</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">end_time</span><span class="o">.</span><span class="n">max</span><span class="p">())</span>
<span class="k">if</span> <span class="n">save</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span> <span class="n">export_all_data</span><span class="p">(</span><span class="n">globalVars</span><span class="p">,</span><span class="n">program_stats</span><span class="p">)</span>
<span class="k">print</span> <span class="s">&#39;done&#39;</span>
<span class="k">print</span> <span class="n">time</span><span class="p">()</span><span class="o">-</span><span class="n">t1A</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[11]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="kn">from</span> <span class="nn">cython_exts.getBestDG</span> <span class="kn">import</span> <span class="n">c_getBestDG</span>
<span class="o">%</span><span class="k">less</span> <span class="o">./</span><span class="n">cython_exts</span><span class="o">/</span><span class="n">getBestDG</span><span class="o">.</span><span class="n">pyx</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># display prompt (only configurable in terminal)</span>

<span class="n">see_this</span> <span class="o">=</span> <span class="s">&#39;https://github.com/ipython/ipython/wiki/Cookbook:-Dynamic-prompt&#39;</span> <span class="c"># printed to gdrive..</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># update &#39;all_notebooks.html&#39;</span>
<span class="kn">from</span> <span class="nn">os</span> <span class="kn">import</span> <span class="n">listdir</span><span class="p">,</span><span class="n">getcwd</span>
<span class="kn">from</span> <span class="nn">os.path</span> <span class="kn">import</span> <span class="n">isfile</span><span class="p">,</span> <span class="n">join</span>

<span class="n">cwd</span> <span class="o">=</span> <span class="n">getcwd</span><span class="p">()</span>
<span class="n">notebooks</span> <span class="o">=</span> <span class="p">[</span> <span class="n">f</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">listdir</span><span class="p">(</span><span class="n">cwd</span><span class="p">)</span> <span class="k">if</span> <span class="p">(</span><span class="n">isfile</span><span class="p">(</span><span class="n">join</span><span class="p">(</span><span class="n">cwd</span><span class="p">,</span><span class="n">f</span><span class="p">))</span> <span class="ow">and</span> <span class="n">f</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;.ipynb&#39;</span><span class="p">)</span><span class="o">!=-</span><span class="mi">1</span> <span class="ow">and</span> <span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">!=</span><span class="s">&#39;.&#39;</span><span class="p">)</span> <span class="p">]</span>

<span class="o">!</span><span class="nb">echo</span> <span class="s2">&quot;&quot;</span> &gt; all_notebooks.html
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;all_notebooks.html&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;&lt;html&gt;&#39;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">notebooks</span><span class="p">:</span>
        <span class="n">a</span><span class="o">=</span><span class="err">!</span><span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">admin</span><span class="o">/</span><span class="n">Dropbox</span><span class="o">/</span><span class="n">BD_Scripts</span><span class="o">/</span><span class="n">ipython</span><span class="o">/</span><span class="n">ENV</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">ipython</span> <span class="n">nbconvert</span> <span class="o">--</span><span class="n">profile</span> <span class="n">nbserver</span> <span class="o">--</span><span class="n">to</span> <span class="n">html</span> <span class="o">--</span><span class="n">template</span> <span class="n">basic</span> <span class="err">$</span><span class="n">it</span> <span class="o">--</span><span class="n">stdout</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="mi">4</span><span class="p">:]))</span>
    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;&lt;/html&gt;&#39;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[30]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="o">%</span><span class="k">less</span> <span class="n">all_notebooks</span><span class="o">.</span><span class="n">html</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># ipy-history</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s">&#39;expand_frame_repr&#39;</span><span class="p">,</span><span class="bp">False</span><span class="p">)</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s">&#39;display.max_columns&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s">&#39;display.max_rows&#39;</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s">&#39;display.width&#39;</span><span class="p">,</span><span class="mi">180</span><span class="p">)</span>
<span class="n">np</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">np</span>
<span class="n">np</span><span class="o">.</span><span class="n">set_printoptions</span><span class="p">(</span><span class="n">linewidth</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span><span class="n">threshold</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span>
<span class="kn">import</span> <span class="nn">sqlite3</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">get_ipython</span><span class="p">()</span>
<span class="n">h_path</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;ProfileDir&#39;</span><span class="p">][</span><span class="s">&#39;location&#39;</span><span class="p">])</span><span class="o">+</span><span class="s">&#39;/history.sqlite&#39;</span>
<span class="n">con</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">h_path</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">    select h.*,s.start,s.end from history h</span>
<span class="s">    inner join sessions s on h.session=s.session</span>
<span class="s">                 &quot;&quot;&quot;</span><span class="p">,</span> <span class="n">con</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="s">&#39;first_lines&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">source_raw</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="p">[:</span><span class="n">s</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)])</span>
<span class="c"># df[&#39;focus&#39;] = df.first_lines.map(lambda s: True if s.lower().find(&#39;divide&#39;)!=-1 else False)</span>
<span class="c"># df[df.focus==True].sort([&#39;session&#39;,&#39;line&#39;],ascending=[True,True])</span>

<span class="c"># df.sort([&#39;start&#39;,&#39;end&#39;],ascending=[False,False])</span>

<span class="c"># z= df[df.session==413].ix[:,&#39;source&#39;].tolist()</span>
<span class="c"># s=&#39;&#39;</span>
<span class="c"># for it in z:</span>
<span class="c">#     s+=it</span>
<span class="c"># print s</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[38]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># qtconsole/ssh</span>
<span class="k">def</span> <span class="nf">ib_k</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="s">&#39;get_ipython()&#39;</span><span class="p">):</span>
    <span class="kn">from</span> <span class="nn">os</span> <span class="kn">import</span> <span class="n">system</span> <span class="k">as</span> <span class="n">os_cmd</span>
    <span class="kn">from</span> <span class="nn">os</span> <span class="kn">import</span> <span class="n">path</span> <span class="k">as</span> <span class="n">os_path</span>
    <span class="kn">from</span> <span class="nn">subprocess</span> <span class="kn">import</span> <span class="n">Popen</span> <span class="k">as</span> <span class="n">sub_popen</span>
    <span class="kn">from</span> <span class="nn">subprocess</span> <span class="kn">import</span> <span class="n">PIPE</span> <span class="k">as</span> <span class="n">sub_PIPE</span>

    <span class="c"># 1. get info about kernel</span>
    <span class="n">a</span><span class="o">=</span><span class="n">get_ipython</span><span class="p">()</span>
    <span class="n">fpath</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">kernel</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;IPKernelApp&#39;</span><span class="p">][</span><span class="s">&#39;connection_file&#39;</span><span class="p">]</span>
    <span class="n">fpath_shared</span> <span class="o">=</span> <span class="n">fpath</span><span class="p">[</span><span class="n">fpath</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;.ipython&#39;</span><span class="p">):]</span>
    <span class="n">fpath_in_mnt</span> <span class="o">=</span> <span class="s">&#39;/Volumes/&#39;</span><span class="o">+</span><span class="n">fpath_shared</span>
    <span class="n">proc</span> <span class="o">=</span> <span class="n">sub_popen</span><span class="p">([</span><span class="s">&quot;cat &quot;</span><span class="o">+</span><span class="n">fpath</span><span class="p">],</span> <span class="n">stdout</span><span class="o">=</span><span class="n">sub_PIPE</span><span class="p">,</span> <span class="n">shell</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span> <span class="o">=</span> <span class="n">proc</span><span class="o">.</span><span class="n">communicate</span><span class="p">()</span>
    <span class="n">k_info</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>

    <span class="c"># 2. confirm access to REMOTE</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os_path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="s">&#39;/Volumes/SERVER3&#39;</span><span class="p">):</span>
        <span class="n">cmd</span>  <span class="o">=</span> <span class="s">&#39;mkdir -p /Volumes/SERVER3; &#39;</span>
        <span class="n">cmd</span> <span class="o">+=</span> <span class="s">&#39;/opt/local/bin/sshfs mbp2:/Users/admin/SERVER3 /Volumes/SERVER3 -ovolname=SERVER3;&#39;</span>
        <span class="n">os_cmd</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>

    <span class="c"># 3. confirm access from REMOTE</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os_path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="s">&#39;/Volumes/mbp2&#39;</span><span class="p">):</span>
        <span class="n">cmd</span>  <span class="o">=</span> <span class="s">&#39;mkdir -p /Volumes/mbp2; &#39;</span>
        <span class="n">cmd</span> <span class="o">+=</span> <span class="s">&#39;/opt/local/bin/sshfs mbp2:/ /Volumes/mbp2 -ovolname=mbp2;&#39;</span>
        <span class="n">os_cmd</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os_path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="s">&#39;/Volumes/mbp2/Volumes/.ipython&#39;</span><span class="p">):</span>
        <span class="n">cmd</span>  <span class="o">=</span> <span class="s">&quot;ssh mbp2 &#39;mkdir -p /Volumes/.ipython&#39;&quot;</span>
        <span class="n">os_cmd</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>
        <span class="n">cmd</span> <span class="o">=</span> <span class="s">&quot;ssh mbp2 &#39;/opt/local/bin/sshfs mb:/Users/admin/.ipython /Volumes/.ipython -ovolname=.ipython;&#39;&quot;</span>        
        <span class="n">os_cmd</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>
    
    <span class="c"># 4. create script on REMOTE for execution</span>

    <span class="c"># ---- add cmds for opening proper ports</span>
    <span class="n">cmds</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">k_info</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">k</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;_port&#39;</span><span class="p">)</span><span class="o">!=-</span><span class="mi">1</span><span class="p">:</span>
            <span class="n">cmds</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;ssh mb -f -N -L &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">)</span><span class="o">+</span><span class="s">&#39;:localhost:&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">)</span><span class="o">+</span><span class="s">&#39;;&#39;</span><span class="p">)</span>

    <span class="c"># ---- add cmd for opening proper connection</span>
    <span class="n">cmds</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;/Users/admin/SERVER2/BD_Scripts/ipython/ENV/bin/ipython qtconsole --existing </span><span class="si">%s</span><span class="s">&quot;</span><span class="o">%</span><span class="k">fpath_in_mnt</span><span class="o">+</span><span class="s">&quot;;&quot;</span><span class="p">)</span>

    <span class="c"># ---- add cmds for closing connection</span>
    <span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">k_info</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">k</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;_port&#39;</span><span class="p">)</span><span class="o">!=-</span><span class="mi">1</span><span class="p">:</span>
            <span class="n">cmds</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;kill `ps -A | grep &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">)</span><span class="o">+</span><span class="s">&quot;:localhost:&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">)</span><span class="o">+</span><span class="s">&quot; | grep -v grep | awk &#39;{print $1}&#39;`&quot;</span><span class="o">+</span><span class="s">&#39;; &#39;</span><span class="p">)</span>
    
    <span class="c"># ---- push cmds to REMOTE</span>
    <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;/Volumes/SERVER3/scripts/k.sh&#39;</span><span class="p">,</span><span class="s">&#39;w&#39;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">cmds</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">it</span><span class="o">+</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
    <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

    <span class="c"># 5. send ssh cmd for REMOTE execution of script</span>
    <span class="n">os_cmd</span><span class="p">(</span><span class="s">&quot;ssh mbp2 &#39;~/SERVER3/scripts/k.sh&#39; &amp;&quot;</span><span class="p">)</span>

<span class="n">ib_k</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="s">&#39;get_ipython()&#39;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># file links</span>
<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">FileLink</span><span class="p">,</span> <span class="n">FileLinks</span>
<span class="n">a</span><span class="o">=</span><span class="n">FileLinks</span><span class="p">(</span><span class="s">&#39;.&#39;</span><span class="p">)</span>
<span class="n">a</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># get_bash_aliases</span>
<span class="k">def</span> <span class="nf">get_bash_aliases</span><span class="p">():</span>

    <span class="kn">import</span> <span class="nn">re</span>
    <span class="kn">import</span> <span class="nn">os.path</span>
    <span class="n">d</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s">&#39;~/.alias&#39;</span><span class="p">))</span> <span class="k">as</span> <span class="n">bashrc</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">bashrc</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">line</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&#39;alias&#39;</span><span class="p">):</span>
                <span class="k">continue</span>

            <span class="n">parts</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s">r&#39;^alias (\w+)=([</span><span class="se">\&#39;</span><span class="s">&quot;]?)(.+)\2$&#39;</span><span class="p">,</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">parts</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="n">source</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">target</span> <span class="o">=</span> <span class="n">parts</span><span class="o">.</span><span class="n">groups</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">target</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;cd&#39;</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span> <span class="n">target</span><span class="o">=</span><span class="n">target</span><span class="p">[</span><span class="mi">3</span><span class="p">:]</span>
            <span class="n">d</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s">&#39;alias&#39;</span><span class="p">:</span><span class="n">source</span><span class="p">,</span>
                      <span class="s">&#39;cmd&#39;</span><span class="p">:</span><span class="n">target</span><span class="p">})</span>
<span class="c">#             print source,target</span>
<span class="c">#             chk = raw_input(&#39;Save \t&quot;&#39;+source+&#39;&quot;\tas\t&quot;&#39;+target+&#39;&quot;&#39;)</span>
<span class="c">#             if chk==&#39;y&#39;:</span>
<span class="c">#                 %alias source `$target`</span>
<span class="c">#             elif chk==&#39;q&#39;:</span>
<span class="c">#                 break</span>
    <span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
    <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">d</span><span class="p">)</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s">&#39;alias&#39;</span><span class="p">)</span>

<span class="n">them</span> <span class="o">=</span> <span class="n">get_bash_aliases</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[9]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">them</span><span class="o">.</span><span class="n">alias</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span><span class="n">them</span><span class="o">.</span><span class="n">cmd</span><span class="o">.</span><span class="n">tolist</span><span class="p">()):</span> <span class="k">print</span> <span class="n">it</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="s">&#39;</span><span class="se">\t\t</span><span class="s">&#39;</span><span class="p">,</span><span class="n">it</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>AP_android 		/Users/admin/django/Dropbox/aporo/static/sencha/phonegap/platforms/android/
AP_phonegap_build_android 		AP_android; sudo phonegap build android --release;
AP_sencha 		/Users/admin/django/Dropbox/aporo/static/sencha/
AP_sencha_build 		AP_sencha; sudo sencha app build package;
CYB 		CYB
JSON 		f_getJSON
RD 		RD
RDt 		RDt
apache_compile 		apachectl -V
apache_config 		sudo emacs /etc/apache2/httpd.conf
apache_load 		sudo launchctl load -w /System/Library/LaunchDaemons/org.apache.httpd.plist
apache_mods 		apachectl -M
apache_restart 		sudo apachectl restart
apache_test 		sudo apachectl configtest
apache_unload 		sudo launchctl unload -w /System/Library/LaunchDaemons/org.apache.httpd.plist
apache_virtuals 		apachectl -S
aporo 		sv_load; ng_load;
bashedit 		edit_source_bash
bashedit_prof 		sudo emacs ~/.bash_profile; source ~/.bash_profile;
bashedit_source 		source ~/.bash_profile
btoff 		echo &quot;admin&quot; | sudo defaults write /Library/Preferences/com.apple.Bluetooth.plist ControllerPowerState 0
bton 		echo &quot;admin&quot; | sudo defaults write /Library/Preferences/com.apple.Bluetooth.plist ControllerPowerState 1
cmd 		compgen -a | grep
countF 		ls | wc -l
dj 		dj_env
dj_aporo 		sudo python /Users/admin/django/Dropbox/aporo/manage.py runserver 0.0.0.0:8080
dj_json 		djJSON
dj_run 		python manage.py runserver 0.0.0.0:8080
dj_sencha_build 		f_dj_sencha_build
dj_sync 		python manage.py syncdb
djr 		djr_env
ec2 		ssh prod-server
ec3 		ssh print-server
enableScreenSh 		sudo /System/Library/CoreServices/RemoteManagement/ARDAgent.app/Contents/Resources/kickstart -activate -configure -access -off -restart -agent -privs -all -allowAccessFor -allUsers -clientopts
find_file 		f_find_file
find_folder 		f_find_folder
git_sencha 		echo &quot;admin&quot; | sudo git clone https://github.com/sethc23/aporo.git -b sencha /Users/admin/django/Dropbox/aporo/static/sencha
grep_folder 		grep -r &quot;$1&quot; *
hiddenOff 		defaults write com.apple.finder AppleShowAllFiles -bool true; killall Finder
hiddenOn 		defaults write com.apple.finder AppleShowAllFiles -bool false; killall Finder
ib 		f_ipy_env; sudo ipython notebook --no-browser --matplotlib=qt4 --script --no-mathjax --color-info --no-stdout --autoindent --pprint;
ib_config 		f_sudo_textedit ~/.ipython/profile_default/ipython_config.py
ib_e 		f_ipy_env
ib_js 		f_sudo_textedit ~/.ipython/profile_default/static/custom/custom.js
ib_js_folder 		open /Users/admin/.ipython/profile_default/static/custom/
kill_by 		f_kill_by
map_config 		sudo emacs /opt/local/var/db/postgresql93/defaultdb/pg_hba.conf
map_postgres 		sudo su postgres -c &quot;/opt/local/lib/postgresql93/bin/postgres -D /opt/local/var/db/postgresql93/defaultdb -p 5432&quot;
map_psql 		psql -U postgres -h localhost routing
mbp 		ssh admin@192.168.2.50
mp_check 		f_mp_check
mp_clean_all 		sudo port clean --all
mp_clean_safe 		sudo port clean
mp_contents_exe 		f_mp_contents_exe
mp_contents_files 		port contents
mp_dependents 		port dependents
mp_info 		port info
mp_install 		sudo port install
mp_installed 		port installed
mp_livecheck 		port livecheck
mp_outdated_get 		port outdated
mp_py 		f_mp_py
mp_saveports 		port -qv installed &gt; /Users/admin/myports.txt
mp_search 		port search --name --line
mp_search_full 		port search --name
mp_search_group 		port search --glob
mp_uninstall_follow 		sudo port uninstall --follow-dependents
mp_uninstall_safe 		sudo port uninstall
mp_update 		sudo port selfupdate
mp_upgrade 		sudo port upgrade outdated
mp_upgrade_all 		sudo port upgrade outdated
mp_upgrade_list 		port outdated
mp_variant 		port variant
mysql_cmd 		mysql -uroot -pDelivery100%
mysql_config1 		echo &quot;money&quot; | sudo emacs /opt/local/etc/mysql55/macports-default.cnf
mysql_config2 		echo &quot;money&quot; | sudo emacs /opt/local/etc/mysql55/my.cnf
mysql_load 		echo &quot;money&quot; | sudo launchctl load -w /Library/LaunchDaemons/org.macports.mysql55-server.plist
mysql_unload 		echo &quot;money&quot; | sudo launchctl unload -w /Library/LaunchDaemons/org.macports.mysql55-server.plist
ng_app 		ngrok -hostname app.aporodelivery.com 80
ng_config 		f_sudo_xcode /opt/local/etc/nginx/nginx.conf
ng_config_django 		f_sudo_xcode /opt/local/etc/nginx/sites-available/django_apps.conf
ng_load 		sudo launchctl load -w /Users/admin/SERVER2/BD_Scripts/django/Dropbox/nginx/custom_nginx_launchctl.plist
ng_mysql 		ngrok -proto tcp 3306
ng_printer 		ngrok -hostname printer.aporodelivery.com 80
ng_reload 		sudo nginx -p /Users/admin/SERVER2/BD_Scripts/django/Dropbox/nginx/run -c /opt/local/etc/nginx/nginx.conf -s reload
ng_unload 		sudo launchctl unload -w /Users/admin/SERVER2/BD_Scripts/django/Dropbox/nginx/custom_nginx_launchctl.plist
ng_work 		nginx -p /Users/admin/SERVER2/BD_Scripts/nginx/work/ -c conf/nginx.conf
ng_work_kill 		kill &#96;cat /Users/admin/SERVER2/BD_Scripts/nginx/work/logs/nginx.pid&#96;
ports_listen 		sudo lsof -i -P | grep LISTEN
pycharm 		sudo /Applications/PyCharm.app/Contents/MacOS/pycharm
pydoc 		python -m pydoc
pyprofileread 		pyprofileread
pyprofilewrite 		pyprofilewrite
spotlight_off 		sudo mdutil -a -i off
spotlight_on 		sudo mdutil -a -i on
sudo_textedit 		f_sudo_textedit
sv_config 		f_sudo_xcode /etc/supervisor/conf.d/supervisord.conf
sv_config_aporo 		f_sudo_xcode /etc/supervisor/conf.d/aporo.conf
sv_config_aporo_bash 		f_sudo_xcode /Users/admin/SERVER2/BD_Scripts/django/Dropbox/aporo/ENV/bin/gunicorn_start.bash
sv_config_aprinto 		f_sudo_xcode /etc/supervisor/conf.d/aprinto.conf
sv_config_aprinto_bash 		f_sudo_xcode /Users/admin/SERVER2/BD_Scripts/django/Dropbox/aprinto/ENV/bin/gunicorn_start.bash
sv_config_django_dev 		f_sudo_xcode /etc/supervisor/conf.d/django_dev.conf
sv_load 		launchctl load -w /Users/admin/SERVER2/BD_Scripts/django/Dropbox/nginx/custom_supervisord_launchctl.plist
sv_unload 		launchctl unload -w /Users/admin/SERVER2/BD_Scripts/django/Dropbox/nginx/custom_supervisord_launchctl.plist
topcpu 		ps -eo pid=,%cpu=,%mem=,comm=  | sort -nrk +2 | head -15
topmem 		ps -eo pid=,%cpu=,%mem=,comm=  | sort -nrk +3 | head -15
xcode 		f_sudo_xcode
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">a</span> <span class="o">=</span> <span class="o">%</span><span class="k">alias</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="n">j</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;alias&#39;</span><span class="p">,</span><span class="s">&#39;cmd&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s">&#39;alias&#39;</span><span class="p">)</span>
<span class="n">j</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="s">&#39;cmd&#39;</span><span class="p">]</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[13]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### Install &amp;|&amp; Link Python Libraries</span>
<span class="n">a</span><span class="o">=</span><span class="mi">0</span>
<span class="n">this_mod</span> <span class="o">=</span> <span class="s">&#39;numexpr&#39;</span>

<span class="c"># %open_mod $this_mod</span>
<span class="c"># %link_lib_to_ipy $this_mod </span>
<span class="c"># !printf &quot;ln -s &quot;;printf `/opt/local/bin/python -c &quot;import imp; print imp.find_module(&#39;numexpr&#39;)[1]&quot; `;printf &quot; &quot;;printf `which python` | printf `sed &#39;s|/bin/python||g&#39;` ; printf &quot;/lib/python2.7/site-packages&quot;</span>
<span class="c"># !which ipython</span>
<span class="c"># a = /</span>
<span class="c"># !$(printf &quot;ln -s &quot;; printf `/opt/local/bin/python -c &quot;import imp; print imp.find_module(&#39;numexpr&#39;)[1]&quot; `;printf &quot; &quot;;printf `which python` | printf `sed &#39;s|/bin/python||g&#39;` ; printf &quot;/lib/python2.7/site-packages&quot;)</span>
<span class="c"># a = !pip search $this_mod</span>
<span class="c"># !pip install $this_mod</span>

<span class="c"># !sudo port search $this_mod</span>
<span class="c"># this_port = &#39;py27-shapely@1.3.3&#39;</span>
<span class="c"># !port variant $this_port</span>
<span class="c"># !sudo port install $this_port</span>
<span class="c"># a</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[14]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="o">!</span><span class="k">$(</span><span class="nb">printf</span> <span class="sb">`</span>/opt/local/bin/python -c <span class="s2">&quot;import imp; print imp.find_module(&#39;%s&#39;)[1]&quot;</span> <span class="sb">`</span>;<span class="nb">printf</span> <span class="s2">&quot; &quot;</span>;<span class="nb">printf</span> <span class="sb">`</span>which python<span class="sb">`</span> | <span class="nb">printf</span> <span class="sb">`</span>sed <span class="s1">&#39;s|/bin/python||g&#39;</span><span class="sb">`</span> ; <span class="nb">printf</span> <span class="s2">&quot;/lib/python2.7/site-packages&quot;</span><span class="k">)</span><span class="o">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>/bin/sh: -c: line 0: syntax error near unexpected token &#96;)&apos;
/bin/sh: -c: line 0: &#96;$(printf &#96;/opt/local/bin/python -c &quot;import imp; print imp.find_module(&apos;tstables&apos;)[1]&quot; &#96;;printf &quot; &quot;;printf &#96;which python&#96; | printf &#96;sed &apos;s|/bin/python||g&apos;&#96; ; printf &quot;/lib/python2.7/site-packages&quot;))&apos;
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[27]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="o">!</span>open /Applications/Textedit.app/Contents/MacOS/TextEdit /Users/admin/.ipython/profile_nbserver/ipython_notebook_config.py
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[28]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="o">!</span>/usr/bin/open -e /Users/admin/.ipython/profile_nbserver/ipython_notebook_config.py
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[13]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="o">%</span><span class="k">less</span> <span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">admin</span><span class="o">/.</span><span class="n">alias</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### Aliases &amp; Maintenance</span>

<span class="c"># %rehashx?</span>

<span class="c"># %alias open_mod `printf &quot;open &quot; ; /opt/local/bin/python -c &quot;import imp; print imp.find_module(&#39;%s&#39;)[1]&quot;`</span>
<span class="c"># %store open_mod</span>

<span class="c"># %alias link_lib_to_ipy $(printf &quot;ln -s &quot;; printf `/opt/local/bin/python -c &quot;import imp; print imp.find_module(&#39;%s&#39;)[1]&quot; `;printf &quot; &quot;;printf `which python` | printf `sed &#39;s|/bin/python||g&#39;` ; printf &quot;/lib/python2.7/site-packages&quot;)</span>
<span class="c"># %store link_lib_to_ipy</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4>General</h4>

<pre><code>%run
%hist 
%quickref
%matplotlib inline
%qtconsole
%debug
%history
*int*?
%%writefile test.txt
!pwd

</code></pre>
<h4>Debug</h4>

<pre><code>import pdb; pdb.set_trace()

</code></pre>
<h4>Modules</h4>
<p>Loading:</p>

<pre><code>%load_ext autoreload
%autoreload 2

%load http://pastebin.com/raw.php?i=mGiV1FwY

    - %pastebin "cell one" 0-10


my_module = reload(my_module)

</code></pre>
<p>Call From Module:</p>

<pre><code>from IPython import embed; embed()

</code></pre>
<p>Show Links for Local Files:</p>

<pre><code>from IPython.display import FileLink, FileLinks
FileLinks('.', notebook_display_formatter=True)
FileLinks('output/')

</code></pre>
<p>QT-Console:</p>

<pre><code>ipython qtconsole --existing
%connect_info


</code></pre>
<p>Pprint Example:</p>

<pre><code>from pprint import pprint

def print_variables_of(obj):
    """variables of an object"""
    pprint (vars(obj))

def print_callables_of(obj):
    """callables (functions too) of an object"""
    li = []
    for name in dir(obj):
        attr = getattr(obj, name)
        if hasattr(attr, '__call__'):
            li.append(name)
    pprint(li)</code></pre>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2>IPython -- An enhanced Interactive Python - Quick Reference Card</h2>
<p>obj?, objjQuery20308880275620613247_1416088857606      : Get help, or more help for object (also works as ?obj, jQuery20306815248038619757_1416089336937obj).
?foo.<em>abc</em>       : List names in 'foo' containing 'abc' in them.
%magic           : Information about IPython's 'magic' % functions.</p>
<p>Magic functions are prefixed by % or %%, and typically take their arguments
without parentheses, quotes or even commas for convenience.  Line magics take a
single % and cell magics are prefixed with two %%.</p>
<p>Example magic function calls:</p>
<p>%alias d ls -F   : 'd' is now an alias for 'ls -F'
alias d ls -F    : Works if 'alias' not a python name
alist = %alias   : Get list of aliases to 'alist'
cd /usr/share    : Obvious. cd -<tab> to choose from visited dirs.
%cdjQuery203016718862811103463_1416089461856            : See help AND source for magic %cd
%timeit x=10     : time the 'x=10' statement with high precision.
%%timeit x=2<strong>100
x</strong>100           : time 'x<em>100' with a setup of 'x=2*</em>100'; setup code is not
                   counted.  This is an example of a cell magic.</p>
<p>System commands:</p>
<p>!cp a.txt b/     : System command escape, calls os.system()
cp a.txt b/      : after %rehashx, most system commands work without !
cp ${f}.txt $bar : Variable expansion in magics and system commands
files = !ls /usr : Capture sytem command output
files.s, files.l, files.n: "a b c", ['a','b','c'], 'a\nb\nc'</p>
<p>History:</p>
<p><em>i, _ii, _iii    : Previous, next previous, next next previous input
_i4, _ih[2:5]    : Input history line 4, lines 2-4
exec _i81        : Execute input history line #81 again
%rep 81          : Edit input history line #81</em>, <strong>, _</strong>       : previous, next previous, next next previous output
_dh              : Directory history
_oh              : Output history
%hist            : Command history. '%hist -g foo' search history for 'foo'</p>
<p>Autocall:</p>
<p>f 1,2            : f(1,2)  # Off by default, enable with %autocall magic.
/f 1,2           : f(1,2) (forced autoparen)
,f 1 2           : f("1","2")
;f 1 2           : f("1 2")</p>
<p>Remember: TAB completion works in many contexts, not just file names
or python names.</p>
<p>The following magic functions are currently available:</p>
<p>%alias:
    Define an alias for a system command.
%alias_magic:
    %alias_magic [-l] [-c] name target
%autocall:
    Make functions callable without having to type parentheses.
%automagic:
    Make magic functions callable without having to type the initial %.
%autosave:
    Set the autosave interval in the notebook (in seconds).
%bookmark:
    Manage IPython's bookmark system.
%cd:
    Change the current working directory.
%clear:
    Clear the terminal.
%cls:
    Clear the terminal.
%colors:
    Switch color scheme for prompts, info system and exception handlers.
%config:
    configure IPython
%connect_info:
    Print information for connecting other clients to this kernel
%debug:
    %debug [--breakpoint FILE:LINE] [statement [statement ...]]
%dhist:
    Print your history of visited directories.
%dirs:
    Return the current directory stack.
%doctest_mode:
    Toggle doctest mode on and off.
%ed:
    Alias for <code>%edit</code>.
%edit:
    Bring up an editor and execute the resulting code.
%env:
    List environment variables.
%gui:
    Enable or disable IPython GUI event loop integration.
%guiref:
    Show a basic reference about the GUI Console.
%hist:
    Alias for <code>%history</code>.
%history:
    %history [-n] [-o] [-p] [-t] [-f FILENAME] [-g [PATTERN [PATTERN ...]]]
%install_default_config:
    %install_default_config has been deprecated.
%install_ext:
    Download and install an extension from a URL, e.g.::
%install_profiles:
    %install_profiles has been deprecated.
%killbgscripts:
    Kill all BG processes started by %%script and its family.
%less:
    Show a file through the pager.
%load:
    Load code into the current frontend.
%load_ext:
    Load an IPython extension by its module name.
%loadpy:
    Alias of <code>%load</code>
%logoff:
    Temporarily stop logging.
%logon:
    Restart logging.
%logstart:
    Start logging anywhere in a session.
%logstate:
    Print the status of the logging system.
%logstop:
    Fully stop logging and close log file.
%lsmagic:
    List currently available magic functions.
%macro:
    Define a macro for future re-execution. It accepts ranges of history,
%magic:
    Print information about the magic function system.
%matplotlib:
    %matplotlib [gui]
%more:
    Show a file through the pager.
%notebook:
    %notebook [-e] [-f FORMAT] filename
%page:
    Pretty print the object and display it through a pager.
%pastebin:
    Upload code to Github's Gist paste bin, returning the URL.
%pdb:
    Control the automatic calling of the pdb interactive debugger.
%pdef:
    Print the call signature for any callable object.
%pdoc:
    Print the docstring for an object.
%pfile:
    Print (or run through pager) the file where an object is defined.
%pinfo:
    Provide detailed information about an object.
%pinfo2:
    Provide extra detailed information about an object.
%popd:
    Change to directory popped off the top of the stack.
%pprint:
    Toggle pretty printing on/off.
%precision:
    Set floating point precision for pretty printing.
%profile:
    Print your currently active IPython profile.
%prun:
    Run a statement through the python code profiler.
%psearch:
    Search for object in namespaces by wildcard.
%psource:
    Print (or run through pager) the source code for an object.
%pushd:
    Place the current dir on stack and change directory.
%pwd:
    Return the current working directory path.
%pycat:
    Show a syntax-highlighted file through a pager.
%pylab:
    %pylab [--no-import-all] [gui]
%qtconsole:
    Open a qtconsole connected to this kernel.
%quickref:
    Show a quick reference sheet 
%recall:
    Repeat a command, or get command to input line for editing.
%rehashx:
    Update the alias table with all executable files in $PATH.
%reload_ext:
    Reload an IPython extension by its module name.
%rep:
    Alias for <code>%recall</code>.
%rerun:
    Re-run previous input
%reset:
    Resets the namespace by removing all names defined by the user, if
%reset_selective:
    Resets the namespace by removing names defined by the user.
%run:
    Run the named file inside IPython as a program.
%save:
    Save a set of lines or a macro to a given filename.
%sc:
    Shell capture - run shell command and capture output (DEPRECATED use !).
%store:
    Lightweight persistence for python variables.
%sx:
    Shell execute - run shell command and capture output (!! is short-hand).
%system:
    Shell execute - run shell command and capture output (!! is short-hand).
%tb:
    Print the last traceback with the currently active exception mode.
%time:
    Time execution of a Python statement or expression.
%timeit:
    Time execution of a Python statement or expression
%unalias:
    Remove an alias
%unload_ext:
    Unload an IPython extension by its module name.
%who:
    Print all interactive variables, with some minimal formatting.
%who_ls:
    Return a sorted list of all interactive variables.
%whos:
    Like %who, but gives some extra information about each variable.
%xdel:
    Delete a variable, trying to clear it from anywhere that
%xmode:
    Switch modes for the exception handlers.
%%!:
    Shell execute - run shell command and capture output (!! is short-hand).
%%HTML:
    Alias for <code>%%html</code>.
%%SVG:
    Alias for <code>%%svg</code>.
%%bash:
    %%bash script magic
%%capture:
    %capture [--no-stderr] [--no-stdout] [output]
%%cmd:
    %%cmd script magic
%%debug:
    %debug [--breakpoint FILE:LINE] [statement [statement ...]]
%%file:
    Alias for <code>%%writefile</code>.
%%html:
    Render the cell as a block of HTML
%%javascript:
    Run the cell block of Javascript code
%%latex:
    Render the cell as a block of latex
%%perl:
    %%perl script magic
%%powershell:
    %%powershell script magic
%%prun:
    Run a statement through the python code profiler.
%%pypy:
    %%pypy script magic
%%python:
    %%python script magic
%%python3:
    %%python3 script magic
%%ruby:
    %%ruby script magic
%%script:
    %shebang [--proc PROC] [--bg] [--err ERR] [--out OUT]
%%sh:
    %%sh script magic
%%svg:
    Render the cell as an SVG literal
%%sx:
    Shell execute - run shell command and capture output (!! is short-hand).
%%system:
    Shell execute - run shell command and capture output (!! is short-hand).
%%time:
    Time execution of a Python statement or expression.
%%timeit:
    Time execution of a Python statement or expression
%%writefile:
    %writefile [-a] filename</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="TODO:">TODO:<a class="anchor-link" href="#TODO:">&#182;</a></h1>
</div>
</div>
</div>

<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Turn-Stile-Data:">Turn Stile Data:<a class="anchor-link" href="#Turn-Stile-Data:">&#182;</a></h2>
</div>
</div>
</div>

<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="GOAL----For-Dates-A-to-B-and-Times-C-to-D,-how-many-people-per-station?">GOAL -- For Dates A to B and Times C to D, how many people per station?<a class="anchor-link" href="#GOAL----For-Dates-A-to-B-and-Times-C-to-D,-how-many-people-per-station?">&#182;</a></h3>
</div>
</div>
</div>

<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ol>
<li><p>consolidate scp's per remote/booth</p>
<p> Thoughts:</p>

<pre><code> - each scp has its own range of timestamps and register values
 - some scp.s have multiple datasets for same time period
 - timestamps exists for all times of the day

</code></pre>
<p> Method:</p>

<pre><code> - create new table with:
     - date column
     - 24 columns for each hour filled with register-change values
         - need 24 or just use single time col?
     - index # from sub_turn_stiles</code></pre>
</li>
</ol>
<ol>
<li>consolidate remote/booth per station</li>
</ol>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="o">%%</span><span class="k">sql</span> <span class="n">postgres</span><span class="nd">@routing</span>
<span class="n">select</span> <span class="n">distinct</span> <span class="n">extract</span><span class="p">(</span><span class="n">hour</span> <span class="kn">from</span> <span class="nn">datetime1</span><span class="p">)</span> <span class="n">s</span>
<span class="kn">from</span> <span class="nn">sub_turn_stiles</span>
<span class="n">order</span> <span class="n">by</span> <span class="n">s</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[1]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### Using PostgresSQL Server [ db1.public.routing ]:</span>

<span class="kn">from</span> <span class="nn">sys</span> <span class="kn">import</span> <span class="n">path</span> <span class="k">as</span> <span class="n">sys_path</span>
<span class="kn">from</span> <span class="nn">f_postgres</span> <span class="kn">import</span> <span class="n">make_index</span><span class="p">,</span><span class="n">geom_inside_street_box</span><span class="p">,</span><span class="n">make_column_primary_serial_key</span>
<span class="kn">from</span> <span class="nn">re</span> <span class="kn">import</span> <span class="n">search</span> <span class="k">as</span> <span class="n">re_search</span> <span class="c"># re_search(&#39;pattern&#39;,&#39;string&#39;)</span>
<span class="kn">from</span> <span class="nn">re</span> <span class="kn">import</span> <span class="n">sub</span> <span class="k">as</span> <span class="n">re_sub</span>  <span class="c"># re_sub(&#39;pattern&#39;,&#39;repl&#39;,&#39;string&#39;,&#39;count&#39;)</span>

<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s">&#39;expand_frame_repr&#39;</span><span class="p">,</span><span class="bp">False</span><span class="p">)</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s">&#39;display.max_columns&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s">&#39;display.max_rows&#39;</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s">&#39;display.width&#39;</span><span class="p">,</span><span class="mi">180</span><span class="p">)</span>
<span class="n">np</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">np</span>
<span class="n">np</span><span class="o">.</span><span class="n">set_printoptions</span><span class="p">(</span><span class="n">linewidth</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span><span class="n">threshold</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span>
<span class="kn">import</span> <span class="nn">geopandas</span> <span class="kn">as</span> <span class="nn">gd</span>
<span class="kn">from</span> <span class="nn">types</span> <span class="kn">import</span> <span class="n">NoneType</span>
<span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">sleep</span> <span class="k">as</span> <span class="n">delay</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span>
<span class="kn">from</span> <span class="nn">logging</span> <span class="kn">import</span> <span class="n">getLogger</span>
<span class="kn">from</span> <span class="nn">logging</span> <span class="kn">import</span> <span class="n">INFO</span> <span class="k">as</span> <span class="n">logging_info</span>
<span class="n">getLogger</span><span class="p">(</span><span class="s">&#39;sqlalchemy.dialects.postgresql&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging_info</span><span class="p">)</span>

<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s">r&#39;postgresql://postgres:postgres@localhost:8800/routing&#39;</span><span class="p">,</span>
                       <span class="n">encoding</span><span class="o">=</span><span class="s">&#39;utf-8&#39;</span><span class="p">,</span>
                       <span class="n">echo</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

<span class="o">%</span><span class="k">load_ext</span> <span class="n">sql</span>
<span class="o">%</span><span class="k">sql</span> <span class="n">postgresql</span><span class="p">:</span><span class="o">//</span><span class="n">postgres</span><span class="p">:</span><span class="n">postgres</span><span class="nd">@localhost</span><span class="o">/</span><span class="n">routing</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### add restaurant data</span>
<span class="kn">import</span> <span class="nn">requests</span><span class="o">,</span> <span class="nn">zipfile</span><span class="o">,</span> <span class="nn">StringIO</span>
<span class="c"># from f_postgres import geoparse</span>
<span class="n">z</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;https://data.cityofnewyork.us/download/4vkw-7nck/ZIP&#39;</span><span class="p">)</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">zipfile</span><span class="o">.</span><span class="n">ZipFile</span><span class="p">(</span><span class="n">StringIO</span><span class="o">.</span><span class="n">StringIO</span><span class="p">(</span><span class="n">z</span><span class="o">.</span><span class="n">content</span><span class="p">))</span>
<span class="n">v</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s">&#39;WebExtract.txt&#39;</span><span class="p">))</span>
<span class="n">v</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span> <span class="nb">str</span><span class="p">(</span><span class="n">it</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">v</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span> <span class="p">]</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">v</span><span class="p">[</span><span class="n">v</span><span class="o">.</span><span class="n">boro</span><span class="o">==</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">m</span><span class="p">[</span><span class="s">&#39;inspdate&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">inspdate</span><span class="p">)</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s">&#39;inspdate&#39;</span><span class="p">,</span><span class="n">ascending</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">z</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s">&#39;camis&#39;</span><span class="p">)</span>
<span class="n">grps</span> <span class="o">=</span> <span class="n">z</span><span class="o">.</span><span class="n">groups</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="n">takeCols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;dba&#39;</span><span class="p">,</span><span class="s">&#39;cuisinecode&#39;</span><span class="p">,</span><span class="s">&#39;building&#39;</span><span class="p">,</span><span class="s">&#39;street&#39;</span><span class="p">,</span><span class="s">&#39;zipcode&#39;</span><span class="p">,</span><span class="s">&#39;phone&#39;</span><span class="p">,</span><span class="s">&#39;inspdate&#39;</span><span class="p">]</span> <span class="c"># and &#39;camis&#39; which is the grps[i]</span>
<span class="n">mv</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;camis&#39;</span><span class="p">]</span><span class="o">+</span><span class="n">takeCols</span><span class="p">)</span>
<span class="n">g_cnt</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">grps</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">g_cnt</span><span class="p">):</span>
    <span class="n">vend_id</span> <span class="o">=</span> <span class="n">grps</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">z</span><span class="o">.</span><span class="n">get_group</span><span class="p">(</span><span class="n">vend_id</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="n">takeCols</span><span class="p">]</span>
    <span class="n">x</span><span class="p">[</span><span class="s">&#39;camis&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">vend_id</span>
    <span class="n">mv</span> <span class="o">=</span> <span class="n">mv</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">mv</span> <span class="o">=</span> <span class="n">geoparse</span><span class="p">(</span><span class="n">mv</span><span class="p">,</span><span class="s">&#39;dba&#39;</span><span class="p">,</span><span class="s">&#39;clean_name&#39;</span><span class="p">)</span>
<span class="n">mv</span> <span class="o">=</span> <span class="n">geoparse</span><span class="p">(</span><span class="n">mv</span><span class="p">,</span><span class="s">&#39;street&#39;</span><span class="p">,</span><span class="s">&#39;clean_street&#39;</span><span class="p">)</span>
<span class="n">mv</span><span class="p">[</span><span class="s">&#39;dba&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mv</span><span class="o">.</span><span class="n">dba</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&#39;ascii&#39;</span><span class="p">,</span><span class="s">&#39;ignore&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s">&#39;utf-8&#39;</span><span class="p">,</span><span class="s">&#39;ignore&#39;</span><span class="p">))</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;drop table if exists mn_vendors&#39;</span><span class="p">)</span>
<span class="n">mv</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s">&#39;mn_vendors&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">,</span><span class="n">index</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">    alter table mn_vendors add column id serial;</span>
<span class="s">    update mn_vendors set id = nextval(pg_get_serial_sequence(&#39;mn_vendors&#39;,&#39;id&#39;));</span>
<span class="s">    alter table mn_vendors add primary key (id);</span>
<span class="s">    &quot;&quot;&quot;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;alter table mn_vendors add column recog_street boolean;</span>
<span class="s">                  update mn_vendors set recog_street = False;&quot;&quot;&quot;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;  update mn_vendors set recog_street = True</span>
<span class="s">                    where exists (</span>
<span class="s">                        select 1 from address_idx a</span>
<span class="s">                        where a.street = clean_street</span>
<span class="s">                    )&quot;&quot;&quot;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### add subway entrances to map</span>
<span class="n">url</span> <span class="o">=</span> <span class="s">&#39;http://web.mta.info/developers/data/nyct/subway/StationEntrances.csv&#39;</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="n">s</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">it</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">s</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">tolist</span><span class="p">()]</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;drop table if exists sub_stat_entr&#39;</span><span class="p">)</span>
<span class="n">s</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s">&#39;sub_stat_entr&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;alter table sub_stat_entr add column geom geometry(Point,4326)&#39;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;UPDATE sub_stat_entr set geom = ST_SetSRID(ST_MakePoint(station_longitude,station_latitude),4326)&quot;&quot;&quot;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot; DELETE FROM sub_stat_entr </span>
<span class="s">                WHERE NOT (geom &amp;&amp; (</span>
<span class="s">                    SELECT ST_Buffer(ST_ConvexHull((ST_Collect(f.the_geom))), .0005) as geom </span>
<span class="s">                    FROM ( SELECT *, (ST_Dump(geom)).geom As the_geom </span>
<span class="s">                    FROM pluto) As f))&quot;&quot;&quot;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">    alter table sub_stat_entr add column id serial;</span>
<span class="s">    update sub_stat_entr set index = nextval(pg_get_serial_sequence(&#39;sub_stat_entr&#39;,&#39;id&#39;));</span>
<span class="s">    alter table sub_stat_entr add primary key (id);</span>
<span class="s">    &quot;&quot;&quot;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### add subway stops to map, add turn stile data to subway stops</span>
<span class="kn">import</span> <span class="nn">requests</span><span class="o">,</span> <span class="nn">zipfile</span><span class="o">,</span> <span class="nn">StringIO</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;http://web.mta.info/developers/data/nyct/subway/google_transit.zip&#39;</span><span class="p">)</span>
<span class="n">z</span> <span class="o">=</span> <span class="n">zipfile</span><span class="o">.</span><span class="n">ZipFile</span><span class="p">(</span><span class="n">StringIO</span><span class="o">.</span><span class="n">StringIO</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">content</span><span class="p">))</span>
<span class="n">sub_stops</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">z</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s">&#39;stops.txt&#39;</span><span class="p">))</span>
<span class="n">sub_stops</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s">&#39;sub_stops&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;alter table sub_stops add column geom geometry(Point,4326)&#39;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;UPDATE sub_stops set geom = ST_SetSRID(ST_MakePoint(stop_lon,stop_lat),4326)&quot;&quot;&quot;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot; DELETE FROM sub_stops </span>
<span class="s">                WHERE NOT (geom &amp;&amp; (</span>
<span class="s">                    SELECT ST_Buffer(ST_ConvexHull((ST_Collect(f.the_geom))), .0005) as geom </span>
<span class="s">                    FROM ( SELECT *, (ST_Dump(geom)).geom As the_geom </span>
<span class="s">                    FROM pluto) As f))&quot;&quot;&quot;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">    alter table sub_stops add column id serial;</span>
<span class="s">    update sub_stops set index = nextval(pg_get_serial_sequence(&#39;sub_stops&#39;,&#39;id&#39;));</span>
<span class="s">    alter table sub_stops add primary key (id);</span>
<span class="s">    &quot;&quot;&quot;</span><span class="p">)</span>
<span class="c"># NOTE:  also then deleted more by hand</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### add turn_stile_key to pgsql</span>
<span class="n">ts_key</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s">&#39;http://web.mta.info/developers/resources/nyct/turnstile/Remote-Booth-Station.xls&#39;</span><span class="p">)</span>
<span class="n">ts_key</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">it</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39; &#39;</span><span class="p">,</span><span class="s">&#39;_&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">ts_key</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">tolist</span><span class="p">()]</span>
<span class="n">ts_key</span><span class="p">[</span><span class="s">&#39;line_name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ts_key</span><span class="p">[</span><span class="s">&#39;line_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">sorted</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">it</span><span class="p">)</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">s</span><span class="p">]))</span> <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">!=</span><span class="nb">int</span> <span class="k">else</span> <span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
<span class="n">ts_key</span><span class="p">[</span><span class="s">&#39;clean&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ts_key</span><span class="o">.</span><span class="n">station</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;drop table if exists ts_key&quot;</span><span class="p">)</span>
<span class="n">ts_key</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s">&#39;ts_key&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### add turn stile data to pgsql</span>
<span class="c"># General Source for Turn Stiles: http://web.mta.info/developers/turnstile.html</span>
<span class="c">#     - field description: http://web.mta.info/developers/resources/nyct/turnstile/ts_Field%20Description.txt</span>
<span class="c">#     - data key: http://web.mta.info/developers/resources/nyct/turnstile/Remote-Booth-Station.xls</span>
<span class="c">#         --&gt; this is the provides the Remote Unit/Control Area/Station Name Key</span>
<span class="c"># Need coords for &quot;UNIT&quot;</span>
<span class="c"># Remote and Station Name here:</span>
<span class="c">#      &#39;http://web.mta.info/developers/resources/nyct/turnstile/Remote-Booth-Station.xls&#39;</span>
<span class="c"># Station Names and Coords here:</span>
<span class="c">#      &#39;http://web.mta.info/developers/data/nyct/subway/StationEntrances.csv&#39;</span>
<span class="c">#     - Relevant stations were added to pgsql as &#39;sub_stat_entr&#39;</span>


<span class="n">cols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;C/A&#39;</span><span class="p">,</span><span class="s">&#39;UNIT&#39;</span><span class="p">,</span><span class="s">&#39;SCP&#39;</span><span class="p">,</span><span class="s">&#39;DATE1&#39;</span><span class="p">,</span><span class="s">&#39;TIME1&#39;</span><span class="p">,</span><span class="s">&#39;DESC1&#39;</span><span class="p">,</span><span class="s">&#39;ENTRIES1&#39;</span><span class="p">,</span><span class="s">&#39;EXITS1&#39;</span><span class="p">,</span>
        <span class="s">&#39;DATE2&#39;</span><span class="p">,</span><span class="s">&#39;TIME2&#39;</span><span class="p">,</span><span class="s">&#39;DESC2&#39;</span><span class="p">,</span><span class="s">&#39;ENTRIES2&#39;</span><span class="p">,</span><span class="s">&#39;EXITS2&#39;</span><span class="p">,</span><span class="s">&#39;DATE3&#39;</span><span class="p">,</span><span class="s">&#39;TIME3&#39;</span><span class="p">,</span><span class="s">&#39;DESC3&#39;</span><span class="p">,</span><span class="s">&#39;ENTRIES3&#39;</span><span class="p">,</span>
        <span class="s">&#39;EXITS3&#39;</span><span class="p">,</span><span class="s">&#39;DATE4&#39;</span><span class="p">,</span><span class="s">&#39;TIME4&#39;</span><span class="p">,</span><span class="s">&#39;DESC4&#39;</span><span class="p">,</span><span class="s">&#39;ENTRIES4&#39;</span><span class="p">,</span><span class="s">&#39;EXITS4&#39;</span><span class="p">,</span><span class="s">&#39;DATE5&#39;</span><span class="p">,</span><span class="s">&#39;TIME5&#39;</span><span class="p">,</span><span class="s">&#39;DESC5&#39;</span><span class="p">,</span>
        <span class="s">&#39;ENTRIES5&#39;</span><span class="p">,</span><span class="s">&#39;EXITS5&#39;</span><span class="p">,</span><span class="s">&#39;DATE6&#39;</span><span class="p">,</span><span class="s">&#39;TIME6&#39;</span><span class="p">,</span><span class="s">&#39;DESC6&#39;</span><span class="p">,</span><span class="s">&#39;ENTRIES6&#39;</span><span class="p">,</span>
        <span class="s">&#39;EXITS6&#39;</span><span class="p">,</span><span class="s">&#39;DATE7&#39;</span><span class="p">,</span><span class="s">&#39;TIME7&#39;</span><span class="p">,</span><span class="s">&#39;DESC7&#39;</span><span class="p">,</span><span class="s">&#39;ENTRIES7&#39;</span><span class="p">,</span><span class="s">&#39;EXITS7&#39;</span><span class="p">,</span><span class="s">&#39;DATE8&#39;</span><span class="p">,</span>
        <span class="s">&#39;TIME8&#39;</span><span class="p">,</span><span class="s">&#39;DESC8&#39;</span><span class="p">,</span><span class="s">&#39;ENTRIES8&#39;</span><span class="p">,</span><span class="s">&#39;EXITS8&#39;</span><span class="p">]</span>
<span class="n">cols</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">it</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;/&#39;</span><span class="p">,</span><span class="s">&#39;_&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">cols</span><span class="p">]</span>
<span class="n">url</span> <span class="o">=</span> <span class="s">&#39;http://web.mta.info/developers/data/nyct/turnstile/turnstile_141004.txt&#39;</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="n">names</span><span class="o">=</span><span class="n">cols</span><span class="p">)</span>
<span class="n">idx</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="n">p</span><span class="o">.</span><span class="n">unit</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s">&#39;R&#39;</span><span class="p">)</span><span class="o">==</span><span class="bp">False</span><span class="p">]</span><span class="o">.</span><span class="n">index</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">idx</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="c"># ts_key = pd.read_excel(&#39;http://web.mta.info/developers/resources/nyct/turnstile/Remote-Booth-Station.xls&#39;)</span>
<span class="c"># ts_key.columns = [str(it).lower().replace(&#39; &#39;,&#39;_&#39;) for it in ts_key.columns.tolist()]</span>

<span class="n">dropCols</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">cols</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">it</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;exit&#39;</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span> <span class="ow">or</span> <span class="n">it</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;entries&#39;</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
        <span class="n">p</span><span class="p">[</span><span class="n">it</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="n">it</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">it</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;date&#39;</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
        <span class="n">date_pt</span><span class="p">,</span><span class="n">time_pt</span><span class="p">,</span><span class="n">datetime_pt</span> <span class="o">=</span> <span class="n">it</span><span class="p">,</span><span class="s">&#39;time&#39;</span><span class="o">+</span><span class="n">it</span><span class="p">[</span><span class="mi">4</span><span class="p">:],</span><span class="s">&#39;datetime&#39;</span><span class="o">+</span><span class="n">it</span><span class="p">[</span><span class="mi">4</span><span class="p">:]</span>
        <span class="n">p</span><span class="p">[</span><span class="n">datetime_pt</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="n">date_pt</span><span class="p">]</span> <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span> <span class="n">p</span><span class="p">[</span><span class="n">time_pt</span><span class="p">],</span><span class="n">format</span><span class="o">=</span><span class="s">&#39;%m-</span><span class="si">%d</span><span class="s">-%y %H:%M:%S&#39;</span><span class="p">,</span><span class="nb">coerce</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="n">p</span><span class="p">[</span><span class="n">datetime_pt</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="n">datetime_pt</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="bp">None</span> <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">==</span><span class="s">&#39;NaT&#39;</span> <span class="k">else</span> <span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
        <span class="n">dropCols</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">date_pt</span><span class="p">,</span><span class="n">time_pt</span><span class="p">])</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">dropCols</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">cols</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

<span class="c"># END GOAL conform &#39;station_names&#39; to &#39;mn_stations&#39;</span>
<span class="n">mn_stations</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s">&quot;&quot;&quot;select * from sub_stat_entr&quot;&quot;&quot;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>

<span class="c"># Limit NYC key to MN</span>
<span class="n">mn_div_list</span> <span class="o">=</span> <span class="n">mn_stations</span><span class="o">.</span><span class="n">division</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="n">ts_key</span> <span class="o">=</span> <span class="n">ts_key</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">ts_key</span><span class="p">[</span><span class="n">ts_key</span><span class="o">.</span><span class="n">division</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">mn_div_list</span><span class="p">)</span><span class="o">==</span><span class="bp">False</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="c"># Create and Sort Route List for each station</span>
<span class="n">mn_cols</span> <span class="o">=</span> <span class="n">mn_stations</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="n">s_pt</span><span class="p">,</span><span class="n">e_pt</span> <span class="o">=</span> <span class="n">mn_cols</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s">&#39;route_1&#39;</span><span class="p">),</span><span class="n">mn_cols</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s">&#39;route_11&#39;</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span>
<span class="n">mn_stations</span><span class="p">[</span><span class="s">&#39;all_lines&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mn_stations</span><span class="o">.</span><span class="n">ix</span><span class="p">[:,</span><span class="n">s_pt</span><span class="p">:</span><span class="n">e_pt</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">it</span><span class="p">)</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">s</span> <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">it</span><span class="p">)</span><span class="o">!=</span><span class="s">&#39;NaN&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;nan&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;.0&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">),</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">mn_stations</span><span class="p">[</span><span class="s">&#39;all_lines&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mn_stations</span><span class="o">.</span><span class="n">all_lines</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">s</span><span class="p">)))</span>
<span class="c"># ts_key[&#39;line_name&#39;] = ts_key[&#39;line_name&#39;].map(lambda s: &#39;&#39;.join(sorted([str(it) for it in s])) if type(s)!=int else str(s))</span>

<span class="c"># clean up many but small differences between station names</span>
<span class="n">mn_stations</span><span class="p">[</span><span class="s">&#39;clean&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mn_stations</span><span class="o">.</span><span class="n">station_name</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
<span class="c"># ts_key[&#39;clean&#39;] = ts_key.station.map(lambda s: s.lower())</span>
<span class="n">repl_dict</span> <span class="o">=</span> <span class="p">{</span>   <span class="s">r&#39;(1st|first)&#39;</span>          <span class="p">:</span><span class="s">r&#39;1&#39;</span><span class="p">,</span>
                <span class="s">r&#39;(2nd|second)&#39;</span>         <span class="p">:</span><span class="s">r&#39;2&#39;</span><span class="p">,</span>
                <span class="s">r&#39;(3rd|third)&#39;</span>          <span class="p">:</span><span class="s">r&#39;3&#39;</span><span class="p">,</span>
                <span class="s">r&#39;(4th|fourth)&#39;</span>         <span class="p">:</span><span class="s">r&#39;4&#39;</span><span class="p">,</span>
                <span class="s">r&#39;(5th|fifth)&#39;</span>          <span class="p">:</span><span class="s">r&#39;5&#39;</span><span class="p">,</span>
                <span class="s">r&#39;(6th|sixth)&#39;</span>          <span class="p">:</span><span class="s">r&#39;6&#39;</span><span class="p">,</span>
                <span class="s">r&#39;(7th|seventh)&#39;</span>        <span class="p">:</span><span class="s">r&#39;7&#39;</span><span class="p">,</span>
                <span class="s">r&#39;(8th|eigth)&#39;</span>          <span class="p">:</span><span class="s">r&#39;8&#39;</span><span class="p">,</span>
                <span class="s">r&#39;(9th|nineth|ninth)&#39;</span>   <span class="p">:</span><span class="s">r&#39;9&#39;</span><span class="p">,</span>
                <span class="s">r&#39;(0th)&#39;</span>                <span class="p">:</span><span class="s">r&#39;0&#39;</span><span class="p">,</span>
                <span class="s">r&#39;(1th)&#39;</span>                <span class="p">:</span><span class="s">r&#39;1&#39;</span><span class="p">,</span>
                <span class="s">r&#39;(2th)&#39;</span>                <span class="p">:</span><span class="s">r&#39;2&#39;</span><span class="p">,</span>
                <span class="s">r&#39;(3th)&#39;</span>                <span class="p">:</span><span class="s">r&#39;3&#39;</span><span class="p">,</span>
                <span class="s">r&#39;\s(street)&#39;</span>           <span class="p">:</span><span class="s">r&#39; st&#39;</span><span class="p">,</span>
                <span class="s">r&#39;\s(square)&#39;</span>           <span class="p">:</span><span class="s">r&#39; sq&#39;</span><span class="p">,</span>
                <span class="s">r&#39;\s(center)&#39;</span>           <span class="p">:</span><span class="s">r&#39; ctr&#39;</span><span class="p">,</span>
                <span class="s">r&#39;\s(av)&#39;</span><span class="p">:</span><span class="s">r&#39; ave&#39;</span><span class="p">}</span>
<span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">repl_dict</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
    <span class="n">mn_stations</span><span class="p">[</span><span class="s">&#39;clean&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mn_stations</span><span class="o">.</span><span class="n">clean</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="n">v</span><span class="p">)</span>
    
<span class="n">repl_dict</span> <span class="o">=</span> <span class="p">{</span>   <span class="s">r&#39;\Aunion sq&#39;</span><span class="p">:</span><span class="s">r&#39;14 st-union sq&#39;</span><span class="p">,</span>
                <span class="s">r&#39;cathedral parkway-110 st&#39;</span><span class="p">:</span><span class="s">r&#39;110 st-cathedrl&#39;</span><span class="p">,</span>
                <span class="s">r&#39;163 st - amsterdam ave&#39;</span><span class="p">:</span><span class="s">r&#39;163 st-amsterdm&#39;</span><span class="p">,</span>
                <span class="s">r&#39;81 st - museum of natural history&#39;</span><span class="p">:</span><span class="s">r&#39;81 st-museum&#39;</span><span class="p">,</span>
                <span class="s">r&#39;47-50 sts rockefeller ctr&#39;</span><span class="p">:</span><span class="s">r&#39;47-50 st-rock&#39;</span><span class="p">,</span>
                <span class="s">r&#39;137 st-city college&#39;</span><span class="p">:</span><span class="s">r&#39;137 st-city col&#39;</span><span class="p">,</span>
                <span class="s">r&#39;broadway-lafayette st&#39;</span><span class="p">:</span><span class="s">r&#39;broadway/lafay&#39;</span><span class="p">,</span>
                <span class="s">r&#39;west 4 st&#39;</span><span class="p">:</span><span class="s">r&#39;w 4 st-wash sq&#39;</span> <span class="p">,</span>
                <span class="s">r&#39;110 st-central park north&#39;</span><span class="p">:</span><span class="s">r&#39;110 st-cpn&#39;</span><span class="p">,</span>
                <span class="s">r&#39;116 st-columbia university&#39;</span><span class="p">:</span><span class="s">r&#39;116 st-columbia&#39;</span><span class="p">,</span>
                <span class="s">r&#39;168 st - washington heights&#39;</span><span class="p">:</span><span class="s">r&#39;168 st-broadway&#39;</span><span class="p">,</span>
<span class="c">#                 r&#39;168 st-broadway - washington heights&#39;:r&#39;168 st-broadway&#39;,</span>
                <span class="s">r&#39;49 st&#39;</span><span class="p">:</span><span class="s">r&#39;49 st-7 ave&#39;</span><span class="p">,</span>
                <span class="s">r&#39;168 st\Z&#39;</span><span class="p">:</span><span class="s">r&#39;168 st-broadway&#39;</span><span class="p">,</span>
                <span class="s">r&#39;59 st-columbus circle&#39;</span><span class="p">:</span><span class="s">r&#39;59 st-columbus&#39;</span><span class="p">,</span>
                <span class="s">r&#39;66 st-lincoln ctr&#39;</span><span class="p">:</span><span class="s">r&#39;66 st-lincoln&#39;</span><span class="p">,</span>
                <span class="s">r&#39;68 st-hunter college&#39;</span><span class="p">:</span><span class="s">r&#39;68st-hunter col&#39;</span><span class="p">,</span>
                <span class="c"># r&#39;astor pl&#39;:&#39;astor place&#39;,</span>
                <span class="s">r&#39;brooklyn bridge-city hall&#39;</span><span class="p">:</span><span class="s">r&#39;brooklyn bridge&#39;</span><span class="p">,</span>
                <span class="s">r&#39;dyckman st-200 st&#39;</span><span class="p">:</span><span class="s">r&#39;dyckman-200 st&#39;</span><span class="p">,</span>
                <span class="s">r&#39;grand central-42 st&#39;</span><span class="p">:</span><span class="s">r&#39;42 st-grd cntrl&#39;</span><span class="p">,</span>
                <span class="s">r&#39;inwood - 207 st&#39;</span><span class="p">:</span><span class="s">r&#39;inwood-207 st&#39;</span><span class="p">,</span>
                <span class="s">r&#39;lexington av-53 st&#39;</span><span class="p">:</span><span class="s">r&#39;lexington-53 st&#39;</span><span class="p">,</span>
                <span class="s">r&#39;prince st&#39;</span><span class="p">:</span><span class="s">r&quot;prince st-b&#39;way&quot;</span><span class="p">,</span>
                <span class="s">r&#39;\Atimes sq\Z&#39;</span><span class="p">:</span><span class="s">r&#39;42 st-times sq&#39;</span><span class="p">,</span>
                <span class="s">r&#39;times sq-42 st&#39;</span><span class="p">:</span><span class="s">r&#39;42 st-times sq&#39;</span><span class="p">,</span>
                <span class="s">r&#39;van cortlandt park-242 st&#39;</span><span class="p">:</span><span class="s">r&#39;242 st&#39;</span><span class="p">,</span>
                <span class="s">r&#39;marble hill-225 st&#39;</span><span class="p">:</span><span class="s">r&#39;225 st&#39;</span><span class="p">,</span>
                <span class="s">r&#39;lexington ave-53 st&#39;</span><span class="p">:</span><span class="s">r&#39;lexington-53 st&#39;</span><span class="p">,</span>
                <span class="s">r&#39;harlem-148 st&#39;</span><span class="p">:</span><span class="s">r&#39;148 st-lenox&#39;</span><span class="p">,</span>
                <span class="s">r&#39;\Agrand central\Z&#39;</span><span class="p">:</span><span class="s">r&#39;42 st-grd cntrl&#39;</span><span class="p">,</span>
                <span class="s">r&#39;\Acanal st (ul)\Z&#39;</span><span class="p">:</span><span class="s">r&#39;canal st&#39;</span><span class="p">,}</span>
<span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">repl_dict</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
    <span class="n">mn_stations</span><span class="p">[</span><span class="s">&#39;clean&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mn_stations</span><span class="o">.</span><span class="n">clean</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="n">v</span><span class="p">)</span>

<span class="n">station_names</span> <span class="o">=</span> <span class="n">ts_key</span><span class="o">.</span><span class="n">clean</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="c">#print len(mn_stations[mn_stations.clean.isin(station_names)==False]), &#39;stations not mapped&#39;</span>
<span class="c"># mn_stations[mn_stations.clean.isin(station_names)==False].ix[:,[&#39;division&#39;,&#39;line&#39;,&#39;station_name&#39;,&#39;all_lines&#39;,&#39;clean&#39;]].sort(&#39;clean&#39;)</span>
<span class="c"># mn_stations.head()</span>

<span class="c"># push to [ sub_stat_entr,ts_key,p(turn stiles) ] to pgsql for comparison and unificiation</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;drop table if exists sub_stat_entr&#39;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;drop table if exists ts_key&#39;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;drop table if exists sub_turn_stiles&#39;</span><span class="p">)</span>
<span class="n">delay</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="n">mn_stations</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s">&#39;id&#39;</span><span class="p">,</span><span class="s">&#39;index&#39;</span><span class="p">],</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s">&#39;sub_stat_entr&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">    alter table sub_stat_entr add column id serial;</span>
<span class="s">    update sub_stat_entr set index = nextval(pg_get_serial_sequence(&#39;sub_stat_entr&#39;,&#39;id&#39;));</span>
<span class="s">    alter table sub_stat_entr add primary key (id);</span>
<span class="s">    &quot;&quot;&quot;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;UPDATE sub_stat_entr set geom = ST_SetSRID(ST_MakePoint(station_longitude,station_latitude),4326)&quot;&quot;&quot;</span><span class="p">)</span>

<span class="c"># ts_key.to_sql(&#39;ts_key&#39;,engine)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">    alter table ts_key add column lat double precision;</span>
<span class="s">    alter table ts_key add column lon double precision;</span>
<span class="s">    alter table ts_key add column id serial;</span>
<span class="s">    update ts_key set index = nextval(pg_get_serial_sequence(&#39;ts_key&#39;,&#39;id&#39;));</span>
<span class="s">    alter table ts_key add primary key (id);</span>
<span class="s">    &quot;&quot;&quot;</span><span class="p">)</span>

<span class="n">p</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s">&#39;sub_turn_stiles&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">    alter table sub_turn_stiles add column station text;</span>
<span class="s">    alter table sub_turn_stiles add column lat double precision;</span>
<span class="s">    alter table sub_turn_stiles add column lon double precision;</span>
<span class="s">    alter table sub_turn_stiles add column id serial;</span>
<span class="s">    update sub_turn_stiles set index = nextval(pg_get_serial_sequence(&#39;sub_turn_stiles&#39;,&#39;id&#39;));</span>
<span class="s">    alter table sub_turn_stiles add primary key (id);</span>
<span class="s">    &quot;&quot;&quot;</span><span class="p">)</span>

<span class="c"># 1. Copy coords from station_entrances to turnstile_key</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">                UPDATE ts_key t</span>
<span class="s">                SET lat = s.station_latitude,lon = s.station_longitude</span>
<span class="s">                FROM sub_stat_entr s</span>
<span class="s">                WHERE s.clean=t.clean</span>
<span class="s">                AND s.all_lines=t.line_name;</span>
<span class="s">                &quot;&quot;&quot;</span><span class="p">)</span>
<span class="c">#print pd.read_sql(&#39;select count(*) c from ts_key where lon is null&#39;,engine).c[0],&#39;null&#39;</span>
<span class="c">#print pd.read_sql(&#39;select count(*) c from ts_key where lon is not null&#39;,engine).c[0],&#39;not null&#39;</span>

<span class="c"># 2. Copy matching ts_key table data to turn_stiles table</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">                UPDATE sub_turn_stiles</span>
<span class="s">                SET lat = t.lat,lon=t.lon,station=t.station</span>
<span class="s">                FROM ts_key t</span>
<span class="s">                WHERE t.remote = unit</span>
<span class="s">                AND t.booth = c_a;</span>
<span class="s">                &quot;&quot;&quot;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;alter table sub_turn_stiles add column geom geometry(Point,4326)&#39;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;UPDATE sub_turn_stiles set geom = ST_SetSRID(ST_MakePoint(lon,lat),4326)&quot;&quot;&quot;</span><span class="p">)</span>

<span class="c"># 3. Attempt to match leftovers (non-matching) b/t ts_key/sub_stat_entr using wildcards</span>
<span class="n">leftovers</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s">&quot;select * from ts_key where lon is null and division = any(array[&#39;IRT&#39;,&#39;IND&#39;,&#39;BMT&#39;])&quot;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">leftovers</span><span class="p">)):</span>
    <span class="n">row</span> <span class="o">=</span> <span class="n">leftovers</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">i</span><span class="p">,:]</span>
    <span class="n">chk</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s">&#39;clean&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;-&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">chk</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
        <span class="n">a</span><span class="p">,</span><span class="n">b</span> <span class="o">=</span> <span class="s">&#39;</span><span class="si">%%</span><span class="s">&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s">&#39;clean&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;-&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span><span class="o">+</span><span class="s">&#39;</span><span class="si">%%</span><span class="s">&#39;</span><span class="p">,</span><span class="n">row</span><span class="p">[</span><span class="s">&#39;line_name&#39;</span><span class="p">]</span>
        <span class="n">tmp</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span>  <span class="s">&quot;&quot;&quot; </span>
<span class="s">                            SELECT station_latitude lat,station_longitude lon</span>
<span class="s">                            FROM sub_stat_entr s</span>
<span class="s">                            WHERE s.clean ilike &#39;</span><span class="si">%s</span><span class="s">&#39;</span>
<span class="s">                            AND s.all_lines=&#39;</span><span class="si">%s</span><span class="s">&#39;;</span>
<span class="s">                            &quot;&quot;&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">),</span><span class="n">engine</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">tmp</span><span class="o">.</span><span class="n">lat</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span><span class="o">==</span><span class="nb">len</span><span class="p">(</span><span class="n">tmp</span><span class="o">.</span><span class="n">lat</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span><span class="o">==</span><span class="mi">1</span><span class="p">):</span>
            <span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span> <span class="o">=</span> <span class="n">tmp</span><span class="o">.</span><span class="n">lat</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">tmp</span><span class="o">.</span><span class="n">lon</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">row</span><span class="p">[</span><span class="s">&#39;id&#39;</span><span class="p">]</span>
            <span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">                                UPDATE ts_key set lat=</span><span class="si">%f</span><span class="s">,lon=</span><span class="si">%f</span><span class="s"></span>
<span class="s">                                WHERE id = </span><span class="si">%d</span><span class="s"></span>
<span class="s">                            &quot;&quot;&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">),</span><span class="n">engine</span><span class="p">)</span>
            
<span class="c"># 4. Attempt to match leftover by:</span>
        <span class="c"># starting with lines,division, </span>
            <span class="c"># if one result go with it, </span>
            <span class="c"># else if only one result and it&#39;s a partial match, go with it?</span>
<span class="n">leftovers</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s">&quot;select * from ts_key where lon is null and division = any(array[&#39;IRT&#39;,&#39;IND&#39;,&#39;BMT&#39;])&quot;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">leftovers</span><span class="p">)):</span>
    <span class="n">row</span> <span class="o">=</span> <span class="n">leftovers</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">i</span><span class="p">,:]</span>
    <span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span> <span class="o">=</span> <span class="s">&#39;</span><span class="si">%%</span><span class="s">&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s">&#39;clean&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;-&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span><span class="o">+</span><span class="s">&#39;</span><span class="si">%%</span><span class="s">&#39;</span><span class="p">,</span><span class="n">row</span><span class="p">[</span><span class="s">&#39;line_name&#39;</span><span class="p">],</span><span class="n">row</span><span class="p">[</span><span class="s">&#39;division&#39;</span><span class="p">]</span>
    <span class="n">tmp</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span>  <span class="s">&quot;&quot;&quot; </span>
<span class="s">                        SELECT station_latitude lat,station_longitude lon,clean</span>
<span class="s">                        FROM sub_stat_entr s</span>
<span class="s">                        WHERE s.division=&#39;</span><span class="si">%s</span><span class="s">&#39;</span>
<span class="s">                        AND s.all_lines=&#39;</span><span class="si">%s</span><span class="s">&#39;;</span>
<span class="s">                        &quot;&quot;&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="n">b</span><span class="p">),</span><span class="n">engine</span><span class="p">)</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">tmp</span><span class="o">.</span><span class="n">lat</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span><span class="o">==</span><span class="nb">len</span><span class="p">(</span><span class="n">tmp</span><span class="o">.</span><span class="n">lat</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span><span class="o">==</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span> <span class="o">=</span> <span class="n">tmp</span><span class="o">.</span><span class="n">lat</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">tmp</span><span class="o">.</span><span class="n">lon</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">row</span><span class="p">[</span><span class="s">&#39;id&#39;</span><span class="p">]</span>
        <span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">                            UPDATE ts_key set lat=</span><span class="si">%f</span><span class="s">,lon=</span><span class="si">%f</span><span class="s"></span>
<span class="s">                            WHERE id = </span><span class="si">%d</span><span class="s"></span>
<span class="s">                        &quot;&quot;&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">),</span><span class="n">engine</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">z</span><span class="o">=</span><span class="n">tmp</span><span class="p">[</span><span class="n">tmp</span><span class="o">.</span><span class="n">clean</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">a</span><span class="p">)]</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">z</span><span class="o">.</span><span class="n">lat</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span><span class="o">==</span><span class="nb">len</span><span class="p">(</span><span class="n">z</span><span class="o">.</span><span class="n">lat</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span><span class="o">==</span><span class="mi">1</span><span class="p">):</span>
            <span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span> <span class="o">=</span> <span class="n">tmp</span><span class="o">.</span><span class="n">lat</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">tmp</span><span class="o">.</span><span class="n">lon</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">row</span><span class="p">[</span><span class="s">&#39;id&#39;</span><span class="p">]</span>
            <span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">                                UPDATE ts_key set lat=</span><span class="si">%f</span><span class="s">,lon=</span><span class="si">%f</span><span class="s"></span>
<span class="s">                                WHERE id = </span><span class="si">%d</span><span class="s"></span>
<span class="s">                            &quot;&quot;&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">),</span><span class="n">engine</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># TURN STILE CONT&#39;D convert text to timestamp</span>

<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;  </span>

<span class="s">    DROP TABLE if exists tmp;</span>

<span class="s">    CREATE TABLE tmp (</span>
<span class="s">        gid serial primary key,</span>
<span class="s">        datetime1 timestamp with time zone,</span>
<span class="s">        datetime2 timestamp with time zone,</span>
<span class="s">        datetime3 timestamp with time zone,</span>
<span class="s">        datetime4 timestamp with time zone,</span>
<span class="s">        datetime5 timestamp with time zone,</span>
<span class="s">        datetime6 timestamp with time zone,</span>
<span class="s">        datetime7 timestamp with time zone,</span>
<span class="s">        datetime8 timestamp with time zone</span>
<span class="s">        );</span>

<span class="s">    UPDATE tmp SET gid = nextval(pg_get_serial_sequence(&#39;tmp&#39;,&#39;gid&#39;));</span>

<span class="s">    INSERT INTO tmp (</span>
<span class="s">        datetime1,</span>
<span class="s">        datetime2,</span>
<span class="s">        datetime3,</span>
<span class="s">        datetime4,</span>
<span class="s">        datetime5,</span>
<span class="s">        datetime6,</span>
<span class="s">        datetime7,</span>
<span class="s">        datetime8)</span>
<span class="s">    SELECT </span>
<span class="s">        to_timestamp(s.datetime1,&#39;YYYY-MM-DD HH24:MI:SS&#39;),</span>
<span class="s">        to_timestamp(s.datetime2,&#39;YYYY-MM-DD HH24:MI:SS&#39;),</span>
<span class="s">        to_timestamp(s.datetime3,&#39;YYYY-MM-DD HH24:MI:SS&#39;),</span>
<span class="s">        to_timestamp(s.datetime4,&#39;YYYY-MM-DD HH24:MI:SS&#39;),</span>
<span class="s">        to_timestamp(s.datetime5,&#39;YYYY-MM-DD HH24:MI:SS&#39;),</span>
<span class="s">        to_timestamp(s.datetime6,&#39;YYYY-MM-DD HH24:MI:SS&#39;),</span>
<span class="s">        to_timestamp(s.datetime7,&#39;YYYY-MM-DD HH24:MI:SS&#39;),</span>
<span class="s">        to_timestamp(s.datetime8,&#39;YYYY-MM-DD HH24:MI:SS&#39;)</span>
<span class="s">    FROM sub_turn_stiles s;</span>

<span class="s">    ALTER TABLE sub_turn_stiles </span>
<span class="s">    DROP COLUMN datetime1,</span>
<span class="s">    DROP COLUMN datetime2,</span>
<span class="s">    DROP COLUMN datetime3,</span>
<span class="s">    DROP COLUMN datetime4,</span>
<span class="s">    DROP COLUMN datetime5,</span>
<span class="s">    DROP COLUMN datetime6,</span>
<span class="s">    DROP COLUMN datetime7,</span>
<span class="s">    DROP COLUMN datetime8,</span>
<span class="s">    ADD COLUMN datetime1 timestamp with time zone,</span>
<span class="s">    ADD COLUMN datetime2 timestamp with time zone,</span>
<span class="s">    ADD COLUMN datetime3 timestamp with time zone,</span>
<span class="s">    ADD COLUMN datetime4 timestamp with time zone,</span>
<span class="s">    ADD COLUMN datetime5 timestamp with time zone,</span>
<span class="s">    ADD COLUMN datetime6 timestamp with time zone,</span>
<span class="s">    ADD COLUMN datetime7 timestamp with time zone,</span>
<span class="s">    ADD COLUMN datetime8 timestamp with time zone;</span>

<span class="s">    UPDATE sub_turn_stiles s</span>
<span class="s">    SET </span>
<span class="s">        datetime1 = t.datetime1,</span>
<span class="s">        datetime2 = t.datetime2,</span>
<span class="s">        datetime3 = t.datetime3,</span>
<span class="s">        datetime4 = t.datetime4,</span>
<span class="s">        datetime5 = t.datetime5,</span>
<span class="s">        datetime6 = t.datetime6,</span>
<span class="s">        datetime7 = t.datetime7,</span>
<span class="s">        datetime8 = t.datetime8</span>
<span class="s">    FROM tmp t</span>
<span class="s">    where t.gid = s.id;</span>

<span class="s">               &quot;&quot;&quot;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># TURN STILE CONT&#39;D calc. register differences</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">alter table sub_turn_stiles </span>
<span class="s">add column out1 double precision,</span>
<span class="s">add column out2 double precision,</span>
<span class="s">add column out3 double precision,</span>
<span class="s">add column out4 double precision,</span>
<span class="s">add column out5 double precision,</span>
<span class="s">add column out6 double precision,</span>
<span class="s">add column out7 double precision,</span>
<span class="s">add column in1 double precision,</span>
<span class="s">add column in2 double precision,</span>
<span class="s">add column in3 double precision,</span>
<span class="s">add column in4 double precision,</span>
<span class="s">add column in5 double precision,</span>
<span class="s">add column in6 double precision,</span>
<span class="s">add column in7 double precision;</span>


<span class="s">update sub_turn_stiles</span>
<span class="s">set out1 = exits2-exits1</span>
<span class="s">where exits1 != &#39;NaN&#39;::float</span>
<span class="s">and exits2 != &#39;NaN&#39;::float;</span>

<span class="s">update sub_turn_stiles</span>
<span class="s">set out2 = exits3-exits2</span>
<span class="s">where exits2 != &#39;NaN&#39;::float</span>
<span class="s">and exits3 != &#39;NaN&#39;::float;</span>

<span class="s">update sub_turn_stiles</span>
<span class="s">set out3 = exits4-exits3</span>
<span class="s">where exits3 != &#39;NaN&#39;::float</span>
<span class="s">and exits4 != &#39;NaN&#39;::float;</span>

<span class="s">update sub_turn_stiles</span>
<span class="s">set out4 = exits5-exits4</span>
<span class="s">where exits4 != &#39;NaN&#39;::float</span>
<span class="s">and exits5 != &#39;NaN&#39;::float;</span>

<span class="s">update sub_turn_stiles</span>
<span class="s">set out5 = exits6-exits5</span>
<span class="s">where exits5 != &#39;NaN&#39;::float</span>
<span class="s">and exits6 != &#39;NaN&#39;::float;</span>

<span class="s">update sub_turn_stiles</span>
<span class="s">set out6 = exits7-exits6</span>
<span class="s">where exits6 != &#39;NaN&#39;::float</span>
<span class="s">and exits7 != &#39;NaN&#39;::float;</span>

<span class="s">update sub_turn_stiles</span>
<span class="s">set out7 = exits8-exits7</span>
<span class="s">where exits7 != &#39;NaN&#39;::float</span>
<span class="s">and exits8 != &#39;NaN&#39;::float;</span>


<span class="s">update sub_turn_stiles</span>
<span class="s">set in1 = entries2-entries1</span>
<span class="s">where entries1 != &#39;NaN&#39;::float</span>
<span class="s">and entries2 != &#39;NaN&#39;::float;</span>

<span class="s">update sub_turn_stiles</span>
<span class="s">set in2 = entries3-entries2</span>
<span class="s">where entries2 != &#39;NaN&#39;::float</span>
<span class="s">and entries3 != &#39;NaN&#39;::float;</span>

<span class="s">update sub_turn_stiles</span>
<span class="s">set in3 = entries4-entries3</span>
<span class="s">where entries3 != &#39;NaN&#39;::float</span>
<span class="s">and entries4 != &#39;NaN&#39;::float;</span>

<span class="s">update sub_turn_stiles</span>
<span class="s">set in4 = entries5-entries4</span>
<span class="s">where entries4 != &#39;NaN&#39;::float</span>
<span class="s">and entries5 != &#39;NaN&#39;::float;</span>

<span class="s">update sub_turn_stiles</span>
<span class="s">set in5 = entries6-entries5</span>
<span class="s">where entries5 != &#39;NaN&#39;::float</span>
<span class="s">and entries6 != &#39;NaN&#39;::float;</span>

<span class="s">update sub_turn_stiles</span>
<span class="s">set in6 = entries7-entries6</span>
<span class="s">where entries6 != &#39;NaN&#39;::float</span>
<span class="s">and entries7 != &#39;NaN&#39;::float;</span>

<span class="s">update sub_turn_stiles</span>
<span class="s">set in7 = entries8-entries7</span>
<span class="s">where entries7 != &#39;NaN&#39;::float</span>
<span class="s">and entries8 != &#39;NaN&#39;::float;</span>


<span class="s">alter table sub_turn_stiles </span>
<span class="s">    add column in_all double precision,</span>
<span class="s">    add column out_all double precision;</span>
<span class="s">update sub_turn_stiles</span>
<span class="s">set in_all = (select sum(s) from unnest(array[in1,in2,in3,in4,in5,in6,in7]) s);</span>
<span class="s">update sub_turn_stiles</span>
<span class="s">set out_all = (select sum(s) from unnest(array[out1,out2,out3,out4,out5,out6,out7]) s);</span>
<span class="s">&quot;&quot;&quot;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># NEED to consolidate turn_stile data</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># turn_stile data with missing station name -- SMALL ADJUSTMENTS NEEDED</span>
<span class="n">cmd</span><span class="o">=</span><span class="s">&quot;&quot;&quot; select distinct unit,c_a from sub_turn_stiles </span>
<span class="s">        where station is null order by unit;&quot;&quot;&quot;</span>
<span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># turn_stile data analysis:</span>

<span class="c"># general data used herein</span>
<span class="n">datetime_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;datetime&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">9</span><span class="p">)]</span>
<span class="n">desc_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;desc&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">9</span><span class="p">)]</span>
<span class="n">entry_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;entries&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">9</span><span class="p">)]</span>
<span class="n">exit_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;exits&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">9</span><span class="p">)]</span>
<span class="n">in_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;in&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">9</span><span class="p">)]</span>
<span class="n">out_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;out&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">9</span><span class="p">)]</span>
<span class="n">agg_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;in_all&#39;</span><span class="p">,</span><span class="s">&#39;out_all&#39;</span><span class="p">]</span>
<span class="n">other_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;index&#39;</span><span class="p">,</span><span class="s">&#39;lat&#39;</span><span class="p">,</span><span class="s">&#39;lon&#39;</span><span class="p">,</span><span class="s">&#39;id&#39;</span><span class="p">,</span><span class="s">&#39;geom&#39;</span><span class="p">]</span>

<span class="c"># 1. this shows there are multiple entries per station, i.e., multiple turn stiles</span>
<span class="n">cmd</span> <span class="o">=</span>   <span class="s">&quot;&quot;&quot;</span>
<span class="s">        select * from sub_turn_stiles </span>
<span class="s">        where out_all is not null</span>
<span class="s">        and station = &#39;34 ST-HERALD SQ&#39;</span>
<span class="s">        AND extract(hour from datetime1) = 4</span>
<span class="s">        AND extract(day from datetime1) = 29</span>
<span class="s">        order by out_all desc;</span>
<span class="s">        &quot;&quot;&quot;</span>

<span class="c"># 2. this shows there are multiple rows even when {c_a,unit,scp,datetime1} are same</span>
<span class="n">cmd</span> <span class="o">=</span>   <span class="s">&quot;&quot;&quot;</span>
<span class="s">        select * from sub_turn_stiles </span>
<span class="s">        where out_all is not null</span>
<span class="s">        and station = &#39;34 ST-HERALD SQ&#39;</span>
<span class="s">        AND scp = &#39;00-00-00&#39;</span>
<span class="s">        order by c_a,unit,datetime1 asc;</span>
<span class="s">        &quot;&quot;&quot;</span>
<span class="n">dropCols</span> <span class="o">=</span> <span class="n">desc_cols</span> <span class="o">+</span> <span class="n">entry_cols</span> <span class="o">+</span> <span class="n">exit_cols</span> <span class="o">+</span> <span class="n">in_cols</span> <span class="o">+</span> <span class="n">out_cols</span> <span class="o">+</span> <span class="n">other_cols</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># 3. this shows the door is open for people leaving during rush hour... (see datetime6-7)</span>
<span class="c">#        and possibly explains why multiple rows</span>
<span class="n">cmd</span> <span class="o">=</span>   <span class="s">&quot;&quot;&quot;</span>
<span class="s">        select * from sub_turn_stiles </span>
<span class="s">        where out_all is not null</span>
<span class="s">        and station = &#39;34 ST-HERALD SQ&#39;</span>
<span class="s">        AND scp = &#39;00-00-00&#39;</span>
<span class="s">        AND datetime1 = &#39;2014-09-28 09:00:00-04:00&#39;;</span>
<span class="s">        &quot;&quot;&quot;</span>
<span class="c"># dropCols = desc_cols + entry_cols + exit_cols + in_cols + out_cols + other_cols</span>
<span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span><span class="c">#.drop(dropCols,axis=1)</span>
</pre></div>

</div>
</div>
</div>

</div>
Failed validating u'required' in schema:
    {u'$schema': u'http://json-schema.org/draft-04/schema#',
     u'additionalProperties': False,
     u'definitions': {u'code_cell': {u'additionalProperties': False,
                                     u'description': u'Notebook code cell.',
                                     u'properties': {u'cell_type': {u'description': u'String identifying the type of cell.',
                                                                    u'enum': [u'code']},
                                                     u'collapsed': {u'description': u'Whether the cell is collapsed/expanded.',
                                                                    u'type': u'boolean'},
                                                     u'input': {u'$ref': u'#/definitions/misc/source'},
                                                     u'language': {u'description': u"The cell's language (always Python)",
                                                                   u'type': u'string'},
                                                     u'metadata': {u'additionalProperties': True,
                                                                   u'description': u'Cell-level metadata.',
                                                                   u'type': u'object'},
                                                     u'outputs': {u'description': u'Execution, display, or stream outputs.',
                                                                  u'items': {u'$ref': u'#/definitions/output'},
                                                                  u'type': u'array'},
                                                     u'prompt_number': {u'description': u"The code cell's prompt number. Will be null if the cell has not been run.",
                                                                        u'minimum': 0,
                                                                        u'type': [u'integer',
                                                                                  u'null']}},
                                     u'required': [u'cell_type',
                                                   u'input',
                                                   u'outputs',
                                                   u'language'],
                                     u'type': u'object'},
                      u'display_data': {u'additionalProperties': False,
                                        u'description': u'Data displayed as a result of code cell execution.',
                                        u'patternProperties': {u'[a-zA-Z0-9]+/[a-zA-Z0-9\\-\\+\\.]+$': {u'$ref': u'#/definitions/misc/multiline_string',
                                                                                                        u'description': u'mimetype output (e.g. text/plain), represented as either an array of strings or a string.'}},
                                        u'properties': {u'html': {u'$ref': u'#/definitions/misc/multiline_string'},
                                                        u'javascript': {u'$ref': u'#/definitions/misc/multiline_string'},
                                                        u'jpeg': {u'$ref': u'#/definitions/misc/multiline_string'},
                                                        u'json': {u'$ref': u'#/definitions/misc/multiline_string'},
                                                        u'latex': {u'$ref': u'#/definitions/misc/multiline_string'},
                                                        u'metadata': {u'$ref': u'#/definitions/misc/output_metadata'},
                                                        u'output_type': {u'description': u'Type of cell output.',
                                                                         u'enum': [u'display_data']},
                                                        u'pdf': {u'$ref': u'#/definitions/misc/multiline_string'},
                                                        u'png': {u'$ref': u'#/definitions/misc/multiline_string'},
                                                        u'svg': {u'$ref': u'#/definitions/misc/multiline_string'},
                                                        u'text': {u'$ref': u'#/definitions/misc/multiline_string'}},
                                        u'required': [u'output_type'],
                                        u'type': u'object'},
                      u'heading_cell': {u'additionalProperties': False,
                                        u'description': u'Notebook heading cell.',
                                        u'properties': {u'cell_type': {u'description': u'String identifying the type of cell.',
                                                                       u'enum': [u'heading']},
                                                        u'level': {u'description': u'Level of heading cells.',
                                                                   u'minimum': 1,
                                                                   u'type': u'integer'},
                                                        u'metadata': {u'additionalProperties': True,
                                                                      u'description': u'Cell-level metadata.',
                                                                      u'type': u'object'},
                                                        u'source': {u'$ref': u'#/definitions/misc/source'}},
                                        u'required': [u'cell_type',
                                                      u'source',
                                                      u'level'],
                                        u'type': u'object'},
                      u'markdown_cell': {u'additionalProperties': False,
                                         u'description': u'Notebook markdown cell.',
                                         u'properties': {u'cell_type': {u'description': u'String identifying the type of cell.',
                                                                        u'enum': [u'markdown',
                                                                                  u'html']},
                                                         u'metadata': {u'additionalProperties': True,
                                                                       u'description': u'Cell-level metadata.',
                                                                       u'properties': {u'name': {u'$ref': u'#/definitions/misc/metadata_name'},
                                                                                       u'tags': {u'$ref': u'#/definitions/misc/metadata_tags'}},
                                                                       u'type': u'object'},
                                                         u'source': {u'$ref': u'#/definitions/misc/source'}},
                                         u'required': [u'cell_type',
                                                       u'source'],
                                         u'type': u'object'},
                      u'misc': {u'metadata_name': {u'description': u"The cell's name. If present, must be a non-empty string.",
                                                   u'pattern': u'^.+$',
                                                   u'type': u'string'},
                                u'metadata_tags': {u'description': u"The cell's tags. Tags must be unique, and must not contain commas.",
                                                   u'items': {u'pattern': u'^[^,]+$',
                                                              u'type': u'string'},
                                                   u'type': u'array',
                                                   u'uniqueItems': True},
                                u'mimetype': {u'patternProperties': {u'^[a-zA-Z0-9\\-\\+]+/[a-zA-Z0-9\\-\\+]+': {u'$ref': u'#/definitions/misc/multiline_string',
                                                                                                                 u'description': u"The cell's mimetype output (e.g. text/plain), represented as either an array of strings or a string."}}},
                                u'multiline_string': {u'oneOf': [{u'type': u'string'},
                                                                 {u'items': {u'type': u'string'},
                                                                  u'type': u'array'}]},
                                u'output_metadata': {u'additionalProperties': True,
                                                     u'description': u'Cell output metadata.',
                                                     u'type': u'object'},
                                u'prompt_number': {u'description': u"The code cell's prompt number. Will be null if the cell has not been run.",
                                                   u'minimum': 0,
                                                   u'type': [u'integer',
                                                             u'null']},
                                u'source': {u'$ref': u'#/definitions/misc/multiline_string',
                                            u'description': u'Contents of the cell, represented as an array of lines.'}},
                      u'output': {u'oneOf': [{u'$ref': u'#/definitions/pyout'},
                                             {u'$ref': u'#/definitions/display_data'},
                                             {u'$ref': u'#/definitions/stream'},
                                             {u'$ref': u'#/definitions/pyerr'}],
                                  u'type': u'object'},
                      u'pyerr': {u'additionalProperties': False,
                                 u'description': u'Output of an error that occurred during code cell execution.',
                                 u'properties': {u'ename': {u'description': u'The name of the error.',
                                                            u'type': u'string'},
                                                 u'evalue': {u'description': u'The value, or message, of the error.',
                                                             u'type': u'string'},
                                                 u'metadata': {u'$ref': u'#/definitions/misc/output_metadata'},
                                                 u'output_type': {u'description': u'Type of cell output.',
                                                                  u'enum': [u'pyerr']},
                                                 u'traceback': {u'description': u"The error's traceback, represented as an array of strings.",
                                                                u'items': {u'type': u'string'},
                                                                u'type': u'array'}},
                                 u'required': [u'output_type',
                                               u'ename',
                                               u'evalue',
                                               u'traceback'],
                                 u'type': u'object'},
                      u'pyout': {u'additionalProperties': False,
                                 u'description': u'Result of executing a code cell.',
                                 u'patternProperties': {u'^[a-zA-Z0-9]+/[a-zA-Z0-9\\-\\+\\.]+$': {u'$ref': u'#/definitions/misc/multiline_string',
                                                                                                  u'description': u'mimetype output (e.g. text/plain), represented as either an array of strings or a string.'}},
                                 u'properties': {u'html': {u'$ref': u'#/definitions/misc/multiline_string'},
                                                 u'javascript': {u'$ref': u'#/definitions/misc/multiline_string'},
                                                 u'jpeg': {u'$ref': u'#/definitions/misc/multiline_string'},
                                                 u'json': {u'$ref': u'#/definitions/misc/multiline_string'},
                                                 u'latex': {u'$ref': u'#/definitions/misc/multiline_string'},
                                                 u'metadata': {u'$ref': u'#/definitions/misc/output_metadata'},
                                                 u'output_type': {u'description': u'Type of cell output.',
                                                                  u'enum': [u'pyout']},
                                                 u'pdf': {u'$ref': u'#/definitions/misc/multiline_string'},
                                                 u'png': {u'$ref': u'#/definitions/misc/multiline_string'},
                                                 u'prompt_number': {u'description': u"A result's prompt number.",
                                                                    u'minimum': 0,
                                                                    u'type': [u'integer']},
                                                 u'svg': {u'$ref': u'#/definitions/misc/multiline_string'},
                                                 u'text': {u'$ref': u'#/definitions/misc/multiline_string'}},
                                 u'required': [u'output_type',
                                               u'prompt_number'],
                                 u'type': u'object'},
                      u'raw_cell': {u'additionalProperties': False,
                                    u'description': u'Notebook raw nbconvert cell.',
                                    u'properties': {u'cell_type': {u'description': u'String identifying the type of cell.',
                                                                   u'enum': [u'raw']},
                                                    u'metadata': {u'additionalProperties': True,
                                                                  u'description': u'Cell-level metadata.',
                                                                  u'properties': {u'format': {u'description': u'Raw cell metadata format for nbconvert.',
                                                                                              u'type': u'string'},
                                                                                  u'name': {u'$ref': u'#/definitions/misc/metadata_name'},
                                                                                  u'tags': {u'$ref': u'#/definitions/misc/metadata_tags'}},
                                                                  u'type': u'object'},
                                                    u'source': {u'$ref': u'#/definitions/misc/source'}},
                                    u'required': [u'cell_type',
                                                  u'source'],
                                    u'type': u'object'},
                      u'stream': {u'additionalProperties': False,
                                  u'description': u'Stream output from a code cell.',
                                  u'properties': {u'output_type': {u'description': u'Type of cell output.',
                                                                   u'enum': [u'stream']},
                                                  u'stream': {u'description': u'The stream type/destination.',
                                                              u'type': u'string'},
                                                  u'text': {u'$ref': u'#/definitions/misc/multiline_string',
                                                            u'description': u"The stream's text output, represented as an array of strings."}},
                                  u'required': [u'output_type',
                                                u'stream',
                                                u'text'],
                                  u'type': u'object'},
                      u'worksheet': {u'additionalProperties': False,
                                     u'properties': {u'cells': {u'description': u'Array of cells of the current notebook.',
                                                                u'items': {u'oneOf': [{u'$ref': u'#/definitions/raw_cell'},
                                                                                      {u'$ref': u'#/definitions/markdown_cell'},
                                                                                      {u'$ref': u'#/definitions/heading_cell'},
                                                                                      {u'$ref': u'#/definitions/code_cell'}],
                                                                           u'type': u'object'},
                                                                u'type': u'array'},
                                                     u'metadata': {u'description': u'metadata of the current worksheet',
                                                                   u'type': u'object'}},
                                     u'required': [u'cells']}},
     u'description': u'IPython Notebook v3.0 JSON schema.',
     u'properties': {u'metadata': {u'additionalProperties': True,
                                   u'description': u'Notebook root-level metadata.',
                                   u'properties': {u'kernel_info': {u'description': u'Kernel information.',
                                                                    u'properties': {u'codemirror_mode': {u'description': u'The codemirror mode to use for code in this language.',
                                                                                                         u'type': u'string'},
                                                                                    u'language': {u'description': u'The programming language which this kernel runs.',
                                                                                                  u'type': u'string'},
                                                                                    u'name': {u'description': u'Name of the kernel specification.',
                                                                                              u'type': u'string'}},
                                                                    u'required': [u'name',
                                                                                  u'language'],
                                                                    u'type': u'object'},
                                                   u'signature': {u'description': u'Hash of the notebook.',
                                                                  u'type': u'string'}},
                                   u'type': u'object'},
                     u'nbformat': {u'description': u'Notebook format (major number). Incremented between backwards incompatible changes to the notebook format.',
                                   u'maximum': 3,
                                   u'minimum': 3,
                                   u'type': u'integer'},
                     u'nbformat_minor': {u'description': u'Notebook format (minor number). Incremented for backward compatible changes to the notebook format.',
                                         u'minimum': 0,
                                         u'type': u'integer'},
                     u'orig_nbformat': {u'description': u'Original notebook format (major number) before converting the notebook between versions.',
                                        u'minimum': 1,
                                        u'type': u'integer'},
                     u'worksheets': {u'description': u'Array of worksheets',
                                     u'items': {u'$ref': u'#/definitions/worksheet'},
                                     u'type': u'array'}},
     u'required': [u'metadata',
                   u'nbformat_minor',
                   u'nbformat',
                   u'worksheets'],
     u'type': u'object'}

On instance:
    {u'metadata': {u'gist_id': u'dd0c63ea8755d6317db2',
                   u'name': u'',
                   u'signature': u'sha256:23d1e9600e3d49fd17c1308f16a29aff0949639dd2891d9971bf377675c9e0be'},
     u'nbformat': 3,
     u'worksheets': [{u'cells': [{u'cell_type': u'code',
                                  u'collapsed': False,
                                  u'input': u'import matplotlib.pyplot as plt\nx = [1,2,3,4]\ny = [1,2,3,4]\nm = [[15,14,13,12],[14,12,10,8],[13,10,7,4],[12,8,4,0]]\ncs = plt.contour(x,y,m)',
                                  u'language': u'python',
                                  u'metadata': {},
                                  u'outputs': [{u'metadata': {},
                                                u'output_type': u'display_data',
                                                u'png': u'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\nfgAAAABJRU5ErkJggg==\n',
                                                u'text': u'<matplotlib.figure.Figure at 0x7f635e282190>'}],
                                  u'prompt_number': 1,
                                  u'trusted': True},
                                 {u'cell_type': u'code',
                                  u'collapsed': False,
                                  u'input': u'from shapely.geometry import polygon as sp\nfor i in range(len(cs.collections)):\n    p = cs.collections[i].get_paths()[0]\n    v = p.vertices\n    x = v[:,0]\n    y = v[:,1]\n    if len(x)>2:\n        poly = sp.Polygon([(i[0], i[1]) for i in zip(x,y)])\n        print i, poly, poly.area',
                                  u'language': u'python',
                                  u'metadata': {},
                                  u'outputs': [{u'output_type': u'stream',
                                                u'stream': u'stdout',
                                                u'text': u'(3.0, 4.0) POLYGON ((4 3, 4 3, 3 4, 3 4, 4 3)) 0.0\n(2.5, 4.0) POLYGON ((4 2.5, 3.333333333333333 3, 3 3.333333333333333, 2.5 4, 4 2.5)) 0.152777777778\n(2.0, 4.0) POLYGON ((4 2, 4 2, 3 2.666666666666667, 2.666666666666667 3, 2 4, 2 4, 4 2)) 0.388888888889\n(1.5, 4.0) POLYGON ((4 1.5, 3 2, 3 2, 2 3, 2 3, 1.5 4, 4 1.5)) 0.875\n(1.0, 4.0) POLYGON ((4 1, 3 1.333333333333333, 2 2, 2 2, 1.333333333333333 3, 1 4, 4 1)) 1.83333333333\n'}],
                                  u'prompt_number': 2,
                                  u'trusted': True},
                                 {u'cell_type': u'code',
                                  u'collapsed': False,
                                  u'input': u'',
                                  u'language': u'python',
                                  u'metadata': {},
                                  u'outputs': [],
                                  u'prompt_number': 2,
                                  u'trusted': True}],
                      u'metadata': {}}]}
[NbConvertApp] Loaded template basic.tpl

<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[1]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]</span>
<span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]</span>
<span class="n">m</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">15</span><span class="p">,</span><span class="mi">14</span><span class="p">,</span><span class="mi">13</span><span class="p">,</span><span class="mi">12</span><span class="p">],[</span><span class="mi">14</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">8</span><span class="p">],[</span><span class="mi">13</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">4</span><span class="p">],[</span><span class="mi">12</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">0</span><span class="p">]]</span>
<span class="n">cs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">contour</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">m</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>


<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
fgAAAABJRU5ErkJggg==
"
>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[2]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="kn">from</span> <span class="nn">shapely.geometry</span> <span class="kn">import</span> <span class="n">polygon</span> <span class="k">as</span> <span class="n">sp</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">cs</span><span class="o">.</span><span class="n">collections</span><span class="p">)):</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">cs</span><span class="o">.</span><span class="n">collections</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">get_paths</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">v</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">vertices</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">v</span><span class="p">[:,</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">v</span><span class="p">[:,</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">2</span><span class="p">:</span>
        <span class="n">poly</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">Polygon</span><span class="p">([(</span><span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">i</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)])</span>
        <span class="k">print</span> <span class="n">i</span><span class="p">,</span> <span class="n">poly</span><span class="p">,</span> <span class="n">poly</span><span class="o">.</span><span class="n">area</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>(3.0, 4.0) POLYGON ((4 3, 4 3, 3 4, 3 4, 4 3)) 0.0
(2.5, 4.0) POLYGON ((4 2.5, 3.333333333333333 3, 3 3.333333333333333, 2.5 4, 4 2.5)) 0.152777777778
(2.0, 4.0) POLYGON ((4 2, 4 2, 3 2.666666666666667, 2.666666666666667 3, 2 4, 2 4, 4 2)) 0.388888888889
(1.5, 4.0) POLYGON ((4 1.5, 3 2, 3 2, 2 3, 2 3, 1.5 4, 4 1.5)) 0.875
(1.0, 4.0) POLYGON ((4 1, 3 1.333333333333333, 2 2, 2 2, 1.333333333333333 3, 1 4, 4 1)) 1.83333333333
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[2]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre> 
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[2]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="kn">from</span> <span class="nn">sys</span> <span class="kn">import</span> <span class="n">path</span> <span class="k">as</span> <span class="n">sys_path</span>
<span class="n">sys_path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;/Users/admin/SERVER2/BD_Scripts/geolocation&#39;</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">f_nyc_data</span> <span class="kn">import</span> <span class="n">parse_NYC_snd_datafile</span><span class="p">,</span><span class="n">SND_NON_S_PATH</span><span class="p">,</span><span class="n">SND_S_PATH</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s">&#39;display.max_rows&#39;</span><span class="p">,</span> <span class="mi">2000</span><span class="p">)</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>

<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span>
<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s">r&#39;postgresql://postgres:postgres@localhost/routing&#39;</span><span class="p">)</span>
<span class="n">BASE_SAVE_PATH</span> <span class="o">=</span> <span class="s">&#39;/Users/admin/Projects/GIS/NYC_gov_data/&#39;</span>

<span class="c">### parse data from NYC BYTES Street Name Directory (&quot;SND&quot;)</span>
<span class="c"># fpath = BASE_SAVE_PATH+&#39;pad14b/snd14Bcow.txt&#39;</span>
<span class="c"># save_to_disk = parse_NYC_snd_datafile(fpath)</span>
<span class="c"># print &#39;\nsave_to_disk?\t&#39;,save_to_disk</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[116]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### Parse/Review NYC SND Data</span>

<span class="n">d</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">SND_NON_S_PATH</span><span class="p">,</span><span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">d</span><span class="p">[</span><span class="s">&#39;sc5&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">sc5</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="n">d</span><span class="o">.</span><span class="n">boro</span><span class="o">==</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s">&#39;len_full_name&#39;</span><span class="p">,</span><span class="s">&#39;min_SNL&#39;</span><span class="p">,</span><span class="s">&#39;stn20&#39;</span><span class="p">],</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">dd</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">SND_S_PATH</span><span class="p">,</span><span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">dd</span><span class="p">[</span><span class="s">&#39;sc5_1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dd</span><span class="o">.</span><span class="n">progen_b10sc_1</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">)[</span><span class="mi">1</span><span class="p">:</span><span class="mi">6</span><span class="p">])</span>
<span class="n">dd</span><span class="p">[</span><span class="s">&#39;sc5_2&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dd</span><span class="o">.</span><span class="n">progen_b10sc_2</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">)[</span><span class="mi">1</span><span class="p">:</span><span class="mi">6</span><span class="p">])</span>
<span class="n">dd</span><span class="p">[</span><span class="s">&#39;sc7_1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dd</span><span class="o">.</span><span class="n">progen_b10sc_1</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">)[</span><span class="mi">1</span><span class="p">:</span><span class="mi">8</span><span class="p">])</span>
<span class="n">dd</span><span class="p">[</span><span class="s">&#39;sc7_2&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dd</span><span class="o">.</span><span class="n">progen_b10sc_2</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">)[</span><span class="mi">1</span><span class="p">:</span><span class="mi">8</span><span class="p">])</span>
<span class="n">dd</span><span class="p">[</span><span class="s">&#39;scL3_1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dd</span><span class="o">.</span><span class="n">progen_b10sc_1</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">)[</span><span class="mi">8</span><span class="p">:])</span>
<span class="n">dd</span><span class="p">[</span><span class="s">&#39;scL3_2&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dd</span><span class="o">.</span><span class="n">progen_b10sc_2</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">)[</span><span class="mi">8</span><span class="p">:])</span>

<span class="n">dd</span> <span class="o">=</span> <span class="n">dd</span><span class="p">[</span><span class="n">dd</span><span class="o">.</span><span class="n">boro</span><span class="o">==</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s">&#39;numeric_ind&#39;</span><span class="p">,</span><span class="s">&#39;len_full_name&#39;</span><span class="p">,</span><span class="s">&#39;Unnamed: 0.1&#39;</span><span class="p">],</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[122]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">skip_list</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;FDR&#39;</span><span class="p">,</span><span class="s">&#39;F D R&#39;</span><span class="p">,</span><span class="s">&#39;HENRY HUDSON&#39;</span><span class="p">]</span>
<span class="n">reg_pat</span> <span class="o">=</span> <span class="s">r&#39;(&#39;</span><span class="o">+</span><span class="s">&quot;|&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">skip_list</span><span class="p">)</span><span class="o">+</span><span class="s">r&#39;)&#39;</span>

<span class="n">a</span><span class="o">=</span><span class="n">d</span><span class="p">[(</span><span class="n">d</span><span class="o">.</span><span class="n">full_stname</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s">&#39;12\s&#39;</span><span class="p">))</span><span class="o">&amp;</span>
    <span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">primary_flag</span><span class="o">==</span><span class="s">&#39;P&#39;</span><span class="p">)</span><span class="o">&amp;</span>
    <span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">stname</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s">&#39;(FDR|HENRY\sHUDSON|F\sD\sR\s)&#39;</span><span class="p">)</span><span class="o">==</span><span class="bp">False</span><span class="p">)</span><span class="o">&amp;</span>
    <span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">GFT</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="bp">True</span> <span class="k">if</span> <span class="n">s</span><span class="o">==</span><span class="s">&#39; &#39;</span> <span class="k">else</span> <span class="bp">False</span><span class="p">))]</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s">&#39;GFT&#39;</span><span class="p">)</span>
<span class="c"># a = a.drop([&#39;stname&#39;,&#39;primary_flag&#39;,&#39;principal_flag&#39;,&#39;boro&#39;,&#39;lgc&#39;,</span>
<span class="c">#             &#39;numeric_ind&#39;,&#39;full_stname&#39;,&#39;ht_name_type_code&#39;],axis=1)</span>
<span class="k">print</span> <span class="nb">len</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="n">a</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>7
</pre>
</div>
</div>

<div class="output_area"><div class="prompt output_prompt">
    Out[122]:</div>

<div class="output_html rendered_html output_subarea output_pyout">
<div style="max-height:1000px;max-width:1500px;overflow:auto;">
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>stname</th>
      <th>primary_flag</th>
      <th>principal_flag</th>
      <th>boro</th>
      <th>sc5</th>
      <th>lgc</th>
      <th>spv</th>
      <th>numeric_ind</th>
      <th>GFT</th>
      <th>full_stname</th>
      <th>ht_name_type_code</th>
      <th>clean_name</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>9966 </th>
      <td> LITTLE WEST   12 STREET         </td>
      <td> P</td>
      <td> F</td>
      <td> 1</td>
      <td> 25020</td>
      <td> 1</td>
      <td> 10</td>
      <td> N</td>
      <td>  </td>
      <td> LITTLE WEST   12 STREET         </td>
      <td>  </td>
      <td> little w 12 st</td>
    </tr>
    <tr>
      <th>4663 </th>
      <td> EAST   12 STREET                </td>
      <td> P</td>
      <td> F</td>
      <td> 1</td>
      <td> 17230</td>
      <td> 1</td>
      <td> 10</td>
      <td> N</td>
      <td>  </td>
      <td> EAST   12 STREET                </td>
      <td>  </td>
      <td>        e 12 st</td>
    </tr>
    <tr>
      <th>4992 </th>
      <td> EAST  112 STREET                </td>
      <td> P</td>
      <td> F</td>
      <td> 1</td>
      <td> 19210</td>
      <td> 1</td>
      <td> 10</td>
      <td> N</td>
      <td>  </td>
      <td> EAST  112 STREET                </td>
      <td>  </td>
      <td>       e 112 st</td>
    </tr>
    <tr>
      <th>89   </th>
      <td>   12 AVENUE                     </td>
      <td> P</td>
      <td> F</td>
      <td> 1</td>
      <td> 11112</td>
      <td> 1</td>
      <td> 10</td>
      <td> N</td>
      <td>  </td>
      <td>   12 AVENUE                     </td>
      <td>  </td>
      <td>         12 ave</td>
    </tr>
    <tr>
      <th>16672</th>
      <td> WEST   12 STREET                </td>
      <td> P</td>
      <td> F</td>
      <td> 1</td>
      <td> 34010</td>
      <td> 1</td>
      <td> 10</td>
      <td> N</td>
      <td>  </td>
      <td> WEST   12 STREET                </td>
      <td>  </td>
      <td>        w 12 st</td>
    </tr>
    <tr>
      <th>16827</th>
      <td> WEST  112 STREET                </td>
      <td> P</td>
      <td> F</td>
      <td> 1</td>
      <td> 36010</td>
      <td> 1</td>
      <td> 10</td>
      <td> N</td>
      <td>  </td>
      <td> WEST  112 STREET                </td>
      <td>  </td>
      <td>       w 112 st</td>
    </tr>
    <tr>
      <th>17015</th>
      <td> WEST  212 STREET                </td>
      <td> P</td>
      <td> F</td>
      <td> 1</td>
      <td> 37701</td>
      <td> 1</td>
      <td> 10</td>
      <td> N</td>
      <td>  </td>
      <td> WEST  212 STREET                </td>
      <td>  </td>
      <td>       w 212 st</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[123]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">b</span> <span class="o">=</span> <span class="n">dd</span><span class="p">[(</span><span class="n">dd</span><span class="o">.</span><span class="n">stname</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s">&#39;12\s&#39;</span><span class="p">)</span><span class="o">==</span><span class="bp">True</span><span class="p">)]</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s">&#39;GFT&#39;</span><span class="p">)</span>
<span class="c"># b = b.drop([&#39;stname&#39;,&#39;boro&#39;,&#39;num_of_progens&#39;,&#39;progen_word_1&#39;,&#39;progen_b10sc_1&#39;,</span>
<span class="c">#             &#39;progen_word_2&#39;,&#39;progen_b10sc_2&#39;],axis=1)</span>
<span class="k">print</span> <span class="nb">len</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="n">b</span><span class="o">.</span><span class="n">sort</span><span class="p">([</span><span class="s">&#39;sc5_1&#39;</span><span class="p">,</span><span class="s">&#39;sc5_2&#39;</span><span class="p">])</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>3
</pre>
</div>
</div>

<div class="output_area"><div class="prompt output_prompt">
    Out[123]:</div>

<div class="output_html rendered_html output_subarea output_pyout">
<div style="max-height:1000px;max-width:1500px;overflow:auto;">
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>boro</th>
      <th>stname</th>
      <th>GFT</th>
      <th>num_of_progens</th>
      <th>progen_word_1</th>
      <th>progen_gft_1</th>
      <th>progen_b10sc_1</th>
      <th>progen_word_2</th>
      <th>progen_gft_2</th>
      <th>progen_b10sc_2</th>
      <th>clean_name</th>
      <th>sc5_1</th>
      <th>sc5_2</th>
      <th>sc7_1</th>
      <th>sc7_2</th>
      <th>scL3_1</th>
      <th>scL3_2</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>21 </th>
      <td> 1</td>
      <td>   12 STREET                     </td>
      <td> S</td>
      <td> 2</td>
      <td> E</td>
      <td>  </td>
      <td> 11723001010</td>
      <td> W</td>
      <td>  </td>
      <td> 13401001010</td>
      <td>  12 st</td>
      <td> 17230</td>
      <td> 34010</td>
      <td> 1723001</td>
      <td> 3401001</td>
      <td> 010</td>
      <td> 010</td>
    </tr>
    <tr>
      <th>355</th>
      <td> 1</td>
      <td>  112 STREET                     </td>
      <td> S</td>
      <td> 2</td>
      <td> E</td>
      <td>  </td>
      <td> 11921001010</td>
      <td> W</td>
      <td>  </td>
      <td> 13601001010</td>
      <td> 112 st</td>
      <td> 19210</td>
      <td> 36010</td>
      <td> 1921001</td>
      <td> 3601001</td>
      <td> 010</td>
      <td> 010</td>
    </tr>
    <tr>
      <th>591</th>
      <td> 1</td>
      <td>  212 STREET                     </td>
      <td> S</td>
      <td> 1</td>
      <td> W</td>
      <td>  </td>
      <td> 13770101010</td>
      <td>  </td>
      <td>  </td>
      <td>            </td>
      <td> 212 st</td>
      <td> 37701</td>
      <td>      </td>
      <td> 3770101</td>
      <td>        </td>
      <td> 010</td>
      <td>    </td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[114]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">a_sc5_list</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">sc5</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="n">b_sc5_1_list</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">sc5_1</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="n">b_sc5_2_list</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">sc5_2</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="n">c</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">b</span><span class="p">[</span><span class="n">b</span><span class="o">.</span><span class="n">sc5_1</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">a_sc5_list</span><span class="p">)],</span> <span class="n">a</span><span class="p">[</span><span class="n">a</span><span class="o">.</span><span class="n">sc5</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">b_sc5_1_list</span><span class="p">)],</span> 
           <span class="n">how</span><span class="o">=</span><span class="s">&#39;left&#39;</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">left_on</span><span class="o">=</span><span class="s">&#39;sc5_1&#39;</span><span class="p">,</span> <span class="n">right_on</span><span class="o">=</span><span class="s">&#39;sc5&#39;</span><span class="p">,</span><span class="n">copy</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">d</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">b</span><span class="p">[</span><span class="n">b</span><span class="o">.</span><span class="n">sc5_2</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">a_sc5_list</span><span class="p">)],</span> <span class="n">a</span><span class="p">[</span><span class="n">a</span><span class="o">.</span><span class="n">sc5</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">b_sc5_2_list</span><span class="p">)],</span> 
           <span class="n">how</span><span class="o">=</span><span class="s">&#39;left&#39;</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">left_on</span><span class="o">=</span><span class="s">&#39;sc5_2&#39;</span><span class="p">,</span> <span class="n">right_on</span><span class="o">=</span><span class="s">&#39;sc5&#39;</span><span class="p">,</span><span class="n">copy</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">G</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="n">ignore_index</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">G</span><span class="o">.</span><span class="n">sort</span><span class="p">([</span><span class="s">&#39;sc5_1&#39;</span><span class="p">,</span><span class="s">&#39;sc5_2&#39;</span><span class="p">])</span>
<span class="c"># c.drop([&#39;GFT_x&#39;,&#39;num_of_progens&#39;,&#39;progen_word_1&#39;,&#39;progen_gft_1&#39;,</span>
<span class="c">#         &#39;progen_word_2&#39;,&#39;progen_gft_2&#39;,</span>
<span class="c">#         &#39;lgc&#39;,&#39;boro_x&#39;,&#39;boro_y&#39;,&#39;numeric_ind&#39;,</span>
<span class="c">#         &#39;primary_flag&#39;,&#39;principal_flag&#39;,&#39;ht_name_type_code&#39;],axis=1)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">
    Out[114]:</div>

<div class="output_html rendered_html output_subarea output_pyout">
<div style="max-height:1000px;max-width:1500px;overflow:auto;">
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>GFT_x</th>
      <th>progen_gft_1</th>
      <th>progen_gft_2</th>
      <th>clean_name_x</th>
      <th>sc5_1</th>
      <th>sc5_2</th>
      <th>sc7_1</th>
      <th>sc7_2</th>
      <th>scL3_1</th>
      <th>scL3_2</th>
      <th>sc5</th>
      <th>spv</th>
      <th>GFT_y</th>
      <th>clean_name_y</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td> S</td>
      <td>  </td>
      <td>  </td>
      <td>    14 street wb roadbed</td>
      <td> 17270</td>
      <td>      </td>
      <td> 1727004</td>
      <td>        </td>
      <td> 010</td>
      <td>    </td>
      <td> 17270</td>
      <td> 10</td>
      <td>  </td>
      <td>           e 14 st</td>
    </tr>
    <tr>
      <th>1</th>
      <td> S</td>
      <td>  </td>
      <td>  </td>
      <td> 14 st westbound roadbed</td>
      <td> 17270</td>
      <td>      </td>
      <td> 1727004</td>
      <td>        </td>
      <td> 020</td>
      <td>    </td>
      <td> 17270</td>
      <td> 10</td>
      <td>  </td>
      <td>           e 14 st</td>
    </tr>
    <tr>
      <th>3</th>
      <td> S</td>
      <td>  </td>
      <td>  </td>
      <td>    14 street eb roadbed</td>
      <td> 17270</td>
      <td>      </td>
      <td> 1727005</td>
      <td>        </td>
      <td> 010</td>
      <td>    </td>
      <td> 17270</td>
      <td> 10</td>
      <td>  </td>
      <td>           e 14 st</td>
    </tr>
    <tr>
      <th>4</th>
      <td> S</td>
      <td>  </td>
      <td>  </td>
      <td> 14 st eastbound roadbed</td>
      <td> 17270</td>
      <td>      </td>
      <td> 1727005</td>
      <td>        </td>
      <td> 020</td>
      <td>    </td>
      <td> 17270</td>
      <td> 10</td>
      <td>  </td>
      <td>           e 14 st</td>
    </tr>
    <tr>
      <th>2</th>
      <td> S</td>
      <td>  </td>
      <td>  </td>
      <td>                   14 st</td>
      <td> 17270</td>
      <td> 34050</td>
      <td> 1727001</td>
      <td> 3405001</td>
      <td> 010</td>
      <td> 010</td>
      <td> 17270</td>
      <td> 10</td>
      <td>  </td>
      <td>           e 14 st</td>
    </tr>
    <tr>
      <th>7</th>
      <td> S</td>
      <td>  </td>
      <td>  </td>
      <td>                   14 st</td>
      <td> 17270</td>
      <td> 34050</td>
      <td> 1727001</td>
      <td> 3405001</td>
      <td> 010</td>
      <td> 010</td>
      <td> 34050</td>
      <td> 10</td>
      <td>  </td>
      <td>           w 14 st</td>
    </tr>
    <tr>
      <th>5</th>
      <td> S</td>
      <td>  </td>
      <td>  </td>
      <td>         14 st extension</td>
      <td> 17280</td>
      <td>      </td>
      <td> 1728001</td>
      <td>        </td>
      <td> 020</td>
      <td>    </td>
      <td> 17280</td>
      <td> 20</td>
      <td>  </td>
      <td> e 14 st extension</td>
    </tr>
    <tr>
      <th>6</th>
      <td> S</td>
      <td>  </td>
      <td>  </td>
      <td>     14 street extension</td>
      <td> 17280</td>
      <td>      </td>
      <td> 1728001</td>
      <td>        </td>
      <td> 010</td>
      <td>    </td>
      <td> 17280</td>
      <td> 20</td>
      <td>  </td>
      <td> e 14 st extension</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[109]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">d</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s">&#39;left&#39;</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
         <span class="n">left_on</span><span class="o">=</span><span class="s">&#39;sc5_2&#39;</span><span class="p">,</span> <span class="n">right_on</span><span class="o">=</span><span class="s">&#39;sc5&#39;</span><span class="p">,</span><span class="n">copy</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="k">print</span> <span class="nb">len</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
<span class="n">c</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>10
</pre>
</div>
</div>

<div class="output_area"><div class="prompt output_prompt">
    Out[109]:</div>

<div class="output_html rendered_html output_subarea output_pyout">
<div style="max-height:1000px;max-width:1500px;overflow:auto;">
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>GFT_x</th>
      <th>progen_gft_1</th>
      <th>progen_gft_2</th>
      <th>clean_name_x</th>
      <th>sc5_1</th>
      <th>sc5_2</th>
      <th>sc7_1</th>
      <th>sc7_2</th>
      <th>scL3_1</th>
      <th>scL3_2</th>
      <th>sc5</th>
      <th>spv</th>
      <th>GFT_y</th>
      <th>clean_name_y</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td> S</td>
      <td>  </td>
      <td>  </td>
      <td>      14 street wb roadbed</td>
      <td> 17270</td>
      <td>      </td>
      <td> 1727004</td>
      <td>        </td>
      <td> 010</td>
      <td>    </td>
      <td> 17270</td>
      <td> 10</td>
      <td>    </td>
      <td>           e 14 st</td>
    </tr>
    <tr>
      <th>1</th>
      <td> S</td>
      <td>  </td>
      <td>  </td>
      <td>   14 st westbound roadbed</td>
      <td> 17270</td>
      <td>      </td>
      <td> 1727004</td>
      <td>        </td>
      <td> 020</td>
      <td>    </td>
      <td> 17270</td>
      <td> 10</td>
      <td>    </td>
      <td>           e 14 st</td>
    </tr>
    <tr>
      <th>2</th>
      <td> S</td>
      <td>  </td>
      <td>  </td>
      <td>                     14 st</td>
      <td> 17270</td>
      <td> 34050</td>
      <td> 1727001</td>
      <td> 3405001</td>
      <td> 010</td>
      <td> 010</td>
      <td> 17270</td>
      <td> 10</td>
      <td>    </td>
      <td>           e 14 st</td>
    </tr>
    <tr>
      <th>3</th>
      <td> S</td>
      <td>  </td>
      <td>  </td>
      <td>      14 street eb roadbed</td>
      <td> 17270</td>
      <td>      </td>
      <td> 1727005</td>
      <td>        </td>
      <td> 010</td>
      <td>    </td>
      <td> 17270</td>
      <td> 10</td>
      <td>    </td>
      <td>           e 14 st</td>
    </tr>
    <tr>
      <th>4</th>
      <td> S</td>
      <td>  </td>
      <td>  </td>
      <td>   14 st eastbound roadbed</td>
      <td> 17270</td>
      <td>      </td>
      <td> 1727005</td>
      <td>        </td>
      <td> 020</td>
      <td>    </td>
      <td> 17270</td>
      <td> 10</td>
      <td>    </td>
      <td>           e 14 st</td>
    </tr>
    <tr>
      <th>5</th>
      <td> S</td>
      <td>  </td>
      <td>  </td>
      <td>           14 st extension</td>
      <td> 17280</td>
      <td>      </td>
      <td> 1728001</td>
      <td>        </td>
      <td> 020</td>
      <td>    </td>
      <td> 17280</td>
      <td> 20</td>
      <td>    </td>
      <td> e 14 st extension</td>
    </tr>
    <tr>
      <th>6</th>
      <td> S</td>
      <td>  </td>
      <td>  </td>
      <td>       14 street extension</td>
      <td> 17280</td>
      <td>      </td>
      <td> 1728001</td>
      <td>        </td>
      <td> 010</td>
      <td>    </td>
      <td> 17280</td>
      <td> 20</td>
      <td>    </td>
      <td> e 14 st extension</td>
    </tr>
    <tr>
      <th>7</th>
      <td> S</td>
      <td> Z</td>
      <td>  </td>
      <td>     14 st fdr drive sb en</td>
      <td> 10820</td>
      <td>      </td>
      <td> 1082001</td>
      <td>        </td>
      <td> 110</td>
      <td>    </td>
      <td>   NaN</td>
      <td>NaN</td>
      <td> NaN</td>
      <td>               NaN</td>
    </tr>
    <tr>
      <th>8</th>
      <td> S</td>
      <td> Z</td>
      <td>  </td>
      <td> 14 st sb entrance fdr drv</td>
      <td> 10820</td>
      <td>      </td>
      <td> 1082001</td>
      <td>        </td>
      <td> 090</td>
      <td>    </td>
      <td>   NaN</td>
      <td>NaN</td>
      <td> NaN</td>
      <td>               NaN</td>
    </tr>
    <tr>
      <th>9</th>
      <td> S</td>
      <td> Z</td>
      <td>  </td>
      <td> 14 street fdr drive sb en</td>
      <td> 10820</td>
      <td>      </td>
      <td> 1082001</td>
      <td>        </td>
      <td> 120</td>
      <td>    </td>
      <td>   NaN</td>
      <td>NaN</td>
      <td> NaN</td>
      <td>               NaN</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3>Integrate NYC_Bytes' Street Name Directory ("snd")</h3>
<h4>General Notes</h4>
<ul>
<li><p>GFT = Geographic Feature Type</p>
</li>
<li><p>front-truncated street name = deleting 'east' from east houston st (= GFT = 'S')</p>
<ul>
<li>ftsn NOT represented by non-S-type record</li>
</ul>
</li>
<li><p>B10SC = Borough 10-digit Street Code  (mostly everything has such code except front-truncated)</p>
</li>
<li><p>2 names are aliases only if first 6 bytes of B5SC Boro 5-digit street code are same</p>
</li>
<li><p>2 names are part of same structure only if first 8 bytes of B7SC Boro 7-digit street code are same</p>
</li>
<li><p>WEST 42 STREET is a progenitor of the front-truncated street name 42 STREET</p>
</li>
<li><p>Only street names (GFT = blank, âAâ, âBâ, âEâ, âFâ, âHâ, âMâ, âOâ, âRâ, âTâ or âZâ) may serve as progenitors</p>
</li>
</ul>
<h4>Characters Allowed:</h4>

<pre><code>[a-z0-9A-Z],[-&amp;'/]

</code></pre>
<h4>Borough:</h4>

<pre><code>1 = MN
2 = Bronx
3 = Brooklyn
4 = Queens
5 = Staten Island

</code></pre>
<h4>Geographic Feature ("GFT"):</h4>

<pre><code>blank None of the below, e.g., either a name of a street that has no hyphenated house numbers 
    and no part of which is within
    Edgewater Park, or a name of a tunnel, etc
A Addressable place name
B Name of bridge
C Business Improvement Districts
D Duplicate Address Pseudo-Street name (DAPS)
E Street is entirely within Edgewater Park
F Street is partially within Edgewater Park
G Non-Addressable Place name (NAP) of a complex
H All house numbers on this street are hyphenated
I Intersection Name
J Non-Physical Boundary Features
M Some house numbers on this street are hyphenated, some are not
N NAP of a 'stand-alone' geographic feature (not a complex
    or a constituent entity of a complex)
O Shore Line
P Pseudo-street name (BEND, CITY LIMIT, DEAD END and their aliases)
R Rail line
S Front-truncated street name
T Tunnel
U Miscellaneous Structures
X NAP of a constituent entity of a complex Z Ramp

</code></pre>
<h4>Based on above:</h4>

<pre><code>ignore GFTs equal to B,G,N,O,R,T

watch GFT's H,M for hyphenated bldg numbers

</code></pre>
<p>Not everything in the SND is a street.  The SND also contains:</p>

<pre><code>-BEND
-CITY LIMIT
-DEAD END
-"Duplicate Address Pseudo-Street" names ("DAPS")
-rail lines and shorelines
-Place Names:

    -Addressable Place Names
    -Non-Addressable ("NAPS"), i.e., Bryant Park

</code></pre>
<blockquote><p>Typical NAPâs include the names 
of islands, parks, airports, bodies 
of water, building complexes, 
major named individual buildings 
etc. Examples: the Manhattan names
EMPIRE STATE BUILDING, BRYANT PARK 
and CITY HALL, and the &gt;Queens name 
LA GUARDIA AIRPORT. Note that some 
NAPâs (such as EMPIRE STATE 
BUILDING) refer to buildings that 
also have conventional street 
addresses.</p>
</blockquote>

<pre><code>    -Intersection Names


</code></pre>
<h4>Remove Non-Streets and Paths:</h4>
<p>These are all possible values for "lion_ways.feat_type":</p>

<pre><code>VALUE     DESCRIPTION
0      =  street other than vehicle only street
*1     =  Railroad
*2     =  Water Edge / Shoreline
*3     =  Census Block Boundary
4      =  (none)
5      =  paper street (legally mapped but may not exist)
6      =  private street
*7     =  District Boundary
8      =  physical non-street boundary (cemetary)
A      =  alley
W      =  path, non-vehicular, addressable
C      =  street area adversely possessed by city

</code></pre>
<p>Rows with the marked (*) features are removed.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># d2  = pd.read_csv(SND_S_PATH,index_col=0)</span>
<span class="c"># snd_ns = geoparse(snd_ns,&#39;stname&#39;,&#39;clean_name&#39;)</span>
<span class="c"># snd_ns.to_csv(&#39;/Users/admin/Projects/GIS/NYC_gov_data/pad14b/snd14Bcow_non_s_recs.csv&#39;)</span>
<span class="c"># snd_s = geoparse(snd_s,&#39;stname&#39;,&#39;clean_name&#39;)</span>
<span class="c"># snd_s.to_csv(&#39;/Users/admin/Projects/GIS/NYC_gov_data/pad14b/snd14Bcow_s_recs.csv&#39;)</span>

<span class="c">### Data Quality Check</span>

<span class="c"># a=len(snd_ns[snd_ns.primary_flag==&#39;P&#39;])</span>
<span class="c"># b=len(snd_ns[snd_ns.primary_flag==&#39;V&#39;])</span>
<span class="c"># c=len(snd_ns)</span>
<span class="c"># c==a+b # true</span>

<span class="c"># a=len(snd_ns[snd_ns.boro==1])</span>
<span class="c"># b=len(snd_ns[snd_ns.boro==2])</span>
<span class="c"># c=len(snd_ns[snd_ns.boro==3])</span>
<span class="c"># d=len(snd_ns[snd_ns.boro==4])</span>
<span class="c"># e=len(snd_ns[snd_ns.boro==5])</span>
<span class="c"># f=len(snd_ns)</span>
<span class="c"># f==a+b+c+d+e # true</span>

<span class="n">gft_ignore</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;B&#39;</span><span class="p">,</span><span class="s">&#39;G&#39;</span><span class="p">,</span><span class="s">&#39;N&#39;</span><span class="p">,</span><span class="s">&#39;O&#39;</span><span class="p">,</span><span class="s">&#39;R&#39;</span><span class="p">,</span><span class="s">&#39;T&#39;</span><span class="p">]</span>
<span class="n">F</span> <span class="o">=</span> <span class="n">d</span><span class="p">[(</span><span class="n">d</span><span class="o">.</span><span class="n">boro</span><span class="o">==</span><span class="mi">1</span><span class="p">)</span><span class="o">&amp;</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">primary_flag</span><span class="o">==</span><span class="s">&#39;P&#39;</span><span class="p">)</span><span class="o">&amp;</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">GFT</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">gft_ignore</span><span class="p">)</span><span class="o">==</span><span class="bp">False</span><span class="p">)]</span> 
<span class="n">F</span> <span class="o">=</span> <span class="n">F</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s">&#39;principal_flag&#39;</span><span class="p">,</span><span class="s">&#39;boro&#39;</span><span class="p">,</span><span class="s">&#39;lgc&#39;</span><span class="p">,</span><span class="s">&#39;spv&#39;</span><span class="p">,</span><span class="s">&#39;len_full_name&#39;</span><span class="p">,</span>
            <span class="s">&#39;min_SNL&#39;</span><span class="p">,</span><span class="s">&#39;stn20&#39;</span><span class="p">,</span><span class="s">&#39;ht_name_type_code&#39;</span><span class="p">],</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">F</span> <span class="o">=</span> <span class="n">geoparse</span><span class="p">(</span><span class="n">F</span><span class="p">,</span><span class="s">&#39;full_stname&#39;</span><span class="p">,</span><span class="s">&#39;clean_name&#39;</span><span class="p">)</span>
<span class="n">u</span> <span class="o">=</span> <span class="n">F</span><span class="o">.</span><span class="n">clean_name</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

<span class="n">addr_street_col</span> <span class="o">=</span> <span class="s">&#39;clean_name&#39;</span>

<span class="n">ur</span><span class="p">,</span><span class="n">r</span> <span class="o">=</span> <span class="n">match_simple</span><span class="p">(</span><span class="n">ur</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">,</span><span class="n">r</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">,</span><span class="n">df</span><span class="o">=</span><span class="n">F</span><span class="p">,</span><span class="n">from_label</span><span class="o">=</span><span class="n">addr_street_col</span><span class="p">,</span><span class="n">show_info</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">ur</span><span class="p">,</span><span class="n">r</span> <span class="o">=</span> <span class="n">match_simple_regex</span><span class="p">(</span><span class="n">ur</span><span class="o">=</span><span class="n">ur</span><span class="p">,</span><span class="n">r</span><span class="o">=</span><span class="n">r</span><span class="p">,</span><span class="n">df</span><span class="o">=</span><span class="n">F</span><span class="p">,</span><span class="n">from_label</span><span class="o">=</span><span class="n">addr_street_col</span><span class="p">,</span><span class="n">show_info</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">ur</span><span class="p">,</span><span class="n">r</span> <span class="o">=</span> <span class="n">match_levenshtein_series</span><span class="p">(</span><span class="n">ur</span><span class="o">=</span><span class="n">ur</span><span class="p">,</span><span class="n">r</span><span class="o">=</span><span class="n">r</span><span class="p">,</span><span class="n">df</span><span class="o">=</span><span class="n">F</span><span class="p">,</span><span class="n">from_label</span><span class="o">=</span><span class="n">addr_street_col</span><span class="p">,</span><span class="n">show_info</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="k">print</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">-----------</span><span class="se">\n</span><span class="s">-----------</span><span class="se">\n</span><span class="s">&#39;</span>
<span class="k">print</span> <span class="nb">len</span><span class="p">(</span><span class="n">ur</span><span class="p">),</span><span class="s">&#39;of&#39;</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">F</span><span class="p">),</span><span class="s">&#39;streets recognized</span><span class="se">\t</span><span class="s"> ( &#39;</span><span class="p">,</span><span class="nb">round</span><span class="p">(</span><span class="mi">100</span><span class="o">*</span><span class="nb">float</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ur</span><span class="p">)</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">F</span><span class="p">))),</span><span class="mi">2</span><span class="p">),</span><span class="s">&#39;% )&#39;</span>


<span class="n">chk</span> <span class="o">=</span> <span class="n">ur</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s">&#39;stname&#39;</span><span class="p">,</span><span class="s">&#39;primary_flag&#39;</span><span class="p">,</span><span class="s">&#39;numeric_ind&#39;</span><span class="p">,</span><span class="s">&#39;GFT&#39;</span><span class="p">],</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">chk</span><span class="p">[</span><span class="s">&#39;a_addr&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">chk</span><span class="o">.</span><span class="n">bldg_street_idx</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">bldg_idx_addr_map</span><span class="p">)</span>
<span class="n">chk</span> <span class="o">=</span> <span class="n">chk</span><span class="o">.</span><span class="n">ix</span><span class="p">[:,[</span><span class="s">&#39;sc5&#39;</span><span class="p">,</span><span class="s">&#39;clean_name&#39;</span><span class="p">,</span><span class="s">&#39;a_addr&#39;</span><span class="p">,</span><span class="s">&#39;bldg_street_idx&#39;</span><span class="p">]]</span>
<span class="n">chk</span>


<span class="n">dbm</span> <span class="o">=</span> <span class="n">db_matches</span> <span class="o">=</span> <span class="n">find_address_idx_matches</span><span class="p">(</span><span class="n">F_streets</span><span class="p">)</span>
<span class="n">dbm_addr</span> <span class="o">=</span> <span class="n">dbm</span><span class="o">.</span><span class="n">addr</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="n">addr_idx_map</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">dbm_addr</span><span class="p">,</span><span class="n">dbm</span><span class="o">.</span><span class="n">bldg_street_idx</span><span class="o">.</span><span class="n">tolist</span><span class="p">()))</span>
<span class="n">recog_idx</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="n">F</span><span class="p">[</span><span class="n">addr_street_col</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">dbm_addr</span><span class="p">)</span><span class="o">==</span><span class="bp">True</span><span class="p">]</span><span class="o">.</span><span class="n">index</span>
<span class="n">ur</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">recog_idx</span><span class="p">,:]</span>
<span class="n">ur</span><span class="p">[</span><span class="s">&#39;bldg_street_idx&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ur</span><span class="o">.</span><span class="n">addr_street</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">addr_idx_map</span><span class="p">)</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">remaining_addr</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="n">d</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">index</span><span class="o">-</span><span class="n">recog_idx</span><span class="p">)]</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="c"># t1.head()</span>

<span class="n">get_bldg_street_idx</span><span class="p">(</span><span class="n">F</span><span class="p">,</span><span class="n">addr_col</span><span class="o">=</span><span class="s">&#39;clean_name&#39;</span><span class="p">)</span>

<span class="n">d</span> <span class="o">=</span> <span class="n">snd_ns</span><span class="p">[(</span><span class="n">snd_ns</span><span class="o">.</span><span class="n">boro</span><span class="o">==</span><span class="mi">1</span><span class="p">)</span><span class="o">&amp;</span><span class="p">(</span><span class="n">snd_ns</span><span class="o">.</span><span class="n">primary_flag</span><span class="o">==</span><span class="s">&#39;P&#39;</span><span class="p">)]</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s">&#39;Unnamed: 0&#39;</span><span class="p">,</span><span class="s">&#39;Unnamed: 0.1&#39;</span><span class="p">,</span><span class="s">&#39;primary_flag&#39;</span><span class="p">,</span><span class="s">&#39;principal_flag&#39;</span><span class="p">,</span>
                    <span class="s">&#39;len_full_name&#39;</span><span class="p">,</span><span class="s">&#39;min_SNL&#39;</span><span class="p">,</span><span class="s">&#39;stn20&#39;</span><span class="p">,</span><span class="s">&#39;ht_name_type_code&#39;</span><span class="p">],</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="k">print</span> <span class="nb">len</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">get_addr_body</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="n">from_label</span><span class="o">=</span><span class="s">&#39;clean_name&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">d</span><span class="o">.</span><span class="n">ix</span><span class="p">[:</span><span class="mi">100</span><span class="p">,:]</span>
<span class="n">gft_watch</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;H&#39;</span><span class="p">,</span><span class="s">&#39;M&#39;</span><span class="p">]</span>
<span class="n">ph</span> <span class="o">=</span> <span class="n">poss_hyphenated</span> <span class="o">=</span> <span class="n">mn</span><span class="p">[</span><span class="n">mn</span><span class="o">.</span><span class="n">GFT</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">gft_watch</span><span class="p">)</span><span class="o">==</span><span class="bp">True</span><span class="p">]</span>
<span class="k">print</span> <span class="nb">len</span><span class="p">(</span><span class="n">poss_hyphenated</span><span class="p">),</span><span class="s">&#39;rows to watch b/c of hyphenated name&#39;</span>
<span class="c"># mn[&#39;chk_hyphenated&#39;] = mn[mn.GFT.isin(gft_watch)==True]</span>
<span class="n">ph</span><span class="o">.</span><span class="n">GFT</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="nb">bool</span><span class="p">(</span><span class="n">re_search</span><span class="p">(</span><span class="s">&#39;(dobbin)&#39;</span><span class="p">,</span><span class="n">s</span><span class="p">)))</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>

<span class="n">mn</span> <span class="o">=</span> <span class="n">z</span><span class="p">[</span><span class="n">z</span><span class="o">.</span><span class="n">mn</span><span class="o">==</span><span class="bp">True</span><span class="p">]</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>


<span class="k">print</span> <span class="nb">len</span><span class="p">(</span><span class="n">mn</span><span class="p">[</span><span class="n">mn</span><span class="o">.</span><span class="n">GFT</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">gft_ignore</span><span class="p">)</span><span class="o">==</span><span class="bp">False</span><span class="p">]),</span><span class="s">&#39;rows with possible relevant data&#39;</span>


<span class="k">print</span> <span class="nb">len</span><span class="p">(</span><span class="n">r</span><span class="p">),</span><span class="s">&#39;remaining records&#39;</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># Libraries</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s">&#39;expand_frame_repr&#39;</span><span class="p">,</span><span class="bp">False</span><span class="p">)</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s">&#39;display.max_columns&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s">&#39;display.max_rows&#39;</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s">&#39;display.width&#39;</span><span class="p">,</span><span class="mi">180</span><span class="p">)</span>
<span class="n">np</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">np</span>
<span class="n">np</span><span class="o">.</span><span class="n">set_printoptions</span><span class="p">(</span><span class="n">linewidth</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span><span class="n">threshold</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span>
<span class="c"># import geopandas as gd</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span> <span class="k">as</span> <span class="n">dt</span>
<span class="kn">from</span> <span class="nn">types</span> <span class="kn">import</span> <span class="n">NoneType</span>
<span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">sleep</span> <span class="k">as</span> <span class="n">delay</span>
<span class="kn">import</span> <span class="nn">codecs</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span>
<span class="c">#from logging import getLogger</span>
<span class="c">#from logging import INFO as logging_info</span>
<span class="c">#getLogger(&#39;sqlalchemy.dialects.postgresql&#39;).setLevel(logging_info)</span>
<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s">r&#39;postgresql://postgres:postgres@192.168.3.52:8800/routing&#39;</span><span class="p">,</span>
                       <span class="n">encoding</span><span class="o">=</span><span class="s">&#39;utf-8&#39;</span><span class="p">,</span>
                       <span class="n">echo</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

<span class="o">%</span><span class="k">load_ext</span> <span class="n">sql</span>
<span class="c"># %sql postgresql://postgres:postgres@localhost/routing</span>
<span class="o">%</span><span class="k">sql</span> <span class="n">postgresql</span><span class="p">:</span><span class="o">//</span><span class="n">postgres</span><span class="p">:</span><span class="n">postgres</span><span class="nd">@192.168.3.52</span><span class="p">:</span><span class="mi">8800</span><span class="o">/</span><span class="n">routing</span>
<span class="kn">import</span> <span class="nn">psycopg2</span>
<span class="n">conn</span> <span class="o">=</span> <span class="n">psycopg2</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&quot;dbname=&#39;routing&#39; user=&#39;postgres&#39; host=&#39;192.168.3.52&#39; password=&#39;&#39; port=8800&quot;</span><span class="p">);</span>
<span class="n">cur</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
<span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">sleep</span> <span class="k">as</span> <span class="n">delay</span>
<span class="kn">from</span> <span class="nn">pandas.tseries.offsets</span> <span class="kn">import</span> <span class="n">DateOffset</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># Manhattan Zipcodes</span>

<span class="n">src</span> <span class="o">=</span> <span class="s">&#39;http://www.unitedstateszipcodes.org/zip_code_database.csv&#39;</span>
<span class="n">z</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">src</span><span class="p">)</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">z</span><span class="p">[(</span><span class="n">z</span><span class="o">.</span><span class="n">state</span><span class="o">==</span><span class="s">&#39;NY&#39;</span><span class="p">)</span><span class="o">&amp;</span><span class="p">(</span><span class="n">z</span><span class="o">.</span><span class="n">county</span><span class="o">==</span><span class="s">&#39;New York County&#39;</span><span class="p">)</span><span class="o">&amp;</span><span class="p">(</span><span class="n">z</span><span class="o">.</span><span class="n">type</span><span class="o">!=</span><span class="s">&#39;PO BOX&#39;</span><span class="p">)]</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s">&#39;zip&#39;</span><span class="p">)</span>
<span class="k">print</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="k">print</span> <span class="n">x</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="k">print</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">zip</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>

<span class="c"># result</span>
<span class="n">mn_zipcodes</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10001</span><span class="p">,</span> <span class="mi">10002</span><span class="p">,</span> <span class="mi">10003</span><span class="p">,</span> <span class="mi">10004</span><span class="p">,</span> <span class="mi">10005</span><span class="p">,</span> <span class="mi">10006</span><span class="p">,</span> 
               <span class="mi">10007</span><span class="p">,</span> <span class="mi">10009</span><span class="p">,</span> <span class="mi">10010</span><span class="p">,</span> <span class="mi">10011</span><span class="p">,</span> <span class="mi">10012</span><span class="p">,</span> <span class="mi">10013</span><span class="p">,</span> 
               <span class="mi">10014</span><span class="p">,</span> <span class="mi">10015</span><span class="p">,</span> <span class="mi">10016</span><span class="p">,</span> <span class="mi">10017</span><span class="p">,</span> <span class="mi">10018</span><span class="p">,</span> <span class="mi">10019</span><span class="p">,</span> 
               <span class="mi">10020</span><span class="p">,</span> <span class="mi">10021</span><span class="p">,</span> <span class="mi">10022</span><span class="p">,</span> <span class="mi">10023</span><span class="p">,</span> <span class="mi">10024</span><span class="p">,</span> <span class="mi">10025</span><span class="p">,</span> 
               <span class="mi">10026</span><span class="p">,</span> <span class="mi">10027</span><span class="p">,</span> <span class="mi">10028</span><span class="p">,</span> <span class="mi">10029</span><span class="p">,</span> <span class="mi">10030</span><span class="p">,</span> <span class="mi">10031</span><span class="p">,</span> 
               <span class="mi">10032</span><span class="p">,</span> <span class="mi">10033</span><span class="p">,</span> <span class="mi">10034</span><span class="p">,</span> <span class="mi">10035</span><span class="p">,</span> <span class="mi">10036</span><span class="p">,</span> <span class="mi">10037</span><span class="p">,</span> 
               <span class="mi">10038</span><span class="p">,</span> <span class="mi">10039</span><span class="p">,</span> <span class="mi">10040</span><span class="p">,</span> <span class="mi">10041</span><span class="p">,</span> <span class="mi">10043</span><span class="p">,</span> <span class="mi">10044</span><span class="p">,</span> 
               <span class="mi">10045</span><span class="p">,</span> <span class="mi">10046</span><span class="p">,</span> <span class="mi">10047</span><span class="p">,</span> <span class="mi">10048</span><span class="p">,</span> <span class="mi">10055</span><span class="p">,</span> <span class="mi">10060</span><span class="p">,</span> 
               <span class="mi">10065</span><span class="p">,</span> <span class="mi">10069</span><span class="p">,</span> <span class="mi">10072</span><span class="p">,</span> <span class="mi">10075</span><span class="p">,</span> <span class="mi">10079</span><span class="p">,</span> <span class="mi">10080</span><span class="p">,</span> 
               <span class="mi">10081</span><span class="p">,</span> <span class="mi">10082</span><span class="p">,</span> <span class="mi">10087</span><span class="p">,</span> <span class="mi">10090</span><span class="p">,</span> <span class="mi">10094</span><span class="p">,</span> <span class="mi">10095</span><span class="p">,</span> 
               <span class="mi">10096</span><span class="p">,</span> <span class="mi">10098</span><span class="p">,</span> <span class="mi">10099</span><span class="p">,</span> <span class="mi">10102</span><span class="p">,</span> <span class="mi">10103</span><span class="p">,</span> <span class="mi">10104</span><span class="p">,</span> 
               <span class="mi">10105</span><span class="p">,</span> <span class="mi">10106</span><span class="p">,</span> <span class="mi">10107</span><span class="p">,</span> <span class="mi">10109</span><span class="p">,</span> <span class="mi">10110</span><span class="p">,</span> <span class="mi">10111</span><span class="p">,</span> 
               <span class="mi">10112</span><span class="p">,</span> <span class="mi">10114</span><span class="p">,</span> <span class="mi">10115</span><span class="p">,</span> <span class="mi">10117</span><span class="p">,</span> <span class="mi">10118</span><span class="p">,</span> <span class="mi">10119</span><span class="p">,</span> 
               <span class="mi">10120</span><span class="p">,</span> <span class="mi">10121</span><span class="p">,</span> <span class="mi">10122</span><span class="p">,</span> <span class="mi">10123</span><span class="p">,</span> <span class="mi">10124</span><span class="p">,</span> <span class="mi">10125</span><span class="p">,</span> 
               <span class="mi">10126</span><span class="p">,</span> <span class="mi">10128</span><span class="p">,</span> <span class="mi">10130</span><span class="p">,</span> <span class="mi">10131</span><span class="p">,</span> <span class="mi">10132</span><span class="p">,</span> <span class="mi">10133</span><span class="p">,</span> 
               <span class="mi">10138</span><span class="p">,</span> <span class="mi">10149</span><span class="p">,</span> <span class="mi">10151</span><span class="p">,</span> <span class="mi">10152</span><span class="p">,</span> <span class="mi">10153</span><span class="p">,</span> <span class="mi">10154</span><span class="p">,</span> 
               <span class="mi">10155</span><span class="p">,</span> <span class="mi">10157</span><span class="p">,</span> <span class="mi">10158</span><span class="p">,</span> <span class="mi">10160</span><span class="p">,</span> <span class="mi">10161</span><span class="p">,</span> <span class="mi">10162</span><span class="p">,</span> 
               <span class="mi">10164</span><span class="p">,</span> <span class="mi">10165</span><span class="p">,</span> <span class="mi">10166</span><span class="p">,</span> <span class="mi">10167</span><span class="p">,</span> <span class="mi">10168</span><span class="p">,</span> <span class="mi">10169</span><span class="p">,</span> 
               <span class="mi">10170</span><span class="p">,</span> <span class="mi">10171</span><span class="p">,</span> <span class="mi">10172</span><span class="p">,</span> <span class="mi">10173</span><span class="p">,</span> <span class="mi">10174</span><span class="p">,</span> <span class="mi">10175</span><span class="p">,</span> 
               <span class="mi">10176</span><span class="p">,</span> <span class="mi">10177</span><span class="p">,</span> <span class="mi">10178</span><span class="p">,</span> <span class="mi">10179</span><span class="p">,</span> <span class="mi">10184</span><span class="p">,</span> <span class="mi">10196</span><span class="p">,</span> 
               <span class="mi">10197</span><span class="p">,</span> <span class="mi">10199</span><span class="p">,</span> <span class="mi">10203</span><span class="p">,</span> <span class="mi">10211</span><span class="p">,</span> <span class="mi">10212</span><span class="p">,</span> <span class="mi">10213</span><span class="p">,</span> 
               <span class="mi">10256</span><span class="p">,</span> <span class="mi">10257</span><span class="p">,</span> <span class="mi">10258</span><span class="p">,</span> <span class="mi">10259</span><span class="p">,</span> <span class="mi">10260</span><span class="p">,</span> <span class="mi">10261</span><span class="p">,</span> 
               <span class="mi">10265</span><span class="p">,</span> <span class="mi">10269</span><span class="p">,</span> <span class="mi">10270</span><span class="p">,</span> <span class="mi">10271</span><span class="p">,</span> <span class="mi">10273</span><span class="p">,</span> <span class="mi">10275</span><span class="p">,</span> 
               <span class="mi">10277</span><span class="p">,</span> <span class="mi">10278</span><span class="p">,</span> <span class="mi">10279</span><span class="p">,</span> <span class="mi">10280</span><span class="p">,</span> <span class="mi">10281</span><span class="p">,</span> <span class="mi">10282</span><span class="p">,</span> 
               <span class="mi">10285</span><span class="p">,</span> <span class="mi">10286</span><span class="p">,</span> <span class="mi">10292</span><span class="p">]</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="TODO:">TODO:<a class="anchor-link" href="#TODO:">&#182;</a></h1>
</div>
</div>
</div>

<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Turn-Stile-Data:">Turn Stile Data:<a class="anchor-link" href="#Turn-Stile-Data:">&#182;</a></h2>
</div>
</div>
</div>

<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="GOAL----For-Dates-A-to-B-and-Times-C-to-D,-how-many-people-per-station?">GOAL -- For Dates A to B and Times C to D, how many people per station?<a class="anchor-link" href="#GOAL----For-Dates-A-to-B-and-Times-C-to-D,-how-many-people-per-station?">&#182;</a></h3>
</div>
</div>
</div>

<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ol>
<li><p>consolidate scp's per remote/booth</p>
<p> Thoughts:</p>

<pre><code> - each scp has its own range of timestamps and register values
 - some scp.s have multiple datasets for same time period
 - timestamps exists for all times of the day

</code></pre>
<p> Method:</p>

<pre><code> - create new table with:
     - date column
     - 24 columns for each hour filled with register-change values
         - need 24 or just use single time col?
     - index # from sub_turn_stiles</code></pre>
</li>
</ol>
<ol>
<li>consolidate remote/booth per station</li>
</ol>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="o">%%</span><span class="k">sql</span> <span class="n">postgres</span><span class="nd">@routing</span>
<span class="n">select</span> <span class="n">distinct</span> <span class="n">extract</span><span class="p">(</span><span class="n">hour</span> <span class="kn">from</span> <span class="nn">datetime1</span><span class="p">)</span> <span class="n">s</span>
<span class="kn">from</span> <span class="nn">sub_turn_stiles</span>
<span class="n">order</span> <span class="n">by</span> <span class="n">s</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[47]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### Libraries </span>
<span class="kn">from</span> <span class="nn">os</span> <span class="kn">import</span> <span class="n">getcwd</span>
<span class="n">workDir</span> <span class="o">=</span> <span class="n">getcwd</span><span class="p">()</span><span class="o">+</span><span class="s">&#39;/&#39;</span>
<span class="kn">from</span> <span class="nn">os.path</span> <span class="kn">import</span> <span class="n">abspath</span>
<span class="kn">from</span> <span class="nn">sys</span> <span class="kn">import</span> <span class="n">path</span> <span class="k">as</span> <span class="n">py_path</span>
<span class="n">py_path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">abspath</span><span class="p">(</span><span class="n">workDir</span><span class="o">+</span><span class="s">&#39;../../geolocation&#39;</span><span class="p">))</span>
<span class="kn">from</span> <span class="nn">f_vendor_postgre</span> <span class="kn">import</span> <span class="n">get_bldg_street_idx</span>
<span class="kn">from</span> <span class="nn">f_postgres</span> <span class="kn">import</span> <span class="n">clean_street_names</span>
<span class="kn">from</span> <span class="nn">re</span> <span class="kn">import</span> <span class="n">search</span> <span class="k">as</span> <span class="n">re_search</span> <span class="c"># re_search(&#39;pattern&#39;,&#39;string&#39;)</span>
<span class="kn">from</span> <span class="nn">re</span> <span class="kn">import</span> <span class="n">sub</span> <span class="k">as</span> <span class="n">re_sub</span>  <span class="c"># re_sub(&#39;pattern&#39;,&#39;repl&#39;,&#39;string&#39;,&#39;count&#39;)</span>

<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span> <span class="k">as</span> <span class="n">dt</span>
<span class="kn">from</span> <span class="nn">pandas.tseries.offsets</span> <span class="kn">import</span> <span class="n">DateOffset</span>
<span class="kn">from</span> <span class="nn">types</span> <span class="kn">import</span> <span class="n">NoneType</span>
<span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">sleep</span> <span class="k">as</span> <span class="n">delay</span>

<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s">&#39;expand_frame_repr&#39;</span><span class="p">,</span><span class="bp">False</span><span class="p">)</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s">&#39;display.max_columns&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s">&#39;display.max_rows&#39;</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s">&#39;display.width&#39;</span><span class="p">,</span><span class="mi">180</span><span class="p">)</span>
<span class="n">np</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">np</span>
<span class="n">np</span><span class="o">.</span><span class="n">set_printoptions</span><span class="p">(</span><span class="n">linewidth</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span><span class="n">threshold</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span>
<span class="c"># import geopandas as gd</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span>
<span class="kn">from</span> <span class="nn">logging</span> <span class="kn">import</span> <span class="n">getLogger</span>
<span class="kn">from</span> <span class="nn">logging</span> <span class="kn">import</span> <span class="n">INFO</span> <span class="k">as</span> <span class="n">logging_info</span>
<span class="n">getLogger</span><span class="p">(</span><span class="s">&#39;sqlalchemy.dialects.postgresql&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging_info</span><span class="p">)</span>

<span class="c"># engine = create_engine(r&#39;postgresql://postgres:postgres@localhost:8800/routing&#39;,</span>
<span class="c">#                        encoding=&#39;utf-8&#39;,</span>
<span class="c">#                        echo=False)</span>
<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s">r&#39;postgresql://postgres:postgres@192.168.3.52:8800/routing&#39;</span><span class="p">,</span>
                       <span class="n">encoding</span><span class="o">=</span><span class="s">&#39;utf-8&#39;</span><span class="p">,</span>
                       <span class="n">echo</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

<span class="o">%</span><span class="k">load_ext</span> <span class="n">sql</span>
<span class="c"># %sql postgresql://postgres:postgres@localhost/routing</span>
<span class="o">%</span><span class="k">sql</span> <span class="n">postgresql</span><span class="p">:</span><span class="o">//</span><span class="n">postgres</span><span class="p">:</span><span class="n">postgres</span><span class="nd">@192.168.3.52</span><span class="p">:</span><span class="mi">8800</span><span class="o">/</span><span class="n">routing</span>

<span class="kn">import</span> <span class="nn">psycopg2</span>
<span class="n">conn</span> <span class="o">=</span> <span class="n">psycopg2</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&quot;dbname=&#39;routing&#39; user=&#39;postgres&#39; host=&#39;192.168.3.52&#39; password=&#39;&#39; port=8800&quot;</span><span class="p">);</span>
<span class="n">cur</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
<span class="c"># conn.set_isolation_level(0)</span>
<span class="c"># cur.execute ...</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>The sql extension is already loaded. To reload it, use:
  %reload_ext sql
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### list_of_great_NYC_data</span>

<span class="n">list_of_great_NYC_data</span><span class="o">=</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">http://data.cityofnewyork.us/resource/xx67-kt59.json # DOHMH Results (11/19/14)</span>
<span class="s">http://data.cityofnewyork.us/Health/Restaurant-Inspection-Results/4vkw-7nck</span>
<span class="s">http://data.cityofnewyork.us/resource/4vkw-7nck.json</span>

<span class="s">http://data.cityofnewyork.us/City-Government/Neighborhood-Names-GIS/99bc-9p23</span>
<span class="s">http://data.cityofnewyork.us/Recreation/Directory-Of-NYC-Cable-Providers/48pb-zy2g</span>
<span class="s">http://data.cityofnewyork.us/Recreation/Wifi-Hotspot-Locations/ehc4-fktp</span>
<span class="s">http://data.cityofnewyork.us/Social-Services/Zip-Codes-Map/zsjh-u7ve</span>
<span class="s">http://data.cityofnewyork.us/Education/Basic-Description-of-Colleges-and-Universities/42xp-mmeq</span>
<span class="s">http://data.cityofnewyork.us/Recreation/Directory-of-Dog-Runs-and-Off-Leash-Areas/ipbu-mtcs</span>
<span class="s">http://data.cityofnewyork.us/Housing-Development/Map-of-Parks/jc79-4imn</span>
<span class="s">http://data.cityofnewyork.us/Housing-Development/Map-of-Tracks/4wxj-39k8</span>
<span class="s">http://data.cityofnewyork.us/Recreation/Directory-of-Ice-Skating-Rinks/sage-tgxd</span>
<span class="s">http://data.cityofnewyork.us/Housing-Development/Directory-of-Bocce-Courts/qjqq-8zh3</span>
<span class="s">http://data.cityofnewyork.us/Transportation/Real-Time-Traffic-Speed-Data/xsat-x5sa</span>
<span class="s">http://data.cityofnewyork.us/Transportation/Alternate-Side-Parking/x6gf-qdui</span>
<span class="s">http://data.cityofnewyork.us/Transportation/Parking-Regulations-Street-Segments/9yzr-h7jq</span>
<span class="s">http://data.cityofnewyork.us/Transportation/Bicycle-Parking/qpbf-g2yx</span>
<span class="s">&quot;&quot;&quot;</span>

<span class="n">NYC_neighborhoods</span> <span class="o">=</span> <span class="s">&#39;http://www.health.ny.gov/statistics/cancer/registry/appendix/neighborhoods.htm&#39;</span>
<span class="n">zipcode_visual</span> <span class="o">=</span> <span class="s">&#39;http://www.citidex.com/map/zipco.html&#39;</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### NYC Datasets</span>

<span class="c"># THIS DOESN&quot;T WORK:</span>
<span class="c"># --&gt;&gt;</span>
<span class="c"># app_t=&#39;YyzM3j3I6euW9JZVgj2jCVC03&#39;</span>
<span class="c"># secr_t=&#39;xeCin4zNH4pIwI0vMI2ij2unC2DLYjaKYuck&#39;</span>
<span class="c"># d_url=&#39;http://data.cityofnewyork.us/resource/4vkw-7nck.json&#39;</span>
<span class="c"># # t=&#39;https://sandbox.socrata.com/oauth/authorize?client_id=%s&amp;response_type=code &amp;redirect_uri=%s&#39;%(app_t,ret_url)</span>
<span class="c"># r = requests.get(d_url, headers={&#39;X-App-Token&#39;: app_t})</span>
<span class="c"># # r = requests.get(t)</span>
<span class="c"># print r.status_code</span>
<span class="c"># print r.text</span>
<span class="c"># &lt;&lt;--</span>



<span class="kn">import</span> <span class="nn">requests</span>
<span class="n">all_sets</span><span class="o">=</span><span class="s">&#39;http://data.cityofnewyork.us/resource/j9m9-eu6n.json&#39;</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">all_sets</span><span class="p">)</span>
<span class="c"># print r.status_code</span>
<span class="c"># print r.text</span>
<span class="n">g</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">text</span>
<span class="n">g</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;true&#39;</span><span class="p">,</span><span class="s">&quot;&#39;true&#39;&quot;</span><span class="p">)</span>
<span class="n">a</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
<span class="nb">len</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[60]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### add [new] restaurant data</span>

<span class="c"># import requests, zipfile, StringIO</span>
<span class="c"># from f_postgres import clean_street_names  # imported at beginning ...</span>
<span class="c"># z = requests.get(&#39;https://data.cityofnewyork.us/download/4vkw-7nck/ZIP&#39;)</span>
<span class="c"># r = zipfile.ZipFile(StringIO.StringIO(z.content))</span>
<span class="c"># v = pd.read_csv(r.open(&#39;WebExtract.txt&#39;))</span>

<span class="n">v</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="s">&#39;http://data.cityofnewyork.us/resource/xx67-kt59.json&#39;</span><span class="p">)</span>
<span class="n">v</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span> <span class="nb">str</span><span class="p">(</span><span class="n">it</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">v</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span> <span class="p">]</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">v</span><span class="p">[</span><span class="n">v</span><span class="o">.</span><span class="n">boro</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s">&#39;MANHATTAN&#39;</span><span class="p">)</span><span class="o">==</span><span class="bp">True</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">m</span><span class="p">[</span><span class="s">&#39;inspection_date&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">inspection_date</span><span class="p">)</span>
<span class="c">#  --&gt;&gt;  Records from &quot;mn_vendor&quot; are limited to the last 18 months from now.</span>
<span class="n">back_18_months</span> <span class="o">=</span> <span class="n">dt</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="n">DateOffset</span><span class="p">(</span><span class="n">months</span><span class="o">=</span><span class="mi">18</span><span class="p">)</span>
<span class="n">mn_a</span> <span class="o">=</span> <span class="n">m</span><span class="p">[</span><span class="n">m</span><span class="o">.</span><span class="n">inspection_date</span><span class="o">&gt;</span><span class="n">back_18_months</span><span class="p">]</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s">&#39;inspection_date&#39;</span><span class="p">,</span><span class="n">ascending</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="n">z</span> <span class="o">=</span> <span class="n">mn_a</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s">&#39;camis&#39;</span><span class="p">)</span>
<span class="n">grps</span> <span class="o">=</span> <span class="n">z</span><span class="o">.</span><span class="n">groups</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="n">takeCols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;dba&#39;</span><span class="p">,</span><span class="s">&#39;cuisine_description&#39;</span><span class="p">,</span><span class="s">&#39;building&#39;</span><span class="p">,</span><span class="s">&#39;street&#39;</span><span class="p">,</span><span class="s">&#39;zipcode&#39;</span><span class="p">,</span><span class="s">&#39;phone&#39;</span><span class="p">,</span>
            <span class="s">&#39;inspection_date&#39;</span><span class="p">,</span><span class="s">&#39;inspection_type&#39;</span><span class="p">,</span><span class="s">&#39;grade&#39;</span><span class="p">,</span><span class="s">&#39;grade_date&#39;</span><span class="p">,</span><span class="s">&#39;record_date&#39;</span><span class="p">,</span>
            <span class="s">&#39;violation_code&#39;</span><span class="p">,</span><span class="s">&#39;violation_description&#39;</span><span class="p">]</span> <span class="c"># and &#39;camis&#39; which is the grps[i]</span>
<span class="n">mv</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;camis&#39;</span><span class="p">]</span><span class="o">+</span><span class="n">takeCols</span><span class="p">)</span>
<span class="n">g_cnt</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">grps</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">g_cnt</span><span class="p">):</span>
    <span class="n">vend_id</span> <span class="o">=</span> <span class="n">grps</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">z</span><span class="o">.</span><span class="n">get_group</span><span class="p">(</span><span class="n">vend_id</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="n">takeCols</span><span class="p">]</span>
    <span class="n">x</span><span class="p">[</span><span class="s">&#39;camis&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">vend_id</span>
    <span class="n">mv</span> <span class="o">=</span> <span class="n">mv</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">mv</span> <span class="o">=</span> <span class="n">clean_street_names</span><span class="p">(</span><span class="n">mv</span><span class="p">,</span><span class="s">&#39;dba&#39;</span><span class="p">,</span><span class="s">&#39;vend_name&#39;</span><span class="p">)</span>
<span class="n">mv</span> <span class="o">=</span> <span class="n">clean_street_names</span><span class="p">(</span><span class="n">mv</span><span class="p">,</span><span class="s">&#39;street&#39;</span><span class="p">,</span><span class="s">&#39;clean_street&#39;</span><span class="p">)</span>
<span class="n">mv</span><span class="p">[</span><span class="s">&#39;dba&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mv</span><span class="o">.</span><span class="n">dba</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&#39;ascii&#39;</span><span class="p">,</span><span class="s">&#39;ignore&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s">&#39;utf-8&#39;</span><span class="p">,</span><span class="s">&#39;ignore&#39;</span><span class="p">))</span>
<span class="n">mv</span><span class="p">[</span><span class="s">&#39;phone&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mv</span><span class="o">.</span><span class="n">phone</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="bp">None</span> <span class="k">if</span> <span class="n">s</span><span class="o">.</span><span class="n">is_integer</span><span class="p">()</span><span class="o">==</span><span class="bp">False</span> <span class="k">else</span> <span class="nb">int</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
<span class="n">mv</span><span class="p">[</span><span class="s">&#39;zipcode&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mv</span><span class="o">.</span><span class="n">zipcode</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="bp">None</span> <span class="k">if</span> <span class="n">s</span><span class="o">.</span><span class="n">is_integer</span><span class="p">()</span><span class="o">==</span><span class="bp">False</span> <span class="k">else</span> <span class="nb">int</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>

<span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;drop table if exists mnv_tmp&#39;</span><span class="p">)</span>
<span class="n">mv</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s">&#39;mnv_tmp&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">,</span><span class="n">index</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">    alter table mnv_tmp add column id serial primary key;</span>
<span class="s">    update mnv_tmp set id = nextval(pg_get_serial_sequence(&#39;mnv_tmp&#39;,&#39;id&#39;));</span>
<span class="s">    alter table mnv_tmp rename inspection_date to inspdate;</span>
<span class="s">    &quot;&quot;&quot;</span><span class="p">)</span>

<span class="c"># upsert &#39;mnv&#39;</span>
<span class="n">cmd</span><span class="o">=</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">with upd as (</span>
<span class="s">            update mnv m</span>
<span class="s">            set</span>
<span class="s">                building = t.building,</span>
<span class="s">                camis = t.camis,</span>
<span class="s">                clean_street = t.clean_street,</span>
<span class="s">                cuisine_description = t.cuisine_description,</span>
<span class="s">                grade = t.grade,</span>
<span class="s">                grade_date = t.grade_date,</span>
<span class="s">                inspdate = t.inspdate,</span>
<span class="s">                inspection_type = t.inspection_type,</span>
<span class="s">                phone = t.phone,</span>
<span class="s">                record_date = t.record_date,</span>
<span class="s">                street = t.street,</span>
<span class="s">                vend_name = t.vend_name,</span>
<span class="s">                violation_code = t.violation_code,</span>
<span class="s">                violation_description = t.violation_description,</span>
<span class="s">                zipcode = t.zipcode</span>
<span class="s">            from mnv_tmp t</span>
<span class="s">            where </span>
<span class="s">                m.camis = t.camis</span>
<span class="s">                and m.inspdate = t.inspdate</span>
<span class="s">                and m.record_date = t.record_date</span>
<span class="s">            returning t.id id</span>
<span class="s">        )</span>
<span class="s">insert into mnv (</span>
<span class="s">                        building,</span>
<span class="s">                        camis,</span>
<span class="s">                        clean_street,</span>
<span class="s">                        cuisine_description,</span>
<span class="s">                        dba,</span>
<span class="s">                        grade,</span>
<span class="s">                        grade_date,</span>
<span class="s">                        inspdate,</span>
<span class="s">                        inspection_type,</span>
<span class="s">                        phone,</span>
<span class="s">                        record_date,</span>
<span class="s">                        street,</span>
<span class="s">                        vend_name,</span>
<span class="s">                        violation_code,</span>
<span class="s">                        violation_description,</span>
<span class="s">                        zipcode</span>
<span class="s">                    )</span>
<span class="s">select</span>
<span class="s">    t.building,</span>
<span class="s">    t.camis,</span>
<span class="s">    t.clean_street,</span>
<span class="s">    t.cuisine_description,</span>
<span class="s">    t.dba,</span>
<span class="s">    t.grade,</span>
<span class="s">    t.grade_date,</span>
<span class="s">    t.inspdate,</span>
<span class="s">    t.inspection_type,</span>
<span class="s">    t.phone,</span>
<span class="s">    t.record_date,</span>
<span class="s">    t.street,</span>
<span class="s">    t.vend_name,</span>
<span class="s">    t.violation_code,</span>
<span class="s">    t.violation_description,</span>
<span class="s">    t.zipcode</span>
<span class="s">from</span>
<span class="s">    mnv_tmp t,</span>
<span class="s">    (select array_agg(f.id) upd_recs from upd f) as f1</span>
<span class="s">    where (not upd_recs &amp;&amp; array[t.id]</span>
<span class="s">            or upd_recs is null);</span>

<span class="s">drop table mnv_tmp;</span>

<span class="s">&quot;&quot;&quot;</span>
<span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### add subway entrances to map</span>
<span class="n">url</span> <span class="o">=</span> <span class="s">&#39;http://web.mta.info/developers/data/nyct/subway/StationEntrances.csv&#39;</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="n">s</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">it</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">s</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">tolist</span><span class="p">()]</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;drop table if exists sub_stat_entr&#39;</span><span class="p">)</span>
<span class="n">s</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s">&#39;sub_stat_entr&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;alter table sub_stat_entr add column geom geometry(Point,4326)&#39;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;UPDATE sub_stat_entr set geom = ST_SetSRID(ST_MakePoint(station_longitude,station_latitude),4326)&quot;&quot;&quot;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot; DELETE FROM sub_stat_entr </span>
<span class="s">                WHERE NOT (geom &amp;&amp; (</span>
<span class="s">                    SELECT ST_Buffer(ST_ConvexHull((ST_Collect(f.the_geom))), .0005) as geom </span>
<span class="s">                    FROM ( SELECT *, (ST_Dump(geom)).geom As the_geom </span>
<span class="s">                    FROM pluto) As f))&quot;&quot;&quot;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">    alter table sub_stat_entr add column id serial;</span>
<span class="s">    update sub_stat_entr set index = nextval(pg_get_serial_sequence(&#39;sub_stat_entr&#39;,&#39;id&#39;));</span>
<span class="s">    alter table sub_stat_entr add primary key (id);</span>
<span class="s">    &quot;&quot;&quot;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### add subway stops to map, add turn stile data to subway stops</span>
<span class="kn">import</span> <span class="nn">requests</span><span class="o">,</span> <span class="nn">zipfile</span><span class="o">,</span> <span class="nn">StringIO</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;http://web.mta.info/developers/data/nyct/subway/google_transit.zip&#39;</span><span class="p">)</span>
<span class="n">z</span> <span class="o">=</span> <span class="n">zipfile</span><span class="o">.</span><span class="n">ZipFile</span><span class="p">(</span><span class="n">StringIO</span><span class="o">.</span><span class="n">StringIO</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">content</span><span class="p">))</span>
<span class="n">sub_stops</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">z</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s">&#39;stops.txt&#39;</span><span class="p">))</span>
<span class="n">sub_stops</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s">&#39;sub_stops&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;alter table sub_stops add column geom geometry(Point,4326)&#39;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;UPDATE sub_stops set geom = ST_SetSRID(ST_MakePoint(stop_lon,stop_lat),4326)&quot;&quot;&quot;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot; DELETE FROM sub_stops </span>
<span class="s">                WHERE NOT (geom &amp;&amp; (</span>
<span class="s">                    SELECT ST_Buffer(ST_ConvexHull((ST_Collect(f.the_geom))), .0005) as geom </span>
<span class="s">                    FROM ( SELECT *, (ST_Dump(geom)).geom As the_geom </span>
<span class="s">                    FROM pluto) As f))&quot;&quot;&quot;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">    alter table sub_stops add column id serial;</span>
<span class="s">    update sub_stops set index = nextval(pg_get_serial_sequence(&#39;sub_stops&#39;,&#39;id&#39;));</span>
<span class="s">    alter table sub_stops add primary key (id);</span>
<span class="s">    &quot;&quot;&quot;</span><span class="p">)</span>
<span class="c"># NOTE:  also then deleted more by hand</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### add turn_stile_key to pgsql</span>
<span class="n">ts_key</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s">&#39;http://web.mta.info/developers/resources/nyct/turnstile/Remote-Booth-Station.xls&#39;</span><span class="p">)</span>
<span class="n">ts_key</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">it</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39; &#39;</span><span class="p">,</span><span class="s">&#39;_&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">ts_key</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">tolist</span><span class="p">()]</span>
<span class="n">ts_key</span><span class="p">[</span><span class="s">&#39;line_name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ts_key</span><span class="p">[</span><span class="s">&#39;line_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">sorted</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">it</span><span class="p">)</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">s</span><span class="p">]))</span> <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">!=</span><span class="nb">int</span> <span class="k">else</span> <span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
<span class="n">ts_key</span><span class="p">[</span><span class="s">&#39;clean&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ts_key</span><span class="o">.</span><span class="n">station</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;drop table if exists ts_key&quot;</span><span class="p">)</span>
<span class="n">ts_key</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s">&#39;ts_key&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### add turn stile data to pgsql</span>
<span class="c"># General Source for Turn Stiles: http://web.mta.info/developers/turnstile.html</span>
<span class="c">#     - field description: http://web.mta.info/developers/resources/nyct/turnstile/ts_Field%20Description.txt</span>
<span class="c">#     - data key: http://web.mta.info/developers/resources/nyct/turnstile/Remote-Booth-Station.xls</span>
<span class="c">#         --&gt; this is the provides the Remote Unit/Control Area/Station Name Key</span>
<span class="c"># Need coords for &quot;UNIT&quot;</span>
<span class="c"># Remote and Station Name here:</span>
<span class="c">#      &#39;http://web.mta.info/developers/resources/nyct/turnstile/Remote-Booth-Station.xls&#39;</span>
<span class="c"># Station Names and Coords here:</span>
<span class="c">#      &#39;http://web.mta.info/developers/data/nyct/subway/StationEntrances.csv&#39;</span>
<span class="c">#     - Relevant stations were added to pgsql as &#39;sub_stat_entr&#39;</span>


<span class="n">cols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;C/A&#39;</span><span class="p">,</span><span class="s">&#39;UNIT&#39;</span><span class="p">,</span><span class="s">&#39;SCP&#39;</span><span class="p">,</span><span class="s">&#39;DATE1&#39;</span><span class="p">,</span><span class="s">&#39;TIME1&#39;</span><span class="p">,</span><span class="s">&#39;DESC1&#39;</span><span class="p">,</span><span class="s">&#39;ENTRIES1&#39;</span><span class="p">,</span><span class="s">&#39;EXITS1&#39;</span><span class="p">,</span>
        <span class="s">&#39;DATE2&#39;</span><span class="p">,</span><span class="s">&#39;TIME2&#39;</span><span class="p">,</span><span class="s">&#39;DESC2&#39;</span><span class="p">,</span><span class="s">&#39;ENTRIES2&#39;</span><span class="p">,</span><span class="s">&#39;EXITS2&#39;</span><span class="p">,</span><span class="s">&#39;DATE3&#39;</span><span class="p">,</span><span class="s">&#39;TIME3&#39;</span><span class="p">,</span><span class="s">&#39;DESC3&#39;</span><span class="p">,</span><span class="s">&#39;ENTRIES3&#39;</span><span class="p">,</span>
        <span class="s">&#39;EXITS3&#39;</span><span class="p">,</span><span class="s">&#39;DATE4&#39;</span><span class="p">,</span><span class="s">&#39;TIME4&#39;</span><span class="p">,</span><span class="s">&#39;DESC4&#39;</span><span class="p">,</span><span class="s">&#39;ENTRIES4&#39;</span><span class="p">,</span><span class="s">&#39;EXITS4&#39;</span><span class="p">,</span><span class="s">&#39;DATE5&#39;</span><span class="p">,</span><span class="s">&#39;TIME5&#39;</span><span class="p">,</span><span class="s">&#39;DESC5&#39;</span><span class="p">,</span>
        <span class="s">&#39;ENTRIES5&#39;</span><span class="p">,</span><span class="s">&#39;EXITS5&#39;</span><span class="p">,</span><span class="s">&#39;DATE6&#39;</span><span class="p">,</span><span class="s">&#39;TIME6&#39;</span><span class="p">,</span><span class="s">&#39;DESC6&#39;</span><span class="p">,</span><span class="s">&#39;ENTRIES6&#39;</span><span class="p">,</span>
        <span class="s">&#39;EXITS6&#39;</span><span class="p">,</span><span class="s">&#39;DATE7&#39;</span><span class="p">,</span><span class="s">&#39;TIME7&#39;</span><span class="p">,</span><span class="s">&#39;DESC7&#39;</span><span class="p">,</span><span class="s">&#39;ENTRIES7&#39;</span><span class="p">,</span><span class="s">&#39;EXITS7&#39;</span><span class="p">,</span><span class="s">&#39;DATE8&#39;</span><span class="p">,</span>
        <span class="s">&#39;TIME8&#39;</span><span class="p">,</span><span class="s">&#39;DESC8&#39;</span><span class="p">,</span><span class="s">&#39;ENTRIES8&#39;</span><span class="p">,</span><span class="s">&#39;EXITS8&#39;</span><span class="p">]</span>
<span class="n">cols</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">it</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;/&#39;</span><span class="p">,</span><span class="s">&#39;_&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">cols</span><span class="p">]</span>
<span class="n">url</span> <span class="o">=</span> <span class="s">&#39;http://web.mta.info/developers/data/nyct/turnstile/turnstile_141004.txt&#39;</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="n">names</span><span class="o">=</span><span class="n">cols</span><span class="p">)</span>
<span class="n">idx</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="n">p</span><span class="o">.</span><span class="n">unit</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s">&#39;R&#39;</span><span class="p">)</span><span class="o">==</span><span class="bp">False</span><span class="p">]</span><span class="o">.</span><span class="n">index</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">idx</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="c"># ts_key = pd.read_excel(&#39;http://web.mta.info/developers/resources/nyct/turnstile/Remote-Booth-Station.xls&#39;)</span>
<span class="c"># ts_key.columns = [str(it).lower().replace(&#39; &#39;,&#39;_&#39;) for it in ts_key.columns.tolist()]</span>

<span class="n">dropCols</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">cols</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">it</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;exit&#39;</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span> <span class="ow">or</span> <span class="n">it</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;entries&#39;</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
        <span class="n">p</span><span class="p">[</span><span class="n">it</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="n">it</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">it</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;date&#39;</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
        <span class="n">date_pt</span><span class="p">,</span><span class="n">time_pt</span><span class="p">,</span><span class="n">datetime_pt</span> <span class="o">=</span> <span class="n">it</span><span class="p">,</span><span class="s">&#39;time&#39;</span><span class="o">+</span><span class="n">it</span><span class="p">[</span><span class="mi">4</span><span class="p">:],</span><span class="s">&#39;datetime&#39;</span><span class="o">+</span><span class="n">it</span><span class="p">[</span><span class="mi">4</span><span class="p">:]</span>
        <span class="n">p</span><span class="p">[</span><span class="n">datetime_pt</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="n">date_pt</span><span class="p">]</span> <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span> <span class="n">p</span><span class="p">[</span><span class="n">time_pt</span><span class="p">],</span><span class="n">format</span><span class="o">=</span><span class="s">&#39;%m-</span><span class="si">%d</span><span class="s">-%y %H:%M:%S&#39;</span><span class="p">,</span><span class="nb">coerce</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="n">p</span><span class="p">[</span><span class="n">datetime_pt</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="n">datetime_pt</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="bp">None</span> <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">==</span><span class="s">&#39;NaT&#39;</span> <span class="k">else</span> <span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
        <span class="n">dropCols</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">date_pt</span><span class="p">,</span><span class="n">time_pt</span><span class="p">])</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">dropCols</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">cols</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

<span class="c"># END GOAL conform &#39;station_names&#39; to &#39;mn_stations&#39;</span>
<span class="n">mn_stations</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s">&quot;&quot;&quot;select * from sub_stat_entr&quot;&quot;&quot;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>

<span class="c"># Limit NYC key to MN</span>
<span class="n">mn_div_list</span> <span class="o">=</span> <span class="n">mn_stations</span><span class="o">.</span><span class="n">division</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="n">ts_key</span> <span class="o">=</span> <span class="n">ts_key</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">ts_key</span><span class="p">[</span><span class="n">ts_key</span><span class="o">.</span><span class="n">division</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">mn_div_list</span><span class="p">)</span><span class="o">==</span><span class="bp">False</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="c"># Create and Sort Route List for each station</span>
<span class="n">mn_cols</span> <span class="o">=</span> <span class="n">mn_stations</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="n">s_pt</span><span class="p">,</span><span class="n">e_pt</span> <span class="o">=</span> <span class="n">mn_cols</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s">&#39;route_1&#39;</span><span class="p">),</span><span class="n">mn_cols</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s">&#39;route_11&#39;</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span>
<span class="n">mn_stations</span><span class="p">[</span><span class="s">&#39;all_lines&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mn_stations</span><span class="o">.</span><span class="n">ix</span><span class="p">[:,</span><span class="n">s_pt</span><span class="p">:</span><span class="n">e_pt</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">it</span><span class="p">)</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">s</span> <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">it</span><span class="p">)</span><span class="o">!=</span><span class="s">&#39;NaN&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;nan&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;.0&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">),</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">mn_stations</span><span class="p">[</span><span class="s">&#39;all_lines&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mn_stations</span><span class="o">.</span><span class="n">all_lines</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">s</span><span class="p">)))</span>
<span class="c"># ts_key[&#39;line_name&#39;] = ts_key[&#39;line_name&#39;].map(lambda s: &#39;&#39;.join(sorted([str(it) for it in s])) if type(s)!=int else str(s))</span>

<span class="c"># clean up many but small differences between station names</span>
<span class="n">mn_stations</span><span class="p">[</span><span class="s">&#39;clean&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mn_stations</span><span class="o">.</span><span class="n">station_name</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
<span class="c"># ts_key[&#39;clean&#39;] = ts_key.station.map(lambda s: s.lower())</span>
<span class="n">repl_dict</span> <span class="o">=</span> <span class="p">{</span>   <span class="s">r&#39;(1st|first)&#39;</span>          <span class="p">:</span><span class="s">r&#39;1&#39;</span><span class="p">,</span>
                <span class="s">r&#39;(2nd|second)&#39;</span>         <span class="p">:</span><span class="s">r&#39;2&#39;</span><span class="p">,</span>
                <span class="s">r&#39;(3rd|third)&#39;</span>          <span class="p">:</span><span class="s">r&#39;3&#39;</span><span class="p">,</span>
                <span class="s">r&#39;(4th|fourth)&#39;</span>         <span class="p">:</span><span class="s">r&#39;4&#39;</span><span class="p">,</span>
                <span class="s">r&#39;(5th|fifth)&#39;</span>          <span class="p">:</span><span class="s">r&#39;5&#39;</span><span class="p">,</span>
                <span class="s">r&#39;(6th|sixth)&#39;</span>          <span class="p">:</span><span class="s">r&#39;6&#39;</span><span class="p">,</span>
                <span class="s">r&#39;(7th|seventh)&#39;</span>        <span class="p">:</span><span class="s">r&#39;7&#39;</span><span class="p">,</span>
                <span class="s">r&#39;(8th|eigth)&#39;</span>          <span class="p">:</span><span class="s">r&#39;8&#39;</span><span class="p">,</span>
                <span class="s">r&#39;(9th|nineth|ninth)&#39;</span>   <span class="p">:</span><span class="s">r&#39;9&#39;</span><span class="p">,</span>
                <span class="s">r&#39;(0th)&#39;</span>                <span class="p">:</span><span class="s">r&#39;0&#39;</span><span class="p">,</span>
                <span class="s">r&#39;(1th)&#39;</span>                <span class="p">:</span><span class="s">r&#39;1&#39;</span><span class="p">,</span>
                <span class="s">r&#39;(2th)&#39;</span>                <span class="p">:</span><span class="s">r&#39;2&#39;</span><span class="p">,</span>
                <span class="s">r&#39;(3th)&#39;</span>                <span class="p">:</span><span class="s">r&#39;3&#39;</span><span class="p">,</span>
                <span class="s">r&#39;\s(street)&#39;</span>           <span class="p">:</span><span class="s">r&#39; st&#39;</span><span class="p">,</span>
                <span class="s">r&#39;\s(square)&#39;</span>           <span class="p">:</span><span class="s">r&#39; sq&#39;</span><span class="p">,</span>
                <span class="s">r&#39;\s(center)&#39;</span>           <span class="p">:</span><span class="s">r&#39; ctr&#39;</span><span class="p">,</span>
                <span class="s">r&#39;\s(av)&#39;</span><span class="p">:</span><span class="s">r&#39; ave&#39;</span><span class="p">}</span>
<span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">repl_dict</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
    <span class="n">mn_stations</span><span class="p">[</span><span class="s">&#39;clean&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mn_stations</span><span class="o">.</span><span class="n">clean</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="n">v</span><span class="p">)</span>
    
<span class="n">repl_dict</span> <span class="o">=</span> <span class="p">{</span>   <span class="s">r&#39;\Aunion sq&#39;</span><span class="p">:</span><span class="s">r&#39;14 st-union sq&#39;</span><span class="p">,</span>
                <span class="s">r&#39;cathedral parkway-110 st&#39;</span><span class="p">:</span><span class="s">r&#39;110 st-cathedrl&#39;</span><span class="p">,</span>
                <span class="s">r&#39;163 st - amsterdam ave&#39;</span><span class="p">:</span><span class="s">r&#39;163 st-amsterdm&#39;</span><span class="p">,</span>
                <span class="s">r&#39;81 st - museum of natural history&#39;</span><span class="p">:</span><span class="s">r&#39;81 st-museum&#39;</span><span class="p">,</span>
                <span class="s">r&#39;47-50 sts rockefeller ctr&#39;</span><span class="p">:</span><span class="s">r&#39;47-50 st-rock&#39;</span><span class="p">,</span>
                <span class="s">r&#39;137 st-city college&#39;</span><span class="p">:</span><span class="s">r&#39;137 st-city col&#39;</span><span class="p">,</span>
                <span class="s">r&#39;broadway-lafayette st&#39;</span><span class="p">:</span><span class="s">r&#39;broadway/lafay&#39;</span><span class="p">,</span>
                <span class="s">r&#39;west 4 st&#39;</span><span class="p">:</span><span class="s">r&#39;w 4 st-wash sq&#39;</span> <span class="p">,</span>
                <span class="s">r&#39;110 st-central park north&#39;</span><span class="p">:</span><span class="s">r&#39;110 st-cpn&#39;</span><span class="p">,</span>
                <span class="s">r&#39;116 st-columbia university&#39;</span><span class="p">:</span><span class="s">r&#39;116 st-columbia&#39;</span><span class="p">,</span>
                <span class="s">r&#39;168 st - washington heights&#39;</span><span class="p">:</span><span class="s">r&#39;168 st-broadway&#39;</span><span class="p">,</span>
<span class="c">#                 r&#39;168 st-broadway - washington heights&#39;:r&#39;168 st-broadway&#39;,</span>
                <span class="s">r&#39;49 st&#39;</span><span class="p">:</span><span class="s">r&#39;49 st-7 ave&#39;</span><span class="p">,</span>
                <span class="s">r&#39;168 st\Z&#39;</span><span class="p">:</span><span class="s">r&#39;168 st-broadway&#39;</span><span class="p">,</span>
                <span class="s">r&#39;59 st-columbus circle&#39;</span><span class="p">:</span><span class="s">r&#39;59 st-columbus&#39;</span><span class="p">,</span>
                <span class="s">r&#39;66 st-lincoln ctr&#39;</span><span class="p">:</span><span class="s">r&#39;66 st-lincoln&#39;</span><span class="p">,</span>
                <span class="s">r&#39;68 st-hunter college&#39;</span><span class="p">:</span><span class="s">r&#39;68st-hunter col&#39;</span><span class="p">,</span>
                <span class="c"># r&#39;astor pl&#39;:&#39;astor place&#39;,</span>
                <span class="s">r&#39;brooklyn bridge-city hall&#39;</span><span class="p">:</span><span class="s">r&#39;brooklyn bridge&#39;</span><span class="p">,</span>
                <span class="s">r&#39;dyckman st-200 st&#39;</span><span class="p">:</span><span class="s">r&#39;dyckman-200 st&#39;</span><span class="p">,</span>
                <span class="s">r&#39;grand central-42 st&#39;</span><span class="p">:</span><span class="s">r&#39;42 st-grd cntrl&#39;</span><span class="p">,</span>
                <span class="s">r&#39;inwood - 207 st&#39;</span><span class="p">:</span><span class="s">r&#39;inwood-207 st&#39;</span><span class="p">,</span>
                <span class="s">r&#39;lexington av-53 st&#39;</span><span class="p">:</span><span class="s">r&#39;lexington-53 st&#39;</span><span class="p">,</span>
                <span class="s">r&#39;prince st&#39;</span><span class="p">:</span><span class="s">r&quot;prince st-b&#39;way&quot;</span><span class="p">,</span>
                <span class="s">r&#39;\Atimes sq\Z&#39;</span><span class="p">:</span><span class="s">r&#39;42 st-times sq&#39;</span><span class="p">,</span>
                <span class="s">r&#39;times sq-42 st&#39;</span><span class="p">:</span><span class="s">r&#39;42 st-times sq&#39;</span><span class="p">,</span>
                <span class="s">r&#39;van cortlandt park-242 st&#39;</span><span class="p">:</span><span class="s">r&#39;242 st&#39;</span><span class="p">,</span>
                <span class="s">r&#39;marble hill-225 st&#39;</span><span class="p">:</span><span class="s">r&#39;225 st&#39;</span><span class="p">,</span>
                <span class="s">r&#39;lexington ave-53 st&#39;</span><span class="p">:</span><span class="s">r&#39;lexington-53 st&#39;</span><span class="p">,</span>
                <span class="s">r&#39;harlem-148 st&#39;</span><span class="p">:</span><span class="s">r&#39;148 st-lenox&#39;</span><span class="p">,</span>
                <span class="s">r&#39;\Agrand central\Z&#39;</span><span class="p">:</span><span class="s">r&#39;42 st-grd cntrl&#39;</span><span class="p">,</span>
                <span class="s">r&#39;\Acanal st (ul)\Z&#39;</span><span class="p">:</span><span class="s">r&#39;canal st&#39;</span><span class="p">,}</span>
<span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">repl_dict</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
    <span class="n">mn_stations</span><span class="p">[</span><span class="s">&#39;clean&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mn_stations</span><span class="o">.</span><span class="n">clean</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="n">v</span><span class="p">)</span>

<span class="n">station_names</span> <span class="o">=</span> <span class="n">ts_key</span><span class="o">.</span><span class="n">clean</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="c">#print len(mn_stations[mn_stations.clean.isin(station_names)==False]), &#39;stations not mapped&#39;</span>
<span class="c"># mn_stations[mn_stations.clean.isin(station_names)==False].ix[:,[&#39;division&#39;,&#39;line&#39;,&#39;station_name&#39;,&#39;all_lines&#39;,&#39;clean&#39;]].sort(&#39;clean&#39;)</span>
<span class="c"># mn_stations.head()</span>

<span class="c"># push to [ sub_stat_entr,ts_key,p(turn stiles) ] to pgsql for comparison and unificiation</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;drop table if exists sub_stat_entr&#39;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;drop table if exists ts_key&#39;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;drop table if exists sub_turn_stiles&#39;</span><span class="p">)</span>
<span class="n">delay</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="n">mn_stations</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s">&#39;id&#39;</span><span class="p">,</span><span class="s">&#39;index&#39;</span><span class="p">],</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s">&#39;sub_stat_entr&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">    alter table sub_stat_entr add column id serial;</span>
<span class="s">    update sub_stat_entr set index = nextval(pg_get_serial_sequence(&#39;sub_stat_entr&#39;,&#39;id&#39;));</span>
<span class="s">    alter table sub_stat_entr add primary key (id);</span>
<span class="s">    &quot;&quot;&quot;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;UPDATE sub_stat_entr set geom = ST_SetSRID(ST_MakePoint(station_longitude,station_latitude),4326)&quot;&quot;&quot;</span><span class="p">)</span>

<span class="c"># ts_key.to_sql(&#39;ts_key&#39;,engine)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">    alter table ts_key add column lat double precision;</span>
<span class="s">    alter table ts_key add column lon double precision;</span>
<span class="s">    alter table ts_key add column id serial;</span>
<span class="s">    update ts_key set index = nextval(pg_get_serial_sequence(&#39;ts_key&#39;,&#39;id&#39;));</span>
<span class="s">    alter table ts_key add primary key (id);</span>
<span class="s">    &quot;&quot;&quot;</span><span class="p">)</span>

<span class="n">p</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s">&#39;sub_turn_stiles&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">    alter table sub_turn_stiles add column station text;</span>
<span class="s">    alter table sub_turn_stiles add column lat double precision;</span>
<span class="s">    alter table sub_turn_stiles add column lon double precision;</span>
<span class="s">    alter table sub_turn_stiles add column id serial;</span>
<span class="s">    update sub_turn_stiles set index = nextval(pg_get_serial_sequence(&#39;sub_turn_stiles&#39;,&#39;id&#39;));</span>
<span class="s">    alter table sub_turn_stiles add primary key (id);</span>
<span class="s">    &quot;&quot;&quot;</span><span class="p">)</span>

<span class="c"># 1. Copy coords from station_entrances to turnstile_key</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">                UPDATE ts_key t</span>
<span class="s">                SET lat = s.station_latitude,lon = s.station_longitude</span>
<span class="s">                FROM sub_stat_entr s</span>
<span class="s">                WHERE s.clean=t.clean</span>
<span class="s">                AND s.all_lines=t.line_name;</span>
<span class="s">                &quot;&quot;&quot;</span><span class="p">)</span>
<span class="c">#print pd.read_sql(&#39;select count(*) c from ts_key where lon is null&#39;,engine).c[0],&#39;null&#39;</span>
<span class="c">#print pd.read_sql(&#39;select count(*) c from ts_key where lon is not null&#39;,engine).c[0],&#39;not null&#39;</span>

<span class="c"># 2. Copy matching ts_key table data to turn_stiles table</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">                UPDATE sub_turn_stiles</span>
<span class="s">                SET lat = t.lat,lon=t.lon,station=t.station</span>
<span class="s">                FROM ts_key t</span>
<span class="s">                WHERE t.remote = unit</span>
<span class="s">                AND t.booth = c_a;</span>
<span class="s">                &quot;&quot;&quot;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;alter table sub_turn_stiles add column geom geometry(Point,4326)&#39;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;UPDATE sub_turn_stiles set geom = ST_SetSRID(ST_MakePoint(lon,lat),4326)&quot;&quot;&quot;</span><span class="p">)</span>

<span class="c"># 3. Attempt to match leftovers (non-matching) b/t ts_key/sub_stat_entr using wildcards</span>
<span class="n">leftovers</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s">&quot;select * from ts_key where lon is null and division = any(array[&#39;IRT&#39;,&#39;IND&#39;,&#39;BMT&#39;])&quot;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">leftovers</span><span class="p">)):</span>
    <span class="n">row</span> <span class="o">=</span> <span class="n">leftovers</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">i</span><span class="p">,:]</span>
    <span class="n">chk</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s">&#39;clean&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;-&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">chk</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
        <span class="n">a</span><span class="p">,</span><span class="n">b</span> <span class="o">=</span> <span class="s">&#39;</span><span class="si">%%</span><span class="s">&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s">&#39;clean&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;-&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span><span class="o">+</span><span class="s">&#39;</span><span class="si">%%</span><span class="s">&#39;</span><span class="p">,</span><span class="n">row</span><span class="p">[</span><span class="s">&#39;line_name&#39;</span><span class="p">]</span>
        <span class="n">tmp</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span>  <span class="s">&quot;&quot;&quot; </span>
<span class="s">                            SELECT station_latitude lat,station_longitude lon</span>
<span class="s">                            FROM sub_stat_entr s</span>
<span class="s">                            WHERE s.clean ilike &#39;</span><span class="si">%s</span><span class="s">&#39;</span>
<span class="s">                            AND s.all_lines=&#39;</span><span class="si">%s</span><span class="s">&#39;;</span>
<span class="s">                            &quot;&quot;&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">),</span><span class="n">engine</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">tmp</span><span class="o">.</span><span class="n">lat</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span><span class="o">==</span><span class="nb">len</span><span class="p">(</span><span class="n">tmp</span><span class="o">.</span><span class="n">lat</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span><span class="o">==</span><span class="mi">1</span><span class="p">):</span>
            <span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span> <span class="o">=</span> <span class="n">tmp</span><span class="o">.</span><span class="n">lat</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">tmp</span><span class="o">.</span><span class="n">lon</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">row</span><span class="p">[</span><span class="s">&#39;id&#39;</span><span class="p">]</span>
            <span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">                                UPDATE ts_key set lat=</span><span class="si">%f</span><span class="s">,lon=</span><span class="si">%f</span><span class="s"></span>
<span class="s">                                WHERE id = </span><span class="si">%d</span><span class="s"></span>
<span class="s">                            &quot;&quot;&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">),</span><span class="n">engine</span><span class="p">)</span>
            
<span class="c"># 4. Attempt to match leftover by:</span>
        <span class="c"># starting with lines,division, </span>
            <span class="c"># if one result go with it, </span>
            <span class="c"># else if only one result and it&#39;s a partial match, go with it?</span>
<span class="n">leftovers</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s">&quot;select * from ts_key where lon is null and division = any(array[&#39;IRT&#39;,&#39;IND&#39;,&#39;BMT&#39;])&quot;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">leftovers</span><span class="p">)):</span>
    <span class="n">row</span> <span class="o">=</span> <span class="n">leftovers</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">i</span><span class="p">,:]</span>
    <span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span> <span class="o">=</span> <span class="s">&#39;</span><span class="si">%%</span><span class="s">&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s">&#39;clean&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;-&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span><span class="o">+</span><span class="s">&#39;</span><span class="si">%%</span><span class="s">&#39;</span><span class="p">,</span><span class="n">row</span><span class="p">[</span><span class="s">&#39;line_name&#39;</span><span class="p">],</span><span class="n">row</span><span class="p">[</span><span class="s">&#39;division&#39;</span><span class="p">]</span>
    <span class="n">tmp</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span>  <span class="s">&quot;&quot;&quot; </span>
<span class="s">                        SELECT station_latitude lat,station_longitude lon,clean</span>
<span class="s">                        FROM sub_stat_entr s</span>
<span class="s">                        WHERE s.division=&#39;</span><span class="si">%s</span><span class="s">&#39;</span>
<span class="s">                        AND s.all_lines=&#39;</span><span class="si">%s</span><span class="s">&#39;;</span>
<span class="s">                        &quot;&quot;&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="n">b</span><span class="p">),</span><span class="n">engine</span><span class="p">)</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">tmp</span><span class="o">.</span><span class="n">lat</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span><span class="o">==</span><span class="nb">len</span><span class="p">(</span><span class="n">tmp</span><span class="o">.</span><span class="n">lat</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span><span class="o">==</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span> <span class="o">=</span> <span class="n">tmp</span><span class="o">.</span><span class="n">lat</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">tmp</span><span class="o">.</span><span class="n">lon</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">row</span><span class="p">[</span><span class="s">&#39;id&#39;</span><span class="p">]</span>
        <span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">                            UPDATE ts_key set lat=</span><span class="si">%f</span><span class="s">,lon=</span><span class="si">%f</span><span class="s"></span>
<span class="s">                            WHERE id = </span><span class="si">%d</span><span class="s"></span>
<span class="s">                        &quot;&quot;&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">),</span><span class="n">engine</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">z</span><span class="o">=</span><span class="n">tmp</span><span class="p">[</span><span class="n">tmp</span><span class="o">.</span><span class="n">clean</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">a</span><span class="p">)]</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">z</span><span class="o">.</span><span class="n">lat</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span><span class="o">==</span><span class="nb">len</span><span class="p">(</span><span class="n">z</span><span class="o">.</span><span class="n">lat</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span><span class="o">==</span><span class="mi">1</span><span class="p">):</span>
            <span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span> <span class="o">=</span> <span class="n">tmp</span><span class="o">.</span><span class="n">lat</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">tmp</span><span class="o">.</span><span class="n">lon</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">row</span><span class="p">[</span><span class="s">&#39;id&#39;</span><span class="p">]</span>
            <span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">                                UPDATE ts_key set lat=</span><span class="si">%f</span><span class="s">,lon=</span><span class="si">%f</span><span class="s"></span>
<span class="s">                                WHERE id = </span><span class="si">%d</span><span class="s"></span>
<span class="s">                            &quot;&quot;&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">),</span><span class="n">engine</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># TURN STILE CONT&#39;D convert text to timestamp</span>

<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;  </span>

<span class="s">    DROP TABLE if exists tmp;</span>

<span class="s">    CREATE TABLE tmp (</span>
<span class="s">        gid serial primary key,</span>
<span class="s">        datetime1 timestamp with time zone,</span>
<span class="s">        datetime2 timestamp with time zone,</span>
<span class="s">        datetime3 timestamp with time zone,</span>
<span class="s">        datetime4 timestamp with time zone,</span>
<span class="s">        datetime5 timestamp with time zone,</span>
<span class="s">        datetime6 timestamp with time zone,</span>
<span class="s">        datetime7 timestamp with time zone,</span>
<span class="s">        datetime8 timestamp with time zone</span>
<span class="s">        );</span>

<span class="s">    UPDATE tmp SET gid = nextval(pg_get_serial_sequence(&#39;tmp&#39;,&#39;gid&#39;));</span>

<span class="s">    INSERT INTO tmp (</span>
<span class="s">        datetime1,</span>
<span class="s">        datetime2,</span>
<span class="s">        datetime3,</span>
<span class="s">        datetime4,</span>
<span class="s">        datetime5,</span>
<span class="s">        datetime6,</span>
<span class="s">        datetime7,</span>
<span class="s">        datetime8)</span>
<span class="s">    SELECT </span>
<span class="s">        to_timestamp(s.datetime1,&#39;YYYY-MM-DD HH24:MI:SS&#39;),</span>
<span class="s">        to_timestamp(s.datetime2,&#39;YYYY-MM-DD HH24:MI:SS&#39;),</span>
<span class="s">        to_timestamp(s.datetime3,&#39;YYYY-MM-DD HH24:MI:SS&#39;),</span>
<span class="s">        to_timestamp(s.datetime4,&#39;YYYY-MM-DD HH24:MI:SS&#39;),</span>
<span class="s">        to_timestamp(s.datetime5,&#39;YYYY-MM-DD HH24:MI:SS&#39;),</span>
<span class="s">        to_timestamp(s.datetime6,&#39;YYYY-MM-DD HH24:MI:SS&#39;),</span>
<span class="s">        to_timestamp(s.datetime7,&#39;YYYY-MM-DD HH24:MI:SS&#39;),</span>
<span class="s">        to_timestamp(s.datetime8,&#39;YYYY-MM-DD HH24:MI:SS&#39;)</span>
<span class="s">    FROM sub_turn_stiles s;</span>

<span class="s">    ALTER TABLE sub_turn_stiles </span>
<span class="s">    DROP COLUMN datetime1,</span>
<span class="s">    DROP COLUMN datetime2,</span>
<span class="s">    DROP COLUMN datetime3,</span>
<span class="s">    DROP COLUMN datetime4,</span>
<span class="s">    DROP COLUMN datetime5,</span>
<span class="s">    DROP COLUMN datetime6,</span>
<span class="s">    DROP COLUMN datetime7,</span>
<span class="s">    DROP COLUMN datetime8,</span>
<span class="s">    ADD COLUMN datetime1 timestamp with time zone,</span>
<span class="s">    ADD COLUMN datetime2 timestamp with time zone,</span>
<span class="s">    ADD COLUMN datetime3 timestamp with time zone,</span>
<span class="s">    ADD COLUMN datetime4 timestamp with time zone,</span>
<span class="s">    ADD COLUMN datetime5 timestamp with time zone,</span>
<span class="s">    ADD COLUMN datetime6 timestamp with time zone,</span>
<span class="s">    ADD COLUMN datetime7 timestamp with time zone,</span>
<span class="s">    ADD COLUMN datetime8 timestamp with time zone;</span>

<span class="s">    UPDATE sub_turn_stiles s</span>
<span class="s">    SET </span>
<span class="s">        datetime1 = t.datetime1,</span>
<span class="s">        datetime2 = t.datetime2,</span>
<span class="s">        datetime3 = t.datetime3,</span>
<span class="s">        datetime4 = t.datetime4,</span>
<span class="s">        datetime5 = t.datetime5,</span>
<span class="s">        datetime6 = t.datetime6,</span>
<span class="s">        datetime7 = t.datetime7,</span>
<span class="s">        datetime8 = t.datetime8</span>
<span class="s">    FROM tmp t</span>
<span class="s">    where t.gid = s.id;</span>

<span class="s">               &quot;&quot;&quot;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># TURN STILE CONT&#39;D calc. register differences</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">alter table sub_turn_stiles </span>
<span class="s">add column out1 double precision,</span>
<span class="s">add column out2 double precision,</span>
<span class="s">add column out3 double precision,</span>
<span class="s">add column out4 double precision,</span>
<span class="s">add column out5 double precision,</span>
<span class="s">add column out6 double precision,</span>
<span class="s">add column out7 double precision,</span>
<span class="s">add column in1 double precision,</span>
<span class="s">add column in2 double precision,</span>
<span class="s">add column in3 double precision,</span>
<span class="s">add column in4 double precision,</span>
<span class="s">add column in5 double precision,</span>
<span class="s">add column in6 double precision,</span>
<span class="s">add column in7 double precision;</span>


<span class="s">update sub_turn_stiles</span>
<span class="s">set out1 = exits2-exits1</span>
<span class="s">where exits1 != &#39;NaN&#39;::float</span>
<span class="s">and exits2 != &#39;NaN&#39;::float;</span>

<span class="s">update sub_turn_stiles</span>
<span class="s">set out2 = exits3-exits2</span>
<span class="s">where exits2 != &#39;NaN&#39;::float</span>
<span class="s">and exits3 != &#39;NaN&#39;::float;</span>

<span class="s">update sub_turn_stiles</span>
<span class="s">set out3 = exits4-exits3</span>
<span class="s">where exits3 != &#39;NaN&#39;::float</span>
<span class="s">and exits4 != &#39;NaN&#39;::float;</span>

<span class="s">update sub_turn_stiles</span>
<span class="s">set out4 = exits5-exits4</span>
<span class="s">where exits4 != &#39;NaN&#39;::float</span>
<span class="s">and exits5 != &#39;NaN&#39;::float;</span>

<span class="s">update sub_turn_stiles</span>
<span class="s">set out5 = exits6-exits5</span>
<span class="s">where exits5 != &#39;NaN&#39;::float</span>
<span class="s">and exits6 != &#39;NaN&#39;::float;</span>

<span class="s">update sub_turn_stiles</span>
<span class="s">set out6 = exits7-exits6</span>
<span class="s">where exits6 != &#39;NaN&#39;::float</span>
<span class="s">and exits7 != &#39;NaN&#39;::float;</span>

<span class="s">update sub_turn_stiles</span>
<span class="s">set out7 = exits8-exits7</span>
<span class="s">where exits7 != &#39;NaN&#39;::float</span>
<span class="s">and exits8 != &#39;NaN&#39;::float;</span>


<span class="s">update sub_turn_stiles</span>
<span class="s">set in1 = entries2-entries1</span>
<span class="s">where entries1 != &#39;NaN&#39;::float</span>
<span class="s">and entries2 != &#39;NaN&#39;::float;</span>

<span class="s">update sub_turn_stiles</span>
<span class="s">set in2 = entries3-entries2</span>
<span class="s">where entries2 != &#39;NaN&#39;::float</span>
<span class="s">and entries3 != &#39;NaN&#39;::float;</span>

<span class="s">update sub_turn_stiles</span>
<span class="s">set in3 = entries4-entries3</span>
<span class="s">where entries3 != &#39;NaN&#39;::float</span>
<span class="s">and entries4 != &#39;NaN&#39;::float;</span>

<span class="s">update sub_turn_stiles</span>
<span class="s">set in4 = entries5-entries4</span>
<span class="s">where entries4 != &#39;NaN&#39;::float</span>
<span class="s">and entries5 != &#39;NaN&#39;::float;</span>

<span class="s">update sub_turn_stiles</span>
<span class="s">set in5 = entries6-entries5</span>
<span class="s">where entries5 != &#39;NaN&#39;::float</span>
<span class="s">and entries6 != &#39;NaN&#39;::float;</span>

<span class="s">update sub_turn_stiles</span>
<span class="s">set in6 = entries7-entries6</span>
<span class="s">where entries6 != &#39;NaN&#39;::float</span>
<span class="s">and entries7 != &#39;NaN&#39;::float;</span>

<span class="s">update sub_turn_stiles</span>
<span class="s">set in7 = entries8-entries7</span>
<span class="s">where entries7 != &#39;NaN&#39;::float</span>
<span class="s">and entries8 != &#39;NaN&#39;::float;</span>


<span class="s">alter table sub_turn_stiles </span>
<span class="s">    add column in_all double precision,</span>
<span class="s">    add column out_all double precision;</span>
<span class="s">update sub_turn_stiles</span>
<span class="s">set in_all = (select sum(s) from unnest(array[in1,in2,in3,in4,in5,in6,in7]) s);</span>
<span class="s">update sub_turn_stiles</span>
<span class="s">set out_all = (select sum(s) from unnest(array[out1,out2,out3,out4,out5,out6,out7]) s);</span>
<span class="s">&quot;&quot;&quot;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># NEED to consolidate turn_stile data</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># turn_stile data with missing station name -- SMALL ADJUSTMENTS NEEDED</span>
<span class="n">cmd</span><span class="o">=</span><span class="s">&quot;&quot;&quot; select distinct unit,c_a from sub_turn_stiles </span>
<span class="s">        where station is null order by unit;&quot;&quot;&quot;</span>
<span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># turn_stile data analysis:</span>

<span class="c"># general data used herein</span>
<span class="n">datetime_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;datetime&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">9</span><span class="p">)]</span>
<span class="n">desc_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;desc&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">9</span><span class="p">)]</span>
<span class="n">entry_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;entries&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">9</span><span class="p">)]</span>
<span class="n">exit_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;exits&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">9</span><span class="p">)]</span>
<span class="n">in_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;in&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">9</span><span class="p">)]</span>
<span class="n">out_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;out&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">9</span><span class="p">)]</span>
<span class="n">agg_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;in_all&#39;</span><span class="p">,</span><span class="s">&#39;out_all&#39;</span><span class="p">]</span>
<span class="n">other_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;index&#39;</span><span class="p">,</span><span class="s">&#39;lat&#39;</span><span class="p">,</span><span class="s">&#39;lon&#39;</span><span class="p">,</span><span class="s">&#39;id&#39;</span><span class="p">,</span><span class="s">&#39;geom&#39;</span><span class="p">]</span>

<span class="c"># 1. this shows there are multiple entries per station, i.e., multiple turn stiles</span>
<span class="n">cmd</span> <span class="o">=</span>   <span class="s">&quot;&quot;&quot;</span>
<span class="s">        select * from sub_turn_stiles </span>
<span class="s">        where out_all is not null</span>
<span class="s">        and station = &#39;34 ST-HERALD SQ&#39;</span>
<span class="s">        AND extract(hour from datetime1) = 4</span>
<span class="s">        AND extract(day from datetime1) = 29</span>
<span class="s">        order by out_all desc;</span>
<span class="s">        &quot;&quot;&quot;</span>

<span class="c"># 2. this shows there are multiple rows even when {c_a,unit,scp,datetime1} are same</span>
<span class="n">cmd</span> <span class="o">=</span>   <span class="s">&quot;&quot;&quot;</span>
<span class="s">        select * from sub_turn_stiles </span>
<span class="s">        where out_all is not null</span>
<span class="s">        and station = &#39;34 ST-HERALD SQ&#39;</span>
<span class="s">        AND scp = &#39;00-00-00&#39;</span>
<span class="s">        order by c_a,unit,datetime1 asc;</span>
<span class="s">        &quot;&quot;&quot;</span>
<span class="n">dropCols</span> <span class="o">=</span> <span class="n">desc_cols</span> <span class="o">+</span> <span class="n">entry_cols</span> <span class="o">+</span> <span class="n">exit_cols</span> <span class="o">+</span> <span class="n">in_cols</span> <span class="o">+</span> <span class="n">out_cols</span> <span class="o">+</span> <span class="n">other_cols</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># 3. this shows the door is open for people leaving during rush hour... (see datetime6-7)</span>
<span class="c">#        and possibly explains why multiple rows</span>
<span class="n">cmd</span> <span class="o">=</span>   <span class="s">&quot;&quot;&quot;</span>
<span class="s">        select * from sub_turn_stiles </span>
<span class="s">        where out_all is not null</span>
<span class="s">        and station = &#39;34 ST-HERALD SQ&#39;</span>
<span class="s">        AND scp = &#39;00-00-00&#39;</span>
<span class="s">        AND datetime1 = &#39;2014-09-28 09:00:00-04:00&#39;;</span>
<span class="s">        &quot;&quot;&quot;</span>
<span class="c"># dropCols = desc_cols + entry_cols + exit_cols + in_cols + out_cols + other_cols</span>
<span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span><span class="c">#.drop(dropCols,axis=1)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="TODO:">TODO:<a class="anchor-link" href="#TODO:">&#182;</a></h1>
</div>
</div>
</div>

<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Turn-Stile-Data:">Turn Stile Data:<a class="anchor-link" href="#Turn-Stile-Data:">&#182;</a></h2>
</div>
</div>
</div>

<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="GOAL----For-Dates-A-to-B-and-Times-C-to-D,-how-many-people-per-station?">GOAL -- For Dates A to B and Times C to D, how many people per station?<a class="anchor-link" href="#GOAL----For-Dates-A-to-B-and-Times-C-to-D,-how-many-people-per-station?">&#182;</a></h3>
</div>
</div>
</div>

<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ol>
<li><p>consolidate scp's per remote/booth</p>
<p> Thoughts:</p>

<pre><code> - each scp has its own range of timestamps and register values
 - some scp.s have multiple datasets for same time period
 - timestamps exists for all times of the day

</code></pre>
<p> Method:</p>

<pre><code> - create new table with:
     - date column
     - 24 columns for each hour filled with register-change values
         - need 24 or just use single time col?
     - index # from sub_turn_stiles</code></pre>
</li>
</ol>
<ol>
<li>consolidate remote/booth per station</li>
</ol>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="o">%%</span><span class="k">sql</span> <span class="n">postgres</span><span class="nd">@routing</span>
<span class="n">select</span> <span class="n">distinct</span> <span class="n">extract</span><span class="p">(</span><span class="n">hour</span> <span class="kn">from</span> <span class="nn">datetime1</span><span class="p">)</span> <span class="n">s</span>
<span class="kn">from</span> <span class="nn">sub_turn_stiles</span>
<span class="n">order</span> <span class="n">by</span> <span class="n">s</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### Using PostgresSQL Server [ db1.public.routing ]:</span>

<span class="kn">from</span> <span class="nn">sys</span> <span class="kn">import</span> <span class="n">path</span> <span class="k">as</span> <span class="n">sys_path</span>
<span class="kn">from</span> <span class="nn">re</span> <span class="kn">import</span> <span class="n">search</span> <span class="k">as</span> <span class="n">re_search</span> <span class="c"># re_search(&#39;pattern&#39;,&#39;string&#39;)</span>
<span class="kn">from</span> <span class="nn">re</span> <span class="kn">import</span> <span class="n">sub</span> <span class="k">as</span> <span class="n">re_sub</span>  <span class="c"># re_sub(&#39;pattern&#39;,&#39;repl&#39;,&#39;string&#39;,&#39;count&#39;)</span>

<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s">&#39;expand_frame_repr&#39;</span><span class="p">,</span><span class="bp">False</span><span class="p">)</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s">&#39;display.max_columns&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s">&#39;display.max_rows&#39;</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s">&#39;display.width&#39;</span><span class="p">,</span><span class="mi">180</span><span class="p">)</span>
<span class="n">np</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">np</span>
<span class="n">np</span><span class="o">.</span><span class="n">set_printoptions</span><span class="p">(</span><span class="n">linewidth</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span><span class="n">threshold</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span>
<span class="kn">import</span> <span class="nn">geopandas</span> <span class="kn">as</span> <span class="nn">gd</span>
<span class="kn">from</span> <span class="nn">types</span> <span class="kn">import</span> <span class="n">NoneType</span>
<span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">sleep</span> <span class="k">as</span> <span class="n">delay</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span>
<span class="kn">from</span> <span class="nn">logging</span> <span class="kn">import</span> <span class="n">getLogger</span>
<span class="kn">from</span> <span class="nn">logging</span> <span class="kn">import</span> <span class="n">INFO</span> <span class="k">as</span> <span class="n">logging_info</span>
<span class="n">getLogger</span><span class="p">(</span><span class="s">&#39;sqlalchemy.dialects.postgresql&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging_info</span><span class="p">)</span>

<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s">r&#39;postgresql://postgres:postgres@localhost:8800/routing&#39;</span><span class="p">,</span>
                       <span class="n">encoding</span><span class="o">=</span><span class="s">&#39;utf-8&#39;</span><span class="p">,</span>
                       <span class="n">echo</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

<span class="o">%</span><span class="k">load_ext</span> <span class="n">sql</span>
<span class="o">%</span><span class="k">sql</span> <span class="n">postgresql</span><span class="p">:</span><span class="o">//</span><span class="n">postgres</span><span class="p">:</span><span class="n">postgres</span><span class="nd">@localhost</span><span class="o">/</span><span class="n">routing</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### add restaurant data</span>
<span class="kn">import</span> <span class="nn">requests</span><span class="o">,</span> <span class="nn">zipfile</span><span class="o">,</span> <span class="nn">StringIO</span>
<span class="kn">from</span> <span class="nn">f_postgres</span> <span class="kn">import</span> <span class="n">geoparse</span>
<span class="n">z</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;https://data.cityofnewyork.us/download/4vkw-7nck/ZIP&#39;</span><span class="p">)</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">zipfile</span><span class="o">.</span><span class="n">ZipFile</span><span class="p">(</span><span class="n">StringIO</span><span class="o">.</span><span class="n">StringIO</span><span class="p">(</span><span class="n">z</span><span class="o">.</span><span class="n">content</span><span class="p">))</span>
<span class="n">v</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s">&#39;WebExtract.txt&#39;</span><span class="p">))</span>
<span class="n">v</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span> <span class="nb">str</span><span class="p">(</span><span class="n">it</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">v</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span> <span class="p">]</span>

<span class="n">m</span> <span class="o">=</span> <span class="n">v</span><span class="p">[</span><span class="n">v</span><span class="o">.</span><span class="n">boro</span><span class="o">==</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">m</span><span class="p">[</span><span class="s">&#39;inspdate&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">inspdate</span><span class="p">)</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s">&#39;inspdate&#39;</span><span class="p">,</span><span class="n">ascending</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">z</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s">&#39;camis&#39;</span><span class="p">)</span>
<span class="n">grps</span> <span class="o">=</span> <span class="n">z</span><span class="o">.</span><span class="n">groups</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="n">takeCols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;dba&#39;</span><span class="p">,</span><span class="s">&#39;cuisinecode&#39;</span><span class="p">,</span><span class="s">&#39;building&#39;</span><span class="p">,</span><span class="s">&#39;street&#39;</span><span class="p">,</span><span class="s">&#39;zipcode&#39;</span><span class="p">,</span><span class="s">&#39;phone&#39;</span><span class="p">,</span><span class="s">&#39;inspdate&#39;</span><span class="p">]</span> <span class="c"># and &#39;camis&#39; which is the grps[i]</span>
<span class="n">mv</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;camis&#39;</span><span class="p">]</span><span class="o">+</span><span class="n">takeCols</span><span class="p">)</span>
<span class="n">g_cnt</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">grps</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">g_cnt</span><span class="p">):</span>
    <span class="n">vend_id</span> <span class="o">=</span> <span class="n">grps</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">z</span><span class="o">.</span><span class="n">get_group</span><span class="p">(</span><span class="n">vend_id</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="n">takeCols</span><span class="p">]</span>
    <span class="n">x</span><span class="p">[</span><span class="s">&#39;camis&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">vend_id</span>
    <span class="n">mv</span> <span class="o">=</span> <span class="n">mv</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">mv</span> <span class="o">=</span> <span class="n">geoparse</span><span class="p">(</span><span class="n">mv</span><span class="p">,</span><span class="s">&#39;dba&#39;</span><span class="p">,</span><span class="s">&#39;clean_name&#39;</span><span class="p">)</span>
<span class="n">mv</span> <span class="o">=</span> <span class="n">geoparse</span><span class="p">(</span><span class="n">mv</span><span class="p">,</span><span class="s">&#39;street&#39;</span><span class="p">,</span><span class="s">&#39;clean_street&#39;</span><span class="p">)</span>
<span class="n">mv</span><span class="p">[</span><span class="s">&#39;dba&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mv</span><span class="o">.</span><span class="n">dba</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&#39;ascii&#39;</span><span class="p">,</span><span class="s">&#39;ignore&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s">&#39;utf-8&#39;</span><span class="p">,</span><span class="s">&#39;ignore&#39;</span><span class="p">))</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;drop table if exists mn_vendors&#39;</span><span class="p">)</span>
<span class="n">mv</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s">&#39;mn_vendors&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">,</span><span class="n">index</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">    alter table mn_vendors add column id serial;</span>
<span class="s">    update mn_vendors set id = nextval(pg_get_serial_sequence(&#39;mn_vendors&#39;,&#39;id&#39;));</span>
<span class="s">    alter table mn_vendors add primary key (id);</span>
<span class="s">    &quot;&quot;&quot;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;alter table mn_vendors add column recog_street boolean;</span>
<span class="s">                  update mn_vendors set recog_street = False;&quot;&quot;&quot;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;  update mn_vendors set recog_street = True</span>
<span class="s">                    where exists (</span>
<span class="s">                        select 1 from address_idx a</span>
<span class="s">                        where a.street = clean_street</span>
<span class="s">                    )&quot;&quot;&quot;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### add subway entrances to map</span>
<span class="n">url</span> <span class="o">=</span> <span class="s">&#39;http://web.mta.info/developers/data/nyct/subway/StationEntrances.csv&#39;</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="n">s</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">it</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">s</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">tolist</span><span class="p">()]</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;drop table if exists sub_stat_entr&#39;</span><span class="p">)</span>
<span class="n">s</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s">&#39;sub_stat_entr&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;alter table sub_stat_entr add column geom geometry(Point,4326)&#39;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;UPDATE sub_stat_entr set geom = ST_SetSRID(ST_MakePoint(station_longitude,station_latitude),4326)&quot;&quot;&quot;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot; DELETE FROM sub_stat_entr </span>
<span class="s">                WHERE NOT (geom &amp;&amp; (</span>
<span class="s">                    SELECT ST_Buffer(ST_ConvexHull((ST_Collect(f.the_geom))), .0005) as geom </span>
<span class="s">                    FROM ( SELECT *, (ST_Dump(geom)).geom As the_geom </span>
<span class="s">                    FROM pluto) As f))&quot;&quot;&quot;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">    alter table sub_stat_entr add column id serial;</span>
<span class="s">    update sub_stat_entr set index = nextval(pg_get_serial_sequence(&#39;sub_stat_entr&#39;,&#39;id&#39;));</span>
<span class="s">    alter table sub_stat_entr add primary key (id);</span>
<span class="s">    &quot;&quot;&quot;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### add subway stops to map, add turn stile data to subway stops</span>
<span class="kn">import</span> <span class="nn">requests</span><span class="o">,</span> <span class="nn">zipfile</span><span class="o">,</span> <span class="nn">StringIO</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;http://web.mta.info/developers/data/nyct/subway/google_transit.zip&#39;</span><span class="p">)</span>
<span class="n">z</span> <span class="o">=</span> <span class="n">zipfile</span><span class="o">.</span><span class="n">ZipFile</span><span class="p">(</span><span class="n">StringIO</span><span class="o">.</span><span class="n">StringIO</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">content</span><span class="p">))</span>
<span class="n">sub_stops</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">z</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s">&#39;stops.txt&#39;</span><span class="p">))</span>
<span class="n">sub_stops</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s">&#39;sub_stops&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;alter table sub_stops add column geom geometry(Point,4326)&#39;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;UPDATE sub_stops set geom = ST_SetSRID(ST_MakePoint(stop_lon,stop_lat),4326)&quot;&quot;&quot;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot; DELETE FROM sub_stops </span>
<span class="s">                WHERE NOT (geom &amp;&amp; (</span>
<span class="s">                    SELECT ST_Buffer(ST_ConvexHull((ST_Collect(f.the_geom))), .0005) as geom </span>
<span class="s">                    FROM ( SELECT *, (ST_Dump(geom)).geom As the_geom </span>
<span class="s">                    FROM pluto) As f))&quot;&quot;&quot;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">    alter table sub_stops add column id serial;</span>
<span class="s">    update sub_stops set index = nextval(pg_get_serial_sequence(&#39;sub_stops&#39;,&#39;id&#39;));</span>
<span class="s">    alter table sub_stops add primary key (id);</span>
<span class="s">    &quot;&quot;&quot;</span><span class="p">)</span>
<span class="c"># NOTE:  also then deleted more by hand</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### add turn_stile_key to pgsql</span>
<span class="n">ts_key</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s">&#39;http://web.mta.info/developers/resources/nyct/turnstile/Remote-Booth-Station.xls&#39;</span><span class="p">)</span>
<span class="n">ts_key</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">it</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39; &#39;</span><span class="p">,</span><span class="s">&#39;_&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">ts_key</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">tolist</span><span class="p">()]</span>
<span class="n">ts_key</span><span class="p">[</span><span class="s">&#39;line_name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ts_key</span><span class="p">[</span><span class="s">&#39;line_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">sorted</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">it</span><span class="p">)</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">s</span><span class="p">]))</span> <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">!=</span><span class="nb">int</span> <span class="k">else</span> <span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
<span class="n">ts_key</span><span class="p">[</span><span class="s">&#39;clean&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ts_key</span><span class="o">.</span><span class="n">station</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;drop table if exists ts_key&quot;</span><span class="p">)</span>
<span class="n">ts_key</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s">&#39;ts_key&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### add turn stile data to pgsql</span>
<span class="c"># General Source for Turn Stiles: http://web.mta.info/developers/turnstile.html</span>
<span class="c">#     - field description: http://web.mta.info/developers/resources/nyct/turnstile/ts_Field%20Description.txt</span>
<span class="c">#     - data key: http://web.mta.info/developers/resources/nyct/turnstile/Remote-Booth-Station.xls</span>
<span class="c">#         --&gt; this is the provides the Remote Unit/Control Area/Station Name Key</span>
<span class="c"># Need coords for &quot;UNIT&quot;</span>
<span class="c"># Remote and Station Name here:</span>
<span class="c">#      &#39;http://web.mta.info/developers/resources/nyct/turnstile/Remote-Booth-Station.xls&#39;</span>
<span class="c"># Station Names and Coords here:</span>
<span class="c">#      &#39;http://web.mta.info/developers/data/nyct/subway/StationEntrances.csv&#39;</span>
<span class="c">#     - Relevant stations were added to pgsql as &#39;sub_stat_entr&#39;</span>


<span class="n">cols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;C/A&#39;</span><span class="p">,</span><span class="s">&#39;UNIT&#39;</span><span class="p">,</span><span class="s">&#39;SCP&#39;</span><span class="p">,</span><span class="s">&#39;DATE1&#39;</span><span class="p">,</span><span class="s">&#39;TIME1&#39;</span><span class="p">,</span><span class="s">&#39;DESC1&#39;</span><span class="p">,</span><span class="s">&#39;ENTRIES1&#39;</span><span class="p">,</span><span class="s">&#39;EXITS1&#39;</span><span class="p">,</span>
        <span class="s">&#39;DATE2&#39;</span><span class="p">,</span><span class="s">&#39;TIME2&#39;</span><span class="p">,</span><span class="s">&#39;DESC2&#39;</span><span class="p">,</span><span class="s">&#39;ENTRIES2&#39;</span><span class="p">,</span><span class="s">&#39;EXITS2&#39;</span><span class="p">,</span><span class="s">&#39;DATE3&#39;</span><span class="p">,</span><span class="s">&#39;TIME3&#39;</span><span class="p">,</span><span class="s">&#39;DESC3&#39;</span><span class="p">,</span><span class="s">&#39;ENTRIES3&#39;</span><span class="p">,</span>
        <span class="s">&#39;EXITS3&#39;</span><span class="p">,</span><span class="s">&#39;DATE4&#39;</span><span class="p">,</span><span class="s">&#39;TIME4&#39;</span><span class="p">,</span><span class="s">&#39;DESC4&#39;</span><span class="p">,</span><span class="s">&#39;ENTRIES4&#39;</span><span class="p">,</span><span class="s">&#39;EXITS4&#39;</span><span class="p">,</span><span class="s">&#39;DATE5&#39;</span><span class="p">,</span><span class="s">&#39;TIME5&#39;</span><span class="p">,</span><span class="s">&#39;DESC5&#39;</span><span class="p">,</span>
        <span class="s">&#39;ENTRIES5&#39;</span><span class="p">,</span><span class="s">&#39;EXITS5&#39;</span><span class="p">,</span><span class="s">&#39;DATE6&#39;</span><span class="p">,</span><span class="s">&#39;TIME6&#39;</span><span class="p">,</span><span class="s">&#39;DESC6&#39;</span><span class="p">,</span><span class="s">&#39;ENTRIES6&#39;</span><span class="p">,</span>
        <span class="s">&#39;EXITS6&#39;</span><span class="p">,</span><span class="s">&#39;DATE7&#39;</span><span class="p">,</span><span class="s">&#39;TIME7&#39;</span><span class="p">,</span><span class="s">&#39;DESC7&#39;</span><span class="p">,</span><span class="s">&#39;ENTRIES7&#39;</span><span class="p">,</span><span class="s">&#39;EXITS7&#39;</span><span class="p">,</span><span class="s">&#39;DATE8&#39;</span><span class="p">,</span>
        <span class="s">&#39;TIME8&#39;</span><span class="p">,</span><span class="s">&#39;DESC8&#39;</span><span class="p">,</span><span class="s">&#39;ENTRIES8&#39;</span><span class="p">,</span><span class="s">&#39;EXITS8&#39;</span><span class="p">]</span>
<span class="n">cols</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">it</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;/&#39;</span><span class="p">,</span><span class="s">&#39;_&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">cols</span><span class="p">]</span>
<span class="n">url</span> <span class="o">=</span> <span class="s">&#39;http://web.mta.info/developers/data/nyct/turnstile/turnstile_141004.txt&#39;</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="n">names</span><span class="o">=</span><span class="n">cols</span><span class="p">)</span>
<span class="n">idx</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="n">p</span><span class="o">.</span><span class="n">unit</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s">&#39;R&#39;</span><span class="p">)</span><span class="o">==</span><span class="bp">False</span><span class="p">]</span><span class="o">.</span><span class="n">index</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">idx</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="c"># ts_key = pd.read_excel(&#39;http://web.mta.info/developers/resources/nyct/turnstile/Remote-Booth-Station.xls&#39;)</span>
<span class="c"># ts_key.columns = [str(it).lower().replace(&#39; &#39;,&#39;_&#39;) for it in ts_key.columns.tolist()]</span>

<span class="n">dropCols</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">cols</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">it</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;exit&#39;</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span> <span class="ow">or</span> <span class="n">it</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;entries&#39;</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
        <span class="n">p</span><span class="p">[</span><span class="n">it</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="n">it</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">it</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;date&#39;</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
        <span class="n">date_pt</span><span class="p">,</span><span class="n">time_pt</span><span class="p">,</span><span class="n">datetime_pt</span> <span class="o">=</span> <span class="n">it</span><span class="p">,</span><span class="s">&#39;time&#39;</span><span class="o">+</span><span class="n">it</span><span class="p">[</span><span class="mi">4</span><span class="p">:],</span><span class="s">&#39;datetime&#39;</span><span class="o">+</span><span class="n">it</span><span class="p">[</span><span class="mi">4</span><span class="p">:]</span>
        <span class="n">p</span><span class="p">[</span><span class="n">datetime_pt</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="n">date_pt</span><span class="p">]</span> <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span> <span class="n">p</span><span class="p">[</span><span class="n">time_pt</span><span class="p">],</span><span class="n">format</span><span class="o">=</span><span class="s">&#39;%m-</span><span class="si">%d</span><span class="s">-%y %H:%M:%S&#39;</span><span class="p">,</span><span class="nb">coerce</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="n">p</span><span class="p">[</span><span class="n">datetime_pt</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="n">datetime_pt</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="bp">None</span> <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">==</span><span class="s">&#39;NaT&#39;</span> <span class="k">else</span> <span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
        <span class="n">dropCols</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">date_pt</span><span class="p">,</span><span class="n">time_pt</span><span class="p">])</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">dropCols</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">cols</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

<span class="c"># END GOAL conform &#39;station_names&#39; to &#39;mn_stations&#39;</span>
<span class="n">mn_stations</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s">&quot;&quot;&quot;select * from sub_stat_entr&quot;&quot;&quot;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>

<span class="c"># Limit NYC key to MN</span>
<span class="n">mn_div_list</span> <span class="o">=</span> <span class="n">mn_stations</span><span class="o">.</span><span class="n">division</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="n">ts_key</span> <span class="o">=</span> <span class="n">ts_key</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">ts_key</span><span class="p">[</span><span class="n">ts_key</span><span class="o">.</span><span class="n">division</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">mn_div_list</span><span class="p">)</span><span class="o">==</span><span class="bp">False</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="c"># Create and Sort Route List for each station</span>
<span class="n">mn_cols</span> <span class="o">=</span> <span class="n">mn_stations</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="n">s_pt</span><span class="p">,</span><span class="n">e_pt</span> <span class="o">=</span> <span class="n">mn_cols</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s">&#39;route_1&#39;</span><span class="p">),</span><span class="n">mn_cols</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s">&#39;route_11&#39;</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span>
<span class="n">mn_stations</span><span class="p">[</span><span class="s">&#39;all_lines&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mn_stations</span><span class="o">.</span><span class="n">ix</span><span class="p">[:,</span><span class="n">s_pt</span><span class="p">:</span><span class="n">e_pt</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">it</span><span class="p">)</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">s</span> <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">it</span><span class="p">)</span><span class="o">!=</span><span class="s">&#39;NaN&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;nan&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;.0&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">),</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">mn_stations</span><span class="p">[</span><span class="s">&#39;all_lines&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mn_stations</span><span class="o">.</span><span class="n">all_lines</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">s</span><span class="p">)))</span>
<span class="c"># ts_key[&#39;line_name&#39;] = ts_key[&#39;line_name&#39;].map(lambda s: &#39;&#39;.join(sorted([str(it) for it in s])) if type(s)!=int else str(s))</span>

<span class="c"># clean up many but small differences between station names</span>
<span class="n">mn_stations</span><span class="p">[</span><span class="s">&#39;clean&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mn_stations</span><span class="o">.</span><span class="n">station_name</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
<span class="c"># ts_key[&#39;clean&#39;] = ts_key.station.map(lambda s: s.lower())</span>
<span class="n">repl_dict</span> <span class="o">=</span> <span class="p">{</span>   <span class="s">r&#39;(1st|first)&#39;</span>          <span class="p">:</span><span class="s">r&#39;1&#39;</span><span class="p">,</span>
                <span class="s">r&#39;(2nd|second)&#39;</span>         <span class="p">:</span><span class="s">r&#39;2&#39;</span><span class="p">,</span>
                <span class="s">r&#39;(3rd|third)&#39;</span>          <span class="p">:</span><span class="s">r&#39;3&#39;</span><span class="p">,</span>
                <span class="s">r&#39;(4th|fourth)&#39;</span>         <span class="p">:</span><span class="s">r&#39;4&#39;</span><span class="p">,</span>
                <span class="s">r&#39;(5th|fifth)&#39;</span>          <span class="p">:</span><span class="s">r&#39;5&#39;</span><span class="p">,</span>
                <span class="s">r&#39;(6th|sixth)&#39;</span>          <span class="p">:</span><span class="s">r&#39;6&#39;</span><span class="p">,</span>
                <span class="s">r&#39;(7th|seventh)&#39;</span>        <span class="p">:</span><span class="s">r&#39;7&#39;</span><span class="p">,</span>
                <span class="s">r&#39;(8th|eigth)&#39;</span>          <span class="p">:</span><span class="s">r&#39;8&#39;</span><span class="p">,</span>
                <span class="s">r&#39;(9th|nineth|ninth)&#39;</span>   <span class="p">:</span><span class="s">r&#39;9&#39;</span><span class="p">,</span>
                <span class="s">r&#39;(0th)&#39;</span>                <span class="p">:</span><span class="s">r&#39;0&#39;</span><span class="p">,</span>
                <span class="s">r&#39;(1th)&#39;</span>                <span class="p">:</span><span class="s">r&#39;1&#39;</span><span class="p">,</span>
                <span class="s">r&#39;(2th)&#39;</span>                <span class="p">:</span><span class="s">r&#39;2&#39;</span><span class="p">,</span>
                <span class="s">r&#39;(3th)&#39;</span>                <span class="p">:</span><span class="s">r&#39;3&#39;</span><span class="p">,</span>
                <span class="s">r&#39;\s(street)&#39;</span>           <span class="p">:</span><span class="s">r&#39; st&#39;</span><span class="p">,</span>
                <span class="s">r&#39;\s(square)&#39;</span>           <span class="p">:</span><span class="s">r&#39; sq&#39;</span><span class="p">,</span>
                <span class="s">r&#39;\s(center)&#39;</span>           <span class="p">:</span><span class="s">r&#39; ctr&#39;</span><span class="p">,</span>
                <span class="s">r&#39;\s(av)&#39;</span><span class="p">:</span><span class="s">r&#39; ave&#39;</span><span class="p">}</span>
<span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">repl_dict</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
    <span class="n">mn_stations</span><span class="p">[</span><span class="s">&#39;clean&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mn_stations</span><span class="o">.</span><span class="n">clean</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="n">v</span><span class="p">)</span>
    
<span class="n">repl_dict</span> <span class="o">=</span> <span class="p">{</span>   <span class="s">r&#39;\Aunion sq&#39;</span><span class="p">:</span><span class="s">r&#39;14 st-union sq&#39;</span><span class="p">,</span>
                <span class="s">r&#39;cathedral parkway-110 st&#39;</span><span class="p">:</span><span class="s">r&#39;110 st-cathedrl&#39;</span><span class="p">,</span>
                <span class="s">r&#39;163 st - amsterdam ave&#39;</span><span class="p">:</span><span class="s">r&#39;163 st-amsterdm&#39;</span><span class="p">,</span>
                <span class="s">r&#39;81 st - museum of natural history&#39;</span><span class="p">:</span><span class="s">r&#39;81 st-museum&#39;</span><span class="p">,</span>
                <span class="s">r&#39;47-50 sts rockefeller ctr&#39;</span><span class="p">:</span><span class="s">r&#39;47-50 st-rock&#39;</span><span class="p">,</span>
                <span class="s">r&#39;137 st-city college&#39;</span><span class="p">:</span><span class="s">r&#39;137 st-city col&#39;</span><span class="p">,</span>
                <span class="s">r&#39;broadway-lafayette st&#39;</span><span class="p">:</span><span class="s">r&#39;broadway/lafay&#39;</span><span class="p">,</span>
                <span class="s">r&#39;west 4 st&#39;</span><span class="p">:</span><span class="s">r&#39;w 4 st-wash sq&#39;</span> <span class="p">,</span>
                <span class="s">r&#39;110 st-central park north&#39;</span><span class="p">:</span><span class="s">r&#39;110 st-cpn&#39;</span><span class="p">,</span>
                <span class="s">r&#39;116 st-columbia university&#39;</span><span class="p">:</span><span class="s">r&#39;116 st-columbia&#39;</span><span class="p">,</span>
                <span class="s">r&#39;168 st - washington heights&#39;</span><span class="p">:</span><span class="s">r&#39;168 st-broadway&#39;</span><span class="p">,</span>
<span class="c">#                 r&#39;168 st-broadway - washington heights&#39;:r&#39;168 st-broadway&#39;,</span>
                <span class="s">r&#39;49 st&#39;</span><span class="p">:</span><span class="s">r&#39;49 st-7 ave&#39;</span><span class="p">,</span>
                <span class="s">r&#39;168 st\Z&#39;</span><span class="p">:</span><span class="s">r&#39;168 st-broadway&#39;</span><span class="p">,</span>
                <span class="s">r&#39;59 st-columbus circle&#39;</span><span class="p">:</span><span class="s">r&#39;59 st-columbus&#39;</span><span class="p">,</span>
                <span class="s">r&#39;66 st-lincoln ctr&#39;</span><span class="p">:</span><span class="s">r&#39;66 st-lincoln&#39;</span><span class="p">,</span>
                <span class="s">r&#39;68 st-hunter college&#39;</span><span class="p">:</span><span class="s">r&#39;68st-hunter col&#39;</span><span class="p">,</span>
                <span class="c"># r&#39;astor pl&#39;:&#39;astor place&#39;,</span>
                <span class="s">r&#39;brooklyn bridge-city hall&#39;</span><span class="p">:</span><span class="s">r&#39;brooklyn bridge&#39;</span><span class="p">,</span>
                <span class="s">r&#39;dyckman st-200 st&#39;</span><span class="p">:</span><span class="s">r&#39;dyckman-200 st&#39;</span><span class="p">,</span>
                <span class="s">r&#39;grand central-42 st&#39;</span><span class="p">:</span><span class="s">r&#39;42 st-grd cntrl&#39;</span><span class="p">,</span>
                <span class="s">r&#39;inwood - 207 st&#39;</span><span class="p">:</span><span class="s">r&#39;inwood-207 st&#39;</span><span class="p">,</span>
                <span class="s">r&#39;lexington av-53 st&#39;</span><span class="p">:</span><span class="s">r&#39;lexington-53 st&#39;</span><span class="p">,</span>
                <span class="s">r&#39;prince st&#39;</span><span class="p">:</span><span class="s">r&quot;prince st-b&#39;way&quot;</span><span class="p">,</span>
                <span class="s">r&#39;\Atimes sq\Z&#39;</span><span class="p">:</span><span class="s">r&#39;42 st-times sq&#39;</span><span class="p">,</span>
                <span class="s">r&#39;times sq-42 st&#39;</span><span class="p">:</span><span class="s">r&#39;42 st-times sq&#39;</span><span class="p">,</span>
                <span class="s">r&#39;van cortlandt park-242 st&#39;</span><span class="p">:</span><span class="s">r&#39;242 st&#39;</span><span class="p">,</span>
                <span class="s">r&#39;marble hill-225 st&#39;</span><span class="p">:</span><span class="s">r&#39;225 st&#39;</span><span class="p">,</span>
                <span class="s">r&#39;lexington ave-53 st&#39;</span><span class="p">:</span><span class="s">r&#39;lexington-53 st&#39;</span><span class="p">,</span>
                <span class="s">r&#39;harlem-148 st&#39;</span><span class="p">:</span><span class="s">r&#39;148 st-lenox&#39;</span><span class="p">,</span>
                <span class="s">r&#39;\Agrand central\Z&#39;</span><span class="p">:</span><span class="s">r&#39;42 st-grd cntrl&#39;</span><span class="p">,</span>
                <span class="s">r&#39;\Acanal st (ul)\Z&#39;</span><span class="p">:</span><span class="s">r&#39;canal st&#39;</span><span class="p">,}</span>
<span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">repl_dict</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
    <span class="n">mn_stations</span><span class="p">[</span><span class="s">&#39;clean&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mn_stations</span><span class="o">.</span><span class="n">clean</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="n">v</span><span class="p">)</span>

<span class="n">station_names</span> <span class="o">=</span> <span class="n">ts_key</span><span class="o">.</span><span class="n">clean</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="c">#print len(mn_stations[mn_stations.clean.isin(station_names)==False]), &#39;stations not mapped&#39;</span>
<span class="c"># mn_stations[mn_stations.clean.isin(station_names)==False].ix[:,[&#39;division&#39;,&#39;line&#39;,&#39;station_name&#39;,&#39;all_lines&#39;,&#39;clean&#39;]].sort(&#39;clean&#39;)</span>
<span class="c"># mn_stations.head()</span>

<span class="c"># push to [ sub_stat_entr,ts_key,p(turn stiles) ] to pgsql for comparison and unificiation</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;drop table if exists sub_stat_entr&#39;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;drop table if exists ts_key&#39;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;drop table if exists sub_turn_stiles&#39;</span><span class="p">)</span>
<span class="n">delay</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="n">mn_stations</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s">&#39;id&#39;</span><span class="p">,</span><span class="s">&#39;index&#39;</span><span class="p">],</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s">&#39;sub_stat_entr&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">    alter table sub_stat_entr add column id serial;</span>
<span class="s">    update sub_stat_entr set index = nextval(pg_get_serial_sequence(&#39;sub_stat_entr&#39;,&#39;id&#39;));</span>
<span class="s">    alter table sub_stat_entr add primary key (id);</span>
<span class="s">    &quot;&quot;&quot;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;UPDATE sub_stat_entr set geom = ST_SetSRID(ST_MakePoint(station_longitude,station_latitude),4326)&quot;&quot;&quot;</span><span class="p">)</span>

<span class="c"># ts_key.to_sql(&#39;ts_key&#39;,engine)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">    alter table ts_key add column lat double precision;</span>
<span class="s">    alter table ts_key add column lon double precision;</span>
<span class="s">    alter table ts_key add column id serial;</span>
<span class="s">    update ts_key set index = nextval(pg_get_serial_sequence(&#39;ts_key&#39;,&#39;id&#39;));</span>
<span class="s">    alter table ts_key add primary key (id);</span>
<span class="s">    &quot;&quot;&quot;</span><span class="p">)</span>

<span class="n">p</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s">&#39;sub_turn_stiles&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">    alter table sub_turn_stiles add column station text;</span>
<span class="s">    alter table sub_turn_stiles add column lat double precision;</span>
<span class="s">    alter table sub_turn_stiles add column lon double precision;</span>
<span class="s">    alter table sub_turn_stiles add column id serial;</span>
<span class="s">    update sub_turn_stiles set index = nextval(pg_get_serial_sequence(&#39;sub_turn_stiles&#39;,&#39;id&#39;));</span>
<span class="s">    alter table sub_turn_stiles add primary key (id);</span>
<span class="s">    &quot;&quot;&quot;</span><span class="p">)</span>

<span class="c"># 1. Copy coords from station_entrances to turnstile_key</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">                UPDATE ts_key t</span>
<span class="s">                SET lat = s.station_latitude,lon = s.station_longitude</span>
<span class="s">                FROM sub_stat_entr s</span>
<span class="s">                WHERE s.clean=t.clean</span>
<span class="s">                AND s.all_lines=t.line_name;</span>
<span class="s">                &quot;&quot;&quot;</span><span class="p">)</span>
<span class="c">#print pd.read_sql(&#39;select count(*) c from ts_key where lon is null&#39;,engine).c[0],&#39;null&#39;</span>
<span class="c">#print pd.read_sql(&#39;select count(*) c from ts_key where lon is not null&#39;,engine).c[0],&#39;not null&#39;</span>

<span class="c"># 2. Copy matching ts_key table data to turn_stiles table</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">                UPDATE sub_turn_stiles</span>
<span class="s">                SET lat = t.lat,lon=t.lon,station=t.station</span>
<span class="s">                FROM ts_key t</span>
<span class="s">                WHERE t.remote = unit</span>
<span class="s">                AND t.booth = c_a;</span>
<span class="s">                &quot;&quot;&quot;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;alter table sub_turn_stiles add column geom geometry(Point,4326)&#39;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;UPDATE sub_turn_stiles set geom = ST_SetSRID(ST_MakePoint(lon,lat),4326)&quot;&quot;&quot;</span><span class="p">)</span>

<span class="c"># 3. Attempt to match leftovers (non-matching) b/t ts_key/sub_stat_entr using wildcards</span>
<span class="n">leftovers</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s">&quot;select * from ts_key where lon is null and division = any(array[&#39;IRT&#39;,&#39;IND&#39;,&#39;BMT&#39;])&quot;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">leftovers</span><span class="p">)):</span>
    <span class="n">row</span> <span class="o">=</span> <span class="n">leftovers</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">i</span><span class="p">,:]</span>
    <span class="n">chk</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s">&#39;clean&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;-&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">chk</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
        <span class="n">a</span><span class="p">,</span><span class="n">b</span> <span class="o">=</span> <span class="s">&#39;</span><span class="si">%%</span><span class="s">&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s">&#39;clean&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;-&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span><span class="o">+</span><span class="s">&#39;</span><span class="si">%%</span><span class="s">&#39;</span><span class="p">,</span><span class="n">row</span><span class="p">[</span><span class="s">&#39;line_name&#39;</span><span class="p">]</span>
        <span class="n">tmp</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span>  <span class="s">&quot;&quot;&quot; </span>
<span class="s">                            SELECT station_latitude lat,station_longitude lon</span>
<span class="s">                            FROM sub_stat_entr s</span>
<span class="s">                            WHERE s.clean ilike &#39;</span><span class="si">%s</span><span class="s">&#39;</span>
<span class="s">                            AND s.all_lines=&#39;</span><span class="si">%s</span><span class="s">&#39;;</span>
<span class="s">                            &quot;&quot;&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">),</span><span class="n">engine</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">tmp</span><span class="o">.</span><span class="n">lat</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span><span class="o">==</span><span class="nb">len</span><span class="p">(</span><span class="n">tmp</span><span class="o">.</span><span class="n">lat</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span><span class="o">==</span><span class="mi">1</span><span class="p">):</span>
            <span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span> <span class="o">=</span> <span class="n">tmp</span><span class="o">.</span><span class="n">lat</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">tmp</span><span class="o">.</span><span class="n">lon</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">row</span><span class="p">[</span><span class="s">&#39;id&#39;</span><span class="p">]</span>
            <span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">                                UPDATE ts_key set lat=</span><span class="si">%f</span><span class="s">,lon=</span><span class="si">%f</span><span class="s"></span>
<span class="s">                                WHERE id = </span><span class="si">%d</span><span class="s"></span>
<span class="s">                            &quot;&quot;&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">),</span><span class="n">engine</span><span class="p">)</span>
            
<span class="c"># 4. Attempt to match leftover by:</span>
        <span class="c"># starting with lines,division, </span>
            <span class="c"># if one result go with it, </span>
            <span class="c"># else if only one result and it&#39;s a partial match, go with it?</span>
<span class="n">leftovers</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s">&quot;select * from ts_key where lon is null and division = any(array[&#39;IRT&#39;,&#39;IND&#39;,&#39;BMT&#39;])&quot;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">leftovers</span><span class="p">)):</span>
    <span class="n">row</span> <span class="o">=</span> <span class="n">leftovers</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">i</span><span class="p">,:]</span>
    <span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span> <span class="o">=</span> <span class="s">&#39;</span><span class="si">%%</span><span class="s">&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s">&#39;clean&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;-&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span><span class="o">+</span><span class="s">&#39;</span><span class="si">%%</span><span class="s">&#39;</span><span class="p">,</span><span class="n">row</span><span class="p">[</span><span class="s">&#39;line_name&#39;</span><span class="p">],</span><span class="n">row</span><span class="p">[</span><span class="s">&#39;division&#39;</span><span class="p">]</span>
    <span class="n">tmp</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span>  <span class="s">&quot;&quot;&quot; </span>
<span class="s">                        SELECT station_latitude lat,station_longitude lon,clean</span>
<span class="s">                        FROM sub_stat_entr s</span>
<span class="s">                        WHERE s.division=&#39;</span><span class="si">%s</span><span class="s">&#39;</span>
<span class="s">                        AND s.all_lines=&#39;</span><span class="si">%s</span><span class="s">&#39;;</span>
<span class="s">                        &quot;&quot;&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="n">b</span><span class="p">),</span><span class="n">engine</span><span class="p">)</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">tmp</span><span class="o">.</span><span class="n">lat</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span><span class="o">==</span><span class="nb">len</span><span class="p">(</span><span class="n">tmp</span><span class="o">.</span><span class="n">lat</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span><span class="o">==</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span> <span class="o">=</span> <span class="n">tmp</span><span class="o">.</span><span class="n">lat</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">tmp</span><span class="o">.</span><span class="n">lon</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">row</span><span class="p">[</span><span class="s">&#39;id&#39;</span><span class="p">]</span>
        <span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">                            UPDATE ts_key set lat=</span><span class="si">%f</span><span class="s">,lon=</span><span class="si">%f</span><span class="s"></span>
<span class="s">                            WHERE id = </span><span class="si">%d</span><span class="s"></span>
<span class="s">                        &quot;&quot;&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">),</span><span class="n">engine</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">z</span><span class="o">=</span><span class="n">tmp</span><span class="p">[</span><span class="n">tmp</span><span class="o">.</span><span class="n">clean</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">a</span><span class="p">)]</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">z</span><span class="o">.</span><span class="n">lat</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span><span class="o">==</span><span class="nb">len</span><span class="p">(</span><span class="n">z</span><span class="o">.</span><span class="n">lat</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span><span class="o">==</span><span class="mi">1</span><span class="p">):</span>
            <span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span> <span class="o">=</span> <span class="n">tmp</span><span class="o">.</span><span class="n">lat</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">tmp</span><span class="o">.</span><span class="n">lon</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">row</span><span class="p">[</span><span class="s">&#39;id&#39;</span><span class="p">]</span>
            <span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">                                UPDATE ts_key set lat=</span><span class="si">%f</span><span class="s">,lon=</span><span class="si">%f</span><span class="s"></span>
<span class="s">                                WHERE id = </span><span class="si">%d</span><span class="s"></span>
<span class="s">                            &quot;&quot;&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">),</span><span class="n">engine</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># TURN STILE CONT&#39;D convert text to timestamp</span>

<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;  </span>

<span class="s">    DROP TABLE if exists tmp;</span>

<span class="s">    CREATE TABLE tmp (</span>
<span class="s">        gid serial primary key,</span>
<span class="s">        datetime1 timestamp with time zone,</span>
<span class="s">        datetime2 timestamp with time zone,</span>
<span class="s">        datetime3 timestamp with time zone,</span>
<span class="s">        datetime4 timestamp with time zone,</span>
<span class="s">        datetime5 timestamp with time zone,</span>
<span class="s">        datetime6 timestamp with time zone,</span>
<span class="s">        datetime7 timestamp with time zone,</span>
<span class="s">        datetime8 timestamp with time zone</span>
<span class="s">        );</span>

<span class="s">    UPDATE tmp SET gid = nextval(pg_get_serial_sequence(&#39;tmp&#39;,&#39;gid&#39;));</span>

<span class="s">    INSERT INTO tmp (</span>
<span class="s">        datetime1,</span>
<span class="s">        datetime2,</span>
<span class="s">        datetime3,</span>
<span class="s">        datetime4,</span>
<span class="s">        datetime5,</span>
<span class="s">        datetime6,</span>
<span class="s">        datetime7,</span>
<span class="s">        datetime8)</span>
<span class="s">    SELECT </span>
<span class="s">        to_timestamp(s.datetime1,&#39;YYYY-MM-DD HH24:MI:SS&#39;),</span>
<span class="s">        to_timestamp(s.datetime2,&#39;YYYY-MM-DD HH24:MI:SS&#39;),</span>
<span class="s">        to_timestamp(s.datetime3,&#39;YYYY-MM-DD HH24:MI:SS&#39;),</span>
<span class="s">        to_timestamp(s.datetime4,&#39;YYYY-MM-DD HH24:MI:SS&#39;),</span>
<span class="s">        to_timestamp(s.datetime5,&#39;YYYY-MM-DD HH24:MI:SS&#39;),</span>
<span class="s">        to_timestamp(s.datetime6,&#39;YYYY-MM-DD HH24:MI:SS&#39;),</span>
<span class="s">        to_timestamp(s.datetime7,&#39;YYYY-MM-DD HH24:MI:SS&#39;),</span>
<span class="s">        to_timestamp(s.datetime8,&#39;YYYY-MM-DD HH24:MI:SS&#39;)</span>
<span class="s">    FROM sub_turn_stiles s;</span>

<span class="s">    ALTER TABLE sub_turn_stiles </span>
<span class="s">    DROP COLUMN datetime1,</span>
<span class="s">    DROP COLUMN datetime2,</span>
<span class="s">    DROP COLUMN datetime3,</span>
<span class="s">    DROP COLUMN datetime4,</span>
<span class="s">    DROP COLUMN datetime5,</span>
<span class="s">    DROP COLUMN datetime6,</span>
<span class="s">    DROP COLUMN datetime7,</span>
<span class="s">    DROP COLUMN datetime8,</span>
<span class="s">    ADD COLUMN datetime1 timestamp with time zone,</span>
<span class="s">    ADD COLUMN datetime2 timestamp with time zone,</span>
<span class="s">    ADD COLUMN datetime3 timestamp with time zone,</span>
<span class="s">    ADD COLUMN datetime4 timestamp with time zone,</span>
<span class="s">    ADD COLUMN datetime5 timestamp with time zone,</span>
<span class="s">    ADD COLUMN datetime6 timestamp with time zone,</span>
<span class="s">    ADD COLUMN datetime7 timestamp with time zone,</span>
<span class="s">    ADD COLUMN datetime8 timestamp with time zone;</span>

<span class="s">    UPDATE sub_turn_stiles s</span>
<span class="s">    SET </span>
<span class="s">        datetime1 = t.datetime1,</span>
<span class="s">        datetime2 = t.datetime2,</span>
<span class="s">        datetime3 = t.datetime3,</span>
<span class="s">        datetime4 = t.datetime4,</span>
<span class="s">        datetime5 = t.datetime5,</span>
<span class="s">        datetime6 = t.datetime6,</span>
<span class="s">        datetime7 = t.datetime7,</span>
<span class="s">        datetime8 = t.datetime8</span>
<span class="s">    FROM tmp t</span>
<span class="s">    where t.gid = s.id;</span>

<span class="s">               &quot;&quot;&quot;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># TURN STILE CONT&#39;D calc. register differences</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">alter table sub_turn_stiles </span>
<span class="s">add column out1 double precision,</span>
<span class="s">add column out2 double precision,</span>
<span class="s">add column out3 double precision,</span>
<span class="s">add column out4 double precision,</span>
<span class="s">add column out5 double precision,</span>
<span class="s">add column out6 double precision,</span>
<span class="s">add column out7 double precision,</span>
<span class="s">add column in1 double precision,</span>
<span class="s">add column in2 double precision,</span>
<span class="s">add column in3 double precision,</span>
<span class="s">add column in4 double precision,</span>
<span class="s">add column in5 double precision,</span>
<span class="s">add column in6 double precision,</span>
<span class="s">add column in7 double precision;</span>


<span class="s">update sub_turn_stiles</span>
<span class="s">set out1 = exits2-exits1</span>
<span class="s">where exits1 != &#39;NaN&#39;::float</span>
<span class="s">and exits2 != &#39;NaN&#39;::float;</span>

<span class="s">update sub_turn_stiles</span>
<span class="s">set out2 = exits3-exits2</span>
<span class="s">where exits2 != &#39;NaN&#39;::float</span>
<span class="s">and exits3 != &#39;NaN&#39;::float;</span>

<span class="s">update sub_turn_stiles</span>
<span class="s">set out3 = exits4-exits3</span>
<span class="s">where exits3 != &#39;NaN&#39;::float</span>
<span class="s">and exits4 != &#39;NaN&#39;::float;</span>

<span class="s">update sub_turn_stiles</span>
<span class="s">set out4 = exits5-exits4</span>
<span class="s">where exits4 != &#39;NaN&#39;::float</span>
<span class="s">and exits5 != &#39;NaN&#39;::float;</span>

<span class="s">update sub_turn_stiles</span>
<span class="s">set out5 = exits6-exits5</span>
<span class="s">where exits5 != &#39;NaN&#39;::float</span>
<span class="s">and exits6 != &#39;NaN&#39;::float;</span>

<span class="s">update sub_turn_stiles</span>
<span class="s">set out6 = exits7-exits6</span>
<span class="s">where exits6 != &#39;NaN&#39;::float</span>
<span class="s">and exits7 != &#39;NaN&#39;::float;</span>

<span class="s">update sub_turn_stiles</span>
<span class="s">set out7 = exits8-exits7</span>
<span class="s">where exits7 != &#39;NaN&#39;::float</span>
<span class="s">and exits8 != &#39;NaN&#39;::float;</span>


<span class="s">update sub_turn_stiles</span>
<span class="s">set in1 = entries2-entries1</span>
<span class="s">where entries1 != &#39;NaN&#39;::float</span>
<span class="s">and entries2 != &#39;NaN&#39;::float;</span>

<span class="s">update sub_turn_stiles</span>
<span class="s">set in2 = entries3-entries2</span>
<span class="s">where entries2 != &#39;NaN&#39;::float</span>
<span class="s">and entries3 != &#39;NaN&#39;::float;</span>

<span class="s">update sub_turn_stiles</span>
<span class="s">set in3 = entries4-entries3</span>
<span class="s">where entries3 != &#39;NaN&#39;::float</span>
<span class="s">and entries4 != &#39;NaN&#39;::float;</span>

<span class="s">update sub_turn_stiles</span>
<span class="s">set in4 = entries5-entries4</span>
<span class="s">where entries4 != &#39;NaN&#39;::float</span>
<span class="s">and entries5 != &#39;NaN&#39;::float;</span>

<span class="s">update sub_turn_stiles</span>
<span class="s">set in5 = entries6-entries5</span>
<span class="s">where entries5 != &#39;NaN&#39;::float</span>
<span class="s">and entries6 != &#39;NaN&#39;::float;</span>

<span class="s">update sub_turn_stiles</span>
<span class="s">set in6 = entries7-entries6</span>
<span class="s">where entries6 != &#39;NaN&#39;::float</span>
<span class="s">and entries7 != &#39;NaN&#39;::float;</span>

<span class="s">update sub_turn_stiles</span>
<span class="s">set in7 = entries8-entries7</span>
<span class="s">where entries7 != &#39;NaN&#39;::float</span>
<span class="s">and entries8 != &#39;NaN&#39;::float;</span>


<span class="s">alter table sub_turn_stiles </span>
<span class="s">    add column in_all double precision,</span>
<span class="s">    add column out_all double precision;</span>
<span class="s">update sub_turn_stiles</span>
<span class="s">set in_all = (select sum(s) from unnest(array[in1,in2,in3,in4,in5,in6,in7]) s);</span>
<span class="s">update sub_turn_stiles</span>
<span class="s">set out_all = (select sum(s) from unnest(array[out1,out2,out3,out4,out5,out6,out7]) s);</span>
<span class="s">&quot;&quot;&quot;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># NEED to consolidate turn_stile data</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># turn_stile data with missing station name -- SMALL ADJUSTMENTS NEEDED</span>
<span class="n">cmd</span><span class="o">=</span><span class="s">&quot;&quot;&quot; select distinct unit,c_a from sub_turn_stiles </span>
<span class="s">        where station is null order by unit;&quot;&quot;&quot;</span>
<span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># turn_stile data analysis:</span>

<span class="c"># general data used herein</span>
<span class="n">datetime_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;datetime&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">9</span><span class="p">)]</span>
<span class="n">desc_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;desc&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">9</span><span class="p">)]</span>
<span class="n">entry_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;entries&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">9</span><span class="p">)]</span>
<span class="n">exit_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;exits&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">9</span><span class="p">)]</span>
<span class="n">in_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;in&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">9</span><span class="p">)]</span>
<span class="n">out_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;out&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">9</span><span class="p">)]</span>
<span class="n">agg_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;in_all&#39;</span><span class="p">,</span><span class="s">&#39;out_all&#39;</span><span class="p">]</span>
<span class="n">other_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;index&#39;</span><span class="p">,</span><span class="s">&#39;lat&#39;</span><span class="p">,</span><span class="s">&#39;lon&#39;</span><span class="p">,</span><span class="s">&#39;id&#39;</span><span class="p">,</span><span class="s">&#39;geom&#39;</span><span class="p">]</span>

<span class="c"># 1. this shows there are multiple entries per station, i.e., multiple turn stiles</span>
<span class="n">cmd</span> <span class="o">=</span>   <span class="s">&quot;&quot;&quot;</span>
<span class="s">        select * from sub_turn_stiles </span>
<span class="s">        where out_all is not null</span>
<span class="s">        and station = &#39;34 ST-HERALD SQ&#39;</span>
<span class="s">        AND extract(hour from datetime1) = 4</span>
<span class="s">        AND extract(day from datetime1) = 29</span>
<span class="s">        order by out_all desc;</span>
<span class="s">        &quot;&quot;&quot;</span>

<span class="c"># 2. this shows there are multiple rows even when {c_a,unit,scp,datetime1} are same</span>
<span class="n">cmd</span> <span class="o">=</span>   <span class="s">&quot;&quot;&quot;</span>
<span class="s">        select * from sub_turn_stiles </span>
<span class="s">        where out_all is not null</span>
<span class="s">        and station = &#39;34 ST-HERALD SQ&#39;</span>
<span class="s">        AND scp = &#39;00-00-00&#39;</span>
<span class="s">        order by c_a,unit,datetime1 asc;</span>
<span class="s">        &quot;&quot;&quot;</span>
<span class="n">dropCols</span> <span class="o">=</span> <span class="n">desc_cols</span> <span class="o">+</span> <span class="n">entry_cols</span> <span class="o">+</span> <span class="n">exit_cols</span> <span class="o">+</span> <span class="n">in_cols</span> <span class="o">+</span> <span class="n">out_cols</span> <span class="o">+</span> <span class="n">other_cols</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># 3. this shows the door is open for people leaving during rush hour... (see datetime6-7)</span>
<span class="c">#        and possibly explains why multiple rows</span>
<span class="n">cmd</span> <span class="o">=</span>   <span class="s">&quot;&quot;&quot;</span>
<span class="s">        select * from sub_turn_stiles </span>
<span class="s">        where out_all is not null</span>
<span class="s">        and station = &#39;34 ST-HERALD SQ&#39;</span>
<span class="s">        AND scp = &#39;00-00-00&#39;</span>
<span class="s">        AND datetime1 = &#39;2014-09-28 09:00:00-04:00&#39;;</span>
<span class="s">        &quot;&quot;&quot;</span>
<span class="c"># dropCols = desc_cols + entry_cols + exit_cols + in_cols + out_cols + other_cols</span>
<span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span><span class="c">#.drop(dropCols,axis=1)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="TODO:">TODO:<a class="anchor-link" href="#TODO:">&#182;</a></h1>
</div>
</div>
</div>

<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Turn-Stile-Data:">Turn Stile Data:<a class="anchor-link" href="#Turn-Stile-Data:">&#182;</a></h2>
</div>
</div>
</div>

<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="GOAL----For-Dates-A-to-B-and-Times-C-to-D,-how-many-people-per-station?">GOAL -- For Dates A to B and Times C to D, how many people per station?<a class="anchor-link" href="#GOAL----For-Dates-A-to-B-and-Times-C-to-D,-how-many-people-per-station?">&#182;</a></h3>
</div>
</div>
</div>

<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ol>
<li><p>consolidate scp's per remote/booth</p>
<p> Thoughts:</p>

<pre><code> - each scp has its own range of timestamps and register values
 - some scp.s have multiple datasets for same time period
 - timestamps exists for all times of the day

</code></pre>
<p> Method:</p>

<pre><code> - create new table with:
     - date column
     - 24 columns for each hour filled with register-change values
         - need 24 or just use single time col?
     - index # from sub_turn_stiles</code></pre>
</li>
</ol>
<ol>
<li>consolidate remote/booth per station</li>
</ol>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="o">%%</span><span class="k">sql</span> <span class="n">postgres</span><span class="nd">@routing</span>
<span class="n">select</span> <span class="n">distinct</span> <span class="n">extract</span><span class="p">(</span><span class="n">hour</span> <span class="kn">from</span> <span class="nn">datetime1</span><span class="p">)</span> <span class="n">s</span>
<span class="kn">from</span> <span class="nn">sub_turn_stiles</span>
<span class="n">order</span> <span class="n">by</span> <span class="n">s</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[1]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### Using PostgresSQL Server [ db1.public.routing ]:</span>

<span class="kn">from</span> <span class="nn">sys</span> <span class="kn">import</span> <span class="n">path</span> <span class="k">as</span> <span class="n">sys_path</span>
<span class="n">sys_path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;/Users/admin/SERVER2/BD_Scripts/geolocation&#39;</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">re</span> <span class="kn">import</span> <span class="n">search</span> <span class="k">as</span> <span class="n">re_search</span>  <span class="c"># re_search(&#39;pattern&#39;,&#39;string&#39;)</span>
<span class="kn">from</span> <span class="nn">re</span> <span class="kn">import</span> <span class="n">sub</span> <span class="k">as</span> <span class="n">re_sub</span>        <span class="c"># re_sub   (&#39;pattern&#39;,&#39;repl&#39; ,&#39;string&#39;,&#39;count&#39;)</span>

<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s">&#39;expand_frame_repr&#39;</span><span class="p">,</span><span class="bp">False</span><span class="p">)</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s">&#39;display.max_columns&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s">&#39;display.max_rows&#39;</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s">&#39;display.width&#39;</span><span class="p">,</span><span class="mi">180</span><span class="p">)</span>
<span class="n">np</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">np</span>
<span class="n">np</span><span class="o">.</span><span class="n">set_printoptions</span><span class="p">(</span><span class="n">linewidth</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span><span class="n">threshold</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span>
<span class="kn">import</span> <span class="nn">geopandas</span> <span class="kn">as</span> <span class="nn">gd</span>
<span class="kn">from</span> <span class="nn">types</span> <span class="kn">import</span> <span class="n">NoneType</span>
<span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">sleep</span> <span class="k">as</span> <span class="n">delay</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span>
<span class="kn">from</span> <span class="nn">logging</span> <span class="kn">import</span> <span class="n">getLogger</span>
<span class="kn">from</span> <span class="nn">logging</span> <span class="kn">import</span> <span class="n">INFO</span> <span class="k">as</span> <span class="n">logging_info</span>
<span class="n">getLogger</span><span class="p">(</span><span class="s">&#39;sqlalchemy.dialects.postgresql&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging_info</span><span class="p">)</span>

<span class="c"># engine = create_engine(r&#39;postgresql://postgres:postgres@localhost:8800/routing&#39;,</span>
<span class="c">#                        encoding=&#39;utf-8&#39;,</span>
<span class="c">#                        echo=False)</span>
<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s">r&#39;postgresql://postgres:postgres@192.168.3.52:8800/routing&#39;</span><span class="p">,</span>
                       <span class="n">encoding</span><span class="o">=</span><span class="s">&#39;utf-8&#39;</span><span class="p">,</span>
                       <span class="n">echo</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

<span class="o">%</span><span class="k">load_ext</span> <span class="n">sql</span>
<span class="c"># %sql postgresql://postgres:postgres@localhost/routing</span>
<span class="o">%</span><span class="k">sql</span> <span class="n">postgresql</span><span class="p">:</span><span class="o">//</span><span class="n">postgres</span><span class="p">:</span><span class="n">postgres</span><span class="nd">@192.168.3.52</span><span class="p">:</span><span class="mi">8800</span><span class="o">/</span><span class="n">routing</span>
<span class="n">a</span><span class="o">=</span><span class="mi">0</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">
    Out[1]:</div>


<div class="output_text output_subarea output_pyout">
<pre>u&apos;Connected: postgres@routing&apos;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### add restaurant data</span>
<span class="kn">import</span> <span class="nn">requests</span><span class="o">,</span> <span class="nn">zipfile</span><span class="o">,</span> <span class="nn">StringIO</span>
<span class="kn">from</span> <span class="nn">f_postgres</span> <span class="kn">import</span> <span class="n">geoparse</span>
<span class="n">z</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;https://data.cityofnewyork.us/download/4vkw-7nck/ZIP&#39;</span><span class="p">)</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">zipfile</span><span class="o">.</span><span class="n">ZipFile</span><span class="p">(</span><span class="n">StringIO</span><span class="o">.</span><span class="n">StringIO</span><span class="p">(</span><span class="n">z</span><span class="o">.</span><span class="n">content</span><span class="p">))</span>
<span class="n">v</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s">&#39;WebExtract.txt&#39;</span><span class="p">))</span>
<span class="n">v</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span> <span class="nb">str</span><span class="p">(</span><span class="n">it</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">v</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span> <span class="p">]</span>

<span class="n">m</span> <span class="o">=</span> <span class="n">v</span><span class="p">[</span><span class="n">v</span><span class="o">.</span><span class="n">boro</span><span class="o">==</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">m</span><span class="p">[</span><span class="s">&#39;inspdate&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">inspdate</span><span class="p">)</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s">&#39;inspdate&#39;</span><span class="p">,</span><span class="n">ascending</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">z</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s">&#39;camis&#39;</span><span class="p">)</span>
<span class="n">grps</span> <span class="o">=</span> <span class="n">z</span><span class="o">.</span><span class="n">groups</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="n">takeCols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;dba&#39;</span><span class="p">,</span><span class="s">&#39;cuisinecode&#39;</span><span class="p">,</span><span class="s">&#39;building&#39;</span><span class="p">,</span><span class="s">&#39;street&#39;</span><span class="p">,</span><span class="s">&#39;zipcode&#39;</span><span class="p">,</span><span class="s">&#39;phone&#39;</span><span class="p">,</span><span class="s">&#39;inspdate&#39;</span><span class="p">]</span> <span class="c"># and &#39;camis&#39; which is the grps[i]</span>
<span class="n">mv</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;camis&#39;</span><span class="p">]</span><span class="o">+</span><span class="n">takeCols</span><span class="p">)</span>
<span class="n">g_cnt</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">grps</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">g_cnt</span><span class="p">):</span>
    <span class="n">vend_id</span> <span class="o">=</span> <span class="n">grps</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">z</span><span class="o">.</span><span class="n">get_group</span><span class="p">(</span><span class="n">vend_id</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="n">takeCols</span><span class="p">]</span>
    <span class="n">x</span><span class="p">[</span><span class="s">&#39;camis&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">vend_id</span>
    <span class="n">mv</span> <span class="o">=</span> <span class="n">mv</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="c"># added without testing --&gt;</span>
<span class="n">mv</span><span class="p">[</span><span class="s">&#39;new_phone&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mv</span><span class="o">.</span><span class="n">phone</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">it</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">s</span> <span class="k">if</span> <span class="n">it</span><span class="o">.</span><span class="n">isdigit</span><span class="p">())[:</span><span class="mi">10</span><span class="p">])</span>
<span class="n">mv</span><span class="p">[</span><span class="s">&#39;phone&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mv</span><span class="o">.</span><span class="n">new_phone</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">==</span><span class="mi">10</span> <span class="k">else</span> <span class="mi">0</span><span class="p">)</span>
<span class="c"># &lt;--</span>


<span class="n">mv</span> <span class="o">=</span> <span class="n">geoparse</span><span class="p">(</span><span class="n">mv</span><span class="p">,</span><span class="s">&#39;dba&#39;</span><span class="p">,</span><span class="s">&#39;clean_name&#39;</span><span class="p">)</span>
<span class="n">mv</span> <span class="o">=</span> <span class="n">geoparse</span><span class="p">(</span><span class="n">mv</span><span class="p">,</span><span class="s">&#39;street&#39;</span><span class="p">,</span><span class="s">&#39;clean_street&#39;</span><span class="p">)</span>
<span class="n">mv</span><span class="p">[</span><span class="s">&#39;dba&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mv</span><span class="o">.</span><span class="n">dba</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&#39;ascii&#39;</span><span class="p">,</span><span class="s">&#39;ignore&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s">&#39;utf-8&#39;</span><span class="p">,</span><span class="s">&#39;ignore&#39;</span><span class="p">))</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;drop table if exists mn_vendors&#39;</span><span class="p">)</span>
<span class="n">mv</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s">&#39;mn_vendors&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">,</span><span class="n">index</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">    alter table mn_vendors add column id serial;</span>
<span class="s">    update mn_vendors set id = nextval(pg_get_serial_sequence(&#39;mn_vendors&#39;,&#39;id&#39;));</span>
<span class="s">    alter table mn_vendors add primary key (id);</span>
<span class="s">    &quot;&quot;&quot;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;alter table mn_vendors add column recog_street boolean;</span>
<span class="s">                  update mn_vendors set recog_street = False;&quot;&quot;&quot;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;  update mn_vendors set recog_street = True</span>
<span class="s">                    where exists (</span>
<span class="s">                        select 1 from address_idx a</span>
<span class="s">                        where a.street = clean_street</span>
<span class="s">                    )&quot;&quot;&quot;</span><span class="p">)</span>

<span class="c"># convert phone in mn_vendors</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s">&#39;select id,phone from mn_vendors&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
<span class="n">d</span><span class="p">[</span><span class="s">&#39;new_phone&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">phone</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">it</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">s</span> <span class="k">if</span> <span class="n">it</span><span class="o">.</span><span class="n">isdigit</span><span class="p">())[:</span><span class="mi">10</span><span class="p">])</span>
<span class="n">d</span><span class="p">[</span><span class="s">&#39;new_phone2&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">new_phone</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">==</span><span class="mi">10</span> <span class="k">else</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="n">d</span><span class="o">.</span><span class="n">new_phone2</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="bp">True</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">))</span><span class="o">==</span><span class="mi">10</span> <span class="k">else</span> <span class="bp">False</span><span class="p">)</span><span class="o">==</span><span class="bp">False</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">d</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;drop table if exists tmp&#39;</span><span class="p">)</span>
<span class="n">d</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s">&#39;tmp&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>

<span class="s">alter table tmp add column gid serial primary key;</span>
<span class="s">update tmp set gid = nextval(pg_get_serial_sequence(&#39;tmp&#39;,&#39;gid&#39;));</span>

<span class="s">alter table mn_vendors</span>
<span class="s">        drop column if exists phone_tmp;</span>
<span class="s">        </span>
<span class="s">alter table mn_vendors</span>
<span class="s">        add column phone_tmp bigint;</span>
<span class="s">        </span>
<span class="s">update mn_vendors mnv set phone_tmp = null;</span>

<span class="s">update mn_vendors mnv</span>
<span class="s">set phone_tmp = t.new_phone2</span>
<span class="s">from tmp t </span>
<span class="s">where t.id = mnv.id;</span>

<span class="s">alter table mn_vendors</span>
<span class="s">drop column phone;</span>

<span class="s">alter table mn_vendors</span>
<span class="s">rename column phone_tmp to phone;</span>

<span class="s">drop table tmp;</span>
<span class="s">&quot;&quot;&quot;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### add subway entrances to map</span>
<span class="n">url</span> <span class="o">=</span> <span class="s">&#39;http://web.mta.info/developers/data/nyct/subway/StationEntrances.csv&#39;</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="n">s</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">it</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">s</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">tolist</span><span class="p">()]</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;drop table if exists sub_stat_entr&#39;</span><span class="p">)</span>
<span class="n">s</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s">&#39;sub_stat_entr&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;alter table sub_stat_entr add column geom geometry(Point,4326)&#39;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;UPDATE sub_stat_entr set geom = ST_SetSRID(ST_MakePoint(station_longitude,station_latitude),4326)&quot;&quot;&quot;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot; DELETE FROM sub_stat_entr </span>
<span class="s">                WHERE NOT (geom &amp;&amp; (</span>
<span class="s">                    SELECT ST_Buffer(ST_ConvexHull((ST_Collect(f.the_geom))), .0005) as geom </span>
<span class="s">                    FROM ( SELECT *, (ST_Dump(geom)).geom As the_geom </span>
<span class="s">                    FROM pluto) As f))&quot;&quot;&quot;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">    alter table sub_stat_entr add column id serial;</span>
<span class="s">    update sub_stat_entr set index = nextval(pg_get_serial_sequence(&#39;sub_stat_entr&#39;,&#39;id&#39;));</span>
<span class="s">    alter table sub_stat_entr add primary key (id);</span>
<span class="s">    &quot;&quot;&quot;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### add subway stops to map, add turn stile data to subway stops</span>
<span class="kn">import</span> <span class="nn">requests</span><span class="o">,</span> <span class="nn">zipfile</span><span class="o">,</span> <span class="nn">StringIO</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;http://web.mta.info/developers/data/nyct/subway/google_transit.zip&#39;</span><span class="p">)</span>
<span class="n">z</span> <span class="o">=</span> <span class="n">zipfile</span><span class="o">.</span><span class="n">ZipFile</span><span class="p">(</span><span class="n">StringIO</span><span class="o">.</span><span class="n">StringIO</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">content</span><span class="p">))</span>
<span class="n">sub_stops</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">z</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s">&#39;stops.txt&#39;</span><span class="p">))</span>
<span class="n">sub_stops</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s">&#39;sub_stops&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;alter table sub_stops add column geom geometry(Point,4326)&#39;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;UPDATE sub_stops set geom = ST_SetSRID(ST_MakePoint(stop_lon,stop_lat),4326)&quot;&quot;&quot;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot; DELETE FROM sub_stops </span>
<span class="s">                WHERE NOT (geom &amp;&amp; (</span>
<span class="s">                    SELECT ST_Buffer(ST_ConvexHull((ST_Collect(f.the_geom))), .0005) as geom </span>
<span class="s">                    FROM ( SELECT *, (ST_Dump(geom)).geom As the_geom </span>
<span class="s">                    FROM pluto) As f))&quot;&quot;&quot;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">    alter table sub_stops add column id serial;</span>
<span class="s">    update sub_stops set index = nextval(pg_get_serial_sequence(&#39;sub_stops&#39;,&#39;id&#39;));</span>
<span class="s">    alter table sub_stops add primary key (id);</span>
<span class="s">    &quot;&quot;&quot;</span><span class="p">)</span>
<span class="c"># NOTE:  also then deleted more by hand</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### add turn_stile_key to pgsql</span>
<span class="n">ts_key</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s">&#39;http://web.mta.info/developers/resources/nyct/turnstile/Remote-Booth-Station.xls&#39;</span><span class="p">)</span>
<span class="n">ts_key</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">it</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39; &#39;</span><span class="p">,</span><span class="s">&#39;_&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">ts_key</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">tolist</span><span class="p">()]</span>
<span class="n">ts_key</span><span class="p">[</span><span class="s">&#39;line_name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ts_key</span><span class="p">[</span><span class="s">&#39;line_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">sorted</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">it</span><span class="p">)</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">s</span><span class="p">]))</span> <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">!=</span><span class="nb">int</span> <span class="k">else</span> <span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
<span class="n">ts_key</span><span class="p">[</span><span class="s">&#39;clean&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ts_key</span><span class="o">.</span><span class="n">station</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;drop table if exists ts_key&quot;</span><span class="p">)</span>
<span class="n">ts_key</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s">&#39;ts_key&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### add turn stile data to pgsql</span>
<span class="c"># General Source for Turn Stiles: http://web.mta.info/developers/turnstile.html</span>
<span class="c">#     - field description: http://web.mta.info/developers/resources/nyct/turnstile/ts_Field%20Description.txt</span>
<span class="c">#     - data key: http://web.mta.info/developers/resources/nyct/turnstile/Remote-Booth-Station.xls</span>
<span class="c">#         --&gt; this is the provides the Remote Unit/Control Area/Station Name Key</span>
<span class="c"># Need coords for &quot;UNIT&quot;</span>
<span class="c"># Remote and Station Name here:</span>
<span class="c">#      &#39;http://web.mta.info/developers/resources/nyct/turnstile/Remote-Booth-Station.xls&#39;</span>
<span class="c"># Station Names and Coords here:</span>
<span class="c">#      &#39;http://web.mta.info/developers/data/nyct/subway/StationEntrances.csv&#39;</span>
<span class="c">#     - Relevant stations were added to pgsql as &#39;sub_stat_entr&#39;</span>


<span class="n">cols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;C/A&#39;</span><span class="p">,</span><span class="s">&#39;UNIT&#39;</span><span class="p">,</span><span class="s">&#39;SCP&#39;</span><span class="p">,</span><span class="s">&#39;DATE1&#39;</span><span class="p">,</span><span class="s">&#39;TIME1&#39;</span><span class="p">,</span><span class="s">&#39;DESC1&#39;</span><span class="p">,</span><span class="s">&#39;ENTRIES1&#39;</span><span class="p">,</span><span class="s">&#39;EXITS1&#39;</span><span class="p">,</span>
        <span class="s">&#39;DATE2&#39;</span><span class="p">,</span><span class="s">&#39;TIME2&#39;</span><span class="p">,</span><span class="s">&#39;DESC2&#39;</span><span class="p">,</span><span class="s">&#39;ENTRIES2&#39;</span><span class="p">,</span><span class="s">&#39;EXITS2&#39;</span><span class="p">,</span><span class="s">&#39;DATE3&#39;</span><span class="p">,</span><span class="s">&#39;TIME3&#39;</span><span class="p">,</span><span class="s">&#39;DESC3&#39;</span><span class="p">,</span><span class="s">&#39;ENTRIES3&#39;</span><span class="p">,</span>
        <span class="s">&#39;EXITS3&#39;</span><span class="p">,</span><span class="s">&#39;DATE4&#39;</span><span class="p">,</span><span class="s">&#39;TIME4&#39;</span><span class="p">,</span><span class="s">&#39;DESC4&#39;</span><span class="p">,</span><span class="s">&#39;ENTRIES4&#39;</span><span class="p">,</span><span class="s">&#39;EXITS4&#39;</span><span class="p">,</span><span class="s">&#39;DATE5&#39;</span><span class="p">,</span><span class="s">&#39;TIME5&#39;</span><span class="p">,</span><span class="s">&#39;DESC5&#39;</span><span class="p">,</span>
        <span class="s">&#39;ENTRIES5&#39;</span><span class="p">,</span><span class="s">&#39;EXITS5&#39;</span><span class="p">,</span><span class="s">&#39;DATE6&#39;</span><span class="p">,</span><span class="s">&#39;TIME6&#39;</span><span class="p">,</span><span class="s">&#39;DESC6&#39;</span><span class="p">,</span><span class="s">&#39;ENTRIES6&#39;</span><span class="p">,</span>
        <span class="s">&#39;EXITS6&#39;</span><span class="p">,</span><span class="s">&#39;DATE7&#39;</span><span class="p">,</span><span class="s">&#39;TIME7&#39;</span><span class="p">,</span><span class="s">&#39;DESC7&#39;</span><span class="p">,</span><span class="s">&#39;ENTRIES7&#39;</span><span class="p">,</span><span class="s">&#39;EXITS7&#39;</span><span class="p">,</span><span class="s">&#39;DATE8&#39;</span><span class="p">,</span>
        <span class="s">&#39;TIME8&#39;</span><span class="p">,</span><span class="s">&#39;DESC8&#39;</span><span class="p">,</span><span class="s">&#39;ENTRIES8&#39;</span><span class="p">,</span><span class="s">&#39;EXITS8&#39;</span><span class="p">]</span>
<span class="n">cols</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">it</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;/&#39;</span><span class="p">,</span><span class="s">&#39;_&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">cols</span><span class="p">]</span>
<span class="n">url</span> <span class="o">=</span> <span class="s">&#39;http://web.mta.info/developers/data/nyct/turnstile/turnstile_141004.txt&#39;</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="n">names</span><span class="o">=</span><span class="n">cols</span><span class="p">)</span>
<span class="n">idx</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="n">p</span><span class="o">.</span><span class="n">unit</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s">&#39;R&#39;</span><span class="p">)</span><span class="o">==</span><span class="bp">False</span><span class="p">]</span><span class="o">.</span><span class="n">index</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">idx</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="c"># ts_key = pd.read_excel(&#39;http://web.mta.info/developers/resources/nyct/turnstile/Remote-Booth-Station.xls&#39;)</span>
<span class="c"># ts_key.columns = [str(it).lower().replace(&#39; &#39;,&#39;_&#39;) for it in ts_key.columns.tolist()]</span>

<span class="n">dropCols</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">cols</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">it</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;exit&#39;</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span> <span class="ow">or</span> <span class="n">it</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;entries&#39;</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
        <span class="n">p</span><span class="p">[</span><span class="n">it</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="n">it</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">it</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;date&#39;</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
        <span class="n">date_pt</span><span class="p">,</span><span class="n">time_pt</span><span class="p">,</span><span class="n">datetime_pt</span> <span class="o">=</span> <span class="n">it</span><span class="p">,</span><span class="s">&#39;time&#39;</span><span class="o">+</span><span class="n">it</span><span class="p">[</span><span class="mi">4</span><span class="p">:],</span><span class="s">&#39;datetime&#39;</span><span class="o">+</span><span class="n">it</span><span class="p">[</span><span class="mi">4</span><span class="p">:]</span>
        <span class="n">p</span><span class="p">[</span><span class="n">datetime_pt</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="n">date_pt</span><span class="p">]</span> <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span> <span class="n">p</span><span class="p">[</span><span class="n">time_pt</span><span class="p">],</span><span class="n">format</span><span class="o">=</span><span class="s">&#39;%m-</span><span class="si">%d</span><span class="s">-%y %H:%M:%S&#39;</span><span class="p">,</span><span class="nb">coerce</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="n">p</span><span class="p">[</span><span class="n">datetime_pt</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="n">datetime_pt</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="bp">None</span> <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">==</span><span class="s">&#39;NaT&#39;</span> <span class="k">else</span> <span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
        <span class="n">dropCols</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">date_pt</span><span class="p">,</span><span class="n">time_pt</span><span class="p">])</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">dropCols</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">cols</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

<span class="c"># END GOAL conform &#39;station_names&#39; to &#39;mn_stations&#39;</span>
<span class="n">mn_stations</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s">&quot;&quot;&quot;select * from sub_stat_entr&quot;&quot;&quot;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>

<span class="c"># Limit NYC key to MN</span>
<span class="n">mn_div_list</span> <span class="o">=</span> <span class="n">mn_stations</span><span class="o">.</span><span class="n">division</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="n">ts_key</span> <span class="o">=</span> <span class="n">ts_key</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">ts_key</span><span class="p">[</span><span class="n">ts_key</span><span class="o">.</span><span class="n">division</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">mn_div_list</span><span class="p">)</span><span class="o">==</span><span class="bp">False</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="c"># Create and Sort Route List for each station</span>
<span class="n">mn_cols</span> <span class="o">=</span> <span class="n">mn_stations</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="n">s_pt</span><span class="p">,</span><span class="n">e_pt</span> <span class="o">=</span> <span class="n">mn_cols</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s">&#39;route_1&#39;</span><span class="p">),</span><span class="n">mn_cols</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s">&#39;route_11&#39;</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span>
<span class="n">mn_stations</span><span class="p">[</span><span class="s">&#39;all_lines&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mn_stations</span><span class="o">.</span><span class="n">ix</span><span class="p">[:,</span><span class="n">s_pt</span><span class="p">:</span><span class="n">e_pt</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">it</span><span class="p">)</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">s</span> <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">it</span><span class="p">)</span><span class="o">!=</span><span class="s">&#39;NaN&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;nan&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;.0&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">),</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">mn_stations</span><span class="p">[</span><span class="s">&#39;all_lines&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mn_stations</span><span class="o">.</span><span class="n">all_lines</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">s</span><span class="p">)))</span>
<span class="c"># ts_key[&#39;line_name&#39;] = ts_key[&#39;line_name&#39;].map(lambda s: &#39;&#39;.join(sorted([str(it) for it in s])) if type(s)!=int else str(s))</span>

<span class="c"># clean up many but small differences between station names</span>
<span class="n">mn_stations</span><span class="p">[</span><span class="s">&#39;clean&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mn_stations</span><span class="o">.</span><span class="n">station_name</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
<span class="c"># ts_key[&#39;clean&#39;] = ts_key.station.map(lambda s: s.lower())</span>
<span class="n">repl_dict</span> <span class="o">=</span> <span class="p">{</span>   <span class="s">r&#39;(1st|first)&#39;</span>          <span class="p">:</span><span class="s">r&#39;1&#39;</span><span class="p">,</span>
                <span class="s">r&#39;(2nd|second)&#39;</span>         <span class="p">:</span><span class="s">r&#39;2&#39;</span><span class="p">,</span>
                <span class="s">r&#39;(3rd|third)&#39;</span>          <span class="p">:</span><span class="s">r&#39;3&#39;</span><span class="p">,</span>
                <span class="s">r&#39;(4th|fourth)&#39;</span>         <span class="p">:</span><span class="s">r&#39;4&#39;</span><span class="p">,</span>
                <span class="s">r&#39;(5th|fifth)&#39;</span>          <span class="p">:</span><span class="s">r&#39;5&#39;</span><span class="p">,</span>
                <span class="s">r&#39;(6th|sixth)&#39;</span>          <span class="p">:</span><span class="s">r&#39;6&#39;</span><span class="p">,</span>
                <span class="s">r&#39;(7th|seventh)&#39;</span>        <span class="p">:</span><span class="s">r&#39;7&#39;</span><span class="p">,</span>
                <span class="s">r&#39;(8th|eigth)&#39;</span>          <span class="p">:</span><span class="s">r&#39;8&#39;</span><span class="p">,</span>
                <span class="s">r&#39;(9th|nineth|ninth)&#39;</span>   <span class="p">:</span><span class="s">r&#39;9&#39;</span><span class="p">,</span>
                <span class="s">r&#39;(0th)&#39;</span>                <span class="p">:</span><span class="s">r&#39;0&#39;</span><span class="p">,</span>
                <span class="s">r&#39;(1th)&#39;</span>                <span class="p">:</span><span class="s">r&#39;1&#39;</span><span class="p">,</span>
                <span class="s">r&#39;(2th)&#39;</span>                <span class="p">:</span><span class="s">r&#39;2&#39;</span><span class="p">,</span>
                <span class="s">r&#39;(3th)&#39;</span>                <span class="p">:</span><span class="s">r&#39;3&#39;</span><span class="p">,</span>
                <span class="s">r&#39;\s(street)&#39;</span>           <span class="p">:</span><span class="s">r&#39; st&#39;</span><span class="p">,</span>
                <span class="s">r&#39;\s(square)&#39;</span>           <span class="p">:</span><span class="s">r&#39; sq&#39;</span><span class="p">,</span>
                <span class="s">r&#39;\s(center)&#39;</span>           <span class="p">:</span><span class="s">r&#39; ctr&#39;</span><span class="p">,</span>
                <span class="s">r&#39;\s(av)&#39;</span><span class="p">:</span><span class="s">r&#39; ave&#39;</span><span class="p">}</span>
<span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">repl_dict</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
    <span class="n">mn_stations</span><span class="p">[</span><span class="s">&#39;clean&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mn_stations</span><span class="o">.</span><span class="n">clean</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="n">v</span><span class="p">)</span>
    
<span class="n">repl_dict</span> <span class="o">=</span> <span class="p">{</span>   <span class="s">r&#39;\Aunion sq&#39;</span><span class="p">:</span><span class="s">r&#39;14 st-union sq&#39;</span><span class="p">,</span>
                <span class="s">r&#39;cathedral parkway-110 st&#39;</span><span class="p">:</span><span class="s">r&#39;110 st-cathedrl&#39;</span><span class="p">,</span>
                <span class="s">r&#39;163 st - amsterdam ave&#39;</span><span class="p">:</span><span class="s">r&#39;163 st-amsterdm&#39;</span><span class="p">,</span>
                <span class="s">r&#39;81 st - museum of natural history&#39;</span><span class="p">:</span><span class="s">r&#39;81 st-museum&#39;</span><span class="p">,</span>
                <span class="s">r&#39;47-50 sts rockefeller ctr&#39;</span><span class="p">:</span><span class="s">r&#39;47-50 st-rock&#39;</span><span class="p">,</span>
                <span class="s">r&#39;137 st-city college&#39;</span><span class="p">:</span><span class="s">r&#39;137 st-city col&#39;</span><span class="p">,</span>
                <span class="s">r&#39;broadway-lafayette st&#39;</span><span class="p">:</span><span class="s">r&#39;broadway/lafay&#39;</span><span class="p">,</span>
                <span class="s">r&#39;west 4 st&#39;</span><span class="p">:</span><span class="s">r&#39;w 4 st-wash sq&#39;</span> <span class="p">,</span>
                <span class="s">r&#39;110 st-central park north&#39;</span><span class="p">:</span><span class="s">r&#39;110 st-cpn&#39;</span><span class="p">,</span>
                <span class="s">r&#39;116 st-columbia university&#39;</span><span class="p">:</span><span class="s">r&#39;116 st-columbia&#39;</span><span class="p">,</span>
                <span class="s">r&#39;168 st - washington heights&#39;</span><span class="p">:</span><span class="s">r&#39;168 st-broadway&#39;</span><span class="p">,</span>
<span class="c">#                 r&#39;168 st-broadway - washington heights&#39;:r&#39;168 st-broadway&#39;,</span>
                <span class="s">r&#39;49 st&#39;</span><span class="p">:</span><span class="s">r&#39;49 st-7 ave&#39;</span><span class="p">,</span>
                <span class="s">r&#39;168 st\Z&#39;</span><span class="p">:</span><span class="s">r&#39;168 st-broadway&#39;</span><span class="p">,</span>
                <span class="s">r&#39;59 st-columbus circle&#39;</span><span class="p">:</span><span class="s">r&#39;59 st-columbus&#39;</span><span class="p">,</span>
                <span class="s">r&#39;66 st-lincoln ctr&#39;</span><span class="p">:</span><span class="s">r&#39;66 st-lincoln&#39;</span><span class="p">,</span>
                <span class="s">r&#39;68 st-hunter college&#39;</span><span class="p">:</span><span class="s">r&#39;68st-hunter col&#39;</span><span class="p">,</span>
                <span class="c"># r&#39;astor pl&#39;:&#39;astor place&#39;,</span>
                <span class="s">r&#39;brooklyn bridge-city hall&#39;</span><span class="p">:</span><span class="s">r&#39;brooklyn bridge&#39;</span><span class="p">,</span>
                <span class="s">r&#39;dyckman st-200 st&#39;</span><span class="p">:</span><span class="s">r&#39;dyckman-200 st&#39;</span><span class="p">,</span>
                <span class="s">r&#39;grand central-42 st&#39;</span><span class="p">:</span><span class="s">r&#39;42 st-grd cntrl&#39;</span><span class="p">,</span>
                <span class="s">r&#39;inwood - 207 st&#39;</span><span class="p">:</span><span class="s">r&#39;inwood-207 st&#39;</span><span class="p">,</span>
                <span class="s">r&#39;lexington av-53 st&#39;</span><span class="p">:</span><span class="s">r&#39;lexington-53 st&#39;</span><span class="p">,</span>
                <span class="s">r&#39;prince st&#39;</span><span class="p">:</span><span class="s">r&quot;prince st-b&#39;way&quot;</span><span class="p">,</span>
                <span class="s">r&#39;\Atimes sq\Z&#39;</span><span class="p">:</span><span class="s">r&#39;42 st-times sq&#39;</span><span class="p">,</span>
                <span class="s">r&#39;times sq-42 st&#39;</span><span class="p">:</span><span class="s">r&#39;42 st-times sq&#39;</span><span class="p">,</span>
                <span class="s">r&#39;van cortlandt park-242 st&#39;</span><span class="p">:</span><span class="s">r&#39;242 st&#39;</span><span class="p">,</span>
                <span class="s">r&#39;marble hill-225 st&#39;</span><span class="p">:</span><span class="s">r&#39;225 st&#39;</span><span class="p">,</span>
                <span class="s">r&#39;lexington ave-53 st&#39;</span><span class="p">:</span><span class="s">r&#39;lexington-53 st&#39;</span><span class="p">,</span>
                <span class="s">r&#39;harlem-148 st&#39;</span><span class="p">:</span><span class="s">r&#39;148 st-lenox&#39;</span><span class="p">,</span>
                <span class="s">r&#39;\Agrand central\Z&#39;</span><span class="p">:</span><span class="s">r&#39;42 st-grd cntrl&#39;</span><span class="p">,</span>
                <span class="s">r&#39;\Acanal st (ul)\Z&#39;</span><span class="p">:</span><span class="s">r&#39;canal st&#39;</span><span class="p">,}</span>
<span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">repl_dict</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
    <span class="n">mn_stations</span><span class="p">[</span><span class="s">&#39;clean&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mn_stations</span><span class="o">.</span><span class="n">clean</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="n">v</span><span class="p">)</span>

<span class="n">station_names</span> <span class="o">=</span> <span class="n">ts_key</span><span class="o">.</span><span class="n">clean</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="c">#print len(mn_stations[mn_stations.clean.isin(station_names)==False]), &#39;stations not mapped&#39;</span>
<span class="c"># mn_stations[mn_stations.clean.isin(station_names)==False].ix[:,[&#39;division&#39;,&#39;line&#39;,&#39;station_name&#39;,&#39;all_lines&#39;,&#39;clean&#39;]].sort(&#39;clean&#39;)</span>
<span class="c"># mn_stations.head()</span>

<span class="c"># push to [ sub_stat_entr,ts_key,p(turn stiles) ] to pgsql for comparison and unificiation</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;drop table if exists sub_stat_entr&#39;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;drop table if exists ts_key&#39;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;drop table if exists sub_turn_stiles&#39;</span><span class="p">)</span>
<span class="n">delay</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="n">mn_stations</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s">&#39;id&#39;</span><span class="p">,</span><span class="s">&#39;index&#39;</span><span class="p">],</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s">&#39;sub_stat_entr&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">    alter table sub_stat_entr add column id serial;</span>
<span class="s">    update sub_stat_entr set index = nextval(pg_get_serial_sequence(&#39;sub_stat_entr&#39;,&#39;id&#39;));</span>
<span class="s">    alter table sub_stat_entr add primary key (id);</span>
<span class="s">    &quot;&quot;&quot;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;UPDATE sub_stat_entr set geom = ST_SetSRID(ST_MakePoint(station_longitude,station_latitude),4326)&quot;&quot;&quot;</span><span class="p">)</span>

<span class="c"># ts_key.to_sql(&#39;ts_key&#39;,engine)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">    alter table ts_key add column lat double precision;</span>
<span class="s">    alter table ts_key add column lon double precision;</span>
<span class="s">    alter table ts_key add column id serial;</span>
<span class="s">    update ts_key set index = nextval(pg_get_serial_sequence(&#39;ts_key&#39;,&#39;id&#39;));</span>
<span class="s">    alter table ts_key add primary key (id);</span>
<span class="s">    &quot;&quot;&quot;</span><span class="p">)</span>

<span class="n">p</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s">&#39;sub_turn_stiles&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">    alter table sub_turn_stiles add column station text;</span>
<span class="s">    alter table sub_turn_stiles add column lat double precision;</span>
<span class="s">    alter table sub_turn_stiles add column lon double precision;</span>
<span class="s">    alter table sub_turn_stiles add column id serial;</span>
<span class="s">    update sub_turn_stiles set index = nextval(pg_get_serial_sequence(&#39;sub_turn_stiles&#39;,&#39;id&#39;));</span>
<span class="s">    alter table sub_turn_stiles add primary key (id);</span>
<span class="s">    &quot;&quot;&quot;</span><span class="p">)</span>

<span class="c"># 1. Copy coords from station_entrances to turnstile_key</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">                UPDATE ts_key t</span>
<span class="s">                SET lat = s.station_latitude,lon = s.station_longitude</span>
<span class="s">                FROM sub_stat_entr s</span>
<span class="s">                WHERE s.clean=t.clean</span>
<span class="s">                AND s.all_lines=t.line_name;</span>
<span class="s">                &quot;&quot;&quot;</span><span class="p">)</span>
<span class="c">#print pd.read_sql(&#39;select count(*) c from ts_key where lon is null&#39;,engine).c[0],&#39;null&#39;</span>
<span class="c">#print pd.read_sql(&#39;select count(*) c from ts_key where lon is not null&#39;,engine).c[0],&#39;not null&#39;</span>

<span class="c"># 2. Copy matching ts_key table data to turn_stiles table</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">                UPDATE sub_turn_stiles</span>
<span class="s">                SET lat = t.lat,lon=t.lon,station=t.station</span>
<span class="s">                FROM ts_key t</span>
<span class="s">                WHERE t.remote = unit</span>
<span class="s">                AND t.booth = c_a;</span>
<span class="s">                &quot;&quot;&quot;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;alter table sub_turn_stiles add column geom geometry(Point,4326)&#39;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;UPDATE sub_turn_stiles set geom = ST_SetSRID(ST_MakePoint(lon,lat),4326)&quot;&quot;&quot;</span><span class="p">)</span>

<span class="c"># 3. Attempt to match leftovers (non-matching) b/t ts_key/sub_stat_entr using wildcards</span>
<span class="n">leftovers</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s">&quot;select * from ts_key where lon is null and division = any(array[&#39;IRT&#39;,&#39;IND&#39;,&#39;BMT&#39;])&quot;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">leftovers</span><span class="p">)):</span>
    <span class="n">row</span> <span class="o">=</span> <span class="n">leftovers</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">i</span><span class="p">,:]</span>
    <span class="n">chk</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s">&#39;clean&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;-&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">chk</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
        <span class="n">a</span><span class="p">,</span><span class="n">b</span> <span class="o">=</span> <span class="s">&#39;</span><span class="si">%%</span><span class="s">&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s">&#39;clean&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;-&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span><span class="o">+</span><span class="s">&#39;</span><span class="si">%%</span><span class="s">&#39;</span><span class="p">,</span><span class="n">row</span><span class="p">[</span><span class="s">&#39;line_name&#39;</span><span class="p">]</span>
        <span class="n">tmp</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span>  <span class="s">&quot;&quot;&quot; </span>
<span class="s">                            SELECT station_latitude lat,station_longitude lon</span>
<span class="s">                            FROM sub_stat_entr s</span>
<span class="s">                            WHERE s.clean ilike &#39;</span><span class="si">%s</span><span class="s">&#39;</span>
<span class="s">                            AND s.all_lines=&#39;</span><span class="si">%s</span><span class="s">&#39;;</span>
<span class="s">                            &quot;&quot;&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">),</span><span class="n">engine</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">tmp</span><span class="o">.</span><span class="n">lat</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span><span class="o">==</span><span class="nb">len</span><span class="p">(</span><span class="n">tmp</span><span class="o">.</span><span class="n">lat</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span><span class="o">==</span><span class="mi">1</span><span class="p">):</span>
            <span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span> <span class="o">=</span> <span class="n">tmp</span><span class="o">.</span><span class="n">lat</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">tmp</span><span class="o">.</span><span class="n">lon</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">row</span><span class="p">[</span><span class="s">&#39;id&#39;</span><span class="p">]</span>
            <span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">                                UPDATE ts_key set lat=</span><span class="si">%f</span><span class="s">,lon=</span><span class="si">%f</span><span class="s"></span>
<span class="s">                                WHERE id = </span><span class="si">%d</span><span class="s"></span>
<span class="s">                            &quot;&quot;&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">),</span><span class="n">engine</span><span class="p">)</span>
            
<span class="c"># 4. Attempt to match leftover by:</span>
        <span class="c"># starting with lines,division, </span>
            <span class="c"># if one result go with it, </span>
            <span class="c"># else if only one result and it&#39;s a partial match, go with it?</span>
<span class="n">leftovers</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s">&quot;select * from ts_key where lon is null and division = any(array[&#39;IRT&#39;,&#39;IND&#39;,&#39;BMT&#39;])&quot;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">leftovers</span><span class="p">)):</span>
    <span class="n">row</span> <span class="o">=</span> <span class="n">leftovers</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">i</span><span class="p">,:]</span>
    <span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span> <span class="o">=</span> <span class="s">&#39;</span><span class="si">%%</span><span class="s">&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s">&#39;clean&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;-&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span><span class="o">+</span><span class="s">&#39;</span><span class="si">%%</span><span class="s">&#39;</span><span class="p">,</span><span class="n">row</span><span class="p">[</span><span class="s">&#39;line_name&#39;</span><span class="p">],</span><span class="n">row</span><span class="p">[</span><span class="s">&#39;division&#39;</span><span class="p">]</span>
    <span class="n">tmp</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span>  <span class="s">&quot;&quot;&quot; </span>
<span class="s">                        SELECT station_latitude lat,station_longitude lon,clean</span>
<span class="s">                        FROM sub_stat_entr s</span>
<span class="s">                        WHERE s.division=&#39;</span><span class="si">%s</span><span class="s">&#39;</span>
<span class="s">                        AND s.all_lines=&#39;</span><span class="si">%s</span><span class="s">&#39;;</span>
<span class="s">                        &quot;&quot;&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="n">b</span><span class="p">),</span><span class="n">engine</span><span class="p">)</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">tmp</span><span class="o">.</span><span class="n">lat</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span><span class="o">==</span><span class="nb">len</span><span class="p">(</span><span class="n">tmp</span><span class="o">.</span><span class="n">lat</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span><span class="o">==</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span> <span class="o">=</span> <span class="n">tmp</span><span class="o">.</span><span class="n">lat</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">tmp</span><span class="o">.</span><span class="n">lon</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">row</span><span class="p">[</span><span class="s">&#39;id&#39;</span><span class="p">]</span>
        <span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">                            UPDATE ts_key set lat=</span><span class="si">%f</span><span class="s">,lon=</span><span class="si">%f</span><span class="s"></span>
<span class="s">                            WHERE id = </span><span class="si">%d</span><span class="s"></span>
<span class="s">                        &quot;&quot;&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">),</span><span class="n">engine</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">z</span><span class="o">=</span><span class="n">tmp</span><span class="p">[</span><span class="n">tmp</span><span class="o">.</span><span class="n">clean</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">a</span><span class="p">)]</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">z</span><span class="o">.</span><span class="n">lat</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span><span class="o">==</span><span class="nb">len</span><span class="p">(</span><span class="n">z</span><span class="o">.</span><span class="n">lat</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span><span class="o">==</span><span class="mi">1</span><span class="p">):</span>
            <span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span> <span class="o">=</span> <span class="n">tmp</span><span class="o">.</span><span class="n">lat</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">tmp</span><span class="o">.</span><span class="n">lon</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">row</span><span class="p">[</span><span class="s">&#39;id&#39;</span><span class="p">]</span>
            <span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">                                UPDATE ts_key set lat=</span><span class="si">%f</span><span class="s">,lon=</span><span class="si">%f</span><span class="s"></span>
<span class="s">                                WHERE id = </span><span class="si">%d</span><span class="s"></span>
<span class="s">                            &quot;&quot;&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">),</span><span class="n">engine</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># TURN STILE CONT&#39;D convert text to timestamp</span>

<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;  </span>

<span class="s">    DROP TABLE if exists tmp;</span>

<span class="s">    CREATE TABLE tmp (</span>
<span class="s">        gid serial primary key,</span>
<span class="s">        datetime1 timestamp with time zone,</span>
<span class="s">        datetime2 timestamp with time zone,</span>
<span class="s">        datetime3 timestamp with time zone,</span>
<span class="s">        datetime4 timestamp with time zone,</span>
<span class="s">        datetime5 timestamp with time zone,</span>
<span class="s">        datetime6 timestamp with time zone,</span>
<span class="s">        datetime7 timestamp with time zone,</span>
<span class="s">        datetime8 timestamp with time zone</span>
<span class="s">        );</span>

<span class="s">    UPDATE tmp SET gid = nextval(pg_get_serial_sequence(&#39;tmp&#39;,&#39;gid&#39;));</span>

<span class="s">    INSERT INTO tmp (</span>
<span class="s">        datetime1,</span>
<span class="s">        datetime2,</span>
<span class="s">        datetime3,</span>
<span class="s">        datetime4,</span>
<span class="s">        datetime5,</span>
<span class="s">        datetime6,</span>
<span class="s">        datetime7,</span>
<span class="s">        datetime8)</span>
<span class="s">    SELECT </span>
<span class="s">        to_timestamp(s.datetime1,&#39;YYYY-MM-DD HH24:MI:SS&#39;),</span>
<span class="s">        to_timestamp(s.datetime2,&#39;YYYY-MM-DD HH24:MI:SS&#39;),</span>
<span class="s">        to_timestamp(s.datetime3,&#39;YYYY-MM-DD HH24:MI:SS&#39;),</span>
<span class="s">        to_timestamp(s.datetime4,&#39;YYYY-MM-DD HH24:MI:SS&#39;),</span>
<span class="s">        to_timestamp(s.datetime5,&#39;YYYY-MM-DD HH24:MI:SS&#39;),</span>
<span class="s">        to_timestamp(s.datetime6,&#39;YYYY-MM-DD HH24:MI:SS&#39;),</span>
<span class="s">        to_timestamp(s.datetime7,&#39;YYYY-MM-DD HH24:MI:SS&#39;),</span>
<span class="s">        to_timestamp(s.datetime8,&#39;YYYY-MM-DD HH24:MI:SS&#39;)</span>
<span class="s">    FROM sub_turn_stiles s;</span>

<span class="s">    ALTER TABLE sub_turn_stiles </span>
<span class="s">    DROP COLUMN datetime1,</span>
<span class="s">    DROP COLUMN datetime2,</span>
<span class="s">    DROP COLUMN datetime3,</span>
<span class="s">    DROP COLUMN datetime4,</span>
<span class="s">    DROP COLUMN datetime5,</span>
<span class="s">    DROP COLUMN datetime6,</span>
<span class="s">    DROP COLUMN datetime7,</span>
<span class="s">    DROP COLUMN datetime8,</span>
<span class="s">    ADD COLUMN datetime1 timestamp with time zone,</span>
<span class="s">    ADD COLUMN datetime2 timestamp with time zone,</span>
<span class="s">    ADD COLUMN datetime3 timestamp with time zone,</span>
<span class="s">    ADD COLUMN datetime4 timestamp with time zone,</span>
<span class="s">    ADD COLUMN datetime5 timestamp with time zone,</span>
<span class="s">    ADD COLUMN datetime6 timestamp with time zone,</span>
<span class="s">    ADD COLUMN datetime7 timestamp with time zone,</span>
<span class="s">    ADD COLUMN datetime8 timestamp with time zone;</span>

<span class="s">    UPDATE sub_turn_stiles s</span>
<span class="s">    SET </span>
<span class="s">        datetime1 = t.datetime1,</span>
<span class="s">        datetime2 = t.datetime2,</span>
<span class="s">        datetime3 = t.datetime3,</span>
<span class="s">        datetime4 = t.datetime4,</span>
<span class="s">        datetime5 = t.datetime5,</span>
<span class="s">        datetime6 = t.datetime6,</span>
<span class="s">        datetime7 = t.datetime7,</span>
<span class="s">        datetime8 = t.datetime8</span>
<span class="s">    FROM tmp t</span>
<span class="s">    where t.gid = s.id;</span>

<span class="s">               &quot;&quot;&quot;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># TURN STILE CONT&#39;D calc. register differences</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">alter table sub_turn_stiles </span>
<span class="s">add column out1 double precision,</span>
<span class="s">add column out2 double precision,</span>
<span class="s">add column out3 double precision,</span>
<span class="s">add column out4 double precision,</span>
<span class="s">add column out5 double precision,</span>
<span class="s">add column out6 double precision,</span>
<span class="s">add column out7 double precision,</span>
<span class="s">add column in1 double precision,</span>
<span class="s">add column in2 double precision,</span>
<span class="s">add column in3 double precision,</span>
<span class="s">add column in4 double precision,</span>
<span class="s">add column in5 double precision,</span>
<span class="s">add column in6 double precision,</span>
<span class="s">add column in7 double precision;</span>


<span class="s">update sub_turn_stiles</span>
<span class="s">set out1 = exits2-exits1</span>
<span class="s">where exits1 != &#39;NaN&#39;::float</span>
<span class="s">and exits2 != &#39;NaN&#39;::float;</span>

<span class="s">update sub_turn_stiles</span>
<span class="s">set out2 = exits3-exits2</span>
<span class="s">where exits2 != &#39;NaN&#39;::float</span>
<span class="s">and exits3 != &#39;NaN&#39;::float;</span>

<span class="s">update sub_turn_stiles</span>
<span class="s">set out3 = exits4-exits3</span>
<span class="s">where exits3 != &#39;NaN&#39;::float</span>
<span class="s">and exits4 != &#39;NaN&#39;::float;</span>

<span class="s">update sub_turn_stiles</span>
<span class="s">set out4 = exits5-exits4</span>
<span class="s">where exits4 != &#39;NaN&#39;::float</span>
<span class="s">and exits5 != &#39;NaN&#39;::float;</span>

<span class="s">update sub_turn_stiles</span>
<span class="s">set out5 = exits6-exits5</span>
<span class="s">where exits5 != &#39;NaN&#39;::float</span>
<span class="s">and exits6 != &#39;NaN&#39;::float;</span>

<span class="s">update sub_turn_stiles</span>
<span class="s">set out6 = exits7-exits6</span>
<span class="s">where exits6 != &#39;NaN&#39;::float</span>
<span class="s">and exits7 != &#39;NaN&#39;::float;</span>

<span class="s">update sub_turn_stiles</span>
<span class="s">set out7 = exits8-exits7</span>
<span class="s">where exits7 != &#39;NaN&#39;::float</span>
<span class="s">and exits8 != &#39;NaN&#39;::float;</span>


<span class="s">update sub_turn_stiles</span>
<span class="s">set in1 = entries2-entries1</span>
<span class="s">where entries1 != &#39;NaN&#39;::float</span>
<span class="s">and entries2 != &#39;NaN&#39;::float;</span>

<span class="s">update sub_turn_stiles</span>
<span class="s">set in2 = entries3-entries2</span>
<span class="s">where entries2 != &#39;NaN&#39;::float</span>
<span class="s">and entries3 != &#39;NaN&#39;::float;</span>

<span class="s">update sub_turn_stiles</span>
<span class="s">set in3 = entries4-entries3</span>
<span class="s">where entries3 != &#39;NaN&#39;::float</span>
<span class="s">and entries4 != &#39;NaN&#39;::float;</span>

<span class="s">update sub_turn_stiles</span>
<span class="s">set in4 = entries5-entries4</span>
<span class="s">where entries4 != &#39;NaN&#39;::float</span>
<span class="s">and entries5 != &#39;NaN&#39;::float;</span>

<span class="s">update sub_turn_stiles</span>
<span class="s">set in5 = entries6-entries5</span>
<span class="s">where entries5 != &#39;NaN&#39;::float</span>
<span class="s">and entries6 != &#39;NaN&#39;::float;</span>

<span class="s">update sub_turn_stiles</span>
<span class="s">set in6 = entries7-entries6</span>
<span class="s">where entries6 != &#39;NaN&#39;::float</span>
<span class="s">and entries7 != &#39;NaN&#39;::float;</span>

<span class="s">update sub_turn_stiles</span>
<span class="s">set in7 = entries8-entries7</span>
<span class="s">where entries7 != &#39;NaN&#39;::float</span>
<span class="s">and entries8 != &#39;NaN&#39;::float;</span>


<span class="s">alter table sub_turn_stiles </span>
<span class="s">    add column in_all double precision,</span>
<span class="s">    add column out_all double precision;</span>
<span class="s">update sub_turn_stiles</span>
<span class="s">set in_all = (select sum(s) from unnest(array[in1,in2,in3,in4,in5,in6,in7]) s);</span>
<span class="s">update sub_turn_stiles</span>
<span class="s">set out_all = (select sum(s) from unnest(array[out1,out2,out3,out4,out5,out6,out7]) s);</span>
<span class="s">&quot;&quot;&quot;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># NEED to consolidate turn_stile data</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># turn_stile data with missing station name -- SMALL ADJUSTMENTS NEEDED</span>
<span class="n">cmd</span><span class="o">=</span><span class="s">&quot;&quot;&quot; select distinct unit,c_a from sub_turn_stiles </span>
<span class="s">        where station is null order by unit;&quot;&quot;&quot;</span>
<span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># turn_stile data analysis:</span>

<span class="c"># general data used herein</span>
<span class="n">datetime_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;datetime&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">9</span><span class="p">)]</span>
<span class="n">desc_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;desc&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">9</span><span class="p">)]</span>
<span class="n">entry_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;entries&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">9</span><span class="p">)]</span>
<span class="n">exit_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;exits&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">9</span><span class="p">)]</span>
<span class="n">in_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;in&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">9</span><span class="p">)]</span>
<span class="n">out_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;out&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">9</span><span class="p">)]</span>
<span class="n">agg_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;in_all&#39;</span><span class="p">,</span><span class="s">&#39;out_all&#39;</span><span class="p">]</span>
<span class="n">other_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;index&#39;</span><span class="p">,</span><span class="s">&#39;lat&#39;</span><span class="p">,</span><span class="s">&#39;lon&#39;</span><span class="p">,</span><span class="s">&#39;id&#39;</span><span class="p">,</span><span class="s">&#39;geom&#39;</span><span class="p">]</span>

<span class="c"># 1. this shows there are multiple entries per station, i.e., multiple turn stiles</span>
<span class="n">cmd</span> <span class="o">=</span>   <span class="s">&quot;&quot;&quot;</span>
<span class="s">        select * from sub_turn_stiles </span>
<span class="s">        where out_all is not null</span>
<span class="s">        and station = &#39;34 ST-HERALD SQ&#39;</span>
<span class="s">        AND extract(hour from datetime1) = 4</span>
<span class="s">        AND extract(day from datetime1) = 29</span>
<span class="s">        order by out_all desc;</span>
<span class="s">        &quot;&quot;&quot;</span>

<span class="c"># 2. this shows there are multiple rows even when {c_a,unit,scp,datetime1} are same</span>
<span class="n">cmd</span> <span class="o">=</span>   <span class="s">&quot;&quot;&quot;</span>
<span class="s">        select * from sub_turn_stiles </span>
<span class="s">        where out_all is not null</span>
<span class="s">        and station = &#39;34 ST-HERALD SQ&#39;</span>
<span class="s">        AND scp = &#39;00-00-00&#39;</span>
<span class="s">        order by c_a,unit,datetime1 asc;</span>
<span class="s">        &quot;&quot;&quot;</span>
<span class="n">dropCols</span> <span class="o">=</span> <span class="n">desc_cols</span> <span class="o">+</span> <span class="n">entry_cols</span> <span class="o">+</span> <span class="n">exit_cols</span> <span class="o">+</span> <span class="n">in_cols</span> <span class="o">+</span> <span class="n">out_cols</span> <span class="o">+</span> <span class="n">other_cols</span>

<span class="c"># 3. this shows the door is open for people leaving during rush hour... (see datetime6-7)</span>
<span class="c">#        and possibly explains why multiple rows</span>
<span class="n">cmd</span> <span class="o">=</span>   <span class="s">&quot;&quot;&quot;</span>
<span class="s">        select * from sub_turn_stiles </span>
<span class="s">        where out_all is not null</span>
<span class="s">        and station = &#39;34 ST-HERALD SQ&#39;</span>
<span class="s">        AND scp = &#39;00-00-00&#39;</span>
<span class="s">        AND datetime1 = &#39;2014-09-28 09:00:00-04:00&#39;;</span>
<span class="s">        &quot;&quot;&quot;</span>
<span class="c"># dropCols = desc_cols + entry_cols + exit_cols + in_cols + out_cols + other_cols</span>
<span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span><span class="c">#.drop(dropCols,axis=1)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="TODO:">TODO:<a class="anchor-link" href="#TODO:">&#182;</a></h1>
</div>
</div>
</div>

<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Turn-Stile-Data:">Turn Stile Data:<a class="anchor-link" href="#Turn-Stile-Data:">&#182;</a></h2>
</div>
</div>
</div>

<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="GOAL----For-Dates-A-to-B-and-Times-C-to-D,-how-many-people-per-station?">GOAL -- For Dates A to B and Times C to D, how many people per station?<a class="anchor-link" href="#GOAL----For-Dates-A-to-B-and-Times-C-to-D,-how-many-people-per-station?">&#182;</a></h3>
</div>
</div>
</div>

<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ol>
<li><p>consolidate scp's per remote/booth</p>
<p> Thoughts:</p>

<pre><code> - each scp has its own range of timestamps and register values
 - some scp.s have multiple datasets for same time period
 - timestamps exists for all times of the day

</code></pre>
<p> Method:</p>

<pre><code> - create new table with:
     - date column
     - 24 columns for each hour filled with register-change values
         - need 24 or just use single time col?
     - index # from sub_turn_stiles</code></pre>
</li>
</ol>
<ol>
<li>consolidate remote/booth per station</li>
</ol>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[2]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="o">%%</span><span class="k">sql</span> <span class="n">postgres</span><span class="nd">@routing</span>
<span class="n">select</span> <span class="n">distinct</span> <span class="n">extract</span><span class="p">(</span><span class="n">hour</span> <span class="kn">from</span> <span class="nn">datetime1</span><span class="p">)</span> <span class="n">s</span>
<span class="kn">from</span> <span class="nn">sub_turn_stiles</span>
<span class="n">order</span> <span class="n">by</span> <span class="n">s</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>24 rows affected.
</pre>
</div>
</div>

<div class="output_area"><div class="prompt output_prompt">
    Out[2]:</div>

<div class="output_html rendered_html output_subarea output_pyout">
<table>
    <tr>
        <th>s</th>
    </tr>
    <tr>
        <td>0.0</td>
    </tr>
    <tr>
        <td>1.0</td>
    </tr>
    <tr>
        <td>2.0</td>
    </tr>
    <tr>
        <td>3.0</td>
    </tr>
    <tr>
        <td>4.0</td>
    </tr>
    <tr>
        <td>5.0</td>
    </tr>
    <tr>
        <td>6.0</td>
    </tr>
    <tr>
        <td>7.0</td>
    </tr>
    <tr>
        <td>8.0</td>
    </tr>
    <tr>
        <td>9.0</td>
    </tr>
    <tr>
        <td>10.0</td>
    </tr>
    <tr>
        <td>11.0</td>
    </tr>
    <tr>
        <td>12.0</td>
    </tr>
    <tr>
        <td>13.0</td>
    </tr>
    <tr>
        <td>14.0</td>
    </tr>
    <tr>
        <td>15.0</td>
    </tr>
    <tr>
        <td>16.0</td>
    </tr>
    <tr>
        <td>17.0</td>
    </tr>
    <tr>
        <td>18.0</td>
    </tr>
    <tr>
        <td>19.0</td>
    </tr>
    <tr>
        <td>20.0</td>
    </tr>
    <tr>
        <td>21.0</td>
    </tr>
    <tr>
        <td>22.0</td>
    </tr>
    <tr>
        <td>23.0</td>
    </tr>
</table>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[1]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### Using PostgresSQL Server [ db1.public.routing ]:</span>

<span class="kn">from</span> <span class="nn">sys</span> <span class="kn">import</span> <span class="n">path</span> <span class="k">as</span> <span class="n">sys_path</span>
<span class="kn">from</span> <span class="nn">re</span> <span class="kn">import</span> <span class="n">search</span> <span class="k">as</span> <span class="n">re_search</span> <span class="c"># re_search(&#39;pattern&#39;,&#39;string&#39;)</span>
<span class="kn">from</span> <span class="nn">re</span> <span class="kn">import</span> <span class="n">sub</span> <span class="k">as</span> <span class="n">re_sub</span>  <span class="c"># re_sub(&#39;pattern&#39;,&#39;repl&#39;,&#39;string&#39;,&#39;count&#39;)</span>

<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s">&#39;expand_frame_repr&#39;</span><span class="p">,</span><span class="bp">False</span><span class="p">)</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s">&#39;display.max_columns&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s">&#39;display.max_rows&#39;</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s">&#39;display.width&#39;</span><span class="p">,</span><span class="mi">180</span><span class="p">)</span>
<span class="n">np</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">np</span>
<span class="n">np</span><span class="o">.</span><span class="n">set_printoptions</span><span class="p">(</span><span class="n">linewidth</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span><span class="n">threshold</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span>
<span class="kn">import</span> <span class="nn">geopandas</span> <span class="kn">as</span> <span class="nn">gd</span>
<span class="kn">from</span> <span class="nn">types</span> <span class="kn">import</span> <span class="n">NoneType</span>
<span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">sleep</span> <span class="k">as</span> <span class="n">delay</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span>
<span class="kn">from</span> <span class="nn">logging</span> <span class="kn">import</span> <span class="n">getLogger</span>
<span class="kn">from</span> <span class="nn">logging</span> <span class="kn">import</span> <span class="n">INFO</span> <span class="k">as</span> <span class="n">logging_info</span>
<span class="n">getLogger</span><span class="p">(</span><span class="s">&#39;sqlalchemy.dialects.postgresql&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging_info</span><span class="p">)</span>

<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s">r&#39;postgresql://postgres:postgres@localhost:8800/routing&#39;</span><span class="p">,</span>
                       <span class="n">encoding</span><span class="o">=</span><span class="s">&#39;utf-8&#39;</span><span class="p">,</span>
                       <span class="n">echo</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

<span class="o">%</span><span class="k">load_ext</span> <span class="n">sql</span>
<span class="o">%</span><span class="k">sql</span> <span class="n">postgresql</span><span class="p">:</span><span class="o">//</span><span class="n">postgres</span><span class="p">:</span><span class="n">postgres</span><span class="nd">@localhost</span><span class="o">/</span><span class="n">routing</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">
    Out[1]:</div>


<div class="output_text output_subarea output_pyout">
<pre>u&apos;Connected: postgres@routing&apos;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### add restaurant data</span>
<span class="kn">import</span> <span class="nn">requests</span><span class="o">,</span> <span class="nn">zipfile</span><span class="o">,</span> <span class="nn">StringIO</span>
<span class="kn">from</span> <span class="nn">f_postgres</span> <span class="kn">import</span> <span class="n">geoparse</span>
<span class="n">z</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;https://data.cityofnewyork.us/download/4vkw-7nck/ZIP&#39;</span><span class="p">)</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">zipfile</span><span class="o">.</span><span class="n">ZipFile</span><span class="p">(</span><span class="n">StringIO</span><span class="o">.</span><span class="n">StringIO</span><span class="p">(</span><span class="n">z</span><span class="o">.</span><span class="n">content</span><span class="p">))</span>
<span class="n">v</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s">&#39;WebExtract.txt&#39;</span><span class="p">))</span>
<span class="n">v</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span> <span class="nb">str</span><span class="p">(</span><span class="n">it</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">v</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span> <span class="p">]</span>

<span class="n">m</span> <span class="o">=</span> <span class="n">v</span><span class="p">[</span><span class="n">v</span><span class="o">.</span><span class="n">boro</span><span class="o">==</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">m</span><span class="p">[</span><span class="s">&#39;inspdate&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">inspdate</span><span class="p">)</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s">&#39;inspdate&#39;</span><span class="p">,</span><span class="n">ascending</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">z</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s">&#39;camis&#39;</span><span class="p">)</span>
<span class="n">grps</span> <span class="o">=</span> <span class="n">z</span><span class="o">.</span><span class="n">groups</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="n">takeCols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;dba&#39;</span><span class="p">,</span><span class="s">&#39;cuisinecode&#39;</span><span class="p">,</span><span class="s">&#39;building&#39;</span><span class="p">,</span><span class="s">&#39;street&#39;</span><span class="p">,</span><span class="s">&#39;zipcode&#39;</span><span class="p">,</span><span class="s">&#39;phone&#39;</span><span class="p">,</span><span class="s">&#39;inspdate&#39;</span><span class="p">]</span> <span class="c"># and &#39;camis&#39; which is the grps[i]</span>
<span class="n">mv</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;camis&#39;</span><span class="p">]</span><span class="o">+</span><span class="n">takeCols</span><span class="p">)</span>
<span class="n">g_cnt</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">grps</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">g_cnt</span><span class="p">):</span>
    <span class="n">vend_id</span> <span class="o">=</span> <span class="n">grps</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">z</span><span class="o">.</span><span class="n">get_group</span><span class="p">(</span><span class="n">vend_id</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="n">takeCols</span><span class="p">]</span>
    <span class="n">x</span><span class="p">[</span><span class="s">&#39;camis&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">vend_id</span>
    <span class="n">mv</span> <span class="o">=</span> <span class="n">mv</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">mv</span> <span class="o">=</span> <span class="n">geoparse</span><span class="p">(</span><span class="n">mv</span><span class="p">,</span><span class="s">&#39;dba&#39;</span><span class="p">,</span><span class="s">&#39;clean_name&#39;</span><span class="p">)</span>
<span class="n">mv</span> <span class="o">=</span> <span class="n">geoparse</span><span class="p">(</span><span class="n">mv</span><span class="p">,</span><span class="s">&#39;street&#39;</span><span class="p">,</span><span class="s">&#39;clean_street&#39;</span><span class="p">)</span>
<span class="n">mv</span><span class="p">[</span><span class="s">&#39;dba&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mv</span><span class="o">.</span><span class="n">dba</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&#39;ascii&#39;</span><span class="p">,</span><span class="s">&#39;ignore&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s">&#39;utf-8&#39;</span><span class="p">,</span><span class="s">&#39;ignore&#39;</span><span class="p">))</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;drop table if exists mn_vendors&#39;</span><span class="p">)</span>
<span class="n">mv</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s">&#39;mn_vendors&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">,</span><span class="n">index</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">    alter table mn_vendors add column id serial;</span>
<span class="s">    update mn_vendors set id = nextval(pg_get_serial_sequence(&#39;mn_vendors&#39;,&#39;id&#39;));</span>
<span class="s">    alter table mn_vendors add primary key (id);</span>
<span class="s">    &quot;&quot;&quot;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;alter table mn_vendors add column recog_street boolean;</span>
<span class="s">                  update mn_vendors set recog_street = False;&quot;&quot;&quot;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;  update mn_vendors set recog_street = True</span>
<span class="s">                    where exists (</span>
<span class="s">                        select 1 from address_idx a</span>
<span class="s">                        where a.street = clean_street</span>
<span class="s">                    )&quot;&quot;&quot;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### add subway entrances to map</span>
<span class="n">url</span> <span class="o">=</span> <span class="s">&#39;http://web.mta.info/developers/data/nyct/subway/StationEntrances.csv&#39;</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="n">s</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">it</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">s</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">tolist</span><span class="p">()]</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;drop table if exists sub_stat_entr&#39;</span><span class="p">)</span>
<span class="n">s</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s">&#39;sub_stat_entr&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;alter table sub_stat_entr add column geom geometry(Point,4326)&#39;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;UPDATE sub_stat_entr set geom = ST_SetSRID(ST_MakePoint(station_longitude,station_latitude),4326)&quot;&quot;&quot;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot; DELETE FROM sub_stat_entr </span>
<span class="s">                WHERE NOT (geom &amp;&amp; (</span>
<span class="s">                    SELECT ST_Buffer(ST_ConvexHull((ST_Collect(f.the_geom))), .0005) as geom </span>
<span class="s">                    FROM ( SELECT *, (ST_Dump(geom)).geom As the_geom </span>
<span class="s">                    FROM pluto) As f))&quot;&quot;&quot;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">    alter table sub_stat_entr add column id serial;</span>
<span class="s">    update sub_stat_entr set index = nextval(pg_get_serial_sequence(&#39;sub_stat_entr&#39;,&#39;id&#39;));</span>
<span class="s">    alter table sub_stat_entr add primary key (id);</span>
<span class="s">    &quot;&quot;&quot;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### add subway stops to map, add turn stile data to subway stops</span>
<span class="kn">import</span> <span class="nn">requests</span><span class="o">,</span> <span class="nn">zipfile</span><span class="o">,</span> <span class="nn">StringIO</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;http://web.mta.info/developers/data/nyct/subway/google_transit.zip&#39;</span><span class="p">)</span>
<span class="n">z</span> <span class="o">=</span> <span class="n">zipfile</span><span class="o">.</span><span class="n">ZipFile</span><span class="p">(</span><span class="n">StringIO</span><span class="o">.</span><span class="n">StringIO</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">content</span><span class="p">))</span>
<span class="n">sub_stops</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">z</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s">&#39;stops.txt&#39;</span><span class="p">))</span>
<span class="n">sub_stops</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s">&#39;sub_stops&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;alter table sub_stops add column geom geometry(Point,4326)&#39;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;UPDATE sub_stops set geom = ST_SetSRID(ST_MakePoint(stop_lon,stop_lat),4326)&quot;&quot;&quot;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot; DELETE FROM sub_stops </span>
<span class="s">                WHERE NOT (geom &amp;&amp; (</span>
<span class="s">                    SELECT ST_Buffer(ST_ConvexHull((ST_Collect(f.the_geom))), .0005) as geom </span>
<span class="s">                    FROM ( SELECT *, (ST_Dump(geom)).geom As the_geom </span>
<span class="s">                    FROM pluto) As f))&quot;&quot;&quot;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">    alter table sub_stops add column id serial;</span>
<span class="s">    update sub_stops set index = nextval(pg_get_serial_sequence(&#39;sub_stops&#39;,&#39;id&#39;));</span>
<span class="s">    alter table sub_stops add primary key (id);</span>
<span class="s">    &quot;&quot;&quot;</span><span class="p">)</span>
<span class="c"># NOTE:  also then deleted more by hand</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### add turn_stile_key to pgsql</span>
<span class="n">ts_key</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s">&#39;http://web.mta.info/developers/resources/nyct/turnstile/Remote-Booth-Station.xls&#39;</span><span class="p">)</span>
<span class="n">ts_key</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">it</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39; &#39;</span><span class="p">,</span><span class="s">&#39;_&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">ts_key</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">tolist</span><span class="p">()]</span>
<span class="n">ts_key</span><span class="p">[</span><span class="s">&#39;line_name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ts_key</span><span class="p">[</span><span class="s">&#39;line_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">sorted</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">it</span><span class="p">)</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">s</span><span class="p">]))</span> <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">!=</span><span class="nb">int</span> <span class="k">else</span> <span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
<span class="n">ts_key</span><span class="p">[</span><span class="s">&#39;clean&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ts_key</span><span class="o">.</span><span class="n">station</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;drop table if exists ts_key&quot;</span><span class="p">)</span>
<span class="n">ts_key</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s">&#39;ts_key&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### add turn stile data to pgsql</span>
<span class="c"># General Source for Turn Stiles: http://web.mta.info/developers/turnstile.html</span>
<span class="c">#     - field description: http://web.mta.info/developers/resources/nyct/turnstile/ts_Field%20Description.txt</span>
<span class="c">#     - data key: http://web.mta.info/developers/resources/nyct/turnstile/Remote-Booth-Station.xls</span>
<span class="c">#         --&gt; this is the provides the Remote Unit/Control Area/Station Name Key</span>
<span class="c"># Need coords for &quot;UNIT&quot;</span>
<span class="c"># Remote and Station Name here:</span>
<span class="c">#      &#39;http://web.mta.info/developers/resources/nyct/turnstile/Remote-Booth-Station.xls&#39;</span>
<span class="c"># Station Names and Coords here:</span>
<span class="c">#      &#39;http://web.mta.info/developers/data/nyct/subway/StationEntrances.csv&#39;</span>
<span class="c">#     - Relevant stations were added to pgsql as &#39;sub_stat_entr&#39;</span>


<span class="n">cols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;C/A&#39;</span><span class="p">,</span><span class="s">&#39;UNIT&#39;</span><span class="p">,</span><span class="s">&#39;SCP&#39;</span><span class="p">,</span><span class="s">&#39;DATE1&#39;</span><span class="p">,</span><span class="s">&#39;TIME1&#39;</span><span class="p">,</span><span class="s">&#39;DESC1&#39;</span><span class="p">,</span><span class="s">&#39;ENTRIES1&#39;</span><span class="p">,</span><span class="s">&#39;EXITS1&#39;</span><span class="p">,</span>
        <span class="s">&#39;DATE2&#39;</span><span class="p">,</span><span class="s">&#39;TIME2&#39;</span><span class="p">,</span><span class="s">&#39;DESC2&#39;</span><span class="p">,</span><span class="s">&#39;ENTRIES2&#39;</span><span class="p">,</span><span class="s">&#39;EXITS2&#39;</span><span class="p">,</span><span class="s">&#39;DATE3&#39;</span><span class="p">,</span><span class="s">&#39;TIME3&#39;</span><span class="p">,</span><span class="s">&#39;DESC3&#39;</span><span class="p">,</span><span class="s">&#39;ENTRIES3&#39;</span><span class="p">,</span>
        <span class="s">&#39;EXITS3&#39;</span><span class="p">,</span><span class="s">&#39;DATE4&#39;</span><span class="p">,</span><span class="s">&#39;TIME4&#39;</span><span class="p">,</span><span class="s">&#39;DESC4&#39;</span><span class="p">,</span><span class="s">&#39;ENTRIES4&#39;</span><span class="p">,</span><span class="s">&#39;EXITS4&#39;</span><span class="p">,</span><span class="s">&#39;DATE5&#39;</span><span class="p">,</span><span class="s">&#39;TIME5&#39;</span><span class="p">,</span><span class="s">&#39;DESC5&#39;</span><span class="p">,</span>
        <span class="s">&#39;ENTRIES5&#39;</span><span class="p">,</span><span class="s">&#39;EXITS5&#39;</span><span class="p">,</span><span class="s">&#39;DATE6&#39;</span><span class="p">,</span><span class="s">&#39;TIME6&#39;</span><span class="p">,</span><span class="s">&#39;DESC6&#39;</span><span class="p">,</span><span class="s">&#39;ENTRIES6&#39;</span><span class="p">,</span>
        <span class="s">&#39;EXITS6&#39;</span><span class="p">,</span><span class="s">&#39;DATE7&#39;</span><span class="p">,</span><span class="s">&#39;TIME7&#39;</span><span class="p">,</span><span class="s">&#39;DESC7&#39;</span><span class="p">,</span><span class="s">&#39;ENTRIES7&#39;</span><span class="p">,</span><span class="s">&#39;EXITS7&#39;</span><span class="p">,</span><span class="s">&#39;DATE8&#39;</span><span class="p">,</span>
        <span class="s">&#39;TIME8&#39;</span><span class="p">,</span><span class="s">&#39;DESC8&#39;</span><span class="p">,</span><span class="s">&#39;ENTRIES8&#39;</span><span class="p">,</span><span class="s">&#39;EXITS8&#39;</span><span class="p">]</span>
<span class="n">cols</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">it</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;/&#39;</span><span class="p">,</span><span class="s">&#39;_&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">cols</span><span class="p">]</span>
<span class="n">url</span> <span class="o">=</span> <span class="s">&#39;http://web.mta.info/developers/data/nyct/turnstile/turnstile_141004.txt&#39;</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="n">names</span><span class="o">=</span><span class="n">cols</span><span class="p">)</span>
<span class="n">idx</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="n">p</span><span class="o">.</span><span class="n">unit</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s">&#39;R&#39;</span><span class="p">)</span><span class="o">==</span><span class="bp">False</span><span class="p">]</span><span class="o">.</span><span class="n">index</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">idx</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="c"># ts_key = pd.read_excel(&#39;http://web.mta.info/developers/resources/nyct/turnstile/Remote-Booth-Station.xls&#39;)</span>
<span class="c"># ts_key.columns = [str(it).lower().replace(&#39; &#39;,&#39;_&#39;) for it in ts_key.columns.tolist()]</span>

<span class="n">dropCols</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">cols</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">it</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;exit&#39;</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span> <span class="ow">or</span> <span class="n">it</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;entries&#39;</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
        <span class="n">p</span><span class="p">[</span><span class="n">it</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="n">it</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">it</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;date&#39;</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
        <span class="n">date_pt</span><span class="p">,</span><span class="n">time_pt</span><span class="p">,</span><span class="n">datetime_pt</span> <span class="o">=</span> <span class="n">it</span><span class="p">,</span><span class="s">&#39;time&#39;</span><span class="o">+</span><span class="n">it</span><span class="p">[</span><span class="mi">4</span><span class="p">:],</span><span class="s">&#39;datetime&#39;</span><span class="o">+</span><span class="n">it</span><span class="p">[</span><span class="mi">4</span><span class="p">:]</span>
        <span class="n">p</span><span class="p">[</span><span class="n">datetime_pt</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="n">date_pt</span><span class="p">]</span> <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span> <span class="n">p</span><span class="p">[</span><span class="n">time_pt</span><span class="p">],</span><span class="n">format</span><span class="o">=</span><span class="s">&#39;%m-</span><span class="si">%d</span><span class="s">-%y %H:%M:%S&#39;</span><span class="p">,</span><span class="nb">coerce</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="n">p</span><span class="p">[</span><span class="n">datetime_pt</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="n">datetime_pt</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="bp">None</span> <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">==</span><span class="s">&#39;NaT&#39;</span> <span class="k">else</span> <span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
        <span class="n">dropCols</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">date_pt</span><span class="p">,</span><span class="n">time_pt</span><span class="p">])</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">dropCols</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">cols</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

<span class="c"># END GOAL conform &#39;station_names&#39; to &#39;mn_stations&#39;</span>
<span class="n">mn_stations</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s">&quot;&quot;&quot;select * from sub_stat_entr&quot;&quot;&quot;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>

<span class="c"># Limit NYC key to MN</span>
<span class="n">mn_div_list</span> <span class="o">=</span> <span class="n">mn_stations</span><span class="o">.</span><span class="n">division</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="n">ts_key</span> <span class="o">=</span> <span class="n">ts_key</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">ts_key</span><span class="p">[</span><span class="n">ts_key</span><span class="o">.</span><span class="n">division</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">mn_div_list</span><span class="p">)</span><span class="o">==</span><span class="bp">False</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="c"># Create and Sort Route List for each station</span>
<span class="n">mn_cols</span> <span class="o">=</span> <span class="n">mn_stations</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="n">s_pt</span><span class="p">,</span><span class="n">e_pt</span> <span class="o">=</span> <span class="n">mn_cols</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s">&#39;route_1&#39;</span><span class="p">),</span><span class="n">mn_cols</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s">&#39;route_11&#39;</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span>
<span class="n">mn_stations</span><span class="p">[</span><span class="s">&#39;all_lines&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mn_stations</span><span class="o">.</span><span class="n">ix</span><span class="p">[:,</span><span class="n">s_pt</span><span class="p">:</span><span class="n">e_pt</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">it</span><span class="p">)</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">s</span> <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">it</span><span class="p">)</span><span class="o">!=</span><span class="s">&#39;NaN&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;nan&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;.0&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">),</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">mn_stations</span><span class="p">[</span><span class="s">&#39;all_lines&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mn_stations</span><span class="o">.</span><span class="n">all_lines</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">s</span><span class="p">)))</span>
<span class="c"># ts_key[&#39;line_name&#39;] = ts_key[&#39;line_name&#39;].map(lambda s: &#39;&#39;.join(sorted([str(it) for it in s])) if type(s)!=int else str(s))</span>

<span class="c"># clean up many but small differences between station names</span>
<span class="n">mn_stations</span><span class="p">[</span><span class="s">&#39;clean&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mn_stations</span><span class="o">.</span><span class="n">station_name</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
<span class="c"># ts_key[&#39;clean&#39;] = ts_key.station.map(lambda s: s.lower())</span>
<span class="n">repl_dict</span> <span class="o">=</span> <span class="p">{</span>   <span class="s">r&#39;(1st|first)&#39;</span>          <span class="p">:</span><span class="s">r&#39;1&#39;</span><span class="p">,</span>
                <span class="s">r&#39;(2nd|second)&#39;</span>         <span class="p">:</span><span class="s">r&#39;2&#39;</span><span class="p">,</span>
                <span class="s">r&#39;(3rd|third)&#39;</span>          <span class="p">:</span><span class="s">r&#39;3&#39;</span><span class="p">,</span>
                <span class="s">r&#39;(4th|fourth)&#39;</span>         <span class="p">:</span><span class="s">r&#39;4&#39;</span><span class="p">,</span>
                <span class="s">r&#39;(5th|fifth)&#39;</span>          <span class="p">:</span><span class="s">r&#39;5&#39;</span><span class="p">,</span>
                <span class="s">r&#39;(6th|sixth)&#39;</span>          <span class="p">:</span><span class="s">r&#39;6&#39;</span><span class="p">,</span>
                <span class="s">r&#39;(7th|seventh)&#39;</span>        <span class="p">:</span><span class="s">r&#39;7&#39;</span><span class="p">,</span>
                <span class="s">r&#39;(8th|eigth)&#39;</span>          <span class="p">:</span><span class="s">r&#39;8&#39;</span><span class="p">,</span>
                <span class="s">r&#39;(9th|nineth|ninth)&#39;</span>   <span class="p">:</span><span class="s">r&#39;9&#39;</span><span class="p">,</span>
                <span class="s">r&#39;(0th)&#39;</span>                <span class="p">:</span><span class="s">r&#39;0&#39;</span><span class="p">,</span>
                <span class="s">r&#39;(1th)&#39;</span>                <span class="p">:</span><span class="s">r&#39;1&#39;</span><span class="p">,</span>
                <span class="s">r&#39;(2th)&#39;</span>                <span class="p">:</span><span class="s">r&#39;2&#39;</span><span class="p">,</span>
                <span class="s">r&#39;(3th)&#39;</span>                <span class="p">:</span><span class="s">r&#39;3&#39;</span><span class="p">,</span>
                <span class="s">r&#39;\s(street)&#39;</span>           <span class="p">:</span><span class="s">r&#39; st&#39;</span><span class="p">,</span>
                <span class="s">r&#39;\s(square)&#39;</span>           <span class="p">:</span><span class="s">r&#39; sq&#39;</span><span class="p">,</span>
                <span class="s">r&#39;\s(center)&#39;</span>           <span class="p">:</span><span class="s">r&#39; ctr&#39;</span><span class="p">,</span>
                <span class="s">r&#39;\s(av)&#39;</span><span class="p">:</span><span class="s">r&#39; ave&#39;</span><span class="p">}</span>
<span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">repl_dict</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
    <span class="n">mn_stations</span><span class="p">[</span><span class="s">&#39;clean&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mn_stations</span><span class="o">.</span><span class="n">clean</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="n">v</span><span class="p">)</span>
    
<span class="n">repl_dict</span> <span class="o">=</span> <span class="p">{</span>   <span class="s">r&#39;\Aunion sq&#39;</span><span class="p">:</span><span class="s">r&#39;14 st-union sq&#39;</span><span class="p">,</span>
                <span class="s">r&#39;cathedral parkway-110 st&#39;</span><span class="p">:</span><span class="s">r&#39;110 st-cathedrl&#39;</span><span class="p">,</span>
                <span class="s">r&#39;163 st - amsterdam ave&#39;</span><span class="p">:</span><span class="s">r&#39;163 st-amsterdm&#39;</span><span class="p">,</span>
                <span class="s">r&#39;81 st - museum of natural history&#39;</span><span class="p">:</span><span class="s">r&#39;81 st-museum&#39;</span><span class="p">,</span>
                <span class="s">r&#39;47-50 sts rockefeller ctr&#39;</span><span class="p">:</span><span class="s">r&#39;47-50 st-rock&#39;</span><span class="p">,</span>
                <span class="s">r&#39;137 st-city college&#39;</span><span class="p">:</span><span class="s">r&#39;137 st-city col&#39;</span><span class="p">,</span>
                <span class="s">r&#39;broadway-lafayette st&#39;</span><span class="p">:</span><span class="s">r&#39;broadway/lafay&#39;</span><span class="p">,</span>
                <span class="s">r&#39;west 4 st&#39;</span><span class="p">:</span><span class="s">r&#39;w 4 st-wash sq&#39;</span> <span class="p">,</span>
                <span class="s">r&#39;110 st-central park north&#39;</span><span class="p">:</span><span class="s">r&#39;110 st-cpn&#39;</span><span class="p">,</span>
                <span class="s">r&#39;116 st-columbia university&#39;</span><span class="p">:</span><span class="s">r&#39;116 st-columbia&#39;</span><span class="p">,</span>
                <span class="s">r&#39;168 st - washington heights&#39;</span><span class="p">:</span><span class="s">r&#39;168 st-broadway&#39;</span><span class="p">,</span>
<span class="c">#                 r&#39;168 st-broadway - washington heights&#39;:r&#39;168 st-broadway&#39;,</span>
                <span class="s">r&#39;49 st&#39;</span><span class="p">:</span><span class="s">r&#39;49 st-7 ave&#39;</span><span class="p">,</span>
                <span class="s">r&#39;168 st\Z&#39;</span><span class="p">:</span><span class="s">r&#39;168 st-broadway&#39;</span><span class="p">,</span>
                <span class="s">r&#39;59 st-columbus circle&#39;</span><span class="p">:</span><span class="s">r&#39;59 st-columbus&#39;</span><span class="p">,</span>
                <span class="s">r&#39;66 st-lincoln ctr&#39;</span><span class="p">:</span><span class="s">r&#39;66 st-lincoln&#39;</span><span class="p">,</span>
                <span class="s">r&#39;68 st-hunter college&#39;</span><span class="p">:</span><span class="s">r&#39;68st-hunter col&#39;</span><span class="p">,</span>
                <span class="c"># r&#39;astor pl&#39;:&#39;astor place&#39;,</span>
                <span class="s">r&#39;brooklyn bridge-city hall&#39;</span><span class="p">:</span><span class="s">r&#39;brooklyn bridge&#39;</span><span class="p">,</span>
                <span class="s">r&#39;dyckman st-200 st&#39;</span><span class="p">:</span><span class="s">r&#39;dyckman-200 st&#39;</span><span class="p">,</span>
                <span class="s">r&#39;grand central-42 st&#39;</span><span class="p">:</span><span class="s">r&#39;42 st-grd cntrl&#39;</span><span class="p">,</span>
                <span class="s">r&#39;inwood - 207 st&#39;</span><span class="p">:</span><span class="s">r&#39;inwood-207 st&#39;</span><span class="p">,</span>
                <span class="s">r&#39;lexington av-53 st&#39;</span><span class="p">:</span><span class="s">r&#39;lexington-53 st&#39;</span><span class="p">,</span>
                <span class="s">r&#39;prince st&#39;</span><span class="p">:</span><span class="s">r&quot;prince st-b&#39;way&quot;</span><span class="p">,</span>
                <span class="s">r&#39;\Atimes sq\Z&#39;</span><span class="p">:</span><span class="s">r&#39;42 st-times sq&#39;</span><span class="p">,</span>
                <span class="s">r&#39;times sq-42 st&#39;</span><span class="p">:</span><span class="s">r&#39;42 st-times sq&#39;</span><span class="p">,</span>
                <span class="s">r&#39;van cortlandt park-242 st&#39;</span><span class="p">:</span><span class="s">r&#39;242 st&#39;</span><span class="p">,</span>
                <span class="s">r&#39;marble hill-225 st&#39;</span><span class="p">:</span><span class="s">r&#39;225 st&#39;</span><span class="p">,</span>
                <span class="s">r&#39;lexington ave-53 st&#39;</span><span class="p">:</span><span class="s">r&#39;lexington-53 st&#39;</span><span class="p">,</span>
                <span class="s">r&#39;harlem-148 st&#39;</span><span class="p">:</span><span class="s">r&#39;148 st-lenox&#39;</span><span class="p">,</span>
                <span class="s">r&#39;\Agrand central\Z&#39;</span><span class="p">:</span><span class="s">r&#39;42 st-grd cntrl&#39;</span><span class="p">,</span>
                <span class="s">r&#39;\Acanal st (ul)\Z&#39;</span><span class="p">:</span><span class="s">r&#39;canal st&#39;</span><span class="p">,}</span>
<span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">repl_dict</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
    <span class="n">mn_stations</span><span class="p">[</span><span class="s">&#39;clean&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mn_stations</span><span class="o">.</span><span class="n">clean</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="n">v</span><span class="p">)</span>

<span class="n">station_names</span> <span class="o">=</span> <span class="n">ts_key</span><span class="o">.</span><span class="n">clean</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="c">#print len(mn_stations[mn_stations.clean.isin(station_names)==False]), &#39;stations not mapped&#39;</span>
<span class="c"># mn_stations[mn_stations.clean.isin(station_names)==False].ix[:,[&#39;division&#39;,&#39;line&#39;,&#39;station_name&#39;,&#39;all_lines&#39;,&#39;clean&#39;]].sort(&#39;clean&#39;)</span>
<span class="c"># mn_stations.head()</span>

<span class="c"># push to [ sub_stat_entr,ts_key,p(turn stiles) ] to pgsql for comparison and unificiation</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;drop table if exists sub_stat_entr&#39;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;drop table if exists ts_key&#39;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;drop table if exists sub_turn_stiles&#39;</span><span class="p">)</span>
<span class="n">delay</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="n">mn_stations</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s">&#39;id&#39;</span><span class="p">,</span><span class="s">&#39;index&#39;</span><span class="p">],</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s">&#39;sub_stat_entr&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">    alter table sub_stat_entr add column id serial;</span>
<span class="s">    update sub_stat_entr set index = nextval(pg_get_serial_sequence(&#39;sub_stat_entr&#39;,&#39;id&#39;));</span>
<span class="s">    alter table sub_stat_entr add primary key (id);</span>
<span class="s">    &quot;&quot;&quot;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;UPDATE sub_stat_entr set geom = ST_SetSRID(ST_MakePoint(station_longitude,station_latitude),4326)&quot;&quot;&quot;</span><span class="p">)</span>

<span class="c"># ts_key.to_sql(&#39;ts_key&#39;,engine)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">    alter table ts_key add column lat double precision;</span>
<span class="s">    alter table ts_key add column lon double precision;</span>
<span class="s">    alter table ts_key add column id serial;</span>
<span class="s">    update ts_key set index = nextval(pg_get_serial_sequence(&#39;ts_key&#39;,&#39;id&#39;));</span>
<span class="s">    alter table ts_key add primary key (id);</span>
<span class="s">    &quot;&quot;&quot;</span><span class="p">)</span>

<span class="n">p</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s">&#39;sub_turn_stiles&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">    alter table sub_turn_stiles add column station text;</span>
<span class="s">    alter table sub_turn_stiles add column lat double precision;</span>
<span class="s">    alter table sub_turn_stiles add column lon double precision;</span>
<span class="s">    alter table sub_turn_stiles add column id serial;</span>
<span class="s">    update sub_turn_stiles set index = nextval(pg_get_serial_sequence(&#39;sub_turn_stiles&#39;,&#39;id&#39;));</span>
<span class="s">    alter table sub_turn_stiles add primary key (id);</span>
<span class="s">    &quot;&quot;&quot;</span><span class="p">)</span>

<span class="c"># 1. Copy coords from station_entrances to turnstile_key</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">                UPDATE ts_key t</span>
<span class="s">                SET lat = s.station_latitude,lon = s.station_longitude</span>
<span class="s">                FROM sub_stat_entr s</span>
<span class="s">                WHERE s.clean=t.clean</span>
<span class="s">                AND s.all_lines=t.line_name;</span>
<span class="s">                &quot;&quot;&quot;</span><span class="p">)</span>
<span class="c">#print pd.read_sql(&#39;select count(*) c from ts_key where lon is null&#39;,engine).c[0],&#39;null&#39;</span>
<span class="c">#print pd.read_sql(&#39;select count(*) c from ts_key where lon is not null&#39;,engine).c[0],&#39;not null&#39;</span>

<span class="c"># 2. Copy matching ts_key table data to turn_stiles table</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">                UPDATE sub_turn_stiles</span>
<span class="s">                SET lat = t.lat,lon=t.lon,station=t.station</span>
<span class="s">                FROM ts_key t</span>
<span class="s">                WHERE t.remote = unit</span>
<span class="s">                AND t.booth = c_a;</span>
<span class="s">                &quot;&quot;&quot;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;alter table sub_turn_stiles add column geom geometry(Point,4326)&#39;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;UPDATE sub_turn_stiles set geom = ST_SetSRID(ST_MakePoint(lon,lat),4326)&quot;&quot;&quot;</span><span class="p">)</span>

<span class="c"># 3. Attempt to match leftovers (non-matching) b/t ts_key/sub_stat_entr using wildcards</span>
<span class="n">leftovers</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s">&quot;select * from ts_key where lon is null and division = any(array[&#39;IRT&#39;,&#39;IND&#39;,&#39;BMT&#39;])&quot;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">leftovers</span><span class="p">)):</span>
    <span class="n">row</span> <span class="o">=</span> <span class="n">leftovers</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">i</span><span class="p">,:]</span>
    <span class="n">chk</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s">&#39;clean&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;-&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">chk</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
        <span class="n">a</span><span class="p">,</span><span class="n">b</span> <span class="o">=</span> <span class="s">&#39;</span><span class="si">%%</span><span class="s">&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s">&#39;clean&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;-&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span><span class="o">+</span><span class="s">&#39;</span><span class="si">%%</span><span class="s">&#39;</span><span class="p">,</span><span class="n">row</span><span class="p">[</span><span class="s">&#39;line_name&#39;</span><span class="p">]</span>
        <span class="n">tmp</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span>  <span class="s">&quot;&quot;&quot; </span>
<span class="s">                            SELECT station_latitude lat,station_longitude lon</span>
<span class="s">                            FROM sub_stat_entr s</span>
<span class="s">                            WHERE s.clean ilike &#39;</span><span class="si">%s</span><span class="s">&#39;</span>
<span class="s">                            AND s.all_lines=&#39;</span><span class="si">%s</span><span class="s">&#39;;</span>
<span class="s">                            &quot;&quot;&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">),</span><span class="n">engine</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">tmp</span><span class="o">.</span><span class="n">lat</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span><span class="o">==</span><span class="nb">len</span><span class="p">(</span><span class="n">tmp</span><span class="o">.</span><span class="n">lat</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span><span class="o">==</span><span class="mi">1</span><span class="p">):</span>
            <span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span> <span class="o">=</span> <span class="n">tmp</span><span class="o">.</span><span class="n">lat</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">tmp</span><span class="o">.</span><span class="n">lon</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">row</span><span class="p">[</span><span class="s">&#39;id&#39;</span><span class="p">]</span>
            <span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">                                UPDATE ts_key set lat=</span><span class="si">%f</span><span class="s">,lon=</span><span class="si">%f</span><span class="s"></span>
<span class="s">                                WHERE id = </span><span class="si">%d</span><span class="s"></span>
<span class="s">                            &quot;&quot;&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">),</span><span class="n">engine</span><span class="p">)</span>
            
<span class="c"># 4. Attempt to match leftover by:</span>
        <span class="c"># starting with lines,division, </span>
            <span class="c"># if one result go with it, </span>
            <span class="c"># else if only one result and it&#39;s a partial match, go with it?</span>
<span class="n">leftovers</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s">&quot;select * from ts_key where lon is null and division = any(array[&#39;IRT&#39;,&#39;IND&#39;,&#39;BMT&#39;])&quot;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">leftovers</span><span class="p">)):</span>
    <span class="n">row</span> <span class="o">=</span> <span class="n">leftovers</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">i</span><span class="p">,:]</span>
    <span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span> <span class="o">=</span> <span class="s">&#39;</span><span class="si">%%</span><span class="s">&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s">&#39;clean&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;-&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span><span class="o">+</span><span class="s">&#39;</span><span class="si">%%</span><span class="s">&#39;</span><span class="p">,</span><span class="n">row</span><span class="p">[</span><span class="s">&#39;line_name&#39;</span><span class="p">],</span><span class="n">row</span><span class="p">[</span><span class="s">&#39;division&#39;</span><span class="p">]</span>
    <span class="n">tmp</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span>  <span class="s">&quot;&quot;&quot; </span>
<span class="s">                        SELECT station_latitude lat,station_longitude lon,clean</span>
<span class="s">                        FROM sub_stat_entr s</span>
<span class="s">                        WHERE s.division=&#39;</span><span class="si">%s</span><span class="s">&#39;</span>
<span class="s">                        AND s.all_lines=&#39;</span><span class="si">%s</span><span class="s">&#39;;</span>
<span class="s">                        &quot;&quot;&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="n">b</span><span class="p">),</span><span class="n">engine</span><span class="p">)</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">tmp</span><span class="o">.</span><span class="n">lat</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span><span class="o">==</span><span class="nb">len</span><span class="p">(</span><span class="n">tmp</span><span class="o">.</span><span class="n">lat</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span><span class="o">==</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span> <span class="o">=</span> <span class="n">tmp</span><span class="o">.</span><span class="n">lat</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">tmp</span><span class="o">.</span><span class="n">lon</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">row</span><span class="p">[</span><span class="s">&#39;id&#39;</span><span class="p">]</span>
        <span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">                            UPDATE ts_key set lat=</span><span class="si">%f</span><span class="s">,lon=</span><span class="si">%f</span><span class="s"></span>
<span class="s">                            WHERE id = </span><span class="si">%d</span><span class="s"></span>
<span class="s">                        &quot;&quot;&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">),</span><span class="n">engine</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">z</span><span class="o">=</span><span class="n">tmp</span><span class="p">[</span><span class="n">tmp</span><span class="o">.</span><span class="n">clean</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">a</span><span class="p">)]</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">z</span><span class="o">.</span><span class="n">lat</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span><span class="o">==</span><span class="nb">len</span><span class="p">(</span><span class="n">z</span><span class="o">.</span><span class="n">lat</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span><span class="o">==</span><span class="mi">1</span><span class="p">):</span>
            <span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span> <span class="o">=</span> <span class="n">tmp</span><span class="o">.</span><span class="n">lat</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">tmp</span><span class="o">.</span><span class="n">lon</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">row</span><span class="p">[</span><span class="s">&#39;id&#39;</span><span class="p">]</span>
            <span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">                                UPDATE ts_key set lat=</span><span class="si">%f</span><span class="s">,lon=</span><span class="si">%f</span><span class="s"></span>
<span class="s">                                WHERE id = </span><span class="si">%d</span><span class="s"></span>
<span class="s">                            &quot;&quot;&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">),</span><span class="n">engine</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># TURN STILE CONT&#39;D convert text to timestamp</span>

<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;  </span>

<span class="s">    DROP TABLE if exists tmp;</span>

<span class="s">    CREATE TABLE tmp (</span>
<span class="s">        gid serial primary key,</span>
<span class="s">        datetime1 timestamp with time zone,</span>
<span class="s">        datetime2 timestamp with time zone,</span>
<span class="s">        datetime3 timestamp with time zone,</span>
<span class="s">        datetime4 timestamp with time zone,</span>
<span class="s">        datetime5 timestamp with time zone,</span>
<span class="s">        datetime6 timestamp with time zone,</span>
<span class="s">        datetime7 timestamp with time zone,</span>
<span class="s">        datetime8 timestamp with time zone</span>
<span class="s">        );</span>

<span class="s">    UPDATE tmp SET gid = nextval(pg_get_serial_sequence(&#39;tmp&#39;,&#39;gid&#39;));</span>

<span class="s">    INSERT INTO tmp (</span>
<span class="s">        datetime1,</span>
<span class="s">        datetime2,</span>
<span class="s">        datetime3,</span>
<span class="s">        datetime4,</span>
<span class="s">        datetime5,</span>
<span class="s">        datetime6,</span>
<span class="s">        datetime7,</span>
<span class="s">        datetime8)</span>
<span class="s">    SELECT </span>
<span class="s">        to_timestamp(s.datetime1,&#39;YYYY-MM-DD HH24:MI:SS&#39;),</span>
<span class="s">        to_timestamp(s.datetime2,&#39;YYYY-MM-DD HH24:MI:SS&#39;),</span>
<span class="s">        to_timestamp(s.datetime3,&#39;YYYY-MM-DD HH24:MI:SS&#39;),</span>
<span class="s">        to_timestamp(s.datetime4,&#39;YYYY-MM-DD HH24:MI:SS&#39;),</span>
<span class="s">        to_timestamp(s.datetime5,&#39;YYYY-MM-DD HH24:MI:SS&#39;),</span>
<span class="s">        to_timestamp(s.datetime6,&#39;YYYY-MM-DD HH24:MI:SS&#39;),</span>
<span class="s">        to_timestamp(s.datetime7,&#39;YYYY-MM-DD HH24:MI:SS&#39;),</span>
<span class="s">        to_timestamp(s.datetime8,&#39;YYYY-MM-DD HH24:MI:SS&#39;)</span>
<span class="s">    FROM sub_turn_stiles s;</span>

<span class="s">    ALTER TABLE sub_turn_stiles </span>
<span class="s">    DROP COLUMN datetime1,</span>
<span class="s">    DROP COLUMN datetime2,</span>
<span class="s">    DROP COLUMN datetime3,</span>
<span class="s">    DROP COLUMN datetime4,</span>
<span class="s">    DROP COLUMN datetime5,</span>
<span class="s">    DROP COLUMN datetime6,</span>
<span class="s">    DROP COLUMN datetime7,</span>
<span class="s">    DROP COLUMN datetime8,</span>
<span class="s">    ADD COLUMN datetime1 timestamp with time zone,</span>
<span class="s">    ADD COLUMN datetime2 timestamp with time zone,</span>
<span class="s">    ADD COLUMN datetime3 timestamp with time zone,</span>
<span class="s">    ADD COLUMN datetime4 timestamp with time zone,</span>
<span class="s">    ADD COLUMN datetime5 timestamp with time zone,</span>
<span class="s">    ADD COLUMN datetime6 timestamp with time zone,</span>
<span class="s">    ADD COLUMN datetime7 timestamp with time zone,</span>
<span class="s">    ADD COLUMN datetime8 timestamp with time zone;</span>

<span class="s">    UPDATE sub_turn_stiles s</span>
<span class="s">    SET </span>
<span class="s">        datetime1 = t.datetime1,</span>
<span class="s">        datetime2 = t.datetime2,</span>
<span class="s">        datetime3 = t.datetime3,</span>
<span class="s">        datetime4 = t.datetime4,</span>
<span class="s">        datetime5 = t.datetime5,</span>
<span class="s">        datetime6 = t.datetime6,</span>
<span class="s">        datetime7 = t.datetime7,</span>
<span class="s">        datetime8 = t.datetime8</span>
<span class="s">    FROM tmp t</span>
<span class="s">    where t.gid = s.id;</span>

<span class="s">               &quot;&quot;&quot;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># TURN STILE CONT&#39;D calc. register differences</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">alter table sub_turn_stiles </span>
<span class="s">add column out1 double precision,</span>
<span class="s">add column out2 double precision,</span>
<span class="s">add column out3 double precision,</span>
<span class="s">add column out4 double precision,</span>
<span class="s">add column out5 double precision,</span>
<span class="s">add column out6 double precision,</span>
<span class="s">add column out7 double precision,</span>
<span class="s">add column in1 double precision,</span>
<span class="s">add column in2 double precision,</span>
<span class="s">add column in3 double precision,</span>
<span class="s">add column in4 double precision,</span>
<span class="s">add column in5 double precision,</span>
<span class="s">add column in6 double precision,</span>
<span class="s">add column in7 double precision;</span>


<span class="s">update sub_turn_stiles</span>
<span class="s">set out1 = exits2-exits1</span>
<span class="s">where exits1 != &#39;NaN&#39;::float</span>
<span class="s">and exits2 != &#39;NaN&#39;::float;</span>

<span class="s">update sub_turn_stiles</span>
<span class="s">set out2 = exits3-exits2</span>
<span class="s">where exits2 != &#39;NaN&#39;::float</span>
<span class="s">and exits3 != &#39;NaN&#39;::float;</span>

<span class="s">update sub_turn_stiles</span>
<span class="s">set out3 = exits4-exits3</span>
<span class="s">where exits3 != &#39;NaN&#39;::float</span>
<span class="s">and exits4 != &#39;NaN&#39;::float;</span>

<span class="s">update sub_turn_stiles</span>
<span class="s">set out4 = exits5-exits4</span>
<span class="s">where exits4 != &#39;NaN&#39;::float</span>
<span class="s">and exits5 != &#39;NaN&#39;::float;</span>

<span class="s">update sub_turn_stiles</span>
<span class="s">set out5 = exits6-exits5</span>
<span class="s">where exits5 != &#39;NaN&#39;::float</span>
<span class="s">and exits6 != &#39;NaN&#39;::float;</span>

<span class="s">update sub_turn_stiles</span>
<span class="s">set out6 = exits7-exits6</span>
<span class="s">where exits6 != &#39;NaN&#39;::float</span>
<span class="s">and exits7 != &#39;NaN&#39;::float;</span>

<span class="s">update sub_turn_stiles</span>
<span class="s">set out7 = exits8-exits7</span>
<span class="s">where exits7 != &#39;NaN&#39;::float</span>
<span class="s">and exits8 != &#39;NaN&#39;::float;</span>


<span class="s">update sub_turn_stiles</span>
<span class="s">set in1 = entries2-entries1</span>
<span class="s">where entries1 != &#39;NaN&#39;::float</span>
<span class="s">and entries2 != &#39;NaN&#39;::float;</span>

<span class="s">update sub_turn_stiles</span>
<span class="s">set in2 = entries3-entries2</span>
<span class="s">where entries2 != &#39;NaN&#39;::float</span>
<span class="s">and entries3 != &#39;NaN&#39;::float;</span>

<span class="s">update sub_turn_stiles</span>
<span class="s">set in3 = entries4-entries3</span>
<span class="s">where entries3 != &#39;NaN&#39;::float</span>
<span class="s">and entries4 != &#39;NaN&#39;::float;</span>

<span class="s">update sub_turn_stiles</span>
<span class="s">set in4 = entries5-entries4</span>
<span class="s">where entries4 != &#39;NaN&#39;::float</span>
<span class="s">and entries5 != &#39;NaN&#39;::float;</span>

<span class="s">update sub_turn_stiles</span>
<span class="s">set in5 = entries6-entries5</span>
<span class="s">where entries5 != &#39;NaN&#39;::float</span>
<span class="s">and entries6 != &#39;NaN&#39;::float;</span>

<span class="s">update sub_turn_stiles</span>
<span class="s">set in6 = entries7-entries6</span>
<span class="s">where entries6 != &#39;NaN&#39;::float</span>
<span class="s">and entries7 != &#39;NaN&#39;::float;</span>

<span class="s">update sub_turn_stiles</span>
<span class="s">set in7 = entries8-entries7</span>
<span class="s">where entries7 != &#39;NaN&#39;::float</span>
<span class="s">and entries8 != &#39;NaN&#39;::float;</span>


<span class="s">alter table sub_turn_stiles </span>
<span class="s">    add column in_all double precision,</span>
<span class="s">    add column out_all double precision;</span>
<span class="s">update sub_turn_stiles</span>
<span class="s">set in_all = (select sum(s) from unnest(array[in1,in2,in3,in4,in5,in6,in7]) s);</span>
<span class="s">update sub_turn_stiles</span>
<span class="s">set out_all = (select sum(s) from unnest(array[out1,out2,out3,out4,out5,out6,out7]) s);</span>
<span class="s">&quot;&quot;&quot;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># NEED to consolidate turn_stile data</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># turn_stile data with missing station name -- SMALL ADJUSTMENTS NEEDED</span>
<span class="n">cmd</span><span class="o">=</span><span class="s">&quot;&quot;&quot; select distinct unit,c_a from sub_turn_stiles </span>
<span class="s">        where station is null order by unit;&quot;&quot;&quot;</span>
<span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># turn_stile data analysis:</span>

<span class="c"># general data used herein</span>
<span class="n">datetime_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;datetime&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">9</span><span class="p">)]</span>
<span class="n">desc_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;desc&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">9</span><span class="p">)]</span>
<span class="n">entry_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;entries&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">9</span><span class="p">)]</span>
<span class="n">exit_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;exits&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">9</span><span class="p">)]</span>
<span class="n">in_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;in&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">9</span><span class="p">)]</span>
<span class="n">out_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;out&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">9</span><span class="p">)]</span>
<span class="n">agg_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;in_all&#39;</span><span class="p">,</span><span class="s">&#39;out_all&#39;</span><span class="p">]</span>
<span class="n">other_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;index&#39;</span><span class="p">,</span><span class="s">&#39;lat&#39;</span><span class="p">,</span><span class="s">&#39;lon&#39;</span><span class="p">,</span><span class="s">&#39;id&#39;</span><span class="p">,</span><span class="s">&#39;geom&#39;</span><span class="p">]</span>

<span class="c"># 1. this shows there are multiple entries per station, i.e., multiple turn stiles</span>
<span class="n">cmd</span> <span class="o">=</span>   <span class="s">&quot;&quot;&quot;</span>
<span class="s">        select * from sub_turn_stiles </span>
<span class="s">        where out_all is not null</span>
<span class="s">        and station = &#39;34 ST-HERALD SQ&#39;</span>
<span class="s">        AND extract(hour from datetime1) = 4</span>
<span class="s">        AND extract(day from datetime1) = 29</span>
<span class="s">        order by out_all desc;</span>
<span class="s">        &quot;&quot;&quot;</span>

<span class="c"># 2. this shows there are multiple rows even when {c_a,unit,scp,datetime1} are same</span>
<span class="n">cmd</span> <span class="o">=</span>   <span class="s">&quot;&quot;&quot;</span>
<span class="s">        select * from sub_turn_stiles </span>
<span class="s">        where out_all is not null</span>
<span class="s">        and station = &#39;34 ST-HERALD SQ&#39;</span>
<span class="s">        AND scp = &#39;00-00-00&#39;</span>
<span class="s">        order by c_a,unit,datetime1 asc;</span>
<span class="s">        &quot;&quot;&quot;</span>
<span class="n">dropCols</span> <span class="o">=</span> <span class="n">desc_cols</span> <span class="o">+</span> <span class="n">entry_cols</span> <span class="o">+</span> <span class="n">exit_cols</span> <span class="o">+</span> <span class="n">in_cols</span> <span class="o">+</span> <span class="n">out_cols</span> <span class="o">+</span> <span class="n">other_cols</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># 3. this shows the door is open for people leaving during rush hour... (see datetime6-7)</span>
<span class="c">#        and possibly explains why multiple rows</span>
<span class="n">cmd</span> <span class="o">=</span>   <span class="s">&quot;&quot;&quot;</span>
<span class="s">        select * from sub_turn_stiles </span>
<span class="s">        where out_all is not null</span>
<span class="s">        and station = &#39;34 ST-HERALD SQ&#39;</span>
<span class="s">        AND scp = &#39;00-00-00&#39;</span>
<span class="s">        AND datetime1 = &#39;2014-09-28 09:00:00-04:00&#39;;</span>
<span class="s">        &quot;&quot;&quot;</span>
<span class="c"># dropCols = desc_cols + entry_cols + exit_cols + in_cols + out_cols + other_cols</span>
<span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span><span class="c">#.drop(dropCols,axis=1)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[1]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span>
<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s">r&#39;postgresql://postgres:postgres@localhost/routing&#39;</span><span class="p">)</span>
<span class="n">BASE_TABLE_PATH</span> <span class="o">=</span> <span class="s">&#39;/Users/admin/Projects/GIS/table_data/&#39;</span>
<span class="n">BASE_MAP_PATH</span> <span class="o">=</span> <span class="s">&#39;/Users/admin/Projects/GIS/map_data/&#39;</span>



<span class="o">%</span><span class="k">matplotlib</span> <span class="n">inline</span>
<span class="kn">import</span> <span class="nn">fiona</span>
<span class="kn">from</span> <span class="nn">shapely.ops</span> <span class="kn">import</span> <span class="n">polygonize_full</span><span class="p">,</span><span class="n">polygonize</span>
<span class="kn">from</span> <span class="nn">shapely.geometry</span> <span class="kn">import</span> <span class="n">Point</span><span class="p">,</span><span class="n">LineString</span><span class="p">,</span><span class="n">Polygon</span>
<span class="kn">from</span> <span class="nn">shapely.geometry</span> <span class="kn">import</span> <span class="n">MultiLineString</span><span class="p">,</span><span class="n">mapping</span><span class="p">,</span><span class="n">MultiPoint</span><span class="p">,</span><span class="n">MultiPolygon</span>
<span class="kn">import</span> <span class="nn">geopandas</span> <span class="kn">as</span> <span class="nn">gd</span>
<span class="kn">import</span> <span class="nn">psycopg2</span> <span class="kn">as</span> <span class="nn">pg</span>
<span class="n">conn</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&quot;dbname=routing user=postgres&quot;</span><span class="p">)</span> 

<span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">chain</span>

<span class="kn">from</span> <span class="nn">f_postgres</span> <span class="kn">import</span> <span class="n">save_point_shape</span><span class="p">,</span><span class="n">save_polygon_shapefile</span>
<span class="kn">from</span> <span class="nn">f_postgres</span> <span class="kn">import</span> <span class="n">polygon_from_points</span><span class="p">,</span><span class="n">plot_pluto_block</span>
<span class="kn">from</span> <span class="nn">f_postgres</span> <span class="kn">import</span> <span class="n">geoms_to_text</span><span class="p">,</span><span class="n">geoms_as_text</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[2]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># p = gd.read_postgis(&quot;SELECT ST_AsText(geom) FROM pluto limit 1&quot;,conn)</span>
<span class="c"># df[&#39;start_results&#39;] = pd.read_sql_query(cmd,engine).start_lens[0]</span>

<span class="n">l</span> <span class="o">=</span> <span class="n">gd</span><span class="o">.</span><span class="n">read_postgis</span><span class="p">(</span><span class="s">&quot;SELECT Street,geom FROM lion_ways&quot;</span><span class="p">,</span><span class="n">conn</span><span class="p">)</span>
<span class="nb">len</span><span class="p">(</span><span class="n">l</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">
    Out[2]:</div>


<div class="output_text output_subarea output_pyout">
<pre>23504</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[3]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
<span class="n">df</span><span class="p">[</span><span class="s">&#39;lion_streets&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">l</span><span class="o">.</span><span class="n">street</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[4]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">
    Out[4]:</div>

<div class="output_html rendered_html output_subarea output_pyout">
<div style="max-height:1000px;max-width:1500px;overflow:auto;">
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>lion_streets</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>                  RIVERSIDE DRIVE</td>
    </tr>
    <tr>
      <th>1</th>
      <td>          LINCOLN TUNNEL APPROACH</td>
    </tr>
    <tr>
      <th>2</th>
      <td>      LINCOLN TUNNEL BUS APPROACH</td>
    </tr>
    <tr>
      <th>3</th>
      <td>        ED KOCH QUEENSBORO BRIDGE</td>
    </tr>
    <tr>
      <th>4</th>
      <td> KOCH BR PEDESTRIAN AND BIKE PATH</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[5]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">
    Out[5]:</div>


<div class="output_text output_subarea output_pyout">
<pre>1177</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[6]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">x</span><span class="p">,</span><span class="n">i</span><span class="o">=</span><span class="p">{},</span><span class="mi">0</span>
<span class="n">_iter</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">lion_streets</span><span class="o">.</span><span class="n">iterkv</span><span class="p">()</span>
<span class="c"># for k,it in _iter:</span>
<span class="c">#     if it.find(&#39;AURIA STREET&#39;)!=-1: it=&#39;AURIA STREET&#39;</span>
<span class="c">#     try:</span>
<span class="c">#         z=pd.read_sql_query(&quot;SELECT Lot FROM pluto where Address ~* &quot;+&quot;&#39;&quot;+it+&quot;&#39;&quot;,conn)</span>
<span class="c">#         y = len(z.index)</span>
<span class="c">#         print i,&#39;\t&#39;,y,&#39;\t&#39;,it</span>
<span class="c">#         x.update({&#39;index&#39;:i,</span>
<span class="c">#                   &#39;street&#39;:it,</span>
<span class="c">#                   &#39;lots&#39;:len(z.index)})</span>
<span class="c">#     except:</span>
<span class="c">#         print &#39;\nERROR:\n\t&#39;,i,&#39;\t&#39;,it</span>

<span class="c">#     i+=1</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[7]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">f</span><span class="o">=</span><span class="nb">open</span><span class="p">(</span><span class="s">&#39;/Users/admin/Desktop/lot1.csv&#39;</span><span class="p">,</span><span class="s">&#39;r&#39;</span><span class="p">)</span>
<span class="n">x</span><span class="o">=</span><span class="n">f</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
<span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="n">lots</span><span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">l</span><span class="p">:</span> <span class="n">l</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;,&#39;</span><span class="p">),</span><span class="n">x</span><span class="p">),</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;old&#39;</span><span class="p">,</span><span class="s">&#39;lot_count&#39;</span><span class="p">,</span><span class="s">&#39;lot&#39;</span><span class="p">])</span>
<span class="n">lots</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">
    Out[7]:</div>

<div class="output_html rendered_html output_subarea output_pyout">
<div style="max-height:1000px;max-width:1500px;overflow:auto;">
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>old</th>
      <th>lot_count</th>
      <th>lot</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td> 0</td>
      <td>  107</td>
      <td>         FT WASHINGTON AVENUE\n</td>
    </tr>
    <tr>
      <th>1</th>
      <td> 1</td>
      <td>    0</td>
      <td> HENRY HUDSON PARKWAY EXIT NB\n</td>
    </tr>
    <tr>
      <th>2</th>
      <td> 2</td>
      <td>  499</td>
      <td>               MADISON AVENUE\n</td>
    </tr>
    <tr>
      <th>3</th>
      <td> 3</td>
      <td>  567</td>
      <td>             AMSTERDAM AVENUE\n</td>
    </tr>
    <tr>
      <th>4</th>
      <td> 4</td>
      <td> 1258</td>
      <td>                     BROADWAY\n</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[8]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">lots</span><span class="p">[</span><span class="s">&#39;cnt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">lots</span><span class="o">.</span><span class="n">lot_count</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="nb">eval</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[9]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">lots</span><span class="p">[</span><span class="s">&#39;street&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">lots</span><span class="o">.</span><span class="n">lot</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">))</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[10]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="k">print</span> <span class="n">lots</span><span class="o">.</span><span class="n">cnt</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">lots</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s">&#39;old&#39;</span><span class="p">,</span><span class="s">&#39;lot_count&#39;</span><span class="p">,</span><span class="s">&#39;lot&#39;</span><span class="p">],</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>43123
</pre>
</div>
</div>

<div class="output_area"><div class="prompt output_prompt">
    Out[10]:</div>

<div class="output_html rendered_html output_subarea output_pyout">
<div style="max-height:1000px;max-width:1500px;overflow:auto;">
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>cnt</th>
      <th>street</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>  107</td>
      <td>         FT WASHINGTON AVENUE</td>
    </tr>
    <tr>
      <th>1</th>
      <td>    0</td>
      <td> HENRY HUDSON PARKWAY EXIT NB</td>
    </tr>
    <tr>
      <th>2</th>
      <td>  499</td>
      <td>               MADISON AVENUE</td>
    </tr>
    <tr>
      <th>3</th>
      <td>  567</td>
      <td>             AMSTERDAM AVENUE</td>
    </tr>
    <tr>
      <th>4</th>
      <td> 1258</td>
      <td>                     BROADWAY</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[11]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">p</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql_query</span><span class="p">(</span><span class="s">&quot;SELECT gid,Borough,Block,Lot,bldg_num,bldg_street,address FROM pluto&quot;</span><span class="p">,</span><span class="n">conn</span><span class="p">)</span>
<span class="k">print</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>42890
</pre>
</div>
</div>

<div class="output_area"><div class="prompt output_prompt">
    Out[11]:</div>

<div class="output_html rendered_html output_subarea output_pyout">
<div style="max-height:1000px;max-width:1500px;overflow:auto;">
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>gid</th>
      <th>borough</th>
      <th>block</th>
      <th>lot</th>
      <th>bldg_num</th>
      <th>bldg_street</th>
      <th>address</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>  9</td>
      <td> MN</td>
      <td> 180</td>
      <td> 7505</td>
      <td>  17</td>
      <td>     jay street</td>
      <td>      17 JAY STREET</td>
    </tr>
    <tr>
      <th>1</th>
      <td> 10</td>
      <td> MN</td>
      <td> 582</td>
      <td>   50</td>
      <td>   2</td>
      <td>       7 avenue</td>
      <td>         2 7 AVENUE</td>
    </tr>
    <tr>
      <th>2</th>
      <td> 11</td>
      <td> MN</td>
      <td> 468</td>
      <td>   49</td>
      <td> 225</td>
      <td> east 12 street</td>
      <td> 225 EAST 12 STREET</td>
    </tr>
    <tr>
      <th>3</th>
      <td> 12</td>
      <td> MN</td>
      <td> 809</td>
      <td>   73</td>
      <td> 152</td>
      <td> west 34 street</td>
      <td> 152 WEST 34 STREET</td>
    </tr>
    <tr>
      <th>4</th>
      <td> 13</td>
      <td> MN</td>
      <td> 204</td>
      <td>   34</td>
      <td> 181</td>
      <td>   canal street</td>
      <td>   181 CANAL STREET</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4>Are there any lots remaining after iteration?</h4>
<p>The iteration result lot count EXCEEDED the actual lot count.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[12]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">p</span><span class="p">[</span><span class="s">&#39;b_b_l&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[[</span><span class="s">&#39;borough&#39;</span><span class="p">,</span><span class="s">&#39;block&#39;</span><span class="p">,</span><span class="s">&#39;lot&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">+</span><span class="s">&#39;_&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">+</span><span class="s">&#39;_&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="mi">2</span><span class="p">]),</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s">&#39;gid&#39;</span><span class="p">],</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">inplace</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="c"># p[&#39;segmentid&#39;] = p.address.map(lambda s: </span>
<span class="n">_iter</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">address</span><span class="o">.</span><span class="n">iterkv</span><span class="p">()</span>
<span class="n">x</span><span class="o">=</span><span class="p">[]</span>
<span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">s</span> <span class="ow">in</span> <span class="n">_iter</span><span class="p">:</span>
    <span class="n">z</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">read_sql_query</span><span class="p">(</span><span class="s">&quot;select segmentid from lion_ways where lion_ways.Street ~* &quot;</span><span class="o">+</span>
                                                 <span class="s">&quot;&#39;&quot;</span><span class="o">+</span><span class="p">(</span><span class="n">s</span> <span class="k">if</span> <span class="n">s</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&quot;&#39;&quot;</span><span class="p">)</span><span class="o">==-</span><span class="mi">1</span> <span class="k">else</span> <span class="n">s</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&quot;&#39;&quot;</span><span class="p">,</span><span class="s">&#39;_&#39;</span><span class="p">))</span><span class="o">+</span><span class="s">&quot;&#39;&quot;</span><span class="p">,</span>
                                                 <span class="n">engine</span><span class="p">)</span><span class="o">.</span><span class="n">segmentid</span>
    <span class="k">print</span> <span class="n">z</span>
    <span class="n">x</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">z</span><span class="p">)</span>
    <span class="k">break</span>
<span class="n">s</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>Series([], name: segmentid, dtype: object)
</pre>
</div>
</div>

<div class="output_area"><div class="prompt output_prompt">
    Out[12]:</div>


<div class="output_text output_subarea output_pyout">
<pre>&apos;17 JAY STREET&apos;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[13]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># p[&#39;segmentid&#39;] = p.address.map(lambda s: pd.read_sql_query(&quot;select segmentid from lion_ways where lion_ways.Street ~* &quot;+</span>
<span class="c">#                                                  &quot;&#39;&quot;+(s if s.find(&quot;&#39;&quot;)==-1 else s.replace(&quot;&#39;&quot;,&#39;_&#39;))+&quot;&#39;&quot;,</span>
<span class="c">#                                                  engine).segmentid)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[14]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># p.drop([&#39;b_b_l&#39;],axis=1,inplace=True)</span>
<span class="c"># p.to_sql(&#39;lot_pts&#39;,engine,if_exists=&#39;append&#39;,index=False,index_label=&#39;id&#39;)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[35]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">all_pts</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql_query</span><span class="p">(</span><span class="s">&quot;select * from lot_pts where geom is null&quot;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span><span class="o">.</span><span class="n">sort</span><span class="p">([</span><span class="s">&#39;block&#39;</span><span class="p">,</span><span class="s">&#39;bldg_street&#39;</span><span class="p">,</span><span class="s">&#39;bldg_num&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="n">uniq_blocks</span> <span class="o">=</span> <span class="n">all_pts</span><span class="o">.</span><span class="n">block</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="n">geoms</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">block</span> <span class="ow">in</span> <span class="n">chain</span><span class="p">(</span><span class="n">uniq_blocks</span><span class="p">[</span><span class="mi">20</span><span class="p">:]):</span>
    <span class="c"># block=uniq_blocks[0]</span>

    <span class="n">uniq_street</span> <span class="o">=</span> <span class="n">all_pts</span><span class="p">[</span><span class="n">all_pts</span><span class="o">.</span><span class="n">block</span><span class="o">==</span><span class="n">block</span><span class="p">]</span><span class="o">.</span><span class="n">bldg_street</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">uniq_street</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">)</span><span class="o">!=</span><span class="mi">0</span><span class="p">:</span> <span class="n">dev</span> <span class="o">=</span> <span class="n">uniq_street</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">uniq_street</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">uniq_street</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span><span class="o">!=</span><span class="mi">0</span><span class="p">:</span> <span class="n">dev</span> <span class="o">=</span> <span class="n">uniq_street</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">uniq_street</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="bp">None</span><span class="p">))</span>
    

    <span class="k">for</span> <span class="n">street_name</span> <span class="ow">in</span> <span class="n">chain</span><span class="p">(</span><span class="n">uniq_street</span><span class="p">):</span>
        <span class="c"># street_name = uniq_street[1]</span>

        <span class="n">pts</span> <span class="o">=</span> <span class="n">all_pts</span><span class="p">[(</span><span class="n">all_pts</span><span class="o">.</span><span class="n">block</span><span class="o">==</span><span class="n">block</span><span class="p">)</span><span class="o">&amp;</span><span class="p">(</span><span class="n">all_pts</span><span class="o">.</span><span class="n">bldg_street</span><span class="o">==</span><span class="n">street_name</span><span class="p">)]</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s">&#39;bldg_num&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="n">l</span> <span class="o">=</span> <span class="n">pts</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="mi">0</span><span class="p">,:]</span>

        <span class="c"># Get all lots on this block and street</span>

        <span class="n">where_clause</span> <span class="o">=</span> <span class="p">(</span><span class="s">&quot; where (p.borough = &#39;&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">l</span><span class="o">.</span><span class="n">borough</span><span class="p">)</span><span class="o">+</span><span class="s">&quot;&#39; &quot;</span><span class="o">+</span>
                            <span class="s">&quot;AND p.block = &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">block</span><span class="p">)</span><span class="o">+</span><span class="s">&quot; &quot;</span><span class="o">+</span>
                            <span class="s">&quot;AND p.bldg_street = &#39;&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">street_name</span><span class="p">)</span><span class="o">+</span><span class="s">&quot;&#39;)&quot;</span><span class="p">)</span>

        <span class="n">lots</span> <span class="o">=</span> <span class="n">gd</span><span class="o">.</span><span class="n">read_postgis</span><span class="p">(</span><span class="s">&quot;SELECT bldg_num,geom p_geom from pluto p&quot;</span><span class="o">+</span><span class="n">where_clause</span><span class="p">,</span><span class="n">engine</span><span class="p">,</span><span class="n">geom_col</span><span class="o">=</span><span class="s">&#39;p_geom&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s">&#39;bldg_num&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="n">ptA</span> <span class="o">=</span> <span class="n">lots</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">ptB</span> <span class="o">=</span> <span class="n">lots</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">lots</span><span class="o">.</span><span class="n">index</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span>
        <span class="c">#     lots.plot()</span>

        <span class="n">line</span> <span class="o">=</span> <span class="n">gd</span><span class="o">.</span><span class="n">read_postgis</span><span class="p">(</span><span class="s">&quot;SELECT segmentid,ST_ConvexHull(geom) l_geom from lion_ways where lion_ways.Street ~* &#39;&quot;</span><span class="o">+</span>
                            <span class="n">street_name</span><span class="o">+</span><span class="s">&quot;&#39;&quot;</span><span class="p">,</span><span class="n">engine</span><span class="p">,</span><span class="n">geom_col</span><span class="o">=</span><span class="s">&#39;l_geom&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">index</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
            <span class="n">skip</span><span class="o">=</span><span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">skip</span><span class="o">=</span><span class="bp">False</span>
        <span class="c">#     line.plot()</span>

            <span class="n">f</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="p">(</span><span class="s">&quot;ST_Distance(ST_GeomFromText(&#39;&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">ptA</span><span class="p">)</span><span class="o">+</span><span class="s">&quot;&#39;),&quot;</span><span class="o">+</span><span class="s">&quot;ST_ClosestPoint(&quot;</span><span class="o">+</span>
                           <span class="s">&quot;ST_GeomFromText(&#39;&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">+</span><span class="s">&quot;&#39;),ST_GeomFromText(&#39;&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">ptA</span><span class="p">)</span><span class="o">+</span><span class="s">&quot;&#39;)))&quot;</span><span class="p">)</span>

            <span class="n">line</span><span class="p">[</span><span class="s">&#39;ptA_dist&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">l_geom</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
            <span class="n">cmd</span><span class="o">=</span><span class="s">&quot;select ARRAY&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">ptA_dist</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;&quot;&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span><span class="o">+</span><span class="s">&quot; dist&quot;</span>
            <span class="n">line</span><span class="p">[</span><span class="s">&#39;ptA_dist&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql_query</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span><span class="n">conn</span><span class="p">)</span><span class="o">.</span><span class="n">dist</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

            <span class="n">f</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="p">(</span><span class="s">&quot;ST_Distance(ST_GeomFromText(&#39;&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">ptB</span><span class="p">)</span><span class="o">+</span><span class="s">&quot;&#39;),&quot;</span><span class="o">+</span><span class="s">&quot;ST_ClosestPoint(&quot;</span><span class="o">+</span>
                           <span class="s">&quot;ST_GeomFromText(&#39;&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">+</span><span class="s">&quot;&#39;),ST_GeomFromText(&#39;&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">ptA</span><span class="p">)</span><span class="o">+</span><span class="s">&quot;&#39;)))&quot;</span><span class="p">)</span>
            <span class="n">line</span><span class="p">[</span><span class="s">&#39;ptB_dist&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">l_geom</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
            <span class="n">cmd</span><span class="o">=</span><span class="s">&quot;select ARRAY&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">ptB_dist</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;&quot;&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span><span class="o">+</span><span class="s">&quot; dist&quot;</span>
            <span class="n">line</span><span class="p">[</span><span class="s">&#39;ptB_dist&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql_query</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span><span class="n">conn</span><span class="p">)</span><span class="o">.</span><span class="n">dist</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>


            <span class="n">segA</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="n">line</span><span class="o">.</span><span class="n">ptA_dist</span><span class="o">==</span><span class="n">line</span><span class="o">.</span><span class="n">ptA_dist</span><span class="o">.</span><span class="n">min</span><span class="p">()]</span><span class="o">.</span><span class="n">segmentid</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">segB</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="n">line</span><span class="o">.</span><span class="n">ptB_dist</span><span class="o">==</span><span class="n">line</span><span class="o">.</span><span class="n">ptB_dist</span><span class="o">.</span><span class="n">min</span><span class="p">()]</span><span class="o">.</span><span class="n">segmentid</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">cmd1</span><span class="o">=</span> <span class="s">&#39;select ST_AsText(ST_StartPoint((ST_Dump(lion_ways.geom)).geom)) geom from lion_ways where segmentid=&#39;</span><span class="o">+</span><span class="s">&quot;&#39;&quot;</span><span class="o">+</span><span class="n">segA</span><span class="o">+</span><span class="s">&quot;&#39; limit 1&quot;</span>
            <span class="n">cmd2</span><span class="o">=</span> <span class="s">&#39;select ST_AsText(ST_EndPoint((ST_Dump(lion_ways.geom)).geom)) geom from lion_ways where segmentid=&#39;</span><span class="o">+</span><span class="s">&quot;&#39;&quot;</span><span class="o">+</span><span class="n">segB</span><span class="o">+</span><span class="s">&quot;&#39; limit 1&quot;</span>
            <span class="n">ptA</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql_query</span><span class="p">(</span><span class="n">cmd1</span><span class="p">,</span><span class="n">conn</span><span class="p">)</span><span class="o">.</span><span class="n">geom</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">ptB</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql_query</span><span class="p">(</span><span class="n">cmd2</span><span class="p">,</span><span class="n">conn</span><span class="p">)</span><span class="o">.</span><span class="n">geom</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">cmd</span> <span class="o">=</span> <span class="s">&quot;select ST_MakeLine(ST_GeomFromText(&#39;&quot;</span><span class="o">+</span><span class="n">ptA</span><span class="o">+</span><span class="s">&quot;&#39;),ST_GeomFromText(&#39;&quot;</span><span class="o">+</span><span class="n">ptB</span><span class="o">+</span><span class="s">&quot;&#39;)) geom&quot;</span>
            <span class="n">closest_seg</span> <span class="o">=</span> <span class="n">gd</span><span class="o">.</span><span class="n">read_postgis</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span><span class="n">conn</span><span class="p">)</span>

            <span class="c"># gd.GeoDataFrame({&#39;geometry&#39;:lots.p_geom.tolist()+closest_seg.geom.tolist()}).plot()</span>


            <span class="n">points</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">lots</span><span class="o">.</span><span class="n">p_geom</span><span class="p">:</span>
                <span class="n">cmd</span><span class="o">=</span><span class="s">&quot; ST_ClosestPoint(&quot;</span><span class="o">+</span><span class="n">geoms_to_text</span><span class="p">(</span><span class="n">closest_seg</span><span class="o">.</span><span class="n">geom</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">+</span><span class="s">&#39;,&#39;</span><span class="o">+</span><span class="n">geoms_to_text</span><span class="p">(</span><span class="n">it</span><span class="p">)</span><span class="o">+</span><span class="s">&#39;) &#39;</span>
                <span class="n">point</span> <span class="o">=</span> <span class="n">gd</span><span class="o">.</span><span class="n">read_postgis</span><span class="p">(</span><span class="s">&quot;select &quot;</span><span class="o">+</span><span class="n">cmd</span><span class="o">+</span><span class="s">&quot; geom&quot;</span><span class="p">,</span><span class="n">conn</span><span class="p">)</span><span class="o">.</span><span class="n">geom</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="c">#                 points.append(point)</span>
                <span class="n">cmd</span> <span class="o">=</span> <span class="s">&quot;UPDATE lot_pts set geom = ST_GeomFromText(&#39;&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">point</span><span class="o">.</span><span class="n">to_wkt</span><span class="p">())</span><span class="o">+</span><span class="s">&quot;&#39;,4326) &quot;</span><span class="o">+</span><span class="n">where_clause</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;p.&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span>
                <span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>


<span class="c">#             pts[&#39;geom&#39;] = points</span>
<span class="c">#             pts.to_sql(&#39;lot_pts&#39;,engine,if_exists=&#39;append&#39;,index=False)</span>
<span class="c">#             geoms.extend(points)</span>
<span class="c">#             geoms.extend(closest_seg.geom)</span>
<span class="c">#             geoms.extend(lots.p_geom)</span>

    <span class="c">#     print skip</span>
    <span class="c">#     print len(points),points[0]</span>
    <span class="c">#     print lots</span>
    <span class="c">#     print pts</span>
<span class="c"># gd.GeoSeries(geoms).plot()</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[38]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">a</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql_query</span><span class="p">(</span><span class="s">&#39;select count(*) cnt from lot_pts where geom is null;&#39;</span><span class="p">,</span><span class="n">conn</span><span class="p">)</span><span class="o">.</span><span class="n">cnt</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql_query</span><span class="p">(</span><span class="s">&#39;select count(*) cnt from lot_pts where geom is not null;&#39;</span><span class="p">,</span><span class="n">conn</span><span class="p">)</span><span class="o">.</span><span class="n">cnt</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="k">print</span> <span class="n">a</span><span class="p">,</span><span class="s">&#39;</span><span class="se">\t</span><span class="s">Null&#39;</span>
<span class="k">print</span> <span class="n">b</span><span class="p">,</span><span class="s">&#39;</span><span class="se">\t</span><span class="s">Not Null&#39;</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>1410 	Null
41480 	Not Null
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[3]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql_query</span><span class="p">(</span><span class="s">&#39;select * from lot_pts where geom is null&#39;</span><span class="p">,</span><span class="n">conn</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="s">&#39;bbl&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[[</span><span class="s">&#39;block&#39;</span><span class="p">,</span><span class="s">&#39;lot&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="s">&#39;1&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%05d</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%04d</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="k">print</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>1410
</pre>
</div>
</div>

<div class="output_area"><div class="prompt output_prompt">
    Out[3]:</div>

<div class="output_html rendered_html output_subarea output_pyout">
<div style="max-height:1000px;max-width:1500px;overflow:auto;">
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>borough</th>
      <th>block</th>
      <th>lot</th>
      <th>bldg_num</th>
      <th>bldg_street</th>
      <th>address</th>
      <th>segmentid</th>
      <th>street</th>
      <th>geom</th>
      <th>bbl</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td> MN</td>
      <td> 2028</td>
      <td>  1</td>
      <td> 2674</td>
      <td>  fredrick douglass bl</td>
      <td> 2674 FREDRICK DOUGLASS BL</td>
      <td> None</td>
      <td> None</td>
      <td> None</td>
      <td> 1020280001</td>
    </tr>
    <tr>
      <th>1</th>
      <td> MN</td>
      <td> 2029</td>
      <td> 35</td>
      <td> 2472</td>
      <td>    adam c powell blvd</td>
      <td>   2472 ADAM C POWELL BLVD</td>
      <td> None</td>
      <td> None</td>
      <td> None</td>
      <td> 1020290035</td>
    </tr>
    <tr>
      <th>2</th>
      <td> MN</td>
      <td> 2024</td>
      <td> 34</td>
      <td> 2372</td>
      <td>    adam c powell blvd</td>
      <td>   2372 ADAM C POWELL BLVD</td>
      <td> None</td>
      <td> None</td>
      <td> None</td>
      <td> 1020240034</td>
    </tr>
    <tr>
      <th>3</th>
      <td> MN</td>
      <td> 1908</td>
      <td> 61</td>
      <td> 2079</td>
      <td>    adam c powell blvd</td>
      <td>   2079 ADAM C POWELL BLVD</td>
      <td> None</td>
      <td> None</td>
      <td> None</td>
      <td> 1019080061</td>
    </tr>
    <tr>
      <th>4</th>
      <td> MN</td>
      <td>  571</td>
      <td> 27</td>
      <td>   26</td>
      <td> rear university place</td>
      <td>  26 REAR UNIVERSITY PLACE</td>
      <td> None</td>
      <td> None</td>
      <td> None</td>
      <td> 1005710027</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[6]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">cmd</span> <span class="o">=</span> <span class="s">&quot;SELECT  * from pluto where pluto.bbl = ANY (array&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">bbl</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span><span class="o">+</span><span class="s">&quot;)&quot;</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">gd</span><span class="o">.</span><span class="n">read_postgis</span><span class="p">(</span><span class="n">cmd</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&quot;&#39;&quot;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">),</span><span class="n">conn</span><span class="p">,</span><span class="n">geom_col</span><span class="o">=</span><span class="s">&#39;geom&#39;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[13]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">p</span><span class="o">=</span><span class="n">p</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;geom&#39;</span><span class="p">:</span><span class="s">&#39;geometry&#39;</span><span class="p">})</span>
<span class="n">p</span><span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="n">BASE_MAP_PATH</span><span class="o">+</span><span class="s">&#39;remaining_lot.shp&#39;</span><span class="p">)</span>
<span class="c"># p.plot()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_text output_pyerr">
<pre>
<span class="ansired">---------------------------------------------------------------------------</span>
<span class="ansired">AttributeError</span>                            Traceback (most recent call last)
<span class="ansigreen">&lt;ipython-input-13-5e9ee31e7c2f&gt;</span> in <span class="ansicyan">&lt;module&gt;</span><span class="ansiblue">()</span>
<span class="ansigreen">      1</span> p<span class="ansiblue">=</span>p<span class="ansiblue">.</span>rename<span class="ansiblue">(</span>columns<span class="ansiblue">=</span><span class="ansiblue">{</span><span class="ansiblue">&apos;geom&apos;</span><span class="ansiblue">:</span><span class="ansiblue">&apos;geometry&apos;</span><span class="ansiblue">}</span><span class="ansiblue">)</span><span class="ansiblue"></span>
<span class="ansigreen">----&gt; 2</span><span class="ansired"> </span>p<span class="ansiblue">.</span>to_file<span class="ansiblue">(</span>BASE_MAP_PATH<span class="ansiblue">+</span><span class="ansiblue">&apos;remaining_lot.shp&apos;</span><span class="ansiblue">)</span><span class="ansiblue"></span>
<span class="ansigreen">      3</span> <span class="ansired"># p.plot()</span><span class="ansiblue"></span><span class="ansiblue"></span>

<span class="ansigreen">/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/geopandas/geodataframe.pyc</span> in <span class="ansicyan">to_file</span><span class="ansiblue">(self, filename, driver, **kwargs)</span>
<span class="ansigreen">    292</span>         <span class="ansired"># Some (most?) providers expect a single geometry type:</span><span class="ansiblue"></span><span class="ansiblue"></span>
<span class="ansigreen">    293</span>         <span class="ansired"># Point, LineString, or Polygon</span><span class="ansiblue"></span><span class="ansiblue"></span>
<span class="ansigreen">--&gt; 294</span><span class="ansired">         </span>geom_types <span class="ansiblue">=</span> self<span class="ansiblue">[</span><span class="ansiblue">&apos;geometry&apos;</span><span class="ansiblue">]</span><span class="ansiblue">.</span>geom_type<span class="ansiblue">.</span>unique<span class="ansiblue">(</span><span class="ansiblue">)</span><span class="ansiblue"></span>
<span class="ansigreen">    295</span>         <span class="ansigreen">from</span> os<span class="ansiblue">.</span>path <span class="ansigreen">import</span> commonprefix <span class="ansired"># To find longest common prefix</span><span class="ansiblue"></span>
<span class="ansigreen">    296</span>         geom_type <span class="ansiblue">=</span> commonprefix<span class="ansiblue">(</span><span class="ansiblue">[</span>g<span class="ansiblue">[</span><span class="ansiblue">:</span><span class="ansiblue">:</span><span class="ansiblue">-</span><span class="ansicyan">1</span><span class="ansiblue">]</span> <span class="ansigreen">for</span> g <span class="ansigreen">in</span> geom_types<span class="ansiblue">]</span><span class="ansiblue">)</span><span class="ansiblue">[</span><span class="ansiblue">:</span><span class="ansiblue">:</span><span class="ansiblue">-</span><span class="ansicyan">1</span><span class="ansiblue">]</span>  <span class="ansired"># Reverse</span><span class="ansiblue"></span>

<span class="ansigreen">/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/pandas/core/generic.pyc</span> in <span class="ansicyan">__getattr__</span><span class="ansiblue">(self, name)</span>
<span class="ansigreen">   1841</span>                 <span class="ansigreen">return</span> self<span class="ansiblue">[</span>name<span class="ansiblue">]</span><span class="ansiblue"></span>
<span class="ansigreen">   1842</span>             raise AttributeError(&quot;&apos;%s&apos; object has no attribute &apos;%s&apos;&quot; %
<span class="ansigreen">-&gt; 1843</span><span class="ansired">                                  (type(self).__name__, name))
</span><span class="ansigreen">   1844</span> <span class="ansiblue"></span>
<span class="ansigreen">   1845</span>     <span class="ansigreen">def</span> __setattr__<span class="ansiblue">(</span>self<span class="ansiblue">,</span> name<span class="ansiblue">,</span> value<span class="ansiblue">)</span><span class="ansiblue">:</span><span class="ansiblue"></span>

<span class="ansired">AttributeError</span>: &apos;Series&apos; object has no attribute &apos;geom_type&apos;</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[97]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">block</span> <span class="o">=</span> <span class="n">gd</span><span class="o">.</span><span class="n">read_postgis</span><span class="p">(</span><span class="s">&quot;&quot;&quot;SELECT ST_Buffer(ST_ConvexHull((ST_Collect(f.the_geom))), .0005) as geom </span>
<span class="s">                    FROM ( SELECT *, (ST_Dump(geom)).geom As the_geom </span>
<span class="s">                    FROM pluto where block = &quot;&quot;&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">block</span><span class="p">)</span><span class="o">+</span><span class="s">&quot; ) As f&quot;</span><span class="p">,</span><span class="n">conn</span><span class="p">)</span>
<span class="n">block</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">
    Out[97]:</div>


<div class="output_text output_subarea output_pyout">
<pre>&lt;matplotlib.axes.AxesSubplot at 0x10db613d0&gt;</pre>
</div>

</div>

<div class="output_area"><div class="prompt"></div>


<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
"
>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[156]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">block</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">
    Out[156]:</div>


<div class="output_text output_subarea output_pyout">
<pre>1034</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[136]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">gd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">({</span><span class="s">&#39;geometry&#39;</span><span class="p">:</span><span class="n">lots</span><span class="o">.</span><span class="n">p_geom</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span><span class="o">+</span><span class="n">line_in_block</span><span class="o">.</span><span class="n">geom</span><span class="o">.</span><span class="n">tolist</span><span class="p">()})</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">
    Out[136]:</div>


<div class="output_text output_subarea output_pyout">
<pre>&lt;matplotlib.axes.AxesSubplot at 0x110cd3fd0&gt;</pre>
</div>

</div>

<div class="output_area"><div class="prompt"></div>


<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
"
>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[165]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">line</span> <span class="o">=</span> <span class="n">gd</span><span class="o">.</span><span class="n">read_postgis</span><span class="p">(</span><span class="s">&quot;SELECT segmentid,geom l_geom from lion_ways where lion_ways.Street ~* &#39;&quot;</span><span class="o">+</span>
                    <span class="n">lot</span><span class="o">.</span><span class="n">bldg_street</span><span class="o">+</span><span class="s">&quot;&#39;&quot;</span><span class="p">,</span><span class="n">engine</span><span class="p">,</span><span class="n">geom_col</span><span class="o">=</span><span class="s">&#39;l_geom&#39;</span><span class="p">)</span>
<span class="nb">len</span><span class="p">(</span><span class="n">l</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
<span class="n">line</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="c"># gd.GeoDataFrame({&#39;geometry&#39;:lots.p_geom.tolist()+line.l_geom.tolist()}).plot()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">
    Out[165]:</div>


<div class="output_text output_subarea output_pyout">
<pre>&lt;matplotlib.axes.AxesSubplot at 0x1115451d0&gt;</pre>
</div>

</div>

<div class="output_area"><div class="prompt"></div>


<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
ERERiVr/CwT5es9ef+2lAAAAAElFTkSuQmCC
"
>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[155]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># closest segment to lot</span>
<span class="n">f</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="s">&quot;ARRAY[&quot;</span><span class="o">+</span><span class="n">geoms_as_text</span><span class="p">(</span><span class="n">geoms_to_text</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">l_geom</span><span class="p">))</span><span class="o">+</span><span class="s">&#39;],&#39;</span><span class="o">+</span><span class="n">geoms_to_text</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="n">lots</span><span class="p">[</span><span class="s">&#39;cmd&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">lots</span><span class="o">.</span><span class="n">p_geom</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="n">a</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">read_sql_query</span><span class="p">(</span><span class="s">&quot;SELECT &quot;</span><span class="o">+</span><span class="n">lots</span><span class="o">.</span><span class="n">cmd</span><span class="o">.</span><span class="n">tolist</span><span class="p">()[</span><span class="mi">0</span><span class="p">],</span><span class="n">conn</span><span class="p">)</span>
<span class="nb">len</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_text output_pyerr">
<pre>
<span class="ansired">---------------------------------------------------------------------------</span>
<span class="ansired">TypeError</span>                                 Traceback (most recent call last)
<span class="ansigreen">&lt;ipython-input-155-36eb2e0ee7bd&gt;</span> in <span class="ansicyan">&lt;module&gt;</span><span class="ansiblue">()</span>
<span class="ansigreen">      1</span> <span class="ansired"># closest segment to lot</span><span class="ansiblue"></span><span class="ansiblue"></span>
<span class="ansigreen">      2</span> f <span class="ansiblue">=</span> <span class="ansigreen">lambda</span> s<span class="ansiblue">:</span> <span class="ansiblue">&quot;ARRAY[&quot;</span><span class="ansiblue">+</span>geoms_as_text<span class="ansiblue">(</span>geoms_to_text<span class="ansiblue">(</span>line<span class="ansiblue">.</span>l_geom<span class="ansiblue">)</span><span class="ansiblue">)</span><span class="ansiblue">+</span><span class="ansiblue">&apos;],&apos;</span><span class="ansiblue">+</span>geoms_to_text<span class="ansiblue">(</span>s<span class="ansiblue">)</span><span class="ansiblue"></span>
<span class="ansigreen">----&gt; 3</span><span class="ansired"> </span>lots<span class="ansiblue">[</span><span class="ansiblue">&apos;cmd&apos;</span><span class="ansiblue">]</span> <span class="ansiblue">=</span> lots<span class="ansiblue">.</span>p_geom<span class="ansiblue">.</span>map<span class="ansiblue">(</span>f<span class="ansiblue">)</span><span class="ansiblue"></span>
<span class="ansigreen">      4</span> a<span class="ansiblue">=</span>pd<span class="ansiblue">.</span>read_sql_query<span class="ansiblue">(</span><span class="ansiblue">&quot;SELECT &quot;</span><span class="ansiblue">+</span>lots<span class="ansiblue">.</span>cmd<span class="ansiblue">.</span>tolist<span class="ansiblue">(</span><span class="ansiblue">)</span><span class="ansiblue">[</span><span class="ansicyan">0</span><span class="ansiblue">]</span><span class="ansiblue">,</span>conn<span class="ansiblue">)</span><span class="ansiblue"></span>
<span class="ansigreen">      5</span> len<span class="ansiblue">(</span>a<span class="ansiblue">.</span>ix<span class="ansiblue">[</span><span class="ansicyan">0</span><span class="ansiblue">,</span><span class="ansicyan">0</span><span class="ansiblue">]</span><span class="ansiblue">)</span><span class="ansiblue"></span>

<span class="ansigreen">/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/pandas/core/series.pyc</span> in <span class="ansicyan">map</span><span class="ansiblue">(self, arg, na_action)</span>
<span class="ansigreen">   1953</span>                                      index=self.index).__finalize__(self)
<span class="ansigreen">   1954</span>         <span class="ansigreen">else</span><span class="ansiblue">:</span><span class="ansiblue"></span>
<span class="ansigreen">-&gt; 1955</span><span class="ansired">             </span>mapped <span class="ansiblue">=</span> map_f<span class="ansiblue">(</span>values<span class="ansiblue">,</span> arg<span class="ansiblue">)</span><span class="ansiblue"></span>
<span class="ansigreen">   1956</span>             return self._constructor(mapped,
<span class="ansigreen">   1957</span>                                      index=self.index).__finalize__(self)

<span class="ansigreen">/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/pandas/lib.so</span> in <span class="ansicyan">pandas.lib.map_infer (pandas/lib.c:51482)</span><span class="ansiblue">()</span>

<span class="ansigreen">&lt;ipython-input-155-36eb2e0ee7bd&gt;</span> in <span class="ansicyan">&lt;lambda&gt;</span><span class="ansiblue">(s)</span>
<span class="ansigreen">      1</span> <span class="ansired"># closest segment to lot</span><span class="ansiblue"></span><span class="ansiblue"></span>
<span class="ansigreen">----&gt; 2</span><span class="ansired"> </span>f <span class="ansiblue">=</span> <span class="ansigreen">lambda</span> s<span class="ansiblue">:</span> <span class="ansiblue">&quot;ARRAY[&quot;</span><span class="ansiblue">+</span>geoms_as_text<span class="ansiblue">(</span>geoms_to_text<span class="ansiblue">(</span>line<span class="ansiblue">.</span>l_geom<span class="ansiblue">)</span><span class="ansiblue">)</span><span class="ansiblue">+</span><span class="ansiblue">&apos;],&apos;</span><span class="ansiblue">+</span>geoms_to_text<span class="ansiblue">(</span>s<span class="ansiblue">)</span><span class="ansiblue"></span>
<span class="ansigreen">      3</span> lots<span class="ansiblue">[</span><span class="ansiblue">&apos;cmd&apos;</span><span class="ansiblue">]</span> <span class="ansiblue">=</span> lots<span class="ansiblue">.</span>p_geom<span class="ansiblue">.</span>map<span class="ansiblue">(</span>f<span class="ansiblue">)</span><span class="ansiblue"></span>
<span class="ansigreen">      4</span> a<span class="ansiblue">=</span>pd<span class="ansiblue">.</span>read_sql_query<span class="ansiblue">(</span><span class="ansiblue">&quot;SELECT &quot;</span><span class="ansiblue">+</span>lots<span class="ansiblue">.</span>cmd<span class="ansiblue">.</span>tolist<span class="ansiblue">(</span><span class="ansiblue">)</span><span class="ansiblue">[</span><span class="ansicyan">0</span><span class="ansiblue">]</span><span class="ansiblue">,</span>conn<span class="ansiblue">)</span><span class="ansiblue"></span>
<span class="ansigreen">      5</span> len<span class="ansiblue">(</span>a<span class="ansiblue">.</span>ix<span class="ansiblue">[</span><span class="ansicyan">0</span><span class="ansiblue">,</span><span class="ansicyan">0</span><span class="ansiblue">]</span><span class="ansiblue">)</span><span class="ansiblue"></span>

<span class="ansigreen">&lt;ipython-input-154-90be78bcc930&gt;</span> in <span class="ansicyan">geoms_to_text</span><span class="ansiblue">(geoms)</span>
<span class="ansigreen">      6</span>             s<span class="ansiblue">+=</span><span class="ansiblue">&quot;ST_GeomFromText(&apos;&quot;</span><span class="ansiblue">+</span>it<span class="ansiblue">.</span>to_wkt<span class="ansiblue">(</span><span class="ansiblue">)</span><span class="ansiblue">+</span><span class="ansiblue">&quot;&apos;),&quot;</span><span class="ansiblue"></span>
<span class="ansigreen">      7</span>         <span class="ansigreen">except</span><span class="ansiblue">:</span><span class="ansiblue"></span>
<span class="ansigreen">----&gt; 8</span><span class="ansired">             </span>s<span class="ansiblue">+=</span><span class="ansiblue">&quot;ST_GeomFromText(&apos;&quot;</span><span class="ansiblue">+</span>it<span class="ansiblue">+</span><span class="ansiblue">&quot;&apos;),&quot;</span><span class="ansiblue"></span>
<span class="ansigreen">      9</span>     <span class="ansigreen">return</span> s<span class="ansiblue">.</span>rstrip<span class="ansiblue">(</span><span class="ansiblue">&apos;,&apos;</span><span class="ansiblue">)</span><span class="ansiblue"></span>
<span class="ansigreen">     10</span> <span class="ansiblue"></span>

<span class="ansigreen">/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/pandas/core/ops.pyc</span> in <span class="ansicyan">wrapper</span><span class="ansiblue">(left, right, name)</span>
<span class="ansigreen">    511</span>             <span class="ansigreen">if</span> hasattr<span class="ansiblue">(</span>lvalues<span class="ansiblue">,</span> <span class="ansiblue">&apos;values&apos;</span><span class="ansiblue">)</span><span class="ansiblue">:</span><span class="ansiblue"></span>
<span class="ansigreen">    512</span>                 lvalues <span class="ansiblue">=</span> lvalues<span class="ansiblue">.</span>values<span class="ansiblue"></span>
<span class="ansigreen">--&gt; 513</span><span class="ansired">             return left._constructor(wrap_results(na_op(lvalues, rvalues)),
</span><span class="ansigreen">    514</span>                                      index<span class="ansiblue">=</span>left<span class="ansiblue">.</span>index<span class="ansiblue">,</span> name<span class="ansiblue">=</span>left<span class="ansiblue">.</span>name<span class="ansiblue">,</span><span class="ansiblue"></span>
<span class="ansigreen">    515</span>                                      dtype=dtype)

<span class="ansigreen">/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/pandas/core/ops.pyc</span> in <span class="ansicyan">na_op</span><span class="ansiblue">(x, y)</span>
<span class="ansigreen">    460</span>                 result <span class="ansiblue">=</span> pa<span class="ansiblue">.</span>empty<span class="ansiblue">(</span>len<span class="ansiblue">(</span>x<span class="ansiblue">)</span><span class="ansiblue">,</span> dtype<span class="ansiblue">=</span>x<span class="ansiblue">.</span>dtype<span class="ansiblue">)</span><span class="ansiblue"></span>
<span class="ansigreen">    461</span>                 mask <span class="ansiblue">=</span> notnull<span class="ansiblue">(</span>x<span class="ansiblue">)</span><span class="ansiblue"></span>
<span class="ansigreen">--&gt; 462</span><span class="ansired">                 </span>result<span class="ansiblue">[</span>mask<span class="ansiblue">]</span> <span class="ansiblue">=</span> op<span class="ansiblue">(</span>x<span class="ansiblue">[</span>mask<span class="ansiblue">]</span><span class="ansiblue">,</span> y<span class="ansiblue">)</span><span class="ansiblue"></span>
<span class="ansigreen">    463</span> <span class="ansiblue"></span>
<span class="ansigreen">    464</span>             result<span class="ansiblue">,</span> changed <span class="ansiblue">=</span> com<span class="ansiblue">.</span>_maybe_upcast_putmask<span class="ansiblue">(</span>result<span class="ansiblue">,</span> <span class="ansiblue">~</span>mask<span class="ansiblue">,</span> pa<span class="ansiblue">.</span>NA<span class="ansiblue">)</span><span class="ansiblue"></span>

<span class="ansigreen">/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/pandas/core/ops.pyc</span> in <span class="ansicyan">_radd_compat</span><span class="ansiblue">(left, right)</span>
<span class="ansigreen">    645</span>     <span class="ansired"># GH #353, NumPy 1.5.1 workaround</span><span class="ansiblue"></span><span class="ansiblue"></span>
<span class="ansigreen">    646</span>     <span class="ansigreen">try</span><span class="ansiblue">:</span><span class="ansiblue"></span>
<span class="ansigreen">--&gt; 647</span><span class="ansired">         </span>output <span class="ansiblue">=</span> radd<span class="ansiblue">(</span>left<span class="ansiblue">,</span> right<span class="ansiblue">)</span><span class="ansiblue"></span>
<span class="ansigreen">    648</span>     <span class="ansigreen">except</span> TypeError<span class="ansiblue">:</span><span class="ansiblue"></span>
<span class="ansigreen">    649</span>         cond = (pd._np_version_under1p6 and

<span class="ansigreen">/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/pandas/core/ops.pyc</span> in <span class="ansicyan">&lt;lambda&gt;</span><span class="ansiblue">(x, y)</span>
<span class="ansigreen">    642</span> <span class="ansiblue"></span>
<span class="ansigreen">    643</span> <span class="ansigreen">def</span> _radd_compat<span class="ansiblue">(</span>left<span class="ansiblue">,</span> right<span class="ansiblue">)</span><span class="ansiblue">:</span><span class="ansiblue"></span>
<span class="ansigreen">--&gt; 644</span><span class="ansired">     </span>radd <span class="ansiblue">=</span> <span class="ansigreen">lambda</span> x<span class="ansiblue">,</span> y<span class="ansiblue">:</span> y <span class="ansiblue">+</span> x<span class="ansiblue"></span>
<span class="ansigreen">    645</span>     <span class="ansired"># GH #353, NumPy 1.5.1 workaround</span><span class="ansiblue"></span><span class="ansiblue"></span>
<span class="ansigreen">    646</span>     <span class="ansigreen">try</span><span class="ansiblue">:</span><span class="ansiblue"></span>

<span class="ansired">TypeError</span>: cannot concatenate &apos;str&apos; and &apos;MultiLineString&apos; objects</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[141]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># closest point to lot</span>
<span class="n">f</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="s">&quot;ST_ClosestPoint(&quot;</span><span class="o">+</span><span class="n">geoms_to_text</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">l_geom</span><span class="p">)</span><span class="o">+</span><span class="s">&#39;,&#39;</span><span class="o">+</span><span class="n">geoms_to_text</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">+</span><span class="s">&#39;)&#39;</span>
<span class="c">#     geoms.extend(gd.read_postgis(&quot;select &quot;+cmd+&#39; geom&#39;,conn).geom)</span>
<span class="n">lots</span><span class="p">[</span><span class="s">&#39;cmd&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">lots</span><span class="o">.</span><span class="n">p_geom</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[145]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># lots[&#39;result&#39;] = lots.cmd.map(lambda s: gd.read_postgis(&quot;SELECT &quot;+s)</span>
<span class="c"># &quot;ST_Collect(ARRAY[&quot;+str([str(z) for z in lots.cmd])+&#39;])&#39;</span>
<span class="k">print</span> <span class="n">lots</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span>
<span class="c"># a.to_wkt()</span>
<span class="c"># lots</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>ST_ClosestPoint(ST_GeomFromText(&apos;MULTILINESTRING ((-73.9836243326765555 40.7555163453026452, -73.9861066573236315 40.7565607280915287))&apos;),ST_GeomFromText(&apos;MULTILINESTRING ((-73.9836243326765555 40.7555163453026452, -73.9861066573236315 40.7565607280915287))&apos;),ST_GeomFromText(&apos;MULTILINESTRING ((-73.9921404243502394 40.7591032051874649, -73.9933294614870078 40.7596037985083939))&apos;),ST_GeomFromText(&apos;MULTILINESTRING ((-74.0002955728320586 40.7625374658109862, -74.0003879149131336 40.7625809686104503))&apos;),ST_GeomFromText(&apos;MULTILINESTRING ((-73.9933294614870078 40.7596037985083939, -73.9949835813734182 40.7603001618631424))&apos;),ST_GeomFromText(&apos;MULTILINESTRING ((-73.9892972755891094 40.7579066370478813, -73.9921404243502394 40.7591032051874649))&apos;),ST_GeomFromText(&apos;MULTILINESTRING ((-73.9892972755891094 40.7579066370478813, -73.9921404243502394 40.7591032051874649))&apos;),ST_GeomFromText(&apos;MULTILINESTRING ((-73.9861066573236315 40.7565607280915287, -73.9864582550242318 40.7567100714663155))&apos;),ST_GeomFromText(&apos;MULTILINESTRING ((-73.9861066573236315 40.7565607280915287, -73.9864582550242318 40.7567100714663155))&apos;),ST_GeomFromText(&apos;MULTILINESTRING ((-73.9956946437010430 40.7606007515748345, -73.9978208590913624 40.7614995331355345))&apos;),ST_GeomFromText(&apos;MULTILINESTRING ((-73.9978208590913624 40.7614995331355345, -74.0002955728320586 40.7625374658109862))&apos;),ST_GeomFromText(&apos;MULTILINESTRING ((-74.0003879149131336 40.7625809686104503, -74.0005121393556067 40.7626385017736936))&apos;),ST_GeomFromText(&apos;MULTILINESTRING ((-73.9864582550242318 40.7567100714663155, -73.9892972755891094 40.7579066370478813))&apos;),ST_GeomFromText(&apos;MULTILINESTRING ((-73.9949835813734182 40.7603001618631424, -73.9956946437010430 40.7606007515748345))&apos;),ST_GeomFromText(&apos;MULTILINESTRING ((-73.9803956019804048 40.7541548083425695, -73.9836243326765555 40.7555163453026452))&apos;),ST_GeomFromText(&apos;POLYGON ((-73.9903433908899899 40.7587540458048068, -73.9905221430179836 40.7585090823434015, -73.9906069568335738 40.7585447764555866, -73.9904282063654932 40.7587897405964057, -73.9903433908899899 40.7587540458048068))&apos;))
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[65]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">gd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">({</span><span class="s">&#39;geometry&#39;</span><span class="p">:</span><span class="n">lots</span><span class="o">.</span><span class="n">p_geom</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span><span class="o">+</span><span class="n">line</span><span class="o">.</span><span class="n">l_geom</span><span class="o">.</span><span class="n">tolist</span><span class="p">()})</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">
    Out[65]:</div>


<div class="output_text output_subarea output_pyout">
<pre>&lt;matplotlib.axes.AxesSubplot at 0x10db46fd0&gt;</pre>
</div>

</div>

<div class="output_area"><div class="prompt"></div>


<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
"
>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[68]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">geoms</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">lots</span><span class="o">.</span><span class="n">p_geom</span><span class="p">:</span>
    <span class="n">cmd</span><span class="o">=</span><span class="s">&quot; ST_ClosestPoint(&quot;</span><span class="o">+</span><span class="n">geoms_to_text</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">l_geom</span><span class="p">)</span><span class="o">+</span><span class="s">&#39;,&#39;</span><span class="o">+</span><span class="n">geoms_to_text</span><span class="p">(</span><span class="n">it</span><span class="p">)</span><span class="o">+</span><span class="s">&#39;) &#39;</span>
    <span class="k">print</span> <span class="n">cmd</span>
    <span class="n">geoms</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">gd</span><span class="o">.</span><span class="n">read_postgis</span><span class="p">(</span><span class="s">&quot;select &quot;</span><span class="o">+</span><span class="n">cmd</span><span class="o">+</span><span class="s">&#39; geom&#39;</span><span class="p">,</span><span class="n">conn</span><span class="p">)</span><span class="o">.</span><span class="n">geom</span><span class="p">)</span>
<span class="n">gd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">({</span><span class="s">&#39;geometry&#39;</span><span class="p">:</span><span class="n">geoms</span><span class="p">})</span><span class="o">.</span><span class="n">plot</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre> ST_ClosestPoint(ST_GeomFromText(&apos;MULTILINESTRING ((-74.0002955728320586 40.7625374658109862, -74.0003879149131336 40.7625809686104503))&apos;),ST_GeomFromText(&apos;MULTILINESTRING ((-73.9933294614870078 40.7596037985083939, -73.9949835813734182 40.7603001618631424))&apos;),ST_GeomFromText(&apos;MULTILINESTRING ((-73.9892972755891094 40.7579066370478813, -73.9921404243502394 40.7591032051874649))&apos;),ST_GeomFromText(&apos;MULTILINESTRING ((-73.9892972755891094 40.7579066370478813, -73.9921404243502394 40.7591032051874649))&apos;),ST_GeomFromText(&apos;MULTILINESTRING ((-73.9861066573236315 40.7565607280915287, -73.9864582550242318 40.7567100714663155))&apos;),ST_GeomFromText(&apos;MULTILINESTRING ((-73.9861066573236315 40.7565607280915287, -73.9864582550242318 40.7567100714663155))&apos;),ST_GeomFromText(&apos;MULTILINESTRING ((-73.9956946437010430 40.7606007515748345, -73.9978208590913624 40.7614995331355345))&apos;),ST_GeomFromText(&apos;MULTILINESTRING ((-73.9978208590913624 40.7614995331355345, -74.0002955728320586 40.7625374658109862))&apos;),ST_GeomFromText(&apos;MULTILINESTRING ((-74.0003879149131336 40.7625809686104503, -74.0005121393556067 40.7626385017736936))&apos;),ST_GeomFromText(&apos;MULTILINESTRING ((-73.9864582550242318 40.7567100714663155, -73.9892972755891094 40.7579066370478813))&apos;),ST_GeomFromText(&apos;MULTILINESTRING ((-73.9949835813734182 40.7603001618631424, -73.9956946437010430 40.7606007515748345))&apos;),ST_GeomFromText(&apos;MULTILINESTRING ((-73.9803956019804048 40.7541548083425695, -73.9836243326765555 40.7555163453026452))&apos;),ST_GeomFromText(&apos;MULTILINESTRING ((-73.9836243326765555 40.7555163453026452, -73.9861066573236315 40.7565607280915287))&apos;),ST_GeomFromText(&apos;MULTILINESTRING ((-73.9836243326765555 40.7555163453026452, -73.9861066573236315 40.7565607280915287))&apos;),ST_GeomFromText(&apos;MULTILINESTRING ((-73.9921404243502394 40.7591032051874649, -73.9933294614870078 40.7596037985083939))&apos;),ST_GeomFromText(&apos;POLYGON ((-73.9903433908899899 40.7587540458048068, -73.9905221430179836 40.7585090823434015, -73.9906069568335738 40.7585447764555866, -73.9904282063654932 40.7587897405964057, -73.9903433908899899 40.7587540458048068))&apos;)) 
</pre>
</div>
</div>

<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_text output_pyerr">
<pre>
<span class="ansired">---------------------------------------------------------------------------</span>
<span class="ansired">DatabaseError</span>                             Traceback (most recent call last)
<span class="ansigreen">&lt;ipython-input-68-4f5552073585&gt;</span> in <span class="ansicyan">&lt;module&gt;</span><span class="ansiblue">()</span>
<span class="ansigreen">     13</span>     cmd<span class="ansiblue">=</span><span class="ansiblue">&quot; ST_ClosestPoint(&quot;</span><span class="ansiblue">+</span>geoms_to_text<span class="ansiblue">(</span>line<span class="ansiblue">.</span>l_geom<span class="ansiblue">)</span><span class="ansiblue">+</span><span class="ansiblue">&apos;,&apos;</span><span class="ansiblue">+</span>geoms_to_text<span class="ansiblue">(</span>it<span class="ansiblue">)</span><span class="ansiblue">+</span><span class="ansiblue">&apos;) &apos;</span><span class="ansiblue"></span>
<span class="ansigreen">     14</span>     <span class="ansigreen">print</span> cmd<span class="ansiblue"></span>
<span class="ansigreen">---&gt; 15</span><span class="ansired">     </span>geoms<span class="ansiblue">.</span>extend<span class="ansiblue">(</span>gd<span class="ansiblue">.</span>read_postgis<span class="ansiblue">(</span><span class="ansiblue">&quot;select &quot;</span><span class="ansiblue">+</span>cmd<span class="ansiblue">+</span><span class="ansiblue">&apos; geom&apos;</span><span class="ansiblue">,</span>conn<span class="ansiblue">)</span><span class="ansiblue">.</span>geom<span class="ansiblue">)</span><span class="ansiblue"></span>
<span class="ansigreen">     16</span> gd<span class="ansiblue">.</span>GeoDataFrame<span class="ansiblue">(</span><span class="ansiblue">{</span><span class="ansiblue">&apos;geometry&apos;</span><span class="ansiblue">:</span>geoms<span class="ansiblue">}</span><span class="ansiblue">)</span><span class="ansiblue">.</span>plot<span class="ansiblue"></span>

<span class="ansigreen">/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/geopandas/io/sql.pyc</span> in <span class="ansicyan">read_postgis</span><span class="ansiblue">(sql, con, geom_col, crs, index_col, coerce_float, params)</span>
<span class="ansigreen">     32</span>     &quot;&quot;&quot;
<span class="ansigreen">     33</span>     df = read_sql(sql, con, index_col=index_col, coerce_float=coerce_float,
<span class="ansigreen">---&gt; 34</span><span class="ansired">                   params=params)
</span><span class="ansigreen">     35</span> <span class="ansiblue"></span>
<span class="ansigreen">     36</span>     <span class="ansigreen">if</span> geom_col <span class="ansigreen">not</span> <span class="ansigreen">in</span> df<span class="ansiblue">:</span><span class="ansiblue"></span>

<span class="ansigreen">/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/pandas/io/sql.pyc</span> in <span class="ansicyan">read_sql</span><span class="ansiblue">(sql, con, index_col, coerce_float, params, parse_dates, columns)</span>
<span class="ansigreen">    419</span>         return pandas_sql.read_sql(
<span class="ansigreen">    420</span>             sql<span class="ansiblue">,</span> index_col<span class="ansiblue">=</span>index_col<span class="ansiblue">,</span> params<span class="ansiblue">=</span>params<span class="ansiblue">,</span><span class="ansiblue"></span>
<span class="ansigreen">--&gt; 421</span><span class="ansired">             coerce_float=coerce_float, parse_dates=parse_dates)
</span><span class="ansigreen">    422</span> <span class="ansiblue"></span>
<span class="ansigreen">    423</span>     <span class="ansigreen">if</span> pandas_sql<span class="ansiblue">.</span>has_table<span class="ansiblue">(</span>sql<span class="ansiblue">)</span><span class="ansiblue">:</span><span class="ansiblue"></span>

<span class="ansigreen">/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/pandas/io/sql.pyc</span> in <span class="ansicyan">read_sql</span><span class="ansiblue">(self, sql, index_col, coerce_float, params, parse_dates)</span>
<span class="ansigreen">   1044</span>                  parse_dates=None):
<span class="ansigreen">   1045</span>         args <span class="ansiblue">=</span> _convert_params<span class="ansiblue">(</span>sql<span class="ansiblue">,</span> params<span class="ansiblue">)</span><span class="ansiblue"></span>
<span class="ansigreen">-&gt; 1046</span><span class="ansired">         </span>cursor <span class="ansiblue">=</span> self<span class="ansiblue">.</span>execute<span class="ansiblue">(</span><span class="ansiblue">*</span>args<span class="ansiblue">)</span><span class="ansiblue"></span>
<span class="ansigreen">   1047</span>         columns <span class="ansiblue">=</span> <span class="ansiblue">[</span>col_desc<span class="ansiblue">[</span><span class="ansicyan">0</span><span class="ansiblue">]</span> <span class="ansigreen">for</span> col_desc <span class="ansigreen">in</span> cursor<span class="ansiblue">.</span>description<span class="ansiblue">]</span><span class="ansiblue"></span>
<span class="ansigreen">   1048</span>         data <span class="ansiblue">=</span> self<span class="ansiblue">.</span>_fetchall_as_list<span class="ansiblue">(</span>cursor<span class="ansiblue">)</span><span class="ansiblue"></span>

<span class="ansigreen">/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/pandas/io/sql.pyc</span> in <span class="ansicyan">execute</span><span class="ansiblue">(self, *args, **kwargs)</span>
<span class="ansigreen">   1039</span> <span class="ansiblue"></span>
<span class="ansigreen">   1040</span>             ex <span class="ansiblue">=</span> DatabaseError<span class="ansiblue">(</span><span class="ansiblue">&quot;Execution failed on sql: %s&quot;</span> <span class="ansiblue">%</span> args<span class="ansiblue">[</span><span class="ansicyan">0</span><span class="ansiblue">]</span><span class="ansiblue">)</span><span class="ansiblue"></span>
<span class="ansigreen">-&gt; 1041</span><span class="ansired">             </span>raise_with_traceback<span class="ansiblue">(</span>ex<span class="ansiblue">)</span><span class="ansiblue"></span>
<span class="ansigreen">   1042</span> <span class="ansiblue"></span>
<span class="ansigreen">   1043</span>     def read_sql(self, sql, index_col=None, coerce_float=True, params=None,

<span class="ansigreen">/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/pandas/io/sql.pyc</span> in <span class="ansicyan">execute</span><span class="ansiblue">(self, *args, **kwargs)</span>
<span class="ansigreen">   1028</span>                 cur<span class="ansiblue">.</span>execute<span class="ansiblue">(</span><span class="ansiblue">*</span>args<span class="ansiblue">,</span> <span class="ansiblue">**</span>kwargs<span class="ansiblue">)</span><span class="ansiblue"></span>
<span class="ansigreen">   1029</span>             <span class="ansigreen">else</span><span class="ansiblue">:</span><span class="ansiblue"></span>
<span class="ansigreen">-&gt; 1030</span><span class="ansired">                 </span>cur<span class="ansiblue">.</span>execute<span class="ansiblue">(</span><span class="ansiblue">*</span>args<span class="ansiblue">)</span><span class="ansiblue"></span>
<span class="ansigreen">   1031</span>             <span class="ansigreen">return</span> cur<span class="ansiblue"></span>
<span class="ansigreen">   1032</span>         <span class="ansigreen">except</span> Exception <span class="ansigreen">as</span> e<span class="ansiblue">:</span><span class="ansiblue"></span>

<span class="ansired">DatabaseError</span>: Execution failed on sql: select  ST_ClosestPoint(ST_GeomFromText(&apos;MULTILINESTRING ((-74.0002955728320586 40.7625374658109862, -74.0003879149131336 40.7625809686104503))&apos;),ST_GeomFromText(&apos;MULTILINESTRING ((-73.9933294614870078 40.7596037985083939, -73.9949835813734182 40.7603001618631424))&apos;),ST_GeomFromText(&apos;MULTILINESTRING ((-73.9892972755891094 40.7579066370478813, -73.9921404243502394 40.7591032051874649))&apos;),ST_GeomFromText(&apos;MULTILINESTRING ((-73.9892972755891094 40.7579066370478813, -73.9921404243502394 40.7591032051874649))&apos;),ST_GeomFromText(&apos;MULTILINESTRING ((-73.9861066573236315 40.7565607280915287, -73.9864582550242318 40.7567100714663155))&apos;),ST_GeomFromText(&apos;MULTILINESTRING ((-73.9861066573236315 40.7565607280915287, -73.9864582550242318 40.7567100714663155))&apos;),ST_GeomFromText(&apos;MULTILINESTRING ((-73.9956946437010430 40.7606007515748345, -73.9978208590913624 40.7614995331355345))&apos;),ST_GeomFromText(&apos;MULTILINESTRING ((-73.9978208590913624 40.7614995331355345, -74.0002955728320586 40.7625374658109862))&apos;),ST_GeomFromText(&apos;MULTILINESTRING ((-74.0003879149131336 40.7625809686104503, -74.0005121393556067 40.7626385017736936))&apos;),ST_GeomFromText(&apos;MULTILINESTRING ((-73.9864582550242318 40.7567100714663155, -73.9892972755891094 40.7579066370478813))&apos;),ST_GeomFromText(&apos;MULTILINESTRING ((-73.9949835813734182 40.7603001618631424, -73.9956946437010430 40.7606007515748345))&apos;),ST_GeomFromText(&apos;MULTILINESTRING ((-73.9803956019804048 40.7541548083425695, -73.9836243326765555 40.7555163453026452))&apos;),ST_GeomFromText(&apos;MULTILINESTRING ((-73.9836243326765555 40.7555163453026452, -73.9861066573236315 40.7565607280915287))&apos;),ST_GeomFromText(&apos;MULTILINESTRING ((-73.9836243326765555 40.7555163453026452, -73.9861066573236315 40.7565607280915287))&apos;),ST_GeomFromText(&apos;MULTILINESTRING ((-73.9921404243502394 40.7591032051874649, -73.9933294614870078 40.7596037985083939))&apos;),ST_GeomFromText(&apos;POLYGON ((-73.9903433908899899 40.7587540458048068, -73.9905221430179836 40.7585090823434015, -73.9906069568335738 40.7585447764555866, -73.9904282063654932 40.7587897405964057, -73.9903433908899899 40.7587540458048068))&apos;))  geom</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">

<pre><code>plan was to block by block,
get list of unique street names,
take all lot by each street name and pieces of street in a buffer,
run the functions in shapely_functions to place points on lion_ways closest to each lot,
save the points in lot_pts,</code></pre>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># DB Check:</span>
<span class="n">c</span><span class="o">=</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">select count(*) from yelp </span>
<span class="s">where upd_search_links is not null</span>
<span class="s">and hours_updated is null</span>
<span class="s">and last_api_update is null</span>
<span class="s">&quot;&quot;&quot;</span>
<span class="o">%</span><span class="k">sql</span> <span class="n">postgres</span><span class="nd">@routing</span> <span class="err">$</span><span class="n">c</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[53]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre> 
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Libraries">Libraries<a class="anchor-link" href="#Libraries">&#182;</a></h1>
</div>
</div>
</div>

<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># %matplotlib inline</span>
<span class="c"># %qtconsole</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">ibk</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### Add encoding</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">codecs</span>
<span class="nb">reload</span><span class="p">(</span><span class="n">sys</span><span class="p">)</span>
<span class="n">sys</span><span class="o">.</span><span class="n">setdefaultencoding</span><span class="p">(</span><span class="s">&#39;UTF8&#39;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[49]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### Libraries</span>
<span class="kn">from</span> <span class="nn">os</span> <span class="kn">import</span> <span class="n">getcwd</span>
<span class="n">workDir</span> <span class="o">=</span> <span class="n">getcwd</span><span class="p">()</span><span class="o">+</span><span class="s">&#39;/&#39;</span>
<span class="kn">from</span> <span class="nn">os.path</span> <span class="kn">import</span> <span class="n">abspath</span>
<span class="kn">from</span> <span class="nn">sys</span> <span class="kn">import</span> <span class="n">path</span> <span class="k">as</span> <span class="n">py_path</span>
<span class="n">py_path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">abspath</span><span class="p">(</span><span class="n">workDir</span><span class="o">+</span><span class="s">&#39;../../geolocation&#39;</span><span class="p">))</span>

<span class="c"># from f_postgres import geoparse#,ST_PREFIX_DICT,ST_SUFFIX_DICT</span>
<span class="kn">from</span> <span class="nn">f_vendor_postgre</span> <span class="kn">import</span> <span class="n">get_bldg_street_idx</span>
<span class="c"># from f_vendor_postgre import get_addr_body,match_simple_regex</span>
<span class="c"># from f_vendor_postgre import match_simple,match_simple_regex,match_levenshtein_series</span>
<span class="kn">from</span> <span class="nn">f_postgres</span> <span class="kn">import</span> <span class="n">make_index</span><span class="p">,</span><span class="n">geom_inside_street_box</span><span class="p">,</span><span class="n">make_column_primary_serial_key</span>
<span class="kn">from</span> <span class="nn">re</span> <span class="kn">import</span> <span class="n">search</span> <span class="k">as</span> <span class="n">re_search</span> <span class="c"># re_search(&#39;pattern&#39;,&#39;string&#39;)</span>
<span class="kn">from</span> <span class="nn">re</span> <span class="kn">import</span> <span class="n">sub</span> <span class="k">as</span> <span class="n">re_sub</span>  <span class="c"># re_sub(&#39;pattern&#39;,&#39;repl&#39;,&#39;string&#39;,&#39;count&#39;)</span>

<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s">&#39;expand_frame_repr&#39;</span><span class="p">,</span><span class="bp">False</span><span class="p">)</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s">&#39;display.max_columns&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s">&#39;display.max_rows&#39;</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s">&#39;display.width&#39;</span><span class="p">,</span><span class="mi">180</span><span class="p">)</span>
<span class="n">np</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">np</span>
<span class="n">np</span><span class="o">.</span><span class="n">set_printoptions</span><span class="p">(</span><span class="n">linewidth</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span><span class="n">threshold</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span>
<span class="kn">import</span> <span class="nn">geopandas</span> <span class="kn">as</span> <span class="nn">gd</span>
<span class="kn">from</span> <span class="nn">types</span> <span class="kn">import</span> <span class="n">NoneType</span>
<span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">sleep</span> <span class="k">as</span> <span class="n">delay</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span>
<span class="kn">from</span> <span class="nn">logging</span> <span class="kn">import</span> <span class="n">getLogger</span>
<span class="kn">from</span> <span class="nn">logging</span> <span class="kn">import</span> <span class="n">INFO</span> <span class="k">as</span> <span class="n">logging_info</span>
<span class="n">getLogger</span><span class="p">(</span><span class="s">&#39;sqlalchemy.dialects.postgresql&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging_info</span><span class="p">)</span>
<span class="c"># engine = create_engine(r&#39;postgresql://postgres:postgres@localhost:8800/routing&#39;,</span>
<span class="c">#                        encoding=&#39;utf-8&#39;,</span>
<span class="c">#                        echo=False)</span>
<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s">r&#39;postgresql://postgres:postgres@192.168.3.52:8800/routing&#39;</span><span class="p">,</span>
                       <span class="n">encoding</span><span class="o">=</span><span class="s">&#39;utf-8&#39;</span><span class="p">,</span>
                       <span class="n">echo</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="c"># %load_ext sql</span>
<span class="o">%</span><span class="k">reload_ext</span> <span class="n">sql</span>
<span class="c"># %sql postgresql://postgres:postgres@localhost:9188/routing</span>
<span class="c">#%sql postgresql://postgres:postgres@localhost:9188/aprinto</span>
<span class="o">%</span><span class="k">sql</span> <span class="n">postgresql</span><span class="p">:</span><span class="o">//</span><span class="n">postgres</span><span class="p">:</span><span class="n">postgres</span><span class="nd">@192.168.3.52</span><span class="p">:</span><span class="mi">8800</span><span class="o">/</span><span class="n">routing</span>
<span class="kn">import</span> <span class="nn">psycopg2</span>
<span class="n">conn</span> <span class="o">=</span> <span class="n">psycopg2</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&quot;dbname=&#39;routing&#39; user=&#39;postgres&#39; host=&#39;192.168.3.52&#39; password=&#39;&#39; port=8800&quot;</span><span class="p">);</span>
<span class="n">cur</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
<span class="c"># conn.set_isolation_level(0)</span>
<span class="c"># cur.execute ...</span>

<span class="n">mn_zipcodes</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10001</span><span class="p">,</span> <span class="mi">10002</span><span class="p">,</span> <span class="mi">10003</span><span class="p">,</span> <span class="mi">10005</span><span class="p">,</span> <span class="mi">10006</span><span class="p">,</span> <span class="mi">10007</span><span class="p">,</span> 
               <span class="mi">10008</span><span class="p">,</span> <span class="mi">10009</span><span class="p">,</span> <span class="mi">10010</span><span class="p">,</span> <span class="mi">10012</span><span class="p">,</span> <span class="mi">10013</span><span class="p">,</span> <span class="mi">10014</span><span class="p">,</span> 
               <span class="mi">10016</span><span class="p">,</span> <span class="mi">10017</span><span class="p">,</span> <span class="mi">10018</span><span class="p">,</span> <span class="mi">10019</span><span class="p">,</span> <span class="mi">10020</span><span class="p">,</span> <span class="mi">10021</span><span class="p">,</span> 
               <span class="mi">10022</span><span class="p">,</span> <span class="mi">10023</span><span class="p">,</span> <span class="mi">10024</span><span class="p">,</span> <span class="mi">10025</span><span class="p">,</span> <span class="mi">10027</span><span class="p">,</span> <span class="mi">10028</span><span class="p">,</span> 
               <span class="mi">10029</span><span class="p">,</span> <span class="mi">10030</span><span class="p">,</span> <span class="mi">10031</span><span class="p">,</span> <span class="mi">10032</span><span class="p">,</span> <span class="mi">10033</span><span class="p">,</span> <span class="mi">10034</span><span class="p">,</span> 
               <span class="mi">10035</span><span class="p">,</span> <span class="mi">10036</span><span class="p">,</span> <span class="mi">10037</span><span class="p">,</span> <span class="mi">10038</span><span class="p">,</span> <span class="mi">10039</span><span class="p">,</span> <span class="mi">10040</span><span class="p">,</span> 
               <span class="mi">10041</span><span class="p">,</span> <span class="mi">10048</span><span class="p">,</span> <span class="mi">10055</span><span class="p">,</span> <span class="mi">10101</span><span class="p">,</span> <span class="mi">10103</span><span class="p">,</span> <span class="mi">10104</span><span class="p">,</span> 
               <span class="mi">10105</span><span class="p">,</span> <span class="mi">10106</span><span class="p">,</span> <span class="mi">10107</span><span class="p">,</span> <span class="mi">10108</span><span class="p">,</span> <span class="mi">10110</span><span class="p">,</span> <span class="mi">10111</span><span class="p">,</span> 
               <span class="mi">10112</span><span class="p">,</span> <span class="mi">10113</span><span class="p">,</span> <span class="mi">10116</span><span class="p">,</span> <span class="mi">10118</span><span class="p">,</span> <span class="mi">10119</span><span class="p">,</span> <span class="mi">10120</span><span class="p">,</span> 
               <span class="mi">10121</span><span class="p">,</span> <span class="mi">10122</span><span class="p">,</span> <span class="mi">10123</span><span class="p">,</span> <span class="mi">10128</span><span class="p">,</span> <span class="mi">10150</span><span class="p">,</span> <span class="mi">10151</span><span class="p">,</span> 
               <span class="mi">10152</span><span class="p">,</span> <span class="mi">10153</span><span class="p">,</span> <span class="mi">10154</span><span class="p">,</span> <span class="mi">10155</span><span class="p">,</span> <span class="mi">10158</span><span class="p">,</span> <span class="mi">10159</span><span class="p">,</span> 
               <span class="mi">10162</span><span class="p">,</span> <span class="mi">10165</span><span class="p">,</span> <span class="mi">10166</span><span class="p">,</span> <span class="mi">10167</span><span class="p">,</span> <span class="mi">10168</span><span class="p">,</span> <span class="mi">10169</span><span class="p">,</span> 
               <span class="mi">10170</span><span class="p">,</span> <span class="mi">10171</span><span class="p">,</span> <span class="mi">10172</span><span class="p">,</span> <span class="mi">10173</span><span class="p">,</span> <span class="mi">10174</span><span class="p">,</span> <span class="mi">10175</span><span class="p">,</span> 
               <span class="mi">10176</span><span class="p">,</span> <span class="mi">10177</span><span class="p">,</span> <span class="mi">10178</span><span class="p">,</span> <span class="mi">10249</span><span class="p">,</span> <span class="mi">10256</span><span class="p">,</span> <span class="mi">10268</span><span class="p">,</span> 
               <span class="mi">10270</span><span class="p">,</span> <span class="mi">10271</span><span class="p">,</span> <span class="mi">10276</span><span class="p">,</span> <span class="mi">10278</span><span class="p">,</span> <span class="mi">10279</span><span class="p">,</span> <span class="mi">10280</span><span class="p">,</span> 
               <span class="mi">10281</span><span class="p">,</span> <span class="mi">10282</span><span class="p">,</span> <span class="mi">10286</span><span class="p">]</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="PG-Admin-Functions">PG Admin Functions<a class="anchor-link" href="#PG-Admin-Functions">&#182;</a></h1>
</div>
</div>
</div>

<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### get table columns/info</span>

<span class="n">table</span> <span class="o">=</span> <span class="s">&#39;yelp_geom_error&#39;</span>

<span class="n">cmd</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;   select column_name, data_type, character_maximum_length </span>
<span class="s">            from INFORMATION_SCHEMA.COLUMNS </span>
<span class="s">            where table_name = &#39;</span><span class="si">%s</span><span class="s">&#39;&quot;&quot;&quot;</span><span class="o">%</span><span class="k">table</span>
<span class="o">%</span><span class="k">sql</span> <span class="n">postgres</span><span class="nd">@routing</span> <span class="err">$</span><span class="n">cmd</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### get table info function (to be)</span>
<span class="n">cmd</span><span class="o">=</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">        CREATE OR REPLACE FUNCTION</span>
<span class="s">        z_get_table_info( IN table_name text, IN col_name text, IN new_col bool )</span>
<span class="s">        $$</span>

<span class="s">            if new_col:</span>
<span class="s">                p = plpy.prepare(&quot;ALTER TABLE $1 ADD COLUMN $2 SERIAL&quot;, [&quot;text&quot;,&quot;text&quot;])</span>
<span class="s">                e = plpy.execute(p, [table_name,col_name])</span>
<span class="s">            </span>
<span class="s">            p1 = plpy.prepare(&quot;UPDATE $1 SET $2 = nextval(pg_get_serial_sequence(&#39;$1&#39;,&#39;$2&#39;))&quot;, [&quot;text&quot;,&quot;text&quot;])</span>
<span class="s">            e = plpy.execute(p1, [table_name,col_name])</span>
<span class="s">            </span>
<span class="s">            p2 = plpy.prepare(&quot;ALTER TABLE $1 ADD PRIMARY KEY ($2)&quot;, [&quot;text&quot;,&quot;text&quot;])</span>
<span class="s">            e = plpy.execute(p2, [table_name,col_name])</span>


<span class="s">        $$ language plpythonu;</span>
<span class="s">        &quot;&quot;&quot;</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### get all tables</span>
<span class="n">c</span><span class="o">=</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">select * from information_schema.tables </span>
<span class="s">WHERE table_schema=&#39;public&#39;</span>
<span class="s">order by table_name</span>
<span class="s">&quot;&quot;&quot;</span>
<span class="o">%</span><span class="k">sql</span> <span class="n">postgres</span><span class="nd">@routing</span> <span class="err">$</span><span class="n">c</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="PG-Custom-Geo-Functions">PG Custom Geo-Functions<a class="anchor-link" href="#PG-Custom-Geo-Functions">&#182;</a></h1>
</div>
</div>
</div>

<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># f(x) z_get_nodes_in_geom</span>
<span class="o">%%</span><span class="k">sql</span> <span class="n">postgres</span><span class="nd">@routing</span>
<span class="n">drop</span> <span class="n">function</span> <span class="k">if</span> <span class="n">exists</span> <span class="n">z_get_nodes_in_geom</span><span class="p">(</span><span class="n">text</span><span class="p">,</span><span class="n">text</span><span class="p">,</span><span class="n">geometry</span><span class="p">);</span>
<span class="n">create</span> <span class="ow">or</span> <span class="n">replace</span> <span class="n">function</span> <span class="n">z_get_nodes_in_geom</span><span class="p">(</span><span class="n">node_table</span> <span class="n">text</span><span class="p">,</span>
                                                <span class="n">node_col</span> <span class="n">text</span><span class="p">,</span>
                                                <span class="n">in_geom</span> <span class="n">geometry</span><span class="p">)</span>
<span class="n">returns</span> <span class="n">text</span>
<span class="k">as</span> <span class="err">$$</span>

    <span class="n">p</span> <span class="o">=</span> <span class="s">&quot;SELECT st_collect(array_agg(</span><span class="si">%s</span><span class="s">)) geom FROM </span><span class="si">%s</span><span class="s">&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">node_col</span><span class="p">,</span><span class="n">node_table</span><span class="p">)</span>
    <span class="n">multi_pts</span> <span class="o">=</span> <span class="n">plpy</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">p</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="s">&#39;geom&#39;</span><span class="p">]</span>

    <span class="n">p</span> <span class="o">=</span> <span class="n">plpy</span><span class="o">.</span><span class="n">prepare</span><span class="p">(</span><span class="s">&quot;SELECT st_collect(st_intersection($1,$2)) pts_within&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s">&quot;geometry&quot;</span><span class="p">,</span><span class="s">&quot;geometry&quot;</span><span class="p">])</span> 
    <span class="n">pts_within</span> <span class="o">=</span> <span class="n">plpy</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">p</span><span class="p">,[</span> <span class="n">multi_pts</span><span class="p">,</span><span class="n">in_geom</span> <span class="p">])[</span><span class="mi">0</span><span class="p">][</span><span class="s">&#39;pts_within&#39;</span><span class="p">]</span>

    <span class="n">_p</span> <span class="o">=</span> <span class="s">&quot;SELECT id FROM </span><span class="si">%s</span><span class="s"> WHERE </span><span class="si">%s</span><span class="s">&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">node_table</span><span class="p">,</span><span class="n">node_col</span><span class="p">)</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">plpy</span><span class="o">.</span><span class="n">prepare</span><span class="p">(</span><span class="n">_p</span><span class="o">+</span><span class="s">&quot; &amp;&amp; $1&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s">&quot;geometry&quot;</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">plpy</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">p</span><span class="p">,[</span> <span class="n">pts_within</span> <span class="p">])[:]</span>

<span class="err">$$</span> <span class="n">language</span> <span class="n">plpythonu</span><span class="p">;</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># call z_get_nodes_in_geom</span>
<span class="o">%%</span><span class="k">sql</span> <span class="n">postgres</span><span class="nd">@routing</span>
<span class="n">select</span> <span class="n">z_get_nodes_in_geom</span><span class="p">(</span><span class="s">&#39;lion_ways_slim_vertices_pgr&#39;</span><span class="p">,</span>
                           <span class="s">&#39;the_geom&#39;</span><span class="p">,</span>
                           <span class="n">z_get_way_box</span><span class="p">(</span><span class="s">&#39;14 st&#39;</span><span class="p">,</span> <span class="s">&#39;10 ave&#39;</span><span class="p">,</span> <span class="s">&#39;59 st&#39;</span><span class="p">,</span> <span class="s">&#39;1 ave&#39;</span><span class="p">))</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># f(x) z_update_table_with_closest_node</span>
<span class="o">%%</span><span class="k">sql</span> <span class="n">postgres</span><span class="nd">@routing</span>

<span class="n">drop</span> <span class="n">function</span> <span class="k">if</span> <span class="n">exists</span> <span class="n">public</span><span class="o">.</span><span class="n">z_update_table_with_closest_node</span><span class="p">(</span><span class="n">text</span><span class="p">,</span><span class="n">text</span><span class="p">,</span>
                                              <span class="n">text</span><span class="p">,</span><span class="n">text</span><span class="p">,</span>
                                              <span class="n">text</span><span class="p">,</span><span class="n">text</span><span class="p">);</span>

<span class="n">create</span> <span class="ow">or</span> <span class="n">replace</span> <span class="n">function</span> <span class="n">z_update_table_with_closest_node</span><span class="p">(</span><span class="n">node_table</span> <span class="n">text</span><span class="p">,</span> <span class="n">node_col</span> <span class="n">text</span><span class="p">,</span>
                                          <span class="n">update_table</span> <span class="n">text</span><span class="p">,</span> <span class="n">point_col</span> <span class="n">text</span><span class="p">,</span> 
                                          <span class="n">update_col</span> <span class="n">text</span><span class="p">,</span> <span class="n">update_col_idx</span> <span class="n">text</span><span class="p">)</span>
<span class="n">returns</span> <span class="n">text</span>
<span class="k">as</span> <span class="err">$$</span>
    
    <span class="n">p</span> <span class="o">=</span> <span class="s">&quot;SELECT st_collect(array_agg(</span><span class="si">%s</span><span class="s">)) geom FROM </span><span class="si">%s</span><span class="s">&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">node_col</span><span class="p">,</span><span class="n">node_table</span><span class="p">)</span>
    <span class="n">multi_pts</span> <span class="o">=</span> <span class="n">plpy</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">p</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="s">&#39;geom&#39;</span><span class="p">]</span>
    
    <span class="n">p</span> <span class="o">=</span> <span class="s">&quot;select st_geomfromtext(</span><span class="si">%s</span><span class="s">,4326) geom,* from </span><span class="si">%s</span><span class="s">&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">point_col</span><span class="p">,</span><span class="n">update_table</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">plpy</span><span class="o">.</span><span class="n">cursor</span><span class="p">(</span><span class="n">p</span><span class="p">):</span>
        
        <span class="n">p</span> <span class="o">=</span> <span class="n">plpy</span><span class="o">.</span><span class="n">prepare</span><span class="p">(</span><span class="s">&quot;SELECT st_closestpoint($1,$2) close_pt&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s">&quot;geometry&quot;</span><span class="p">,</span><span class="s">&quot;geometry&quot;</span><span class="p">])</span>
        <span class="n">close_pt</span> <span class="o">=</span> <span class="n">plpy</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">p</span><span class="p">,[</span> <span class="n">multi_pts</span><span class="p">,</span><span class="n">row</span><span class="p">[</span><span class="s">&#39;geom&#39;</span><span class="p">]</span> <span class="p">])[</span><span class="mi">0</span><span class="p">][</span><span class="s">&#39;close_pt&#39;</span><span class="p">]</span>
        
        <span class="n">_p</span> <span class="o">=</span> <span class="s">&quot;SELECT id FROM </span><span class="si">%s</span><span class="s">&quot;</span><span class="o">%</span><span class="k">node_table</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">plpy</span><span class="o">.</span><span class="n">prepare</span><span class="p">(</span><span class="n">_p</span><span class="o">+</span><span class="s">&quot; WHERE the_geom = $1&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s">&quot;geometry&quot;</span><span class="p">])</span>
        <span class="n">lion_node</span> <span class="o">=</span> <span class="n">plpy</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">p</span><span class="p">,[</span> <span class="n">close_pt</span> <span class="p">])[</span><span class="mi">0</span><span class="p">][</span><span class="s">&#39;id&#39;</span><span class="p">]</span>

        <span class="n">row_idx</span><span class="o">=</span><span class="n">row</span><span class="p">[</span><span class="s">&#39;</span><span class="si">%s</span><span class="s">&#39;</span><span class="o">%</span><span class="k">update_col_idx</span><span class="p">]</span>
        <span class="n">p</span> <span class="o">=</span> <span class="s">&quot;UPDATE </span><span class="si">%s</span><span class="s"> SET </span><span class="si">%s</span><span class="s"> = </span><span class="si">%s</span><span class="s"> where </span><span class="si">%s</span><span class="s"> = </span><span class="si">%s</span><span class="s">&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">update_table</span><span class="p">,</span><span class="n">update_col</span><span class="p">,</span><span class="n">lion_node</span><span class="p">,</span><span class="n">update_col_idx</span><span class="p">,</span><span class="n">row_idx</span><span class="p">)</span>
        <span class="n">z</span> <span class="o">=</span> <span class="n">plpy</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        
    <span class="k">return</span> <span class="s">&#39;ok&#39;</span>
        
<span class="err">$$</span> <span class="n">language</span> <span class="n">plpythonu</span><span class="p">;</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># call z_update_table_with_closest_node</span>
<span class="o">%%</span><span class="k">sql</span> <span class="n">postgres</span><span class="nd">@routing</span>
<span class="n">select</span> <span class="n">z_update_table_with_closest_node</span><span class="p">(</span><span class="s">&#39;lion_ways_slim_vertices_pgr&#39;</span><span class="p">,</span><span class="s">&#39;the_geom&#39;</span><span class="p">,</span>
                                          <span class="s">&#39;vendors&#39;</span><span class="p">,</span> <span class="s">&#39;geom_text&#39;</span><span class="p">,</span>
                                          <span class="s">&#39;node&#39;</span><span class="p">,</span> <span class="s">&#39;id&#39;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># f(x) z_get_closest_node_to_point_text</span>
<span class="o">%%</span><span class="k">sql</span> <span class="n">postgres</span><span class="nd">@routing</span>
<span class="n">drop</span> <span class="n">function</span> <span class="k">if</span> <span class="n">exists</span> <span class="n">public</span><span class="o">.</span><span class="n">z_get_closest_node_to_point_text</span><span class="p">(</span><span class="n">text</span><span class="p">,</span><span class="n">text</span><span class="p">,</span><span class="n">text</span><span class="p">);</span>
<span class="n">create</span> <span class="ow">or</span> <span class="n">replace</span> <span class="n">function</span> <span class="n">z_get_closest_node_to_point_text</span><span class="p">(</span><span class="n">node_table</span> <span class="n">text</span><span class="p">,</span>
                                                       <span class="n">node_col</span> <span class="n">text</span><span class="p">,</span>
                                                       <span class="n">to_point</span> <span class="n">text</span><span class="p">)</span>
<span class="n">returns</span> <span class="n">integer</span>
<span class="k">as</span> <span class="err">$$</span>
    
    <span class="n">p</span> <span class="o">=</span> <span class="s">&quot;SELECT st_collect(array_agg(</span><span class="si">%s</span><span class="s">)) geom FROM </span><span class="si">%s</span><span class="s">&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">node_col</span><span class="p">,</span><span class="n">node_table</span><span class="p">)</span>
    <span class="n">multi_pts</span> <span class="o">=</span> <span class="n">plpy</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">p</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="s">&#39;geom&#39;</span><span class="p">]</span>
    
    <span class="n">p</span> <span class="o">=</span> <span class="n">plpy</span><span class="o">.</span><span class="n">prepare</span><span class="p">(</span><span class="s">&quot;SELECT st_closestpoint($1,st_geomfromtext($2,4326)) close_pt&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s">&quot;geometry&quot;</span><span class="p">,</span><span class="s">&quot;text&quot;</span><span class="p">])</span> 
    <span class="n">close_pt</span> <span class="o">=</span> <span class="n">plpy</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">p</span><span class="p">,[</span> <span class="n">multi_pts</span><span class="p">,</span><span class="n">to_point</span> <span class="p">])[</span><span class="mi">0</span><span class="p">][</span><span class="s">&#39;close_pt&#39;</span><span class="p">]</span>
    
    <span class="n">_p</span> <span class="o">=</span> <span class="s">&quot;SELECT id FROM </span><span class="si">%s</span><span class="s">&quot;</span><span class="o">%</span><span class="k">node_table</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">plpy</span><span class="o">.</span><span class="n">prepare</span><span class="p">(</span><span class="n">_p</span><span class="o">+</span><span class="s">&quot; WHERE the_geom = $1&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s">&quot;geometry&quot;</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">plpy</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">p</span><span class="p">,[</span> <span class="n">close_pt</span> <span class="p">])[</span><span class="mi">0</span><span class="p">][</span><span class="s">&#39;id&#39;</span><span class="p">]</span>
        
<span class="err">$$</span> <span class="n">language</span> <span class="n">plpythonu</span><span class="p">;</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># call z_get_closest_node_to_point_text</span>
<span class="o">%%</span><span class="k">sql</span> <span class="n">postgres</span><span class="nd">@routing</span> 
<span class="n">select</span> <span class="n">z_get_closest_node_to_point_text</span><span class="p">(</span><span class="s">&#39;lion_ways_slim_vertices_pgr&#39;</span><span class="p">,</span><span class="s">&#39;the_geom&#39;</span><span class="p">,</span>
                      <span class="s">&#39;POINT (-73.9893011318052771 40.7579070491531965)&#39;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### dijkstra</span>
<span class="n">cmd</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;SELECT cost FROM pgr_dijkstra(&#39;</span>
<span class="s">                SELECT gid AS id,</span>
<span class="s">                         source::integer,</span>
<span class="s">                         target::integer,</span>
<span class="s">                         len_miles::double precision AS cost</span>
<span class="s">                        FROM lws&#39;,</span>
<span class="s">                893, 4487, false, false);&quot;&quot;&quot;</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span>
<span class="k">print</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql_query</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
<span class="c"># print round((pd.read_sql_query(cmd,engine).cost.sum()*3.280839895) / 5280,5),&#39;miles between points&#39;</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># create node_many_t</span>
<span class="o">%%</span><span class="k">sql</span> <span class="n">postgres</span><span class="nd">@routing</span>
<span class="n">DROP</span> <span class="n">TYPE</span> <span class="k">if</span> <span class="n">exists</span> <span class="n">node_many_t</span><span class="p">;</span>
<span class="n">CREATE</span> <span class="n">TYPE</span> <span class="n">node_many_t</span> <span class="n">AS</span> <span class="p">(</span>
    <span class="n">seq</span> <span class="n">integer</span><span class="p">,</span>
    <span class="n">source</span> <span class="n">integer</span><span class="p">,</span>
    <span class="n">target</span> <span class="n">integer</span><span class="p">,</span>
    <span class="n">cost</span> <span class="n">double</span> <span class="n">precision</span>
<span class="p">);</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># f(x) z_get_miles_between_nodes(text,int,int)</span>
<span class="o">%%</span><span class="k">sql</span> <span class="n">postgres</span><span class="nd">@routing</span>
<span class="n">drop</span> <span class="n">function</span> <span class="k">if</span> <span class="n">exists</span> <span class="n">public</span><span class="o">.</span><span class="n">z_get_miles_between_nodes</span><span class="p">(</span><span class="n">text</span><span class="p">,</span><span class="n">integer</span><span class="p">,</span><span class="n">integer</span><span class="p">);</span>
<span class="n">create</span> <span class="ow">or</span> <span class="n">replace</span> <span class="n">function</span> <span class="n">z_get_miles_between_nodes</span><span class="p">(</span><span class="n">route_tbl</span> <span class="n">text</span><span class="p">,</span>
                                                     <span class="n">node_a</span> <span class="n">integer</span><span class="p">,</span>
                                                     <span class="n">node_b</span> <span class="n">integer</span><span class="p">)</span>
<span class="n">returns</span> <span class="n">double</span> <span class="n">precision</span>
<span class="k">as</span> <span class="err">$$</span>
    
    <span class="n">p</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;select sum(cost::double precision) arr</span>
<span class="s">            FROM </span>
<span class="s">                (SELECT cost FROM pgr_dijkstra(&#39;</span>
<span class="s">                    SELECT gid AS id,</span>
<span class="s">                             source::integer,</span>
<span class="s">                             target::integer,</span>
<span class="s">                             len_miles::double precision AS cost</span>
<span class="s">                            FROM </span><span class="si">%s</span><span class="s">&#39;,</span>
<span class="s">                    </span><span class="si">%s</span><span class="s">, </span><span class="si">%s</span><span class="s">, false, false)) as all_costs&quot;&quot;&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">route_tbl</span><span class="p">,</span><span class="n">node_a</span><span class="p">,</span><span class="n">node_b</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="n">plpy</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">p</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="s">&#39;arr&#39;</span><span class="p">]</span>
        
<span class="err">$$</span> <span class="n">language</span> <span class="n">plpythonu</span><span class="p">;</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># f(x) z_get_miles_between_nodes(text,integer,integer[])</span>
<span class="o">%%</span><span class="k">sql</span> <span class="n">postgres</span><span class="nd">@routing</span>
<span class="n">drop</span> <span class="n">function</span> <span class="k">if</span> <span class="n">exists</span> <span class="n">public</span><span class="o">.</span><span class="n">z_get_miles_between_nodes</span><span class="p">(</span><span class="n">text</span><span class="p">,</span>
                                                        <span class="n">integer</span><span class="p">,</span>
                                                        <span class="n">integer</span><span class="p">[]);</span>
<span class="n">create</span> <span class="ow">or</span> <span class="n">replace</span> <span class="n">function</span> <span class="n">z_get_miles_between_nodes</span><span class="p">(</span><span class="n">route_tbl</span> <span class="n">text</span><span class="p">,</span>
                                                     <span class="n">node_1</span> <span class="n">integer</span><span class="p">,</span>
                                                     <span class="n">node_many</span> <span class="n">integer</span><span class="p">[])</span>
<span class="n">returns</span> <span class="n">double</span> <span class="n">precision</span><span class="p">[]</span>
<span class="k">as</span> <span class="err">$$</span>
    
    <span class="n">p</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;SELECT seq, id1 as source, id2 as target, cost::double precision</span>
<span class="s">                FROM pgr_kdijkstraCost(&#39;</span>
<span class="s">                SELECT gid AS id,</span>
<span class="s">                         source::integer,</span>
<span class="s">                         target::integer,</span>
<span class="s">                         len_miles::double precision AS cost</span>
<span class="s">                        FROM </span><span class="si">%s</span><span class="s">&#39;,</span>
<span class="s">                </span><span class="si">%s</span><span class="s">, array</span><span class="si">%s</span><span class="s">, false, false);&quot;&quot;&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">route_tbl</span><span class="p">,</span><span class="n">node_1</span><span class="p">,</span>
                                                <span class="nb">str</span><span class="p">([</span><span class="nb">int</span><span class="p">(</span><span class="n">it</span><span class="p">)</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">node_many</span><span class="p">]))</span>
    
    <span class="n">records</span> <span class="o">=</span> <span class="n">plpy</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">[</span> <span class="p">(</span><span class="n">r</span><span class="p">[</span><span class="s">&quot;cost&quot;</span><span class="p">])</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">records</span> <span class="p">]</span>
        
<span class="err">$$</span> <span class="n">language</span> <span class="n">plpythonu</span><span class="p">;</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># f(x) z_get_miles_between_nodes(text,integer[],integer[])</span>
<span class="o">%%</span><span class="k">sql</span> <span class="n">postgres</span><span class="nd">@routing</span>
<span class="n">drop</span> <span class="n">function</span> <span class="k">if</span> <span class="n">exists</span> <span class="n">public</span><span class="o">.</span><span class="n">z_get_miles_between_nodes</span><span class="p">(</span><span class="n">text</span><span class="p">,</span><span class="n">integer</span><span class="p">[],</span><span class="n">integer</span><span class="p">[]);</span>
<span class="n">create</span> <span class="ow">or</span> <span class="n">replace</span> <span class="n">function</span> <span class="n">z_get_miles_between_nodes</span><span class="p">(</span><span class="n">route_tbl</span> <span class="n">text</span><span class="p">,</span>
                                                     <span class="n">node_arr_1</span> <span class="n">integer</span><span class="p">[],</span>
                                                     <span class="n">node_arr_2</span> <span class="n">integer</span><span class="p">[])</span>
<span class="n">returns</span> <span class="nb">float</span><span class="p">[]</span>
<span class="k">as</span> <span class="err">$$</span>
    <span class="n">r</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">node_arr_1</span><span class="p">)):</span>
        <span class="n">p</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot; SELECT sum(cost::double precision) arr</span>
<span class="s">                FROM </span>
<span class="s">                    (SELECT cost FROM pgr_dijkstra(&#39;</span>
<span class="s">                        SELECT gid AS id,</span>
<span class="s">                                 source::integer,</span>
<span class="s">                                 target::integer,</span>
<span class="s">                                 len_miles::double precision AS cost</span>
<span class="s">                                FROM </span><span class="si">%s</span><span class="s">&#39;,</span>
<span class="s">                        </span><span class="si">%s</span><span class="s">, </span><span class="si">%s</span><span class="s">, false, false)) as all_costs&quot;&quot;&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">route_tbl</span><span class="p">,</span>
                                                                <span class="n">node_arr_1</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
                                                                <span class="n">node_arr_2</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
    
        <span class="n">r</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">plpy</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">p</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="s">&#39;arr&#39;</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">r</span>
        
<span class="err">$$</span> <span class="n">language</span> <span class="n">plpythonu</span><span class="p">;</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># call z_get_miles_between_nodes</span>
<span class="o">%%</span><span class="k">sql</span> <span class="n">postgres</span><span class="nd">@routing</span>
<span class="n">select</span> <span class="n">z_get_miles_between_nodes</span><span class="p">(</span><span class="s">&#39;lws&#39;</span><span class="p">,</span><span class="mi">1722</span><span class="p">,</span><span class="mi">8037</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># f(x) z_update_table_with_closest_node</span>
<span class="o">%%</span><span class="k">sql</span> <span class="n">postgres</span><span class="nd">@routing</span>

<span class="n">drop</span> <span class="n">function</span> <span class="k">if</span> <span class="n">exists</span> <span class="n">public</span><span class="o">.</span><span class="n">z_add_point</span><span class="p">(</span> <span class="n">text</span><span class="p">,</span>
                                            <span class="n">double</span> <span class="n">precision</span><span class="p">,</span>
                                            <span class="n">double</span> <span class="n">precision</span><span class="p">);</span>

<span class="n">create</span> <span class="ow">or</span> <span class="n">replace</span> <span class="n">function</span> <span class="n">z_add_point</span><span class="p">(</span><span class="n">pt_table</span> <span class="n">text</span><span class="p">,</span>
                                       <span class="n">pt_x</span> <span class="n">double</span> <span class="n">precision</span><span class="p">,</span>
                                       <span class="n">pt_y</span> <span class="n">double</span> <span class="n">precision</span><span class="p">)</span>
<span class="n">returns</span> <span class="n">text</span>
<span class="k">as</span> <span class="err">$$</span>
    
    <span class="n">p</span> <span class="o">=</span> <span class="s">&quot;SELECT st_collect(array_agg(</span><span class="si">%s</span><span class="s">)) geom FROM </span><span class="si">%s</span><span class="s">&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">node_col</span><span class="p">,</span><span class="n">node_table</span><span class="p">)</span>
    <span class="n">multi_pts</span> <span class="o">=</span> <span class="n">plpy</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">p</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="s">&#39;geom&#39;</span><span class="p">]</span>
    
    <span class="n">p</span> <span class="o">=</span> <span class="s">&quot;select st_geomfromtext(</span><span class="si">%s</span><span class="s">,4326) geom,* from </span><span class="si">%s</span><span class="s">&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">point_col</span><span class="p">,</span><span class="n">update_table</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">plpy</span><span class="o">.</span><span class="n">cursor</span><span class="p">(</span><span class="n">p</span><span class="p">):</span>
        
        <span class="n">p</span> <span class="o">=</span> <span class="n">plpy</span><span class="o">.</span><span class="n">prepare</span><span class="p">(</span><span class="s">&quot;SELECT st_closestpoint($1,$2) close_pt&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s">&quot;geometry&quot;</span><span class="p">,</span><span class="s">&quot;geometry&quot;</span><span class="p">])</span>
        <span class="n">close_pt</span> <span class="o">=</span> <span class="n">plpy</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">p</span><span class="p">,[</span> <span class="n">multi_pts</span><span class="p">,</span><span class="n">row</span><span class="p">[</span><span class="s">&#39;geom&#39;</span><span class="p">]</span> <span class="p">])[</span><span class="mi">0</span><span class="p">][</span><span class="s">&#39;close_pt&#39;</span><span class="p">]</span>
        
        <span class="n">_p</span> <span class="o">=</span> <span class="s">&quot;SELECT id FROM </span><span class="si">%s</span><span class="s">&quot;</span><span class="o">%</span><span class="k">node_table</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">plpy</span><span class="o">.</span><span class="n">prepare</span><span class="p">(</span><span class="n">_p</span><span class="o">+</span><span class="s">&quot; WHERE the_geom = $1&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s">&quot;geometry&quot;</span><span class="p">])</span>
        <span class="n">lion_node</span> <span class="o">=</span> <span class="n">plpy</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">p</span><span class="p">,[</span> <span class="n">close_pt</span> <span class="p">])[</span><span class="mi">0</span><span class="p">][</span><span class="s">&#39;id&#39;</span><span class="p">]</span>

        <span class="n">row_idx</span><span class="o">=</span><span class="n">row</span><span class="p">[</span><span class="s">&#39;</span><span class="si">%s</span><span class="s">&#39;</span><span class="o">%</span><span class="k">update_col_idx</span><span class="p">]</span>
        <span class="n">p</span> <span class="o">=</span> <span class="s">&quot;UPDATE </span><span class="si">%s</span><span class="s"> SET </span><span class="si">%s</span><span class="s"> = </span><span class="si">%s</span><span class="s"> where </span><span class="si">%s</span><span class="s"> = </span><span class="si">%s</span><span class="s">&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">update_table</span><span class="p">,</span><span class="n">update_col</span><span class="p">,</span><span class="n">lion_node</span><span class="p">,</span><span class="n">update_col_idx</span><span class="p">,</span><span class="n">row_idx</span><span class="p">)</span>
        <span class="n">z</span> <span class="o">=</span> <span class="n">plpy</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        
    <span class="k">return</span> <span class="s">&#39;ok&#39;</span>
        
<span class="err">$$</span> <span class="n">language</span> <span class="n">plpythonu</span><span class="p">;</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># sql z_get_miles_bt_node_many</span>
<span class="o">%%</span><span class="k">sql</span> <span class="n">postgres</span><span class="nd">@routing</span>
<span class="n">drop</span> <span class="n">function</span> <span class="k">if</span> <span class="n">exists</span> <span class="n">public</span><span class="o">.</span><span class="n">z_get_miles_bt_node_many</span><span class="p">(</span><span class="n">integer</span><span class="p">,</span><span class="n">bigint</span><span class="p">[]);</span>
<span class="n">create</span> <span class="ow">or</span> <span class="n">replace</span> <span class="n">function</span> <span class="n">z_get_miles_bt_node_many</span><span class="p">(</span><span class="n">node_1</span> <span class="n">integer</span><span class="p">,</span>
                                                    <span class="n">node_many</span> <span class="n">bigint</span><span class="p">[])</span>
<span class="n">returns</span> <span class="n">table</span><span class="p">(</span><span class="n">seq</span> <span class="n">integer</span><span class="p">,</span><span class="n">id1</span> <span class="n">integer</span><span class="p">,</span><span class="n">id2</span> <span class="n">integer</span><span class="p">,</span><span class="n">cost</span> <span class="n">double</span> <span class="n">precision</span><span class="p">)</span>
<span class="k">as</span> <span class="err">$$</span>

<span class="n">SELECT</span> <span class="n">p</span><span class="o">.</span><span class="n">seq</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">id1</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">id2</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">cost</span>
    <span class="n">FROM</span> <span class="n">pgr_kdijkstraCost</span><span class="p">(</span>
        <span class="s">&#39;SELECT gid AS id,</span>
        <span class="n">source</span><span class="p">::</span><span class="n">integer</span><span class="p">,</span>
        <span class="n">target</span><span class="p">::</span><span class="n">integer</span><span class="p">,</span>
        <span class="n">len_miles</span><span class="p">::</span><span class="n">double</span> <span class="n">precision</span> <span class="n">AS</span> <span class="n">cost</span>
        <span class="n">FROM</span> <span class="n">lion_ways_slim</span><span class="s">&#39;,</span>
    <span class="err">$</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">array</span><span class="p">[</span><span class="mi">1836</span><span class="p">,</span> <span class="mi">1788</span><span class="p">,</span> <span class="mi">1534</span><span class="p">,</span> <span class="mi">2480</span><span class="p">,</span> <span class="mi">2646</span><span class="p">,</span> <span class="mi">1727</span><span class="p">,</span> <span class="mi">128</span><span class="p">,</span> <span class="mi">157</span><span class="p">,</span> <span class="mi">1691</span><span class="p">,</span> <span class="mi">1618</span><span class="p">],</span>
    <span class="n">false</span><span class="p">,</span>
    <span class="n">false</span><span class="p">)</span> <span class="n">p</span><span class="p">;</span>

<span class="err">$$</span> <span class="n">language</span> <span class="n">sql</span><span class="p">;</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="TABLES:">TABLES:<a class="anchor-link" href="#TABLES:">&#182;</a></h1>
</div>
</div>
</div>

<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Seamless">Seamless<a class="anchor-link" href="#Seamless">&#182;</a></h2>
</div>
</div>
</div>

<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># STILL NOT WORKING ugh... f(x) z_clean_street_names</span>
<span class="n">sql_cmd</span><span class="o">=</span><span class="s">&quot;&quot;&quot;</span>

<span class="s">    drop function if exists public.z_clean_street_names(text,text,text,text);</span>

<span class="s">    create or replace function z_clean_street_names(tbl text,</span>
<span class="s">                                                    tbl_id_lbl text,</span>
<span class="s">                                                    from_lbl text,</span>
<span class="s">                                                    to_lbl text)</span>
<span class="s">    returns text</span>
<span class="s">    as $$</span>

<span class="s">        from f_postgres import clean_street_names</span>
<span class="s">        </span>
<span class="s">        t = &quot;{&#39;tbl&#39;:</span><span class="si">%s</span><span class="s">,&#39;tbl_id_lbl&#39;:</span><span class="si">%s</span><span class="s">}&quot;%(tbl,tbl_id_lbl)</span>
<span class="s">        </span>
<span class="s">        r = clean_street_names(t,from_lbl,to_lbl)</span>
<span class="s">        </span>
<span class="s">        return str(type(t))</span>

<span class="s">    $$ language plpythonu;</span>

<span class="s">    &quot;&quot;&quot;</span>

<span class="o">%</span><span class="k">sql</span> <span class="n">postgres</span><span class="nd">@routing</span> <span class="err">$</span><span class="n">sql_cmd</span>
<span class="o">%</span><span class="k">sql</span> <span class="n">postgres</span><span class="nd">@routing</span> <span class="n">select</span> <span class="n">z_clean_street_names</span><span class="p">(</span><span class="s">&#39;seamless&#39;</span><span class="p">,</span><span class="s">&#39;id&#39;</span><span class="p">,</span><span class="s">&#39;address&#39;</span><span class="p">,</span><span class="s">&#39;clean_addr&#39;</span><span class="p">);</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># (for above) Teminal Cmds in Devel.</span>

<span class="c"># FROM S3, COPY FROM S2 to S3</span>
<span class="c"># sudo scp -F ~/.ssh/config mb:/Users/admin/SERVER2/BD_Scripts/geolocation/f_postgres.py /opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/</span>

<span class="c"># FROM S2, COPY TO S3 -- this should work after restarting SERVER3</span>
<span class="c">#!scp -F /Users/admin/.ssh/config mbp2_r:/Users/admin/SERVER2/BD_Scripts/geolocation/f_postgres.py /opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Aprinto">Aprinto<a class="anchor-link" href="#Aprinto">&#182;</a></h2>
</div>
</div>
</div>

<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># more Libraries/F(x)s</span>
<span class="kn">from</span> <span class="nn">uuid</span> <span class="kn">import</span> <span class="n">uuid4</span> <span class="k">as</span> <span class="n">get_guid</span>
<span class="c"># from os import system as os_cmd</span>
<span class="c"># os_cmd(&#39;ssh -f -i ~/.ssh/grp1.pem ec2-user@ec2-54-88-101-190.compute-1.amazonaws.com -p 10101 -L 9090:localhost:8800 -N &amp;&#39;)</span>
<span class="c"># %sql postgresql://postgres:postgres@192.168.3.52:8800/aprinto</span>
<span class="o">%</span><span class="k">sql</span> <span class="n">postgresql</span><span class="p">:</span><span class="o">//</span><span class="n">postgres</span><span class="p">:</span><span class="n">postgres</span><span class="nd">@localhost</span><span class="p">:</span><span class="mi">9090</span><span class="o">/</span><span class="n">aprinto</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># create sample admin entry for testing</span>
<span class="n">cmd</span><span class="o">=</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">insert into aprinto_admin(created,machine_id,admin_name,admin_tel) </span>
<span class="s">values (&#39;now&#39;::timestamp with time zone,</span>
<span class="s">        &#39;admin1&#39;,</span>
<span class="s">        &#39;Seth&#39;,</span>
<span class="s">        &#39;6174295700&#39;)</span>
<span class="s">&quot;&quot;&quot;</span>
<span class="o">%</span><span class="k">sql</span> <span class="n">postgres</span><span class="nd">@aprinto</span> <span class="err">$</span><span class="n">cmd</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># working plpgsql trigger</span>

<span class="n">cmd</span><span class="o">=</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">drop trigger if exists fake_data_extract on app_pdf;</span>
<span class="s">drop function if exists public.z_fake_order() cascade;</span>

<span class="s">create or replace function z_fake_order()</span>
<span class="s">returns trigger</span>
<span class="s">as $$</span>
<span class="s">BEGIN</span>
<span class="s">    </span>
<span class="s">    update app_pdf </span>
<span class="s">    set </span>
<span class="s">        vendor_id = 1,</span>
<span class="s">        cust_name = &#39;fat tony&#39;,</span>
<span class="s">        cust_tel = &#39;555-555-5555&#39;,</span>
<span class="s">        cust_addr = &#39;10 east 20th st., new york, ny 10003&#39;,</span>
<span class="s">        cust_cross_st = &#39;20th st. &amp; 5th ave.&#39;,</span>
<span class="s">        order_price = 20.00,</span>
<span class="s">        order_tip = 5.00</span>
<span class="s">    WHERE pdf_id = NEW.pdf_id;</span>
<span class="s">    return null;</span>
<span class="s">    </span>
<span class="s">END; </span>
<span class="s">$$ language plpgsql;</span>


<span class="s">create trigger fake_data_extract</span>
<span class="s">after insert on app_pdf</span>
<span class="s">for each row</span>
<span class="s">execute procedure z_fake_order();</span>

<span class="s">&quot;&quot;&quot;</span>
<span class="o">%</span><span class="k">sql</span> <span class="n">postgres</span><span class="nd">@aprinto</span> <span class="err">$</span><span class="n">cmd</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># z_fake_order trigger/f(x) -- (plpythonu)</span>
<span class="o">%%</span><span class="k">sql</span> <span class="n">postgres</span><span class="nd">@aprinto</span>

<span class="n">drop</span> <span class="n">trigger</span> <span class="k">if</span> <span class="n">exists</span> <span class="n">fake_data_extract</span> <span class="n">on</span> <span class="n">app_pdf</span><span class="p">;</span>
<span class="n">drop</span> <span class="n">function</span> <span class="k">if</span> <span class="n">exists</span> <span class="n">public</span><span class="o">.</span><span class="n">z_fake_order</span><span class="p">()</span> <span class="n">cascade</span><span class="p">;</span>

<span class="n">create</span> <span class="ow">or</span> <span class="n">replace</span> <span class="n">function</span> <span class="n">z_fake_order</span><span class="p">()</span>
<span class="n">returns</span> <span class="n">trigger</span>
<span class="k">as</span> <span class="err">$$</span>
    
    <span class="n">new_pdf_id</span> <span class="o">=</span> <span class="n">TD</span><span class="p">[</span><span class="s">&quot;new&quot;</span><span class="p">][</span><span class="s">&quot;pdf_id&quot;</span><span class="p">]</span>
    <span class="n">p</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">        update app_pdf </span>
<span class="s">        set </span>
<span class="s">            vendor_id = 4,</span>
<span class="s">            cust_name = &#39;fat tony&#39;,</span>
<span class="s">            cust_tel = &#39;555-555-5555&#39;,</span>
<span class="s">            cust_addr = &#39;10 east 20th st., new york, ny 10003&#39;,</span>
<span class="s">            cust_cross_st = &#39;20th st. &amp; 5th ave.&#39;,</span>
<span class="s">            order_price = 20.00,</span>
<span class="s">            order_tip = 5.00,</span>
<span class="s">            status = &#39;S&#39;</span>
<span class="s">        WHERE pdf_id = &#39;</span><span class="si">%s</span><span class="s">&#39;;</span>
<span class="s">        &quot;&quot;&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">new_pdf_id</span><span class="p">)</span>
    <span class="n">plpy</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>

<span class="err">$$</span> <span class="n">language</span> <span class="n">plpythonu</span><span class="p">;</span>


<span class="n">create</span> <span class="n">trigger</span> <span class="n">fake_data_extract</span>
<span class="n">after</span> <span class="n">insert</span> <span class="n">on</span> <span class="n">app_pdf</span>
<span class="k">for</span> <span class="n">each</span> <span class="n">row</span>
<span class="n">when</span> <span class="p">(</span><span class="n">NEW</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="s">&#39;U&#39;</span><span class="p">)</span>
<span class="n">execute</span> <span class="n">procedure</span> <span class="n">z_fake_order</span><span class="p">();</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># possibly working</span>
<span class="o">%%</span><span class="k">sql</span> <span class="n">postgres</span><span class="nd">@aprinto</span>

<span class="n">drop</span> <span class="n">trigger</span> <span class="k">if</span> <span class="n">exists</span> <span class="n">send_new_order</span> <span class="n">on</span> <span class="n">app_pdf</span><span class="p">;</span>
<span class="n">drop</span> <span class="n">function</span> <span class="k">if</span> <span class="n">exists</span> <span class="n">public</span><span class="o">.</span><span class="n">z_forward_new_order</span><span class="p">()</span> <span class="n">cascade</span><span class="p">;</span>

<span class="n">create</span> <span class="ow">or</span> <span class="n">replace</span> <span class="n">function</span> <span class="n">z_forward_new_order</span><span class="p">()</span>
<span class="n">returns</span> <span class="n">trigger</span>
<span class="k">as</span> <span class="err">$$</span>

    <span class="kn">import</span> <span class="nn">requests</span>
    <span class="kn">from</span> <span class="nn">json</span> <span class="kn">import</span> <span class="n">dumps</span> <span class="k">as</span> <span class="n">j_dumps</span>
    
    <span class="n">pdf_id</span> <span class="o">=</span> <span class="n">TD</span><span class="p">[</span><span class="s">&quot;old&quot;</span><span class="p">][</span><span class="s">&quot;pdf_id&quot;</span><span class="p">]</span>
    <span class="n">user_id</span> <span class="o">=</span> <span class="s">&#39;544963fce4b00f942bc97027&#39;</span>
    <span class="n">satellite_id</span> <span class="o">=</span> <span class="s">&#39;544963fce4b00f942bc9702e&#39;</span>
    
    <span class="n">p</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            select</span>
<span class="s">                    &#39;</span><span class="si">%s</span><span class="s">&#39; satellite_id,</span>
<span class="s">                    p.cust_name cust_name,</span>
<span class="s">                    p.cust_tel cust_tel,</span>
<span class="s">                    p.cust_addr cust_addr,</span>
<span class="s">                    p.cust_cross_st cust_cross_st,</span>
<span class="s">                    to_char(p.order_price, &#39;FM990D00&#39;) price,</span>
<span class="s">                    to_char(p.order_tip, &#39;FM990D00&#39;) tip,</span>
<span class="s">                    p.pdf_id order_uuid,</span>
<span class="s">                    concat(to_char(p.created, &#39;FMYYYYMMDDHH24:MI:SS&#39;),&#39;-0400&#39;) order_time,</span>
<span class="s">                    p.order_tag order_tag,</span>
<span class="s">                    v.biz_name vend_name,</span>
<span class="s">                    v.addr vend_addr,</span>
<span class="s">                    v.recipient_emails recipient_emails</span>
<span class="s">                from app_pdf p</span>
<span class="s">                inner join app_vendor v on v.vendor_id = p.vendor_id</span>
<span class="s">                WHERE pdf_id = &#39;</span><span class="si">%s</span><span class="s">&#39;;</span>
<span class="s">        &quot;&quot;&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">satellite_id</span><span class="p">,</span><span class="n">pdf_id</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">plpy</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">p</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">json_data</span> <span class="o">=</span> <span class="n">j_dumps</span><span class="p">([</span><span class="n">res</span><span class="p">])</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s">&#39;utf-8&#39;</span><span class="p">)</span>
    
    <span class="n">post_url</span> <span class="o">=</span> <span class="s">&#39;http://admin.gnamgnamapp.it/ws/v2/&#39;</span><span class="o">+</span><span class="n">user_id</span><span class="o">+</span><span class="s">&#39;/aporoOrders&#39;</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;Content-type&#39;</span><span class="p">:</span> <span class="s">&#39;application/json&#39;</span><span class="p">}</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">post_url</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">json_data</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="o">==</span><span class="mi">200</span><span class="p">:</span>
        <span class="k">return</span> <span class="s">&#39;ok&#39;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="p">)</span><span class="o">+</span><span class="s">&#39;</span><span class="se">\n\t</span><span class="s">&#39;</span><span class="o">+</span><span class="n">response</span><span class="o">.</span><span class="n">content</span><span class="o">+</span><span class="s">&#39;</span><span class="se">\n\n</span><span class="s">&#39;</span><span class="o">+</span><span class="n">response</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">body</span><span class="p">)</span>

<span class="err">$$</span> <span class="n">language</span> <span class="n">plpythonu</span><span class="p">;</span>

<span class="n">create</span> <span class="n">trigger</span> <span class="n">send_new_order</span>
<span class="n">after</span> <span class="n">update</span> <span class="n">on</span> <span class="n">app_pdf</span>
<span class="k">for</span> <span class="n">each</span> <span class="n">row</span> 
<span class="n">when</span> <span class="p">(</span><span class="n">NEW</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="s">&#39;S&#39;</span><span class="p">)</span>
<span class="n">execute</span> <span class="n">procedure</span> <span class="n">z_forward_new_order</span><span class="p">();</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># test trigger</span>
<span class="n">a</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">get_guid</span><span class="p">())</span>
<span class="o">%</span><span class="k">sql</span> <span class="n">postgres</span><span class="nd">@aprinto</span> <span class="n">insert</span> <span class="n">into</span> <span class="n">app_pdf</span><span class="p">(</span><span class="n">pdf_id</span><span class="p">,</span><span class="n">created</span><span class="p">,</span><span class="n">status</span><span class="p">,</span><span class="n">date_uploaded</span><span class="p">)</span> <span class="n">values</span> <span class="p">(</span><span class="s">&#39;$a&#39;</span><span class="p">,</span><span class="s">&#39;now&#39;</span><span class="p">::</span><span class="n">timestamp</span> <span class="k">with</span> <span class="n">time</span> <span class="n">zone</span><span class="p">,</span><span class="s">&#39;u&#39;</span><span class="p">,</span><span class="s">&#39;now&#39;</span><span class="p">::</span><span class="n">timestamp</span> <span class="k">with</span> <span class="n">time</span> <span class="n">zone</span><span class="p">);</span>

<span class="n">cmd</span><span class="o">=</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">update app_pdf </span>
<span class="s">    set </span>
<span class="s">        vendor_id = null,</span>
<span class="s">        cust_name = null,</span>
<span class="s">        cust_tel = null,</span>
<span class="s">        cust_addr = null,</span>
<span class="s">        cust_cross_st = null,</span>
<span class="s">        order_price = null,</span>
<span class="s">        order_tip = null;</span>

<span class="s">&quot;&quot;&quot;</span>
<span class="o">%</span><span class="k">sql</span> <span class="n">postgres</span><span class="nd">@aprinto</span> <span class="err">$</span><span class="n">cmd</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># scratch</span>

<span class="o">%</span><span class="k">sql</span> <span class="n">postgres</span><span class="nd">@aprinto</span> <span class="n">select</span> <span class="o">*</span> <span class="kn">from</span> <span class="nn">app_pdf</span> <span class="nn">where</span> <span class="nn">vendor_id</span> <span class="nn">is</span> <span class="nn">not</span> <span class="nn">null</span><span class="p">;</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># f(x) z_forward_new_order</span>
<span class="o">%%</span><span class="k">sql</span> <span class="n">postgres</span><span class="nd">@aprinto</span>

<span class="n">drop</span> <span class="n">function</span> <span class="k">if</span> <span class="n">exists</span> <span class="n">public</span><span class="o">.</span><span class="n">z_forward_new_order</span><span class="p">(</span><span class="n">character</span> <span class="n">varying</span><span class="p">);</span>

<span class="n">create</span> <span class="ow">or</span> <span class="n">replace</span> <span class="n">function</span> <span class="n">z_forward_new_order</span><span class="p">(</span><span class="n">pdf_id</span> <span class="n">character</span> <span class="n">varying</span><span class="p">)</span>
<span class="n">returns</span> <span class="n">text</span>
<span class="k">as</span> <span class="err">$$</span>
    <span class="kn">import</span> <span class="nn">requests</span>
    <span class="kn">from</span> <span class="nn">json</span> <span class="kn">import</span> <span class="n">dumps</span> <span class="k">as</span> <span class="n">j_dumps</span>
    
    <span class="n">user_id</span> <span class="o">=</span> <span class="s">&#39;544963fce4b00f942bc97027&#39;</span>
    <span class="n">satellite_id</span> <span class="o">=</span> <span class="s">&#39;544963fce4b00f942bc9702e&#39;</span>
    
    <span class="n">p</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">            select</span>
<span class="s">                    &#39;</span><span class="si">%s</span><span class="s">&#39; satellite_id,</span>
<span class="s">                    p.cust_name cust_name,</span>
<span class="s">                    p.cust_tel cust_tel,</span>
<span class="s">                    p.cust_addr cust_addr,</span>
<span class="s">                    p.cust_cross_st cust_cross_st,</span>
<span class="s">                    to_char(p.order_price, &#39;FM990D00&#39;) price,</span>
<span class="s">                    to_char(p.order_tip, &#39;FM990D00&#39;) tip,</span>
<span class="s">                    p.pdf_id order_uuid,</span>
<span class="s">                    concat(to_char(p.created, &#39;FMYYYYMMDDHH24:MI:SS&#39;),&#39;-0400&#39;) order_time,</span>
<span class="s">                    p.order_tag order_tag,</span>
<span class="s">                    v.biz_name vend_name,</span>
<span class="s">                    v.addr vend_addr,</span>
<span class="s">                    v.recipient_emails recipient_emails</span>
<span class="s">                from app_pdf p</span>
<span class="s">                inner join app_vendor v on v.vendor_id = p.vendor_id</span>
<span class="s">                WHERE pdf_id = &#39;</span><span class="si">%s</span><span class="s">&#39;;</span>
<span class="s">        &quot;&quot;&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">satellite_id</span><span class="p">,</span><span class="n">pdf_id</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">plpy</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">p</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">json_data</span> <span class="o">=</span> <span class="n">j_dumps</span><span class="p">([</span><span class="n">res</span><span class="p">])</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s">&#39;utf-8&#39;</span><span class="p">)</span>
    
    <span class="n">post_url</span> <span class="o">=</span> <span class="s">&#39;http://admin.gnamgnamapp.it/ws/v2/&#39;</span><span class="o">+</span><span class="n">user_id</span><span class="o">+</span><span class="s">&#39;/aporoOrders&#39;</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;Content-type&#39;</span><span class="p">:</span> <span class="s">&#39;application/json&#39;</span><span class="p">}</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">post_url</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">json_data</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="o">==</span><span class="mi">200</span><span class="p">:</span>
        <span class="k">return</span> <span class="s">&#39;ok&#39;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="p">)</span><span class="o">+</span><span class="s">&#39;</span><span class="se">\n\t</span><span class="s">&#39;</span><span class="o">+</span><span class="n">response</span><span class="o">.</span><span class="n">content</span><span class="o">+</span><span class="s">&#39;</span><span class="se">\n\n</span><span class="s">&#39;</span><span class="o">+</span><span class="n">response</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">body</span><span class="p">)</span>


<span class="err">$$</span> <span class="n">language</span> <span class="n">plpythonu</span><span class="p">;</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="NYC-Tables">NYC Tables<a class="anchor-link" href="#NYC-Tables">&#182;</a></h2>
</div>
</div>
</div>

<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[3]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># NYC TABLES -- Libraries &amp; F(x)s </span>
<span class="kn">from</span> <span class="nn">os</span> <span class="kn">import</span> <span class="n">getcwd</span>
<span class="n">workDir</span> <span class="o">=</span> <span class="n">getcwd</span><span class="p">()</span><span class="o">+</span><span class="s">&#39;/&#39;</span>
<span class="kn">from</span> <span class="nn">os.path</span> <span class="kn">import</span> <span class="n">abspath</span>
<span class="kn">from</span> <span class="nn">sys</span> <span class="kn">import</span> <span class="n">path</span> <span class="k">as</span> <span class="n">py_path</span>
<span class="n">py_path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">abspath</span><span class="p">(</span><span class="n">workDir</span><span class="o">+</span><span class="s">&#39;../../geolocation&#39;</span><span class="p">))</span>
<span class="kn">from</span> <span class="nn">f_vendor_postgre</span> <span class="kn">import</span> <span class="n">get_bldg_street_idx</span>
<span class="kn">from</span> <span class="nn">f_postgres</span> <span class="kn">import</span> <span class="n">clean_street_names</span>
<span class="kn">from</span> <span class="nn">pygeocoder</span> <span class="kn">import</span> <span class="n">Geocoder</span>
<span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">sleep</span> <span class="k">as</span> <span class="n">delay</span>

<span class="c"># NYC TABLES -- F(X)s</span>
<span class="k">def</span> <span class="nf">prep_data</span><span class="p">(</span><span class="n">data_type</span><span class="p">,</span><span class="n">data_set</span><span class="p">,</span><span class="n">purpose</span><span class="p">,</span><span class="n">args</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This is a custom function for preparing data in a particular way.</span>
<span class="sd">    </span>
<span class="sd">    Uses:</span>
<span class="sd">    </span>
<span class="sd">        df = prep_data(data_type=&#39;db&#39;,data_set=&#39;seamless&#39;,purpose=&#39;get_bldg_street_idx&#39;)</span>
<span class="sd">        </span>
<span class="sd">        df = prep_data(data_type=&#39;db&#39;,data_set=&#39;mnv&#39;,purpose=&#39;get_bldg_street_idx&#39;)</span>
<span class="sd">        </span>
<span class="sd">        df = prep_data(data_type=&#39;db&#39;,data_set=&#39;yelp&#39;,purpose=&#39;google_geocode&#39;)</span>
<span class="sd">        </span>
<span class="sd">        </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">format_db</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="n">purpose</span><span class="p">,</span><span class="n">args</span><span class="p">):</span>
        
        <span class="c"># ------------------</span>
        <span class="c"># ------------------</span>
        <span class="k">if</span>   <span class="p">(</span><span class="n">db</span><span class="o">==</span><span class="s">&#39;seamless&#39;</span> <span class="ow">or</span> <span class="n">db</span><span class="o">==</span><span class="s">&#39;seamless_geom_error&#39;</span><span class="p">):</span>
            <span class="n">T</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;db_tbl&#39;</span>     <span class="p">:</span> <span class="n">db</span><span class="p">,</span>
                 <span class="s">&#39;id_col&#39;</span>     <span class="p">:</span><span class="s">&#39;vend_id&#39;</span><span class="p">,</span>
                 <span class="s">&#39;vend_name&#39;</span>  <span class="p">:</span><span class="s">&#39;vend_name&#39;</span><span class="p">,</span>
                 <span class="s">&#39;address_col&#39;</span><span class="p">:</span><span class="s">&#39;address&#39;</span><span class="p">,</span>
                 <span class="s">&#39;zip_col&#39;</span>    <span class="p">:</span><span class="s">&#39;zipcode&#39;</span><span class="p">,</span>
                <span class="p">}</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">db</span><span class="o">==</span><span class="s">&#39;yelp&#39;</span> <span class="ow">or</span> <span class="n">db</span><span class="o">==</span><span class="s">&#39;yelp_geom_error&#39;</span><span class="p">):</span>
            <span class="n">T</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;db_tbl&#39;</span>     <span class="p">:</span> <span class="n">db</span><span class="p">,</span>
                 <span class="s">&#39;id_col&#39;</span>     <span class="p">:</span><span class="s">&#39;gid&#39;</span><span class="p">,</span>
                 <span class="s">&#39;vend_name&#39;</span>  <span class="p">:</span><span class="s">&#39;vend_name&#39;</span><span class="p">,</span>
                 <span class="s">&#39;address_col&#39;</span><span class="p">:</span><span class="s">&#39;address&#39;</span><span class="p">,</span>
                 <span class="s">&#39;zip_col&#39;</span>    <span class="p">:</span><span class="s">&#39;postal_code&#39;</span><span class="p">,</span>
                    <span class="p">}</span>
        <span class="k">elif</span> <span class="n">db</span><span class="o">==</span><span class="s">&#39;mnv&#39;</span><span class="p">:</span>
            <span class="n">T</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;db_tbl&#39;</span>     <span class="p">:</span> <span class="n">db</span><span class="p">,</span>
                 <span class="s">&#39;id_col&#39;</span>     <span class="p">:</span><span class="s">&#39;id&#39;</span><span class="p">,</span>
                 <span class="s">&#39;vend_name&#39;</span>  <span class="p">:</span><span class="s">&#39;vend_name&#39;</span><span class="p">,</span>
                 <span class="s">&#39;address_col&#39;</span><span class="p">:</span><span class="s">&#39;address&#39;</span><span class="p">,</span>
                 <span class="s">&#39;zip_col&#39;</span>    <span class="p">:</span><span class="s">&#39;zipcode&#39;</span><span class="p">,</span>
                    <span class="p">}</span>
        <span class="c"># ------------------</span>
        <span class="c"># ------------------</span>
        
        <span class="k">if</span> <span class="n">purpose</span><span class="o">==</span><span class="s">&#39;google_geocode&#39;</span><span class="p">:</span>
            <span class="n">cmd</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">                    select </span><span class="si">%(id_col)s</span><span class="s"> id,</span><span class="si">%(vend_name)s</span><span class="s"> vend_name,</span><span class="si">%(address_col)s</span><span class="s"> address,</span><span class="si">%(zip_col)s</span><span class="s"> zipcode </span>
<span class="s">                    from </span><span class="si">%(db_tbl)s</span><span class="s"> </span>
<span class="s">                    where address is not null</span>
<span class="s">                    and (char_length(bbl::text)!=10 or bbl is null)</span>
<span class="s">                  &quot;&quot;&quot;</span><span class="o">%</span><span class="k">T</span>
            <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">df</span><span class="p">,</span><span class="n">T</span>
        
        <span class="k">if</span> <span class="n">purpose</span><span class="o">==</span><span class="s">&#39;get_bldg_street_idx&#39;</span><span class="p">:</span>            
            <span class="n">cmd</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">                    select </span><span class="si">%(id_col)s</span><span class="s"> id,</span><span class="si">%(address_col)s</span><span class="s"> address,</span><span class="si">%(zip_col)s</span><span class="s"> zipcode </span>
<span class="s">                    from </span><span class="si">%(db_tbl)s</span><span class="s"> </span>
<span class="s">                    where address is not null</span>
<span class="s">                    and (bbl::text=&#39;NaN&#39; or bbl is null or char_length(bbl::text)&lt;10)</span>
<span class="s">                  &quot;&quot;&quot;</span><span class="o">%</span><span class="k">T</span>
            <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
            <span class="n">df</span> <span class="o">=</span> <span class="n">clean_street_names</span><span class="p">(</span><span class="n">df</span><span class="p">,</span><span class="s">&#39;address&#39;</span><span class="p">,</span><span class="s">&#39;address&#39;</span><span class="p">)</span> 
            <span class="n">df</span><span class="p">[</span><span class="s">&#39;address&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">address</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&#39;ascii&#39;</span><span class="p">,</span><span class="s">&#39;ignore&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s">&#39;utf-8&#39;</span><span class="p">,</span><span class="s">&#39;ignore&#39;</span><span class="p">))</span>
            <span class="n">df</span><span class="p">[</span><span class="s">&#39;bldg_num&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">address</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39; &#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">df</span><span class="p">[</span><span class="s">&#39;clean_bldg_num&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">bldg_num</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="bp">None</span> <span class="k">if</span> <span class="s">&#39;&#39;</span><span class="o">==</span><span class="s">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">it</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">.</span><span class="n">isdigit</span><span class="p">()])</span>
                                                  <span class="k">else</span> <span class="nb">int</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">it</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">.</span><span class="n">isdigit</span><span class="p">()]))</span> <span class="p">)</span>
            <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">clean_bldg_num</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="bp">True</span> <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">isdigit</span><span class="p">()</span> <span class="k">else</span> <span class="bp">False</span><span class="p">)]</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
            <span class="n">df</span><span class="p">[</span><span class="s">&#39;bldg_street&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">address</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="s">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39; &#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">:]))</span>
            <span class="n">df</span><span class="p">[</span><span class="s">&#39;clean_bldg_num&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">clean_bldg_num</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
            <span class="n">df</span><span class="p">[</span><span class="s">&#39;zipcode&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">zipcode</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
            <span class="n">df</span><span class="p">[</span><span class="s">&#39;addr_set&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="s">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">s</span><span class="o">.</span><span class="n">tolist</span><span class="p">())),</span><span class="n">df</span><span class="o">.</span><span class="n">ix</span><span class="p">[:,[</span><span class="s">&#39;clean_bldg_num&#39;</span><span class="p">,</span><span class="s">&#39;bldg_street&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">as_matrix</span><span class="p">())</span>
            <span class="n">df</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;clean_bldg_num&#39;</span><span class="p">:</span><span class="s">&#39;addr_num&#39;</span><span class="p">,</span>
                              <span class="s">&#39;bldg_street&#39;</span><span class="p">:</span><span class="s">&#39;addr_street&#39;</span><span class="p">},</span><span class="n">inplace</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">df</span><span class="p">,</span><span class="n">T</span>
            
    
    <span class="k">if</span> <span class="n">data_type</span><span class="o">==</span><span class="s">&#39;db&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">format_db</span><span class="p">(</span><span class="n">data_set</span><span class="p">,</span><span class="n">purpose</span><span class="p">,</span><span class="n">args</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># ADD GEOMS USING ADDRESSES:</span>

<span class="n">working_table</span> <span class="o">=</span> <span class="s">&#39;seamless&#39;</span>
<span class="c"># working_table = &#39;yelp&#39;</span>
<span class="c"># working_table = &#39;seamless_geom_error&#39;</span>
<span class="c"># working_table = &#39;mnv&#39;</span>


<span class="c"># 1. load NYC TABLE -- Libraries &amp; F(x)s</span>
<span class="c"># 2. format data for and run &#39;get_bldg_street_idx&#39; function</span>
<span class="n">df</span><span class="p">,</span><span class="n">T</span> <span class="o">=</span> <span class="n">prep_data</span><span class="p">(</span><span class="n">data_type</span><span class="o">=</span><span class="s">&#39;db&#39;</span><span class="p">,</span><span class="n">data_set</span><span class="o">=</span><span class="n">working_table</span><span class="p">,</span><span class="n">purpose</span><span class="o">=</span><span class="s">&#39;get_bldg_street_idx&#39;</span><span class="p">)</span> 
<span class="n">recognized</span><span class="p">,</span><span class="n">not_recog</span><span class="p">,</span><span class="n">to_check_later</span> <span class="o">=</span> <span class="n">get_bldg_street_idx</span><span class="p">(</span>   <span class="n">df</span><span class="p">,</span>
                                                             <span class="n">addr_set_col</span><span class="o">=</span><span class="s">&#39;addr_set&#39;</span><span class="p">,</span>
                                                             <span class="n">addr_num_col</span><span class="o">=</span><span class="s">&#39;addr_num&#39;</span><span class="p">,</span>
                                                             <span class="n">addr_street_col</span><span class="o">=</span><span class="s">&#39;addr_street&#39;</span><span class="p">,</span>
                                                             <span class="n">zipcode_col</span><span class="o">=</span><span class="s">&#39;zipcode&#39;</span><span class="p">,</span>
                                                             <span class="n">show_info</span><span class="o">=</span><span class="bp">False</span>  <span class="p">)</span>
<span class="n">addr_tot</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s">&#39;select count(*) u from </span><span class="si">%s</span><span class="s">&#39;</span><span class="o">%</span><span class="k">working_table</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span><span class="o">.</span><span class="n">u</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">addr_uniq</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">addr_set</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>
<span class="n">addr_recog</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">recognized</span><span class="p">)</span>
<span class="n">addr_unrecog</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">not_recog</span><span class="p">)</span>
<span class="n">addr_TCL</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">to_check_later</span><span class="p">)</span>

<span class="c"># 3. push data to table &#39;tmp&#39;</span>
<span class="n">recognized</span><span class="p">[</span><span class="s">&#39;addr_set&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="s">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">s</span><span class="o">.</span><span class="n">tolist</span><span class="p">())),</span>
                          <span class="n">recognized</span><span class="o">.</span><span class="n">ix</span><span class="p">[:,[</span><span class="s">&#39;addr_num&#39;</span><span class="p">,</span><span class="s">&#39;addr_street&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">as_matrix</span><span class="p">())</span>
<span class="n">z</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">df</span><span class="p">,</span><span class="n">recognized</span><span class="o">.</span><span class="n">ix</span><span class="p">[:,[</span><span class="s">&#39;addr_set&#39;</span><span class="p">,</span><span class="s">&#39;bldg_street_idx&#39;</span><span class="p">]],</span><span class="n">on</span><span class="o">=</span><span class="s">&#39;addr_set&#39;</span><span class="p">,</span><span class="n">how</span><span class="o">=</span><span class="s">&#39;outer&#39;</span><span class="p">)</span>
<span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;drop table if exists tmp&#39;</span><span class="p">)</span>
<span class="n">z</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s">&#39;tmp&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
<span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">alter table tmp drop column if exists &quot;index&quot;;</span>
<span class="s">alter table tmp add column gid serial primary key;</span>
<span class="s">update tmp set gid = nextval(pg_get_serial_sequence(&#39;tmp&#39;,&#39;gid&#39;));</span>
<span class="s">&quot;&quot;&quot;</span><span class="p">)</span>
<span class="n">tmp_rows</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">z</span><span class="p">)</span>

<span class="c"># 4. add necessary columns if not exist to $working_table</span>
<span class="n">cmd</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;   select column_name cols, data_type</span>
<span class="s">            from INFORMATION_SCHEMA.COLUMNS </span>
<span class="s">            where table_name = &#39;</span><span class="si">%s</span><span class="s">&#39;&quot;&quot;&quot;</span><span class="o">%</span><span class="k">working_table</span>
<span class="n">tbl_info</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
<span class="n">tbl_cols</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="n">tbl_info</span><span class="o">.</span><span class="n">cols</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>
<span class="n">cols_needed</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;camis&#39;</span><span class="p">:</span><span class="s">&#39;integer&#39;</span><span class="p">,</span>
               <span class="s">&#39;bbl&#39;</span><span class="p">:</span><span class="s">&#39;integer&#39;</span><span class="p">,</span>
               <span class="s">&#39;lot_cnt&#39;</span><span class="p">:</span><span class="s">&#39;integer DEFAULT 1&#39;</span><span class="p">,</span>
               <span class="s">&#39;geom&#39;</span><span class="p">:</span><span class="s">&#39;geometry(Point,4326)&#39;</span><span class="p">}</span>
<span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">cols_needed</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
    <span class="k">if</span> <span class="n">tbl_cols</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">k</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;alter table </span><span class="si">%(tbl)s</span><span class="s"> add column </span><span class="si">%(k)s</span><span class="s"> </span><span class="si">%(v)s</span><span class="s">&#39;</span><span class="o">%</span><span class="p">{</span><span class="s">&#39;tbl&#39;</span><span class="p">:</span><span class="n">working_table</span><span class="p">,</span><span class="s">&#39;k&#39;</span><span class="p">:</span><span class="n">k</span><span class="p">,</span><span class="s">&#39;v&#39;</span><span class="p">:</span><span class="n">v</span><span class="p">})</span>

<span class="c"># 5. update table $working_table and delete table &#39;tmp&#39;</span>
<span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>

<span class="s">update </span><span class="si">%(db_tbl)s</span><span class="s"> s set bbl = l.bbl</span>
<span class="s">    from tmp t,lot_pts l</span>
<span class="s">    where </span>
<span class="s">        char_length(l.bbl::text)&gt;=10</span>
<span class="s">        and t.bldg_street_idx::text != &#39;NaN&#39;</span>
<span class="s">        and t.addr_num::text != &#39;NaN&#39;</span>
<span class="s">        and t.id=s.</span><span class="si">%(id_col)s</span><span class="s"></span>
<span class="s">        and (</span>
<span class="s">            to_number(concat(t.bldg_street_idx,&#39;.&#39;,to_char(t.addr_num,&#39;00000&#39;)),&#39;00000.00000&#39;)</span>
<span class="s">            between l.lot_idx_start and l.lot_idx_end</span>
<span class="s">            );</span>

<span class="s">update </span><span class="si">%(db_tbl)s</span><span class="s"> s set lot_cnt = (select count(l.bbl) from </span><span class="si">%(db_tbl)s</span><span class="s"> l </span>
<span class="s">                                 where s.bbl is not null</span>
<span class="s">                                 and l.bbl is not null</span>
<span class="s">                                 and l.bbl=s.bbl);</span>

<span class="s">update </span><span class="si">%(db_tbl)s</span><span class="s"> s set geom = pc.geom</span>
<span class="s">    from pluto_centroids pc</span>
<span class="s">    where </span>
<span class="s">        pc.bbl = s.bbl</span>
<span class="s">        and pc.bbl is not null;</span>

<span class="s">drop table if exists tmp;</span>

<span class="s">&quot;&quot;&quot;</span><span class="o">%</span><span class="k">T</span><span class="p">)</span>

<span class="n">no_geoms</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s">&#39;select count(*) c from </span><span class="si">%(db_tbl)s</span><span class="s"> where geom is null&#39;</span><span class="o">%</span><span class="k">T</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span><span class="o">.</span><span class="n">c</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<span class="c"># 6. provide result info</span>
<span class="k">print</span> <span class="s">&#39;</span><span class="se">\t</span><span class="s">TABLE:&#39;</span><span class="p">,</span><span class="n">working_table</span>
<span class="k">print</span> <span class="n">addr_tot</span><span class="p">,</span><span class="s">&#39;</span><span class="se">\t\t</span><span class="s">total addresses in </span><span class="si">%s</span><span class="s">&#39;</span><span class="o">%</span><span class="k">working_table</span>
<span class="k">print</span> <span class="n">addr_uniq</span><span class="p">,</span><span class="s">&#39;</span><span class="se">\t\t</span><span class="s">unique addresses in </span><span class="si">%s</span><span class="s">&#39;</span><span class="o">%</span><span class="k">working_table</span>
<span class="k">print</span> <span class="n">addr_recog</span><span class="p">,</span><span class="s">&#39;</span><span class="se">\t\t\t</span><span class="s">recognized&#39;</span>
<span class="k">print</span> <span class="n">addr_unrecog</span><span class="p">,</span><span class="s">&#39;</span><span class="se">\t\t\t</span><span class="s">not_recog&#39;</span>
<span class="k">print</span> <span class="n">addr_TCL</span><span class="p">,</span><span class="s">&#39;</span><span class="se">\t\t\t</span><span class="s">to_check_later&#39;</span>
<span class="k">print</span> <span class="n">tmp_rows</span><span class="p">,</span><span class="s">&#39;</span><span class="se">\t\t</span><span class="s">rows in tmp&#39;</span>
<span class="k">print</span> <span class="n">no_geoms</span><span class="p">,</span><span class="s">&#39;</span><span class="se">\t\t</span><span class="s">rows without geoms&#39;</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># ADD GEOMS USING GEOCODING:</span>

<span class="c"># tbl = &#39;seamless&#39;</span>
<span class="n">tbl</span> <span class="o">=</span> <span class="s">&#39;yelp&#39;</span>
<span class="c"># tbl = &#39;mnv&#39;</span>

<span class="n">printGPS</span> <span class="o">=</span> <span class="bp">False</span>



<span class="n">df</span><span class="p">,</span><span class="n">T</span> <span class="o">=</span> <span class="n">prep_data</span><span class="p">(</span><span class="n">data_type</span><span class="o">=</span><span class="s">&#39;db&#39;</span><span class="p">,</span><span class="n">data_set</span><span class="o">=</span><span class="n">tbl</span><span class="p">,</span><span class="n">purpose</span><span class="o">=</span><span class="s">&#39;google_geocode&#39;</span><span class="p">)</span>
<span class="n">addr_start_cnt</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="s">&#39;zipcode&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">zipcode</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="s">&#39;&#39;</span> <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">==</span><span class="s">&#39;nan&#39;</span> <span class="k">else</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">s</span><span class="p">)))</span>
<span class="n">df</span><span class="p">[</span><span class="s">&#39;chk_addr&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">ix</span><span class="p">[:,[</span><span class="s">&#39;address&#39;</span><span class="p">,</span><span class="s">&#39;zipcode&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="s">&#39;, New York, NY, &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span><span class="o">.</span><span class="n">strip</span><span class="p">(),</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">uniq_addr_start_cnt</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">chk_addr</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>

<span class="c"># get google geocode results</span>
<span class="n">all_chk_addr</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">chk_addr</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="n">uniq_addr</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s">&#39;addr&#39;</span><span class="p">:</span><span class="n">all_chk_addr</span><span class="p">})</span><span class="o">.</span><span class="n">addr</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="n">uniq_addr_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">uniq_addr</span><span class="p">,</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">uniq_addr</span><span class="p">))))</span>
<span class="n">_iter</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">uniq_addr</span><span class="p">)</span><span class="o">.</span><span class="n">iterkv</span><span class="p">()</span>

<span class="c"># if two vendors have same address: only one id will be associated with address</span>

<span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="o">=</span><span class="p">[],[]</span>
<span class="n">pt</span><span class="p">,</span><span class="n">s</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="s">&#39;Address</span><span class="se">\t</span><span class="s">Zip</span><span class="se">\t</span><span class="s">Lat.</span><span class="se">\t</span><span class="s">Long.</span><span class="se">\r</span><span class="s">&#39;</span>
<span class="c">#    print &#39;\n&quot;--&quot; means only one result found.\nOtherwise, numbered results will be shown.&#39;</span>
<span class="k">if</span> <span class="n">printGPS</span><span class="o">==</span><span class="bp">True</span><span class="p">:</span> <span class="k">print</span> <span class="n">s</span>
<span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">it</span> <span class="ow">in</span> <span class="n">_iter</span><span class="p">:</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">results</span> <span class="o">=</span> <span class="n">Geocoder</span><span class="o">.</span><span class="n">geocode</span><span class="p">(</span><span class="n">it</span><span class="p">)</span>
    
        <span class="k">if</span> <span class="n">results</span><span class="o">.</span><span class="n">count</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">results</span><span class="o">.</span><span class="n">count</span><span class="p">):</span>

                <span class="n">res</span><span class="o">=</span><span class="n">results</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="n">r_data</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">t</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;res_i&#39;</span>            <span class="p">:</span> <span class="n">i</span><span class="p">,</span>
                     <span class="s">&#39;orig_addr&#39;</span>        <span class="p">:</span> <span class="n">it</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(),</span>
                     <span class="s">&#39;addr_valid&#39;</span>       <span class="p">:</span> <span class="n">res</span><span class="o">.</span><span class="n">valid_address</span><span class="p">,</span>
                     <span class="s">&#39;partial_match&#39;</span>    <span class="p">:</span> <span class="n">r_data</span><span class="p">[</span><span class="s">&#39;partial_match&#39;</span><span class="p">]</span> <span class="k">if</span> <span class="n">res</span><span class="o">.</span><span class="n">valid_address</span> <span class="o">!=</span> <span class="bp">True</span> <span class="k">else</span> <span class="bp">False</span><span class="p">,</span>
                     <span class="s">&#39;form_addr&#39;</span>        <span class="p">:</span> <span class="n">res</span><span class="o">.</span><span class="n">formatted_address</span><span class="p">,</span>
                     <span class="s">&#39;geometry&#39;</span>         <span class="p">:</span> <span class="n">r_data</span><span class="p">[</span><span class="s">&#39;geometry&#39;</span><span class="p">],</span>
                     <span class="s">&#39;res_data&#39;</span>         <span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">r_data</span><span class="p">),</span>
                     <span class="p">}</span>

                <span class="n">y</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
                <span class="n">z</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
                <span class="n">a</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">+</span><span class="s">&#39;</span><span class="se">\t</span><span class="s">&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">it</span><span class="o">.</span><span class="n">rstrip</span><span class="p">())</span><span class="o">+</span><span class="s">&#39;</span><span class="se">\t</span><span class="s">&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">postal_code</span><span class="p">)</span><span class="o">+</span><span class="s">&#39;</span><span class="se">\t</span><span class="s">&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">coordinates</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">+</span><span class="s">&#39;</span><span class="se">\t</span><span class="s">&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">coordinates</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                <span class="n">s</span><span class="o">+=</span><span class="n">a</span><span class="o">+</span><span class="s">&#39;</span><span class="se">\r</span><span class="s">&#39;</span>
                <span class="k">if</span> <span class="n">printGPS</span><span class="o">==</span><span class="bp">True</span><span class="p">:</span> <span class="k">print</span> <span class="n">a</span>

        <span class="k">else</span><span class="p">:</span>

            <span class="n">res</span><span class="o">=</span><span class="n">results</span>
            <span class="n">r_data</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">partial_option</span> <span class="o">=</span> <span class="bp">True</span> <span class="k">if</span> <span class="n">r_data</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s">&#39;partial_match&#39;</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span> <span class="k">else</span> <span class="bp">False</span>
            <span class="n">t</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;res_i&#39;</span>            <span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
                 <span class="s">&#39;orig_addr&#39;</span>        <span class="p">:</span> <span class="n">it</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(),</span>
                 <span class="s">&#39;addr_valid&#39;</span>       <span class="p">:</span> <span class="n">res</span><span class="o">.</span><span class="n">valid_address</span><span class="p">,</span>
                 <span class="s">&#39;partial_match&#39;</span>    <span class="p">:</span> <span class="n">r_data</span><span class="p">[</span><span class="s">&#39;partial_match&#39;</span><span class="p">]</span> <span class="k">if</span> <span class="n">partial_option</span> <span class="k">else</span> <span class="bp">False</span><span class="p">,</span>
                 <span class="s">&#39;form_addr&#39;</span>        <span class="p">:</span> <span class="n">res</span><span class="o">.</span><span class="n">formatted_address</span><span class="p">,</span>
                 <span class="s">&#39;geometry&#39;</span>         <span class="p">:</span> <span class="n">r_data</span><span class="p">[</span><span class="s">&#39;geometry&#39;</span><span class="p">],</span>
                 <span class="s">&#39;res_data&#39;</span>             <span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">r_data</span><span class="p">),</span>
                 <span class="p">}</span>

            <span class="n">y</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
            <span class="n">z</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
            <span class="n">a</span><span class="o">=</span><span class="s">&#39;--&#39;</span><span class="o">+</span><span class="s">&#39;</span><span class="se">\t</span><span class="s">&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">it</span><span class="o">.</span><span class="n">rstrip</span><span class="p">())</span><span class="o">+</span><span class="s">&#39;</span><span class="se">\t</span><span class="s">&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">results</span><span class="o">.</span><span class="n">postal_code</span><span class="p">)</span><span class="o">+</span><span class="s">&#39;</span><span class="se">\t</span><span class="s">&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">results</span><span class="o">.</span><span class="n">coordinates</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">+</span><span class="s">&#39;</span><span class="se">\t</span><span class="s">&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">results</span><span class="o">.</span><span class="n">coordinates</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">s</span><span class="o">+=</span><span class="n">a</span><span class="o">+</span><span class="s">&#39;</span><span class="se">\r</span><span class="s">&#39;</span>
            <span class="k">if</span> <span class="n">printGPS</span><span class="o">==</span><span class="bp">True</span><span class="p">:</span> <span class="k">print</span> <span class="n">a</span>
    
    <span class="k">except</span><span class="p">:</span>
        <span class="k">pass</span>

    <span class="n">pt</span><span class="o">+=</span><span class="mi">1</span>
    <span class="k">if</span> <span class="n">pt</span><span class="o">==</span><span class="mi">5</span><span class="p">:</span>
        <span class="n">delay</span><span class="p">(</span><span class="mf">2.6</span><span class="p">)</span>
        <span class="n">pt</span><span class="o">=</span><span class="mi">0</span>

<span class="n">d</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="n">d</span><span class="p">[</span><span class="s">&#39;iter_keys&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">z</span>
<span class="n">d</span><span class="p">[</span><span class="s">&#39;lat&#39;</span><span class="p">],</span><span class="n">d</span><span class="p">[</span><span class="s">&#39;lon&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="s">&#39;location&#39;</span><span class="p">][</span><span class="s">&#39;lat&#39;</span><span class="p">],</span><span class="n">s</span><span class="p">[</span><span class="s">&#39;location&#39;</span><span class="p">][</span><span class="s">&#39;lng&#39;</span><span class="p">])))</span>
<span class="n">tbl_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">chk_addr</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span><span class="n">df</span><span class="o">.</span><span class="n">id</span><span class="o">.</span><span class="n">tolist</span><span class="p">()))</span>
<span class="n">d</span><span class="p">[</span><span class="s">&#39;</span><span class="si">%s</span><span class="s">_id&#39;</span><span class="o">%</span><span class="k">tbl</span><span class="p">]</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">orig_addr</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">tbl_dict</span><span class="p">)</span>

<span class="c"># push orig_df to pgSQL</span>
<span class="n">d</span><span class="p">[</span><span class="s">&#39;geometry&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
<span class="n">d</span><span class="p">[</span><span class="s">&#39;res_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">res_data</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
<span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span> <span class="s">&quot;&quot;&quot;drop table if exists tmp;&quot;&quot;&quot;</span><span class="p">)</span>
<span class="n">d</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s">&#39;tmp&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
<span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">    alter table tmp add column gid serial primary key;</span>
<span class="s">    update tmp set gid = nextval(pg_get_serial_sequence(&#39;tmp&#39;,&#39;gid&#39;));</span>
<span class="s">&quot;&quot;&quot;</span><span class="p">)</span>
<span class="c"># update &#39;geocoded&#39; and $tbl</span>
<span class="n">cmd</span><span class="o">=</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">with upd as (</span>
<span class="s">            update geocoded g</span>
<span class="s">            set</span>
<span class="s">                addr_valid = t.addr_valid,</span>
<span class="s">                form_addr = t.form_addr,</span>
<span class="s">                geometry = t.geometry,</span>
<span class="s">                orig_addr = t.orig_addr,</span>
<span class="s">                partial_match = t.partial_match,</span>
<span class="s">                res_data = t.res_data,</span>
<span class="s">                res_i = t.res_i,</span>
<span class="s">                lat = t.lat,</span>
<span class="s">                lon = t.lon,</span>
<span class="s">                </span><span class="si">%(db_tbl)s</span><span class="s">_id = t.</span><span class="si">%(db_tbl)s</span><span class="s">_id</span>
<span class="s">            from tmp t</span>
<span class="s">            where g.orig_addr = t.orig_addr</span>
<span class="s">            returning t.orig_addr orig_addr</span>
<span class="s">        )</span>
<span class="s">insert into geocoded (</span>
<span class="s">                        addr_valid,</span>
<span class="s">                        form_addr,</span>
<span class="s">                        geometry,</span>
<span class="s">                        orig_addr,</span>
<span class="s">                        partial_match,</span>
<span class="s">                        res_data,</span>
<span class="s">                        res_i,</span>
<span class="s">                        lat,</span>
<span class="s">                        lon,</span>
<span class="s">                        </span><span class="si">%(db_tbl)s</span><span class="s">_id</span>
<span class="s">                    )</span>
<span class="s">select</span>
<span class="s">        t.addr_valid,</span>
<span class="s">        t.form_addr,</span>
<span class="s">        t.geometry,</span>
<span class="s">        t.orig_addr,</span>
<span class="s">        t.partial_match,</span>
<span class="s">        t.res_data,</span>
<span class="s">        t.res_i,</span>
<span class="s">        t.lat,</span>
<span class="s">        t.lon,</span>
<span class="s">        t.</span><span class="si">%(db_tbl)s</span><span class="s">_id</span>
<span class="s">from</span>
<span class="s">    tmp t,</span>
<span class="s">    (select array_agg(f.orig_addr) upd_addrs from upd f) as f1</span>
<span class="s">    where (not upd_addrs &amp;&amp; array[t.orig_addr]</span>
<span class="s">            or upd_addrs is null);</span>

<span class="s">UPDATE </span><span class="si">%(db_tbl)s</span><span class="s"> t set geom = st_setsrid(st_makepoint(g.lon,g.lat),4326) </span>
<span class="s">    FROM geocoded g</span>
<span class="s">    WHERE g.addr_valid is true</span>
<span class="s">    and g.</span><span class="si">%(db_tbl)s</span><span class="s">_id = t.</span><span class="si">%(id_col)s</span><span class="s"></span>
<span class="s">    and t.geom is null;</span>
<span class="s">   </span>
<span class="s">&quot;&quot;&quot;</span><span class="o">%</span><span class="k">T</span>
<span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>

<span class="c"># provide result info</span>
<span class="n">uniq_search_queries</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s">&#39;</span><span class="si">%s</span><span class="s">_id&#39;</span><span class="o">%</span><span class="k">tbl</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>
<span class="n">search_query_res_cnt</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="n">single_res_cnt</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="n">d</span><span class="o">.</span><span class="n">res_i</span><span class="o">==-</span><span class="mi">1</span><span class="p">])</span>
<span class="n">remaining_no_addr</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s">&#39;select count(*) c from </span><span class="si">%s</span><span class="s"> where geom is null&#39;</span><span class="o">%</span><span class="k">tbl</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span><span class="o">.</span><span class="n">c</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<span class="k">print</span> <span class="s">&#39;</span><span class="se">\t</span><span class="s">TABLE:&#39;</span><span class="p">,</span><span class="n">tbl</span>
<span class="k">print</span> <span class="n">addr_start_cnt</span><span class="p">,</span><span class="s">&#39;</span><span class="se">\t</span><span class="s"> total addresses in </span><span class="si">%s</span><span class="s">&#39;</span><span class="o">%</span><span class="k">tbl</span>
<span class="k">print</span> <span class="n">uniq_addr_start_cnt</span><span class="p">,</span><span class="s">&#39;</span><span class="se">\t</span><span class="s"> unique addresses in </span><span class="si">%s</span><span class="s">&#39;</span><span class="o">%</span><span class="k">tbl</span>
<span class="k">print</span> <span class="n">uniq_search_queries</span><span class="p">,</span><span class="s">&#39;</span><span class="se">\t</span><span class="s"> # of unique Search Queries&#39;</span>
<span class="k">print</span> <span class="n">search_query_res_cnt</span><span class="p">,</span><span class="s">&#39;</span><span class="se">\t</span><span class="s"> # of Search Query Results&#39;</span>
<span class="k">print</span> <span class="n">single_res_cnt</span><span class="p">,</span><span class="s">&#39;</span><span class="se">\t</span><span class="s"> # of Query Results with a Single Result&#39;</span>
<span class="k">print</span> <span class="n">remaining_no_addr</span><span class="p">,</span><span class="s">&#39;</span><span class="se">\t</span><span class="s"> # of Vendors in </span><span class="si">%s</span><span class="s"> still without geom&#39;</span><span class="o">%</span><span class="k">tbl</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[8]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### match mnv to lot_pts (5697 rows affected, 50% successful)</span>
<span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">update mnv v</span>
<span class="s">set </span>
<span class="s">    bbl = l.bbl::integer,</span>
<span class="s">    geom = l.geom</span>
<span class="s">from lot_pts l</span>
<span class="s">where l.bldg_street ilike v.clean_street</span>
<span class="s">and (l.bldg_num_start &lt;= v.building::integer and</span>
<span class="s">     v.building::integer &lt;= l.bldg_num_end)</span>
<span class="s">and l.bbl is not null</span>
<span class="s">and length( regexp_replace(v.building, &#39;\d*&#39;, &#39;&#39;) ) = 0</span>
<span class="s">&quot;&quot;&quot;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### add &#39;assess_com_val&#39; to pluto *changed to &#39;assesstot_div_comarea&#39;</span>
<span class="n">p</span><span class="p">[</span><span class="s">&#39;assess_com_val&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">assesstot</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span> <span class="o">/</span> <span class="n">p</span><span class="o">.</span><span class="n">comarea</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;drop table if exists tmp;&#39;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s">&#39;tmp&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>

<span class="s">alter table pluto add column assess_com_val double precision;</span>
<span class="s">update pluto set assess_com_val = t.assess_com_val</span>
<span class="s">from tmp t</span>
<span class="s">where gid = t.gid;</span>
<span class="s">drop table if exists tmp;</span>

<span class="s">&quot;&quot;&quot;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### iter block for add_points_to_remaining_lots</span>
<span class="n">show_some_detail</span><span class="o">=</span><span class="bp">False</span>
<span class="n">show_steps</span><span class="o">=</span><span class="bp">False</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;drop table if exists temp;&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">block</span> <span class="ow">in</span> <span class="n">chain</span><span class="p">(</span><span class="n">uniq_blocks</span><span class="p">[</span><span class="mi">20</span><span class="p">:]):</span>
<span class="c">#     res=&#39;\nblock\t&#39;,block</span>
<span class="c">#     res+= &quot; &quot;.join([&#39;  with&#39;,len(all_pts[all_pts.block==block]),&#39;lots in lot_pts&#39;])</span>
<span class="c">#     res+= &quot; &quot;.join([print &#39;  and&#39;,pd.read_sql(&quot;&quot;&quot;</span>
<span class="c">#                             select count(bbl) cnt</span>
<span class="c">#                             from pluto</span>
<span class="c">#                             where block = to_number(&#39;%s&#39;,&#39;99999&#39;)</span>
<span class="c">#                         &quot;&quot;&quot;%block,engine).cnt[0],&#39;lots in pluto&#39;])</span>
    
    <span class="n">lot_pts</span><span class="p">,</span><span class="n">A</span><span class="p">,</span><span class="n">skip</span> <span class="o">=</span> <span class="p">[],[],</span><span class="bp">False</span>
    
    <span class="k">if</span> <span class="n">show_some_detail</span><span class="o">==</span><span class="bp">True</span><span class="p">:</span> <span class="k">print</span> <span class="s">&#39;block</span><span class="se">\t</span><span class="s">&#39;</span><span class="p">,</span><span class="n">block</span>

    <span class="n">uniq_street</span> <span class="o">=</span> <span class="n">all_pts</span><span class="p">[</span><span class="n">all_pts</span><span class="o">.</span><span class="n">block</span><span class="o">==</span><span class="n">block</span><span class="p">]</span><span class="o">.</span><span class="n">bldg_street</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">uniq_street</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">)</span><span class="o">!=</span><span class="mi">0</span><span class="p">:</span>    <span class="n">dev</span> <span class="o">=</span> <span class="n">uniq_street</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">uniq_street</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">uniq_street</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span><span class="o">!=</span><span class="mi">0</span><span class="p">:</span>  <span class="n">dev</span> <span class="o">=</span> <span class="n">uniq_street</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">uniq_street</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="bp">None</span><span class="p">))</span>
        
    <span class="k">for</span> <span class="n">street_name</span> <span class="ow">in</span> <span class="n">chain</span><span class="p">(</span><span class="n">uniq_street</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">show_some_detail</span><span class="o">==</span><span class="bp">True</span><span class="p">:</span> <span class="k">print</span> <span class="s">&#39;</span><span class="se">\t\t</span><span class="s">street_name</span><span class="se">\t</span><span class="s">&#39;</span><span class="p">,</span><span class="n">street_name</span>

        <span class="n">lots</span> <span class="o">=</span> <span class="n">gd</span><span class="o">.</span><span class="n">read_postgis</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">                SELECT * FROM pluto </span>
<span class="s">                WHERE substring(to_char(bbl,&#39;9999999999&#39;) from 3 for 5) = &#39;</span><span class="si">%(block)s</span><span class="s">&#39;</span>
<span class="s">                AND street like concat(</span><span class="si">%(wildcard)s</span><span class="s">,&#39;</span><span class="si">%(street)s</span><span class="s">&#39;)</span>
<span class="s">                &quot;&quot;&quot;</span><span class="o">%</span><span class="p">{</span><span class="s">&#39;block&#39;</span><span class="p">:</span><span class="n">block</span><span class="p">,</span>
                     <span class="s">&#39;street&#39;</span><span class="p">:</span><span class="n">street_name</span><span class="p">,</span>
                     <span class="s">&#39;wildcard&#39;</span><span class="p">:</span><span class="s">&#39;</span><span class="si">%s</span><span class="s">&#39;</span><span class="p">},</span><span class="n">engine</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;%&#39;</span><span class="p">])</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">lots</span><span class="p">)</span><span class="o">!=</span><span class="mi">0</span><span class="p">:</span>

            <span class="c">#if show_steps==True: A.extend(lots.geom)</span>
<span class="c">#             res+= &quot; &quot;.join([ &#39;\t-&#39;,street_name,&#39;with&#39;,len(lots),&#39;lots&#39;])</span>

            <span class="c">### Create Buffer Around Lots</span>
            <span class="n">s</span> <span class="o">=</span> <span class="nb">str</span><span class="p">([</span><span class="n">it</span><span class="o">.</span><span class="n">to_wkt</span><span class="p">()</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">lots</span><span class="o">.</span><span class="n">geom</span><span class="p">])</span>
            <span class="n">T</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;buffer&#39;</span><span class="p">:</span> <span class="s">&#39;0.0005&#39;</span><span class="p">,</span>
                 <span class="s">&#39;geoms&#39;</span> <span class="p">:</span> <span class="n">s</span><span class="p">}</span>
            <span class="n">cmd</span> <span class="o">=</span>   <span class="s">&quot;&quot;&quot; SELECT ST_Buffer(ST_ConvexHull((ST_Collect(the_geom))), </span><span class="si">%(buffer)s</span><span class="s">) as geom</span>
<span class="s">                        FROM ( SELECT (ST_Dump( unnest(array[</span><span class="si">%(geoms)s</span><span class="s">]) )).geom the_geom) as t&quot;&quot;&quot;</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span><span class="o">%</span><span class="k">T</span>
            <span class="n">block_buffer</span> <span class="o">=</span> <span class="n">gd</span><span class="o">.</span><span class="n">read_postgis</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
            <span class="c">#if show_steps==True: A.extend(block_buffer.geom)</span>

            <span class="c">### Get street as Line from lion_ways</span>
            <span class="n">cmd</span> <span class="o">=</span>   <span class="s">&quot;&quot;&quot; SELECT st_makeline(_geom) geom</span>
<span class="s">                        FROM</span>
<span class="s">                            st_geomfromtext(</span>
<span class="s">                            &#39; </span><span class="si">%(block_buffer)s</span><span class="s"> &#39;</span>
<span class="s">                            , 4326) block_buffer,</span>
<span class="s">                            (select ( st_dump( geom )).geom _geom</span>
<span class="s">                                FROM lion_ways l</span>
<span class="s">                                WHERE l.clean_street = &#39;</span><span class="si">%(1)s</span><span class="s">&#39;</span>
<span class="s">                                AND l.geom is not null  ) as t2</span>
<span class="s">                        WHERE st_intersects(_geom,block_buffer) is True</span>
<span class="s">                    &quot;&quot;&quot;</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span><span class="o">%</span><span class="p">{</span><span class="s">&#39;1&#39;</span><span class="p">:</span><span class="nb">str</span><span class="p">(</span><span class="n">street_name</span><span class="p">),</span>
                                          <span class="s">&#39;block_buffer&#39;</span><span class="p">:</span><span class="nb">str</span><span class="p">(</span><span class="n">block_buffer</span><span class="o">.</span><span class="n">geom</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">to_wkt</span><span class="p">())}</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">line_geom</span> <span class="o">=</span> <span class="n">gd</span><span class="o">.</span><span class="n">read_postgis</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
                <span class="n">skip_street</span><span class="o">=</span><span class="bp">False</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="k">print</span> <span class="s">&#39;skipping street:&#39;</span><span class="p">,</span><span class="n">street_name</span>
                <span class="n">skip_street</span><span class="o">=</span><span class="bp">True</span>            

            <span class="k">if</span> <span class="n">skip_street</span><span class="o">==</span><span class="bp">False</span><span class="p">:</span>

                <span class="c"># A.extend(line_geom.geom)</span>
                <span class="n">LINE</span> <span class="o">=</span> <span class="n">line_geom</span><span class="o">.</span><span class="n">geom</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">to_wkt</span><span class="p">()</span>

                <span class="c">### Keep only part of line intersecting with buffer</span>
                <span class="n">s1</span> <span class="o">=</span> <span class="nb">str</span><span class="p">([</span><span class="n">it</span><span class="o">.</span><span class="n">to_wkt</span><span class="p">()</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">block_buffer</span><span class="o">.</span><span class="n">geom</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
                <span class="n">s2</span> <span class="o">=</span> <span class="nb">str</span><span class="p">([</span><span class="n">it</span><span class="o">.</span><span class="n">to_wkt</span><span class="p">()</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">line_geom</span><span class="o">.</span><span class="n">geom</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
                <span class="n">T</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;block_buffer&#39;</span><span class="p">:</span> <span class="n">s1</span><span class="p">,</span>
                     <span class="s">&#39;street_line&#39;</span> <span class="p">:</span> <span class="n">s2</span><span class="p">}</span>
                <span class="n">cmd</span> <span class="o">=</span>   <span class="s">&quot;&quot;&quot; SELECT res_geom geom</span>
<span class="s">                            FROM</span>
<span class="s">                                st_geomfromtext(&#39;</span><span class="si">%(block_buffer)s</span><span class="s">&#39;) s1,</span>
<span class="s">                                st_geomfromtext(&#39;</span><span class="si">%(street_line)s</span><span class="s">&#39;) s2,</span>
<span class="s">                                st_intersection(s1,s2) res_geom</span>
<span class="s">                        &quot;&quot;&quot;</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span><span class="o">%</span><span class="k">T</span>
                <span class="n">tmp_part_line</span><span class="o">=</span><span class="n">gd</span><span class="o">.</span><span class="n">read_postgis</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
        <span class="c">#</span>
                <span class="k">if</span> <span class="n">show_steps</span><span class="o">==</span><span class="bp">True</span><span class="p">:</span>  <span class="n">A</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">tmp_part_line</span><span class="o">.</span><span class="n">geom</span><span class="p">)</span>

                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">lots</span><span class="o">.</span><span class="n">geom</span><span class="p">)):</span>
                    <span class="n">bbl</span><span class="p">,</span><span class="n">lot</span> <span class="o">=</span> <span class="n">lots</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">i</span><span class="p">,[</span><span class="s">&#39;bbl&#39;</span><span class="p">,</span><span class="s">&#39;geom&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">values</span>

                    <span class="n">cmd</span> <span class="o">=</span>   <span class="s">&quot;&quot;&quot; SELECT ( st_dump( _geom )).geom,ST_NPoints((( st_dump( _geom )).geom))</span>
<span class="s">                            FROM (</span>
<span class="s">                                SELECT ( st_dump( st_geomfromtext(&#39;</span><span class="si">%(1)s</span><span class="s">&#39;) )).geom _geom</span>
<span class="s">                                ) as t</span>
<span class="s">                        &quot;&quot;&quot;</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span><span class="o">%</span><span class="p">{</span><span class="s">&#39;1&#39;</span><span class="p">:</span><span class="nb">str</span><span class="p">(</span><span class="n">lot</span><span class="o">.</span><span class="n">to_wkt</span><span class="p">())}</span>

                    <span class="c">### Get Single Lot Polygon</span>
                    <span class="n">lot</span><span class="o">=</span><span class="n">gd</span><span class="o">.</span><span class="n">read_postgis</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">show_some_detail</span><span class="o">==</span><span class="bp">True</span><span class="p">:</span> <span class="n">A</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">lot</span><span class="o">.</span><span class="n">geom</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

                    <span class="c">### Get Line From Lot Polygon</span>
                    <span class="n">perim_line</span> <span class="o">=</span> <span class="n">lot</span><span class="o">.</span><span class="n">boundary</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">to_wkt</span><span class="p">()</span>
                    <span class="c"># if show_steps==True: A.append(lot.boundary[0])</span>

                    <span class="c">### Get Points of Segment of Lot Polygon Closest to Street</span>
                    <span class="n">cmd</span> <span class="o">=</span>   <span class="s">&quot;&quot;&quot; SELECT ( st_dumppoints( st_geomfromtext(&#39;</span><span class="si">%(1)s</span><span class="s">&#39;) )).geom&quot;&quot;&quot;</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span><span class="o">%</span><span class="p">{</span><span class="s">&#39;1&#39;</span><span class="p">:</span><span class="nb">str</span><span class="p">(</span><span class="n">perim_line</span><span class="p">)}</span>
                    <span class="n">points</span> <span class="o">=</span> <span class="n">gd</span><span class="o">.</span><span class="n">read_postgis</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span><span class="o">.</span><span class="n">geom</span>
                    <span class="n">t1</span><span class="p">,</span><span class="n">t2</span><span class="o">=</span><span class="p">{},{}</span>
                    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">points</span><span class="p">)):</span>
                        <span class="n">poly_seg_pts</span><span class="o">=</span><span class="n">points</span><span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span><span class="n">points</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
                        <span class="n">dist_from_street</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s">&quot;&quot;&quot;  select</span>
<span class="s">                                                            st_distance(</span>
<span class="s">                                                               st_geomfromtext(&#39; </span><span class="si">%(start_pt)s</span><span class="s"> &#39;),</span>
<span class="s">                                                               st_geomfromtext(&#39; </span><span class="si">%(street)s</span><span class="s"> &#39;))</span>
<span class="s">                                                               +</span>
<span class="s">                                                            st_distance(</span>
<span class="s">                                                               st_geomfromtext(&#39; </span><span class="si">%(end_pt)s</span><span class="s"> &#39;),</span>
<span class="s">                                                               st_geomfromtext(&#39; </span><span class="si">%(street)s</span><span class="s"> &#39;))</span>
<span class="s">                                                            dist</span>
<span class="s">                                                        &quot;&quot;&quot;</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span><span class="o">%</span><span class="p">{</span><span class="s">&#39;start_pt&#39;</span><span class="p">:</span><span class="nb">str</span><span class="p">(</span><span class="n">poly_seg_pts</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
                                                                              <span class="s">&#39;end_pt&#39;</span> <span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">poly_seg_pts</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
                                                                              <span class="s">&#39;street&#39;</span> <span class="p">:</span> <span class="n">LINE</span><span class="p">},</span><span class="n">engine</span><span class="p">)</span>
                        <span class="n">t1</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="n">j</span><span class="p">:</span><span class="n">dist_from_street</span><span class="o">.</span><span class="n">dist</span><span class="p">[</span><span class="mi">0</span><span class="p">]})</span>
                        <span class="n">t2</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="n">j</span><span class="p">:</span><span class="n">poly_seg_pts</span><span class="p">})</span>
                    <span class="n">closest_seg_pts</span> <span class="o">=</span> <span class="n">t2</span><span class="p">[</span><span class="n">t1</span><span class="o">.</span><span class="n">values</span><span class="p">()</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">t1</span><span class="o">.</span><span class="n">values</span><span class="p">()))</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>

                    <span class="c">### Lot Segment MidPoint</span>
                    <span class="n">lot_seg_mid_pt</span> <span class="o">=</span> <span class="n">gd</span><span class="o">.</span><span class="n">read_postgis</span><span class="p">(</span><span class="s">&quot;&quot;&quot;   SELECT ST_Line_Interpolate_Point(st_makeline(ptA,ptB),0.5) geom</span>
<span class="s">                                                            FROM</span>
<span class="s">                                                                st_geomfromtext(&#39; </span><span class="si">%(start_pt)s</span><span class="s"> &#39;) ptA,</span>
<span class="s">                                                                st_geomfromtext(&#39; </span><span class="si">%(end_pt)s</span><span class="s"> &#39;) ptB</span>
<span class="s">                                                    &quot;&quot;&quot;</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span><span class="o">%</span><span class="p">{</span><span class="s">&#39;start_pt&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">closest_seg_pts</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
                                                                          <span class="s">&#39;end_pt&#39;</span>  <span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">closest_seg_pts</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
                                                                          <span class="s">&#39;street&#39;</span>  <span class="p">:</span> <span class="n">LINE</span><span class="p">},</span><span class="n">engine</span><span class="p">)</span>

                    <span class="k">if</span> <span class="n">show_steps</span><span class="o">==</span><span class="bp">True</span><span class="p">:</span> <span class="n">A</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">lot_seg_mid_pt</span><span class="o">.</span><span class="n">geom</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

                    <span class="c">### Closest Point in Street</span>
                    <span class="n">street_seg_mid_pt</span> <span class="o">=</span> <span class="n">gd</span><span class="o">.</span><span class="n">read_postgis</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">                        SELECT ST_ClosestPoint(</span>
<span class="s">                            st_geomfromtext(&#39; </span><span class="si">%(street)s</span><span class="s"> &#39;),</span>
<span class="s">                            st_geomfromtext(&#39; </span><span class="si">%(mid_pt)s</span><span class="s"> &#39;)) geom</span>
<span class="s">                        &quot;&quot;&quot;</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span><span class="o">%</span><span class="p">{</span><span class="s">&#39;mid_pt&#39;</span>  <span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">lot_seg_mid_pt</span><span class="o">.</span><span class="n">geom</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">to_wkt</span><span class="p">()),</span>
                                              <span class="s">&#39;street&#39;</span>  <span class="p">:</span> <span class="n">LINE</span><span class="p">},</span><span class="n">engine</span><span class="p">)</span>
                    <span class="c">#A.append(street_seg_mid_pt.geom[0])</span>

                    <span class="c">### Absolute Angle of Segment (12=0 deg.,6=180 deg.)</span>
                    <span class="n">seg_angle</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s">&quot;&quot;&quot;     SELECT ST_Azimuth(ptA,ptB) ang</span>
<span class="s">                                                    FROM</span>
<span class="s">                                                                st_geomfromtext(&#39; </span><span class="si">%(start_pt)s</span><span class="s"> &#39;) ptA,</span>
<span class="s">                                                                st_geomfromtext(&#39; </span><span class="si">%(end_pt)s</span><span class="s"> &#39;) ptB</span>
<span class="s">                                                    &quot;&quot;&quot;</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span><span class="o">%</span><span class="p">{</span><span class="s">&#39;start_pt&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">closest_seg_pts</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
                                                                          <span class="s">&#39;end_pt&#39;</span>  <span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">closest_seg_pts</span><span class="p">[</span><span class="mi">1</span><span class="p">])},</span><span class="n">engine</span><span class="p">)</span><span class="o">.</span><span class="n">ang</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

                    <span class="c">### Point on Street that Intersects with perp. line extending from Poly Segment Midpoint</span>
                    <span class="n">this_lot_pt</span> <span class="o">=</span> <span class="n">gd</span><span class="o">.</span><span class="n">read_postgis</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">                        SELECT ( st_dumppoints( st_intersection( street, st_makeline(</span>
<span class="s">                            st_makeline(mid_pt::geometry(Point,4326),ptA::geometry(Point,4326)),</span>
<span class="s">                            st_makeline(mid_pt::geometry(Point,4326),ptB::geometry(Point,4326))))  )).geom</span>
<span class="s">                        FROM</span>
<span class="s">                            st_geomfromtext(&#39; </span><span class="si">%(mid_pt)s</span><span class="s"> &#39;, 4326) mid_pt,</span>
<span class="s">                            st_geomfromtext(&#39; </span><span class="si">%(street)s</span><span class="s"> &#39;, 4326) street,</span>
<span class="s">                            st_geomfromtext(&#39; </span><span class="si">%(line_seg_pt)s</span><span class="s"> &#39;, 4326) line_seg_pt,</span>
<span class="s">                            ST_Distance_Spheroid(mid_pt,line_seg_pt,</span>
<span class="s">                                &#39;SPHEROID[&quot;WGS 84&quot;,6378137,298.257223563]&#39;) dist,</span>
<span class="s">                            ST_Project(mid_pt,dist+(dist*1.1),</span><span class="si">%(ang1)s</span><span class="s">) ptA,</span>
<span class="s">                            ST_Project(mid_pt,dist+(dist*1.1),</span><span class="si">%(ang2)s</span><span class="s">) ptB</span>
<span class="s">                                                    &quot;&quot;&quot;</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span><span class="o">%</span><span class="p">{</span><span class="s">&#39;mid_pt&#39;</span> <span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">lot_seg_mid_pt</span><span class="o">.</span><span class="n">geom</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">to_wkt</span><span class="p">()),</span>
                                                                          <span class="s">&#39;line_seg_pt&#39;</span> <span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">street_seg_mid_pt</span><span class="o">.</span><span class="n">geom</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">to_wkt</span><span class="p">()),</span>
                                                                          <span class="s">&#39;street&#39;</span>  <span class="p">:</span> <span class="n">LINE</span><span class="p">,</span>
                                                                          <span class="s">&#39;ang1&#39;</span> <span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">deg_to_rad</span><span class="p">(</span><span class="mi">90</span><span class="o">-</span><span class="p">(</span><span class="mi">360</span><span class="o">-</span><span class="n">rad_to_deg</span><span class="p">(</span><span class="n">seg_angle</span><span class="p">)))),</span>
                                                                          <span class="s">&#39;ang2&#39;</span> <span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">deg_to_rad</span><span class="p">(</span><span class="mi">270</span><span class="o">-</span><span class="p">(</span><span class="mi">360</span><span class="o">-</span><span class="n">rad_to_deg</span><span class="p">(</span><span class="n">seg_angle</span><span class="p">))))},</span>
                                                  <span class="n">engine</span><span class="p">)</span><span class="o">.</span><span class="n">geom</span>
                <span class="c">#</span>
                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">this_lot_pt</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">lot</span><span class="o">.</span><span class="n">geom</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">:</span>
                        <span class="n">this_lot_pt</span> <span class="o">=</span> <span class="n">gd</span><span class="o">.</span><span class="n">read_postgis</span><span class="p">(</span><span class="s">&quot;&quot;&quot;select st_closestpoint(</span>
<span class="s">                                                st_geomfromtext(&#39; </span><span class="si">%(street)s</span><span class="s"> &#39;),</span>
<span class="s">                                                st_geomfromtext(&#39; </span><span class="si">%(lot)s</span><span class="s"> &#39;)) geom</span>
<span class="s">                            &quot;&quot;&quot;</span><span class="o">%</span><span class="p">{</span><span class="s">&#39;street&#39;</span>  <span class="p">:</span> <span class="n">LINE</span><span class="p">,</span>
                                 <span class="s">&#39;lot&#39;</span> <span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">lot</span><span class="o">.</span><span class="n">geom</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">to_wkt</span><span class="p">())},</span><span class="n">engine</span><span class="p">)</span><span class="o">.</span><span class="n">geom</span>

                        <span class="k">if</span> <span class="n">show_some_detail</span><span class="o">==</span><span class="bp">True</span><span class="p">:</span> <span class="n">A</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">this_lot_pt</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="c"># taking first value...</span>
                        <span class="n">lot_pts</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s">&#39;bbl&#39;</span><span class="p">:</span><span class="n">bbl</span><span class="p">,</span>
                                        <span class="s">&#39;geom&#39;</span><span class="p">:</span><span class="n">this_lot_pt</span><span class="p">[</span><span class="mi">0</span><span class="p">]})</span>

                    <span class="k">else</span><span class="p">:</span>

                        <span class="k">if</span> <span class="n">show_some_detail</span><span class="o">==</span><span class="bp">True</span><span class="p">:</span> <span class="n">A</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">this_lot_pt</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="c"># taking first value...</span>
                        <span class="n">lot_pts</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s">&#39;bbl&#39;</span><span class="p">:</span><span class="n">bbl</span><span class="p">,</span>
                                        <span class="s">&#39;geom&#39;</span><span class="p">:</span><span class="n">this_lot_pt</span><span class="p">[</span><span class="mi">0</span><span class="p">]})</span>

                        <span class="c">### Line Connecting Lot to Street</span>
                        <span class="n">line_lot_to_street</span> <span class="o">=</span> <span class="n">gd</span><span class="o">.</span><span class="n">read_postgis</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">                            SELECT ST_ShortestLine(lot_pt,mid_pt) geom</span>
<span class="s">                            FROM</span>
<span class="s">                                st_geomfromtext(&#39; </span><span class="si">%(lot_pt)s</span><span class="s"> &#39;,4326) lot_pt,</span>
<span class="s">                                st_geomfromtext(&#39; </span><span class="si">%(mid_pt)s</span><span class="s"> &#39;,4326) mid_pt</span>
<span class="s">                            &quot;&quot;&quot;</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span><span class="o">%</span><span class="p">{</span><span class="s">&#39;mid_pt&#39;</span>  <span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">lot_seg_mid_pt</span><span class="o">.</span><span class="n">geom</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">to_wkt</span><span class="p">()),</span>
                                                  <span class="s">&#39;lot_pt&#39;</span>  <span class="p">:</span> <span class="n">this_lot_pt</span><span class="p">[</span><span class="mi">0</span><span class="p">]},</span><span class="n">engine</span><span class="p">)</span>
                <span class="c">#</span>
                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">line_lot_to_street</span><span class="o">.</span><span class="n">geom</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">:</span>
                            <span class="n">gd</span><span class="o">.</span><span class="n">GeoSeries</span><span class="p">(</span><span class="n">line_lot_to_street</span><span class="o">.</span><span class="n">geom</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
                            <span class="k">print</span> <span class="s">&#39;too much for Line Connecting Lot to Street&#39;</span>
                            <span class="k">raise</span> <span class="ne">SystemError</span>
                        <span class="k">if</span> <span class="n">show_some_detail</span><span class="o">==</span><span class="bp">True</span><span class="p">:</span> <span class="n">A</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line_lot_to_street</span><span class="o">.</span><span class="n">geom</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

    <span class="k">if</span> <span class="n">show_some_detail</span><span class="o">==</span><span class="bp">True</span><span class="p">:</span> 
        <span class="n">d</span><span class="o">=</span><span class="n">gd</span><span class="o">.</span><span class="n">GeoSeries</span><span class="p">(</span><span class="n">A</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">fig_size</span><span class="o">=</span><span class="p">(</span><span class="mi">26</span><span class="p">,</span><span class="mi">22</span><span class="p">),</span>
                               <span class="n">save_fig_path</span><span class="o">=</span><span class="n">save_fig_path</span><span class="p">,</span>
                               <span class="n">save_and_show</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="n">me</span> <span class="o">=</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s">&#39;y?&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span> <span class="n">me</span><span class="o">=</span><span class="s">&#39;y&#39;</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">me</span><span class="o">==</span><span class="s">&#39;y&#39;</span> <span class="ow">or</span> <span class="n">me</span><span class="o">==</span><span class="s">&#39;yq&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">lot_pts</span><span class="o">!=</span><span class="p">[]:</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">gd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">(</span><span class="n">lot_pts</span><span class="p">)</span>
        <span class="n">d</span><span class="o">=</span><span class="p">[]</span>
        <span class="n">dev</span><span class="o">=</span><span class="p">[</span><span class="n">d</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">it</span><span class="o">.</span><span class="n">coords</span><span class="o">.</span><span class="n">xy</span><span class="p">))</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">c</span><span class="o">.</span><span class="n">geom</span><span class="p">]</span>
        <span class="n">D</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s">&#39;bbl&#39;</span><span class="p">:</span><span class="n">c</span><span class="o">.</span><span class="n">bbl</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span><span class="s">&#39;xy&#39;</span><span class="p">:</span><span class="n">d</span><span class="p">})</span>
        <span class="n">D</span><span class="p">[</span><span class="s">&#39;x&#39;</span><span class="p">],</span><span class="n">D</span><span class="p">[</span><span class="s">&#39;y&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">D</span><span class="o">.</span><span class="n">xy</span><span class="p">)</span>
        <span class="n">D</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s">&#39;temp&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">,</span><span class="n">if_exists</span><span class="o">=</span><span class="s">&#39;append&#39;</span><span class="p">)</span>

<span class="c">#         print &#39;  + added&#39;,len(lot_pts),&#39;lots&#39;</span>
        <span class="k">if</span> <span class="n">me</span><span class="o">==</span><span class="s">&#39;yq&#39;</span><span class="p">:</span> <span class="k">raise</span> <span class="ne">SystemError</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">lot_pts</span><span class="p">,</span><span class="n">A</span><span class="p">,</span><span class="n">skip</span> <span class="o">=</span> <span class="p">[],[],</span><span class="bp">False</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">clf</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">me</span><span class="o">!=</span><span class="s">&#39;y&#39;</span><span class="p">:</span> <span class="k">raise</span> <span class="ne">SystemExit</span>


<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">UPDATE lot_pts l</span>
<span class="s">SET geom = st_setsrid(st_makepoint(t.x,t.y),4326) </span>
<span class="s">FROM temp t </span>
<span class="s">WHERE l.bbl = t.bbl</span>
<span class="s">&quot;&quot;&quot;</span><span class="p">)</span>
<span class="k">print</span> <span class="s">&#39;DONE!&#39;</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### add_points_to_remaining_lots</span>
<span class="n">show_some_detail</span><span class="o">=</span><span class="bp">False</span>
<span class="n">show_steps</span><span class="o">=</span><span class="bp">False</span>
<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">FileLink</span><span class="p">,</span> <span class="n">FileLinks</span>
<span class="n">save_fig_path</span> <span class="o">=</span> <span class="s">&#39;/Users/admin/Projects/GIS/matplotlib_data/nyc_block_and_lot.png&#39;</span>
<span class="n">matplot_files</span> <span class="o">=</span> <span class="n">FileLinks</span><span class="p">(</span><span class="s">&quot;/Users/admin/Projects/GIS/matplotlib_data/&quot;</span><span class="p">)</span>
<span class="c"># display(matplot_files)</span>
<span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">degrees</span> <span class="k">as</span> <span class="n">rad_to_deg</span>
<span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">radians</span> <span class="k">as</span> <span class="n">deg_to_rad</span>
<span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">chain</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">plt</span>

<span class="k">def</span> <span class="nf">geoms_to_collection</span><span class="p">(</span><span class="n">geoms</span><span class="p">):</span>
    <span class="n">s</span><span class="o">=</span><span class="s">&#39;GEOMETRYCOLLECTION(&#39;</span>
    <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">geoms</span><span class="p">:</span>
        <span class="n">s</span><span class="o">+=</span><span class="n">it</span><span class="o">.</span><span class="n">to_wkt</span><span class="p">()</span><span class="o">+</span><span class="s">&#39;,&#39;</span>
    <span class="k">return</span> <span class="n">s</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s">&#39;,&#39;</span><span class="p">)</span><span class="o">+</span><span class="s">&#39;)&#39;</span>
<span class="k">def</span> <span class="nf">geoms_to_text</span><span class="p">(</span><span class="n">geoms</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">geoms_to_text</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">list</span><span class="p">:</span> <span class="n">geoms</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="n">geoms</span><span class="p">)</span>
    <span class="n">s</span><span class="o">=</span><span class="s">&#39;&#39;</span>
    <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">geoms</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">s</span><span class="o">+=</span><span class="s">&quot;ST_GeomFromText(&#39;&quot;</span><span class="o">+</span><span class="n">it</span><span class="o">.</span><span class="n">to_wkt</span><span class="p">()</span><span class="o">+</span><span class="s">&quot;&#39;),&quot;</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">s</span><span class="o">+=</span><span class="s">&quot;ST_GeomFromText(&#39;&quot;</span><span class="o">+</span><span class="n">it</span><span class="o">+</span><span class="s">&quot;&#39;),&quot;</span>
    <span class="k">return</span> <span class="n">s</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s">&#39;,&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">geom_txts_to_collection</span><span class="p">(</span><span class="n">geom_txts</span><span class="p">):</span>
    <span class="k">return</span> <span class="s">&quot;ST_Collect(ARRAY[&quot;</span><span class="o">+</span><span class="n">geoms_to_text</span><span class="p">(</span><span class="n">geom_txts</span><span class="p">)</span><span class="o">+</span><span class="s">&#39;])&#39;</span>

<span class="n">all_pts</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql_query</span><span class="p">(</span><span class="s">&quot;select * from lot_pts where geom is null and ignore is false and place is false&quot;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
<span class="n">all_pts</span><span class="p">[</span><span class="s">&#39;block&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">all_pts</span><span class="o">.</span><span class="n">bbl</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">)[</span><span class="mi">1</span><span class="p">:</span><span class="mi">6</span><span class="p">])</span>
<span class="n">uniq_blocks</span> <span class="o">=</span> <span class="n">all_pts</span><span class="o">.</span><span class="n">block</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="k">if</span> <span class="n">show_some_detail</span><span class="o">==</span><span class="bp">True</span><span class="p">:</span> <span class="k">print</span> <span class="nb">len</span><span class="p">(</span><span class="n">uniq_blocks</span><span class="p">),</span><span class="s">&#39;unique blocks&#39;</span>
<span class="k">if</span> <span class="n">show_some_detail</span><span class="o">==</span><span class="bp">True</span><span class="p">:</span> <span class="k">print</span> <span class="s">&#39;pluto has 1961 unique blocks&#39;</span>
<span class="c"># a=pd.read_sql_query(&quot;select distinct block from pluto&quot;,engine).block.tolist()</span>
<span class="c"># for it in a:</span>
<span class="c">#     if uniq_blocks.count(str(&#39;%05d&#39;%it))==0:</span>
<span class="c">#         print it</span>
<span class="k">if</span> <span class="n">show_some_detail</span><span class="o">==</span><span class="bp">True</span><span class="p">:</span> <span class="k">print</span> <span class="s">&#39;lot 656 is a pier and was removed from lot_pts&#39;</span>

<span class="c">#</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### Make &quot;address_idx&quot; and Update &quot;lot_pts&quot; with ranges and lot_idx</span>

<span class="kn">from</span> <span class="nn">f_postgres</span> <span class="kn">import</span> <span class="n">make_index</span><span class="p">,</span><span class="n">add_bldg_range_pts</span>
<span class="kn">from</span> <span class="nn">f_postgres</span> <span class="kn">import</span> <span class="n">create_lot_idx_start_pts</span><span class="p">,</span><span class="n">create_lot_idx_end_pts</span>

<span class="n">make_index</span><span class="p">(</span><span class="n">describe</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">commit</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">add_bldg_range_pts</span><span class="p">()</span>
<span class="n">create_lot_idx_start_pts</span><span class="p">()</span>
<span class="n">create_lot_idx_end_pts</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### add_points_to_remaining_lots</span>
<span class="n">show_some_detail</span><span class="o">=</span><span class="bp">False</span>
<span class="n">show_steps</span><span class="o">=</span><span class="bp">False</span>
<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">FileLink</span><span class="p">,</span> <span class="n">FileLinks</span>
<span class="n">save_fig_path</span> <span class="o">=</span> <span class="s">&#39;/Users/admin/Projects/GIS/matplotlib_data/nyc_block_and_lot.png&#39;</span>
<span class="n">matplot_files</span> <span class="o">=</span> <span class="n">FileLinks</span><span class="p">(</span><span class="s">&quot;/Users/admin/Projects/GIS/matplotlib_data/&quot;</span><span class="p">)</span>
<span class="c"># display(matplot_files)</span>
<span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">degrees</span> <span class="k">as</span> <span class="n">rad_to_deg</span>
<span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">radians</span> <span class="k">as</span> <span class="n">deg_to_rad</span>
<span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">chain</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">plt</span>

<span class="k">def</span> <span class="nf">geoms_to_collection</span><span class="p">(</span><span class="n">geoms</span><span class="p">):</span>
    <span class="n">s</span><span class="o">=</span><span class="s">&#39;GEOMETRYCOLLECTION(&#39;</span>
    <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">geoms</span><span class="p">:</span>
        <span class="n">s</span><span class="o">+=</span><span class="n">it</span><span class="o">.</span><span class="n">to_wkt</span><span class="p">()</span><span class="o">+</span><span class="s">&#39;,&#39;</span>
    <span class="k">return</span> <span class="n">s</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s">&#39;,&#39;</span><span class="p">)</span><span class="o">+</span><span class="s">&#39;)&#39;</span>
<span class="k">def</span> <span class="nf">geoms_to_text</span><span class="p">(</span><span class="n">geoms</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">geoms_to_text</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">list</span><span class="p">:</span> <span class="n">geoms</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="n">geoms</span><span class="p">)</span>
    <span class="n">s</span><span class="o">=</span><span class="s">&#39;&#39;</span>
    <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">geoms</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">s</span><span class="o">+=</span><span class="s">&quot;ST_GeomFromText(&#39;&quot;</span><span class="o">+</span><span class="n">it</span><span class="o">.</span><span class="n">to_wkt</span><span class="p">()</span><span class="o">+</span><span class="s">&quot;&#39;),&quot;</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">s</span><span class="o">+=</span><span class="s">&quot;ST_GeomFromText(&#39;&quot;</span><span class="o">+</span><span class="n">it</span><span class="o">+</span><span class="s">&quot;&#39;),&quot;</span>
    <span class="k">return</span> <span class="n">s</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s">&#39;,&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">geom_txts_to_collection</span><span class="p">(</span><span class="n">geom_txts</span><span class="p">):</span>
    <span class="k">return</span> <span class="s">&quot;ST_Collect(ARRAY[&quot;</span><span class="o">+</span><span class="n">geoms_to_text</span><span class="p">(</span><span class="n">geom_txts</span><span class="p">)</span><span class="o">+</span><span class="s">&#39;])&#39;</span>

<span class="n">all_pts</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql_query</span><span class="p">(</span><span class="s">&quot;select * from lot_pts where geom is null and ignore is false and place is false&quot;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
<span class="n">all_pts</span><span class="p">[</span><span class="s">&#39;block&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">all_pts</span><span class="o">.</span><span class="n">bbl</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">)[</span><span class="mi">1</span><span class="p">:</span><span class="mi">6</span><span class="p">])</span>
<span class="n">uniq_blocks</span> <span class="o">=</span> <span class="n">all_pts</span><span class="o">.</span><span class="n">block</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="k">if</span> <span class="n">show_some_detail</span><span class="o">==</span><span class="bp">True</span><span class="p">:</span> <span class="k">print</span> <span class="nb">len</span><span class="p">(</span><span class="n">uniq_blocks</span><span class="p">),</span><span class="s">&#39;unique blocks&#39;</span>
<span class="k">if</span> <span class="n">show_some_detail</span><span class="o">==</span><span class="bp">True</span><span class="p">:</span> <span class="k">print</span> <span class="s">&#39;pluto has 1961 unique blocks&#39;</span>
<span class="c"># a=pd.read_sql_query(&quot;select distinct block from pluto&quot;,engine).block.tolist()</span>
<span class="c"># for it in a:</span>
<span class="c">#     if uniq_blocks.count(str(&#39;%05d&#39;%it))==0:</span>
<span class="c">#         print it</span>
<span class="k">if</span> <span class="n">show_some_detail</span><span class="o">==</span><span class="bp">True</span><span class="p">:</span> <span class="k">print</span> <span class="s">&#39;lot 656 is a pier and was removed from lot_pts&#39;</span>

<span class="c">#</span>
<span class="c">### iter block for add_points_to_remaining_lots</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;drop table if exists temp;&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">block</span> <span class="ow">in</span> <span class="n">chain</span><span class="p">(</span><span class="n">uniq_blocks</span><span class="p">[:</span><span class="mi">5</span><span class="p">]):</span>
    <span class="k">print</span> <span class="s">&#39;block</span><span class="se">\t</span><span class="s">&#39;</span><span class="p">,</span><span class="n">block</span>
    
    <span class="n">lot_pts</span><span class="p">,</span><span class="n">A</span><span class="p">,</span><span class="n">skip</span> <span class="o">=</span> <span class="p">[],[],</span><span class="bp">False</span>
    <span class="k">if</span> <span class="n">show_some_detail</span><span class="o">==</span><span class="bp">True</span><span class="p">:</span> <span class="k">print</span> <span class="s">&#39;block</span><span class="se">\t</span><span class="s">&#39;</span><span class="p">,</span><span class="n">block</span>

    <span class="n">uniq_street</span> <span class="o">=</span> <span class="n">all_pts</span><span class="p">[</span><span class="n">all_pts</span><span class="o">.</span><span class="n">block</span><span class="o">==</span><span class="n">block</span><span class="p">]</span><span class="o">.</span><span class="n">bldg_street</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">uniq_street</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">)</span><span class="o">!=</span><span class="mi">0</span><span class="p">:</span>    <span class="n">dev</span> <span class="o">=</span> <span class="n">uniq_street</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">uniq_street</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">uniq_street</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span><span class="o">!=</span><span class="mi">0</span><span class="p">:</span>  <span class="n">dev</span> <span class="o">=</span> <span class="n">uniq_street</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">uniq_street</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="bp">None</span><span class="p">))</span>

    <span class="k">for</span> <span class="n">street_name</span> <span class="ow">in</span> <span class="n">chain</span><span class="p">(</span><span class="n">uniq_street</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">show_some_detail</span><span class="o">==</span><span class="bp">True</span><span class="p">:</span> <span class="k">print</span> <span class="s">&#39;street_name</span><span class="se">\t</span><span class="s">&#39;</span><span class="p">,</span><span class="n">street_name</span>

        <span class="c">### Get All Lots on Block and On This Street</span>
<span class="c">#         pts = all_pts[(all_pts.block==block)&amp;(all_pts.bldg_street==street_name)].sort(&#39;bldg_num&#39;).reset_index(drop=True)</span>
<span class="c">#         cmd=&quot;&quot;&quot; SELECT _bbl bbl,geom</span>
<span class="c">#                 FROM pluto p,unnest(array%s) _bbl</span>
<span class="c">#                 WHERE p.bbl = _bbl&quot;&quot;&quot;%str(pts.bbl.astype(int).tolist()).replace(&quot;&#39;&quot;,&#39;&#39;)</span>
        <span class="n">lots</span> <span class="o">=</span> <span class="n">gd</span><span class="o">.</span><span class="n">read_postgis</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">                select * from pluto </span>
<span class="s">                where substring(to_char(bbl,&#39;9999999999&#39;) from 3 for 5) = &#39;</span><span class="si">%s</span><span class="s">&#39;</span>
<span class="s">                &quot;&quot;&quot;</span><span class="o">%</span><span class="k">block</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>

<span class="c">#         lots = gd.read_postgis(cmd,engine)</span>
        <span class="c">#if show_steps==True: A.extend(lots.geom)</span>
        <span class="k">print</span> <span class="s">&#39;</span><span class="se">\t\t</span><span class="s">&#39;</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">lots</span><span class="p">),</span><span class="s">&#39;lots&#39;</span>

        <span class="c">### Create Buffer Around Lots</span>
        <span class="n">s</span> <span class="o">=</span> <span class="nb">str</span><span class="p">([</span><span class="n">it</span><span class="o">.</span><span class="n">to_wkt</span><span class="p">()</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">lots</span><span class="o">.</span><span class="n">geom</span><span class="p">])</span>
        <span class="n">T</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;buffer&#39;</span><span class="p">:</span> <span class="s">&#39;0.0005&#39;</span><span class="p">,</span>
             <span class="s">&#39;geoms&#39;</span> <span class="p">:</span> <span class="n">s</span><span class="p">}</span>
        <span class="n">cmd</span> <span class="o">=</span>   <span class="s">&quot;&quot;&quot; SELECT ST_Buffer(ST_ConvexHull((ST_Collect(the_geom))), </span><span class="si">%(buffer)s</span><span class="s">) as geom</span>
<span class="s">                    FROM ( SELECT (ST_Dump( unnest(array[</span><span class="si">%(geoms)s</span><span class="s">]) )).geom the_geom) as t&quot;&quot;&quot;</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span><span class="o">%</span><span class="k">T</span>
        <span class="n">block_buffer</span> <span class="o">=</span> <span class="n">gd</span><span class="o">.</span><span class="n">read_postgis</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
        <span class="c">#if show_steps==True: A.extend(block_buffer.geom)</span>

        <span class="c">### Get street as Line from lion_ways</span>
        <span class="n">cmd</span> <span class="o">=</span>   <span class="s">&quot;&quot;&quot; SELECT st_makeline(_geom) geom</span>
<span class="s">                    FROM</span>
<span class="s">                        st_geomfromtext(</span>
<span class="s">                        &#39; </span><span class="si">%(block_buffer)s</span><span class="s"> &#39;</span>
<span class="s">                        , 4326) block_buffer,</span>
<span class="s">                        (select ( st_dump( geom )).geom _geom</span>
<span class="s">                            FROM lion_ways l</span>
<span class="s">                            WHERE l.clean_street = &#39;</span><span class="si">%(1)s</span><span class="s">&#39;</span>
<span class="s">                            AND l.geom is not null  ) as t2</span>
<span class="s">                    WHERE st_intersects(_geom,block_buffer) is True</span>
<span class="s">                &quot;&quot;&quot;</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span><span class="o">%</span><span class="p">{</span><span class="s">&#39;1&#39;</span><span class="p">:</span><span class="nb">str</span><span class="p">(</span><span class="n">street_name</span><span class="p">),</span>
                                      <span class="s">&#39;block_buffer&#39;</span><span class="p">:</span><span class="nb">str</span><span class="p">(</span><span class="n">block_buffer</span><span class="o">.</span><span class="n">geom</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">to_wkt</span><span class="p">())}</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">line_geom</span> <span class="o">=</span> <span class="n">gd</span><span class="o">.</span><span class="n">read_postgis</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
            <span class="n">skip_street</span><span class="o">=</span><span class="bp">False</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">print</span> <span class="s">&#39;skipping street:&#39;</span><span class="p">,</span><span class="n">street_name</span>
            <span class="n">skip_street</span><span class="o">=</span><span class="bp">True</span>

        <span class="k">if</span> <span class="n">skip_street</span><span class="o">==</span><span class="bp">False</span><span class="p">:</span>

            <span class="c"># A.extend(line_geom.geom)</span>
            <span class="n">LINE</span> <span class="o">=</span> <span class="n">line_geom</span><span class="o">.</span><span class="n">geom</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">to_wkt</span><span class="p">()</span>

            <span class="c">### Keep only part of line intersecting with buffer</span>
            <span class="n">s1</span> <span class="o">=</span> <span class="nb">str</span><span class="p">([</span><span class="n">it</span><span class="o">.</span><span class="n">to_wkt</span><span class="p">()</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">block_buffer</span><span class="o">.</span><span class="n">geom</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">s2</span> <span class="o">=</span> <span class="nb">str</span><span class="p">([</span><span class="n">it</span><span class="o">.</span><span class="n">to_wkt</span><span class="p">()</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">line_geom</span><span class="o">.</span><span class="n">geom</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">T</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;block_buffer&#39;</span><span class="p">:</span> <span class="n">s1</span><span class="p">,</span>
                 <span class="s">&#39;street_line&#39;</span> <span class="p">:</span> <span class="n">s2</span><span class="p">}</span>
            <span class="n">cmd</span> <span class="o">=</span>   <span class="s">&quot;&quot;&quot; SELECT res_geom geom</span>
<span class="s">                        FROM</span>
<span class="s">                            st_geomfromtext(&#39;</span><span class="si">%(block_buffer)s</span><span class="s">&#39;) s1,</span>
<span class="s">                            st_geomfromtext(&#39;</span><span class="si">%(street_line)s</span><span class="s">&#39;) s2,</span>
<span class="s">                            st_intersection(s1,s2) res_geom</span>
<span class="s">                    &quot;&quot;&quot;</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span><span class="o">%</span><span class="k">T</span>
            <span class="n">tmp_part_line</span><span class="o">=</span><span class="n">gd</span><span class="o">.</span><span class="n">read_postgis</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
    <span class="c">#</span>
            <span class="k">if</span> <span class="n">show_steps</span><span class="o">==</span><span class="bp">True</span><span class="p">:</span>  <span class="n">A</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">tmp_part_line</span><span class="o">.</span><span class="n">geom</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">lots</span><span class="o">.</span><span class="n">geom</span><span class="p">)):</span>
                <span class="n">bbl</span><span class="p">,</span><span class="n">lot</span> <span class="o">=</span> <span class="n">lots</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">i</span><span class="p">,[</span><span class="s">&#39;bbl&#39;</span><span class="p">,</span><span class="s">&#39;geom&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">values</span>

                <span class="n">cmd</span> <span class="o">=</span>   <span class="s">&quot;&quot;&quot; SELECT ( st_dump( _geom )).geom,ST_NPoints((( st_dump( _geom )).geom))</span>
<span class="s">                        FROM (</span>
<span class="s">                            SELECT ( st_dump( st_geomfromtext(&#39;</span><span class="si">%(1)s</span><span class="s">&#39;) )).geom _geom</span>
<span class="s">                            ) as t</span>
<span class="s">                    &quot;&quot;&quot;</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span><span class="o">%</span><span class="p">{</span><span class="s">&#39;1&#39;</span><span class="p">:</span><span class="nb">str</span><span class="p">(</span><span class="n">lot</span><span class="o">.</span><span class="n">to_wkt</span><span class="p">())}</span>

                <span class="c">### Get Single Lot Polygon</span>
                <span class="n">lot</span><span class="o">=</span><span class="n">gd</span><span class="o">.</span><span class="n">read_postgis</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">show_some_detail</span><span class="o">==</span><span class="bp">True</span><span class="p">:</span> <span class="n">A</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">lot</span><span class="o">.</span><span class="n">geom</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

                <span class="c">### Get Line From Lot Polygon</span>
                <span class="n">perim_line</span> <span class="o">=</span> <span class="n">lot</span><span class="o">.</span><span class="n">boundary</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">to_wkt</span><span class="p">()</span>
                <span class="c"># if show_steps==True: A.append(lot.boundary[0])</span>

                <span class="c">### Get Points of Segment of Lot Polygon Closest to Street</span>
                <span class="n">cmd</span> <span class="o">=</span>   <span class="s">&quot;&quot;&quot; SELECT ( st_dumppoints( st_geomfromtext(&#39;</span><span class="si">%(1)s</span><span class="s">&#39;) )).geom&quot;&quot;&quot;</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span><span class="o">%</span><span class="p">{</span><span class="s">&#39;1&#39;</span><span class="p">:</span><span class="nb">str</span><span class="p">(</span><span class="n">perim_line</span><span class="p">)}</span>
                <span class="n">points</span> <span class="o">=</span> <span class="n">gd</span><span class="o">.</span><span class="n">read_postgis</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span><span class="o">.</span><span class="n">geom</span>
                <span class="n">t1</span><span class="p">,</span><span class="n">t2</span><span class="o">=</span><span class="p">{},{}</span>
                <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">points</span><span class="p">)):</span>
                    <span class="n">poly_seg_pts</span><span class="o">=</span><span class="n">points</span><span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span><span class="n">points</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
                    <span class="n">dist_from_street</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s">&quot;&quot;&quot;  select</span>
<span class="s">                                                        st_distance(</span>
<span class="s">                                                           st_geomfromtext(&#39; </span><span class="si">%(start_pt)s</span><span class="s"> &#39;),</span>
<span class="s">                                                           st_geomfromtext(&#39; </span><span class="si">%(street)s</span><span class="s"> &#39;))</span>
<span class="s">                                                           +</span>
<span class="s">                                                        st_distance(</span>
<span class="s">                                                           st_geomfromtext(&#39; </span><span class="si">%(end_pt)s</span><span class="s"> &#39;),</span>
<span class="s">                                                           st_geomfromtext(&#39; </span><span class="si">%(street)s</span><span class="s"> &#39;))</span>
<span class="s">                                                        dist</span>
<span class="s">                                                    &quot;&quot;&quot;</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span><span class="o">%</span><span class="p">{</span><span class="s">&#39;start_pt&#39;</span><span class="p">:</span><span class="nb">str</span><span class="p">(</span><span class="n">poly_seg_pts</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
                                                                          <span class="s">&#39;end_pt&#39;</span> <span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">poly_seg_pts</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
                                                                          <span class="s">&#39;street&#39;</span> <span class="p">:</span> <span class="n">LINE</span><span class="p">},</span><span class="n">engine</span><span class="p">)</span>
                    <span class="n">t1</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="n">j</span><span class="p">:</span><span class="n">dist_from_street</span><span class="o">.</span><span class="n">dist</span><span class="p">[</span><span class="mi">0</span><span class="p">]})</span>
                    <span class="n">t2</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="n">j</span><span class="p">:</span><span class="n">poly_seg_pts</span><span class="p">})</span>
                <span class="n">closest_seg_pts</span> <span class="o">=</span> <span class="n">t2</span><span class="p">[</span><span class="n">t1</span><span class="o">.</span><span class="n">values</span><span class="p">()</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">t1</span><span class="o">.</span><span class="n">values</span><span class="p">()))</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>

                <span class="c">### Lot Segment MidPoint</span>
                <span class="n">lot_seg_mid_pt</span> <span class="o">=</span> <span class="n">gd</span><span class="o">.</span><span class="n">read_postgis</span><span class="p">(</span><span class="s">&quot;&quot;&quot;   SELECT ST_Line_Interpolate_Point(st_makeline(ptA,ptB),0.5) geom</span>
<span class="s">                                                        FROM</span>
<span class="s">                                                            st_geomfromtext(&#39; </span><span class="si">%(start_pt)s</span><span class="s"> &#39;) ptA,</span>
<span class="s">                                                            st_geomfromtext(&#39; </span><span class="si">%(end_pt)s</span><span class="s"> &#39;) ptB</span>
<span class="s">                                                &quot;&quot;&quot;</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span><span class="o">%</span><span class="p">{</span><span class="s">&#39;start_pt&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">closest_seg_pts</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
                                                                      <span class="s">&#39;end_pt&#39;</span>  <span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">closest_seg_pts</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
                                                                      <span class="s">&#39;street&#39;</span>  <span class="p">:</span> <span class="n">LINE</span><span class="p">},</span><span class="n">engine</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">show_steps</span><span class="o">==</span><span class="bp">True</span><span class="p">:</span> <span class="n">A</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">lot_seg_mid_pt</span><span class="o">.</span><span class="n">geom</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

                <span class="c">### Closest Point in Street</span>
                <span class="n">street_seg_mid_pt</span> <span class="o">=</span> <span class="n">gd</span><span class="o">.</span><span class="n">read_postgis</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">                    SELECT ST_ClosestPoint(</span>
<span class="s">                        st_geomfromtext(&#39; </span><span class="si">%(street)s</span><span class="s"> &#39;),</span>
<span class="s">                        st_geomfromtext(&#39; </span><span class="si">%(mid_pt)s</span><span class="s"> &#39;)) geom</span>
<span class="s">                    &quot;&quot;&quot;</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span><span class="o">%</span><span class="p">{</span><span class="s">&#39;mid_pt&#39;</span>  <span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">lot_seg_mid_pt</span><span class="o">.</span><span class="n">geom</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">to_wkt</span><span class="p">()),</span>
                                          <span class="s">&#39;street&#39;</span>  <span class="p">:</span> <span class="n">LINE</span><span class="p">},</span><span class="n">engine</span><span class="p">)</span>
                <span class="c">#A.append(street_seg_mid_pt.geom[0])</span>

                <span class="c">### Absolute Angle of Segment (12=0 deg.,6=180 deg.)</span>
                <span class="n">seg_angle</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s">&quot;&quot;&quot;     SELECT ST_Azimuth(ptA,ptB) ang</span>
<span class="s">                                                FROM</span>
<span class="s">                                                            st_geomfromtext(&#39; </span><span class="si">%(start_pt)s</span><span class="s"> &#39;) ptA,</span>
<span class="s">                                                            st_geomfromtext(&#39; </span><span class="si">%(end_pt)s</span><span class="s"> &#39;) ptB</span>
<span class="s">                                                &quot;&quot;&quot;</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span><span class="o">%</span><span class="p">{</span><span class="s">&#39;start_pt&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">closest_seg_pts</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
                                                                      <span class="s">&#39;end_pt&#39;</span>  <span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">closest_seg_pts</span><span class="p">[</span><span class="mi">1</span><span class="p">])},</span><span class="n">engine</span><span class="p">)</span><span class="o">.</span><span class="n">ang</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

                <span class="c">### Point on Street that Intersects with perp. line extending from Poly Segment Midpoint</span>
                <span class="n">this_lot_pt</span> <span class="o">=</span> <span class="n">gd</span><span class="o">.</span><span class="n">read_postgis</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">                    SELECT ( st_dumppoints( st_intersection( street, st_makeline(</span>
<span class="s">                        st_makeline(mid_pt::geometry(Point,4326),ptA::geometry(Point,4326)),</span>
<span class="s">                        st_makeline(mid_pt::geometry(Point,4326),ptB::geometry(Point,4326))))  )).geom</span>
<span class="s">                    FROM</span>
<span class="s">                        st_geomfromtext(&#39; </span><span class="si">%(mid_pt)s</span><span class="s"> &#39;, 4326) mid_pt,</span>
<span class="s">                        st_geomfromtext(&#39; </span><span class="si">%(street)s</span><span class="s"> &#39;, 4326) street,</span>
<span class="s">                        st_geomfromtext(&#39; </span><span class="si">%(line_seg_pt)s</span><span class="s"> &#39;, 4326) line_seg_pt,</span>
<span class="s">                        ST_Distance_Spheroid(mid_pt,line_seg_pt,</span>
<span class="s">                            &#39;SPHEROID[&quot;WGS 84&quot;,6378137,298.257223563]&#39;) dist,</span>
<span class="s">                        ST_Project(mid_pt,dist+(dist*1.1),</span><span class="si">%(ang1)s</span><span class="s">) ptA,</span>
<span class="s">                        ST_Project(mid_pt,dist+(dist*1.1),</span><span class="si">%(ang2)s</span><span class="s">) ptB</span>
<span class="s">                                                &quot;&quot;&quot;</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span><span class="o">%</span><span class="p">{</span><span class="s">&#39;mid_pt&#39;</span> <span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">lot_seg_mid_pt</span><span class="o">.</span><span class="n">geom</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">to_wkt</span><span class="p">()),</span>
                                                                      <span class="s">&#39;line_seg_pt&#39;</span> <span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">street_seg_mid_pt</span><span class="o">.</span><span class="n">geom</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">to_wkt</span><span class="p">()),</span>
                                                                      <span class="s">&#39;street&#39;</span>  <span class="p">:</span> <span class="n">LINE</span><span class="p">,</span>
                                                                      <span class="s">&#39;ang1&#39;</span> <span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">deg_to_rad</span><span class="p">(</span><span class="mi">90</span><span class="o">-</span><span class="p">(</span><span class="mi">360</span><span class="o">-</span><span class="n">rad_to_deg</span><span class="p">(</span><span class="n">seg_angle</span><span class="p">)))),</span>
                                                                      <span class="s">&#39;ang2&#39;</span> <span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">deg_to_rad</span><span class="p">(</span><span class="mi">270</span><span class="o">-</span><span class="p">(</span><span class="mi">360</span><span class="o">-</span><span class="n">rad_to_deg</span><span class="p">(</span><span class="n">seg_angle</span><span class="p">))))},</span>
                                              <span class="n">engine</span><span class="p">)</span><span class="o">.</span><span class="n">geom</span>
            <span class="c">#</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">this_lot_pt</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">lot</span><span class="o">.</span><span class="n">geom</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">:</span>
                    <span class="k">print</span> <span class="s">&#39;skipping lot:&#39;</span><span class="p">,</span><span class="n">lots</span><span class="o">.</span><span class="n">bbl</span><span class="o">.</span><span class="n">tolist</span><span class="p">()[</span><span class="n">i</span><span class="p">]</span>
                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">lot</span><span class="o">.</span><span class="n">geom</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">:</span>
                        <span class="k">print</span> <span class="s">&#39;</span><span class="se">\t\t</span><span class="s">above too much for single lot&#39;</span>
                <span class="k">else</span><span class="p">:</span>

                    <span class="k">if</span> <span class="n">show_some_detail</span><span class="o">==</span><span class="bp">True</span><span class="p">:</span> <span class="n">A</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">this_lot_pt</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="c"># taking first value...</span>
                    <span class="n">lot_pts</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s">&#39;bbl&#39;</span><span class="p">:</span><span class="n">bbl</span><span class="p">,</span>
                                    <span class="s">&#39;geom&#39;</span><span class="p">:</span><span class="n">this_lot_pt</span><span class="p">[</span><span class="mi">0</span><span class="p">]})</span>

                    <span class="c">### Line Connecting Lot to Street</span>
                    <span class="n">line_lot_to_street</span> <span class="o">=</span> <span class="n">gd</span><span class="o">.</span><span class="n">read_postgis</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">                        SELECT ST_ShortestLine(lot_pt,mid_pt) geom</span>
<span class="s">                        FROM</span>
<span class="s">                            st_geomfromtext(&#39; </span><span class="si">%(lot_pt)s</span><span class="s"> &#39;,4326) lot_pt,</span>
<span class="s">                            st_geomfromtext(&#39; </span><span class="si">%(mid_pt)s</span><span class="s"> &#39;,4326) mid_pt</span>
<span class="s">                        &quot;&quot;&quot;</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span><span class="o">%</span><span class="p">{</span><span class="s">&#39;mid_pt&#39;</span>  <span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">lot_seg_mid_pt</span><span class="o">.</span><span class="n">geom</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">to_wkt</span><span class="p">()),</span>
                                              <span class="s">&#39;lot_pt&#39;</span>  <span class="p">:</span> <span class="n">this_lot_pt</span><span class="p">[</span><span class="mi">0</span><span class="p">]},</span><span class="n">engine</span><span class="p">)</span>
            <span class="c">#</span>
                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">line_lot_to_street</span><span class="o">.</span><span class="n">geom</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">:</span>
                        <span class="n">gd</span><span class="o">.</span><span class="n">GeoSeries</span><span class="p">(</span><span class="n">line_lot_to_street</span><span class="o">.</span><span class="n">geom</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
                        <span class="k">print</span> <span class="s">&#39;too much for Line Connecting Lot to Street&#39;</span>
                        <span class="k">raise</span> <span class="ne">SystemError</span>
                    <span class="k">if</span> <span class="n">show_some_detail</span><span class="o">==</span><span class="bp">True</span><span class="p">:</span> <span class="n">A</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line_lot_to_street</span><span class="o">.</span><span class="n">geom</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>


            <span class="k">if</span> <span class="n">show_some_detail</span><span class="o">==</span><span class="bp">True</span><span class="p">:</span>
                <span class="n">d</span><span class="o">=</span><span class="n">gd</span><span class="o">.</span><span class="n">GeoSeries</span><span class="p">(</span><span class="n">A</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">fig_size</span><span class="o">=</span><span class="p">(</span><span class="mi">26</span><span class="p">,</span><span class="mi">22</span><span class="p">),</span>
                                       <span class="n">save_fig_path</span><span class="o">=</span><span class="n">save_fig_path</span><span class="p">,</span>
                                       <span class="n">save_and_show</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">show_some_detail</span><span class="o">==</span><span class="bp">True</span><span class="p">:</span> <span class="n">me</span> <span class="o">=</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s">&#39;y?&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span> <span class="n">me</span><span class="o">=</span><span class="s">&#39;y&#39;</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">me</span><span class="o">==</span><span class="s">&#39;y&#39;</span> <span class="ow">or</span> <span class="n">me</span><span class="o">==</span><span class="s">&#39;yq&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">lot_pts</span><span class="o">!=</span><span class="p">[]:</span>
                <span class="n">c</span> <span class="o">=</span> <span class="n">gd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">(</span><span class="n">lot_pts</span><span class="p">)</span>
                <span class="n">d</span><span class="o">=</span><span class="p">[]</span>
                <span class="n">dev</span><span class="o">=</span><span class="p">[</span><span class="n">d</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">it</span><span class="o">.</span><span class="n">coords</span><span class="o">.</span><span class="n">xy</span><span class="p">))</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">c</span><span class="o">.</span><span class="n">geom</span><span class="p">]</span>
                <span class="n">D</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s">&#39;bbl&#39;</span><span class="p">:</span><span class="n">c</span><span class="o">.</span><span class="n">bbl</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span><span class="s">&#39;xy&#39;</span><span class="p">:</span><span class="n">d</span><span class="p">})</span>
                <span class="n">D</span><span class="p">[</span><span class="s">&#39;x&#39;</span><span class="p">],</span><span class="n">D</span><span class="p">[</span><span class="s">&#39;y&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">D</span><span class="o">.</span><span class="n">xy</span><span class="p">)</span>
                <span class="n">D</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s">&#39;temp&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">,</span><span class="n">if_exists</span><span class="o">=</span><span class="s">&#39;append&#39;</span><span class="p">)</span>

                <span class="k">print</span> <span class="s">&#39;added street_name</span><span class="se">\t</span><span class="s">&#39;</span><span class="p">,</span><span class="n">street_name</span><span class="p">,</span><span class="s">&#39;with&#39;</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">lot_pts</span><span class="p">),</span><span class="s">&#39;lots&#39;</span>
                <span class="k">if</span> <span class="n">me</span><span class="o">==</span><span class="s">&#39;yq&#39;</span><span class="p">:</span> <span class="k">raise</span> <span class="ne">SystemError</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">lot_pts</span><span class="p">,</span><span class="n">A</span><span class="p">,</span><span class="n">skip</span> <span class="o">=</span> <span class="p">[],[],</span><span class="bp">False</span>
                    <span class="n">plt</span><span class="o">.</span><span class="n">clf</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">me</span><span class="o">!=</span><span class="s">&#39;y&#39;</span><span class="p">:</span> <span class="k">raise</span> <span class="ne">SystemExit</span>


<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">UPDATE lot_pts l</span>
<span class="s">SET geom = st_setsrid(st_makepoint(t.x,t.y),4326) </span>
<span class="s">FROM temp t </span>
<span class="s">WHERE l.bbl = t.bbl</span>
<span class="s">&quot;&quot;&quot;</span><span class="p">)</span>
<span class="k">print</span> <span class="s">&#39;DONE!&#39;</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### Added index for fuzzystrmatch</span>

    <span class="n">CREATE</span> <span class="n">INDEX</span> <span class="n">idx_places_sndx_loc_name</span> <span class="n">ON</span> <span class="n">address_idx</span> <span class="n">USING</span> <span class="n">btree</span> <span class="p">(</span><span class="n">soundex</span><span class="p">(</span><span class="n">addr</span><span class="p">));</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### Get all MN zipcodes</span>
<span class="n">py_path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">abspath</span><span class="p">(</span><span class="n">workDir</span><span class="o">+</span><span class="s">&#39;../../html&#39;</span><span class="p">))</span>
<span class="kn">import</span> <span class="nn">HTML_API</span> <span class="kn">as</span> <span class="nn">H</span>

<span class="kn">from</span> <span class="nn">urllib</span> <span class="kn">import</span> <span class="n">urlopen</span>
<span class="n">src</span> <span class="o">=</span> <span class="s">&#39;http://www.newyorkzipcodes.com/city-manhattan/default.aspx&#39;</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">urlopen</span><span class="p">(</span><span class="n">src</span><span class="p">)</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="c"># print x</span>

<span class="n">h</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">getSoup</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">z</span> <span class="o">=</span> <span class="n">h</span><span class="o">.</span><span class="n">findAll</span><span class="p">(</span><span class="s">&#39;table&#39;</span><span class="p">,</span><span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;width&#39;</span><span class="p">:</span><span class="s">&quot;100%&quot;</span><span class="p">,</span><span class="s">&#39;border&#39;</span><span class="p">:</span><span class="s">&quot;0&quot;</span><span class="p">,</span><span class="s">&#39;cellpadding&#39;</span><span class="p">:</span><span class="s">&quot;2&quot;</span><span class="p">})[</span><span class="mi">0</span><span class="p">]</span>
<span class="c"># print z.prettify()</span>
<span class="n">mn_zipcodes</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">z</span><span class="o">.</span><span class="n">findAll</span><span class="p">(</span><span class="s">&#39;td&#39;</span><span class="p">):</span>
    <span class="n">t</span> <span class="o">=</span> <span class="n">it</span><span class="o">.</span><span class="n">contents</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span><span class="o">==</span><span class="mi">5</span><span class="p">:</span>
            <span class="n">mn_zipcodes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">t</span><span class="p">))</span>
    <span class="k">except</span><span class="p">:</span> <span class="k">pass</span>
<span class="nb">str</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">mn_zipcodes</span><span class="p">))</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4>Table Creation</h4>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### __ create mnv</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s">&#39;https://data.cityofnewyork.us/api/views/xx67-kt59/rows.xls?accessType=DOWNLOAD&#39;</span><span class="p">)</span>
<span class="c"># was not available 2014.11.19@08:00:00-0500</span>

<span class="n">c</span><span class="o">=</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">DROP TABLE IF EXISTS mnv;</span>

<span class="s">CREATE TABLE mnv (</span>
<span class="s">    building text,</span>
<span class="s">    camis double precision,</span>
<span class="s">    vend_name text,</span>
<span class="s">    clean_street text,</span>
<span class="s">    cuisinecode double precision,</span>
<span class="s">    dba text,</span>
<span class="s">    inspdate timestamp without time zone,</span>
<span class="s">    street text,</span>
<span class="s">    zipcode double precision,</span>
<span class="s">    id integer primary key,</span>
<span class="s">    recog_street boolean,</span>
<span class="s">    recog_addr boolean DEFAULT false,</span>
<span class="s">    bbl integer,</span>
<span class="s">    phone bigint,</span>
<span class="s">    norm_addr text,</span>
<span class="s">    seamless_id bigint,</span>
<span class="s">    yelp_id text,</span>
<span class="s">    address text,</span>
<span class="s">    geom geometry(Point,4326),</span>
<span class="s">    lot_cnt integer DEFAULT 1</span>
<span class="s">  );</span>

<span class="s">UPDATE mnv SET id = nextval(pg_get_serial_sequence(&#39;mnv&#39;,&#39;id&#39;));</span>
<span class="s">&quot;&quot;&quot;</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### __ create scrape_lattice (~ about 2 min)</span>
<span class="n">pt_buff_in_miles</span> <span class="o">=</span> <span class="mf">0.2</span>
<span class="n">lattice_table_name</span> <span class="o">=</span> <span class="s">&#39;scrape_lattice&#39;</span>
<span class="c"># 1 miles = 1609.34 meters</span>


<span class="n">z</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s">&quot;select min(lat) a,max(lat) b,min(lon) c,max(lon) d from lws_vertices_pgr&quot;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
<span class="n">lat_min</span><span class="p">,</span><span class="n">lat_max</span><span class="p">,</span><span class="n">lon_min</span><span class="p">,</span><span class="n">lon_max</span> <span class="o">=</span> <span class="n">z</span><span class="o">.</span><span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">z</span><span class="o">.</span><span class="n">b</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">z</span><span class="o">.</span><span class="n">c</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">z</span><span class="o">.</span><span class="n">d</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">lat_mid</span><span class="p">,</span><span class="n">lon_mid</span> <span class="o">=</span> <span class="n">lat_min</span><span class="o">+</span><span class="p">((</span><span class="n">lat_max</span><span class="o">-</span><span class="n">lat_min</span><span class="p">)</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="mi">2</span><span class="p">)),</span><span class="n">lon_min</span><span class="o">+</span><span class="p">((</span><span class="n">lon_max</span><span class="o">-</span><span class="n">lon_min</span><span class="p">)</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
<span class="n">lat_cmd</span> <span class="o">=</span>   <span class="s">&quot;&quot;&quot;</span>
<span class="s">            SELECT ST_Distance_Sphere(ptA,ptB) lat_dist</span>
<span class="s">            from (SELECT ST_GeomFromText(&#39;POINT(</span><span class="si">%s</span><span class="s"> </span><span class="si">%s</span><span class="s">)&#39;,4326) as ptA, </span>
<span class="s">                         ST_GeomFromText(&#39;POINT(</span><span class="si">%s</span><span class="s"> </span><span class="si">%s</span><span class="s">)&#39;,4326) as ptB) as foo;</span>
<span class="s">            &quot;&quot;&quot;</span><span class="o">%</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">lon_mid</span><span class="p">),</span><span class="nb">str</span><span class="p">(</span><span class="n">lat_max</span><span class="p">),</span><span class="nb">str</span><span class="p">(</span><span class="n">lon_mid</span><span class="p">),</span><span class="nb">str</span><span class="p">(</span><span class="n">lat_min</span><span class="p">))</span>
<span class="n">lon_cmd</span> <span class="o">=</span>   <span class="s">&quot;&quot;&quot;</span>
<span class="s">            SELECT ST_Distance_Sphere(ptA,ptB) lon_dist</span>
<span class="s">            from (SELECT ST_GeomFromText(&#39;POINT(</span><span class="si">%s</span><span class="s"> </span><span class="si">%s</span><span class="s">)&#39;,4326) as ptA, </span>
<span class="s">                         ST_GeomFromText(&#39;POINT(</span><span class="si">%s</span><span class="s"> </span><span class="si">%s</span><span class="s">)&#39;,4326) as ptB) as foo;</span>
<span class="s">            &quot;&quot;&quot;</span><span class="o">%</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">lon_max</span><span class="p">),</span><span class="nb">str</span><span class="p">(</span><span class="n">lat_mid</span><span class="p">),</span><span class="nb">str</span><span class="p">(</span><span class="n">lon_min</span><span class="p">),</span><span class="nb">str</span><span class="p">(</span><span class="n">lat_mid</span><span class="p">))</span>
<span class="n">lat_range</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="n">lat_cmd</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span><span class="o">.</span><span class="n">lat_dist</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">pt_buff_in_miles</span> <span class="o">*</span> <span class="mf">1609.34</span><span class="p">)</span>
<span class="n">lon_range</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="n">lon_cmd</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span><span class="o">.</span><span class="n">lon_dist</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">pt_buff_in_miles</span> <span class="o">*</span> <span class="mf">1609.34</span><span class="p">)</span>
<span class="n">lat_segs</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">lat_range</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="n">pt_buff_in_miles</span> <span class="o">*</span> <span class="mf">1609.34</span><span class="p">),))</span>
<span class="n">lon_segs</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">lon_range</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="n">pt_buff_in_miles</span> <span class="o">*</span> <span class="mf">1609.34</span><span class="p">),))</span>

<span class="n">lat_mid_distances</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">lat_range</span><span class="p">,</span><span class="n">pt_buff_in_miles</span> <span class="o">*</span> <span class="mf">1609.34</span><span class="p">)</span><span class="o">+</span><span class="p">((</span><span class="n">pt_buff_in_miles</span> <span class="o">*</span> <span class="mf">1609.34</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
<span class="n">lon_mid_distances</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">lon_range</span><span class="p">,</span><span class="n">pt_buff_in_miles</span> <span class="o">*</span> <span class="mf">1609.34</span><span class="p">)</span><span class="o">+</span><span class="p">((</span><span class="n">pt_buff_in_miles</span> <span class="o">*</span> <span class="mf">1609.34</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>

<span class="c"># set starting point</span>
<span class="n">lat_d</span> <span class="o">=</span> <span class="n">lat_mid_distances</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">lon_d</span> <span class="o">=</span> <span class="n">lon_mid_distances</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">T</span> <span class="o">=</span> <span class="p">{</span>   <span class="s">&#39;table_name&#39;</span><span class="p">:</span><span class="n">lattice_table_name</span><span class="p">,</span>
        <span class="s">&#39;X&#39;</span><span class="p">:</span><span class="nb">str</span><span class="p">(</span><span class="n">lon_min</span><span class="p">),</span>
        <span class="s">&#39;Y&#39;</span><span class="p">:</span><span class="nb">str</span><span class="p">(</span><span class="n">lat_min</span><span class="p">),</span>
        <span class="s">&#39;sw_dist&#39;</span><span class="p">:</span><span class="nb">str</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">lat_d</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">lon_d</span><span class="o">**</span><span class="mi">2</span><span class="p">)),</span>
        <span class="s">&#39;sw_rad&#39;</span><span class="p">:</span><span class="nb">str</span><span class="p">(</span><span class="mi">225</span><span class="p">)</span>   <span class="p">}</span>
<span class="n">cmd</span> <span class="o">=</span>   <span class="s">&quot;&quot;&quot;</span>
<span class="s">            select</span>
<span class="s">                st_x(sw_geom::geometry(Point,4326))  min_x,   </span>
<span class="s">                st_y(sw_geom::geometry(Point,4326))  min_y</span>
<span class="s">            FROM</span>
<span class="s">                (select </span>
<span class="s">                    ST_Project( st_geomfromtext(&#39;Point(</span><span class="si">%(X)s</span><span class="s"> </span><span class="si">%(Y)s</span><span class="s">)&#39;,4326), </span>
<span class="s">                                </span><span class="si">%(sw_dist)s</span><span class="s">, </span>
<span class="s">                                radians(</span><span class="si">%(sw_rad)s</span><span class="s">)) sw_geom) as foo;</span>

<span class="s">        &quot;&quot;&quot;</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span><span class="o">%</span><span class="k">T</span>
<span class="n">min_x</span><span class="p">,</span><span class="n">min_y</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="mi">0</span><span class="p">,[</span><span class="s">&#39;min_x&#39;</span><span class="p">,</span><span class="s">&#39;min_y&#39;</span><span class="p">]]</span>

<span class="c"># create lattice table</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;drop table if exists </span><span class="si">%s</span><span class="s">&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">lattice_table_name</span><span class="p">))</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">                    CREATE TABLE </span><span class="si">%(table_name)s</span><span class="s"> (</span>
<span class="s">                        gid     serial primary key,</span>
<span class="s">                        x       double precision,</span>
<span class="s">                        y       double precision,</span>
<span class="s">                        bbl     numeric,</span>
<span class="s">                        address text,</span>
<span class="s">                        zipcode integer,</span>
<span class="s">                        geom    geometry(Point,4326));</span>
<span class="s">                    UPDATE </span><span class="si">%(table_name)s</span><span class="s"> SET gid = nextval(pg_get_serial_sequence(&#39;</span><span class="si">%(table_name)s</span><span class="s">&#39;,&#39;gid&#39;));</span>
<span class="s">              &quot;&quot;&quot;</span><span class="o">%</span><span class="p">{</span><span class="s">&#39;table_name&#39;</span><span class="p">:</span><span class="n">lattice_table_name</span><span class="p">})</span>

<span class="k">print</span> <span class="s">&#39;delete from scrape_lattice where gid = 721 (FDR Drive)&#39;</span>
<span class="k">raise</span> <span class="ne">SystemError</span><span class="p">()</span>


<span class="c"># create and push X/Y points to pgsql -- set geom at end</span>
<span class="n">pt</span><span class="o">=</span><span class="mi">0</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">lat_segs</span><span class="p">):</span>
    <span class="n">lat_d</span> <span class="o">=</span> <span class="n">lat_mid_distances</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">lon_segs</span><span class="p">):</span>
        <span class="n">lon_d</span> <span class="o">=</span> <span class="n">lon_mid_distances</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
        <span class="n">T</span> <span class="o">=</span> <span class="p">{</span>   <span class="s">&#39;table_name&#39;</span><span class="p">:</span><span class="n">lattice_table_name</span><span class="p">,</span>
                <span class="s">&#39;X&#39;</span><span class="p">:</span><span class="nb">str</span><span class="p">(</span><span class="n">min_x</span><span class="p">),</span>
                <span class="s">&#39;Y&#39;</span><span class="p">:</span><span class="nb">str</span><span class="p">(</span><span class="n">min_y</span><span class="p">),</span>
                <span class="s">&#39;n_dist&#39;</span><span class="p">:</span><span class="nb">str</span><span class="p">(</span><span class="n">lat_d</span><span class="p">),</span>
                <span class="s">&#39;ne_dist&#39;</span><span class="p">:</span><span class="nb">str</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">lat_d</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">lon_d</span><span class="o">**</span><span class="mi">2</span><span class="p">)),</span>
                <span class="s">&#39;e_dist&#39;</span><span class="p">:</span><span class="nb">str</span><span class="p">(</span><span class="n">lon_d</span><span class="p">),</span>
                <span class="s">&#39;n_rad&#39;</span><span class="p">:</span><span class="nb">str</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
                <span class="s">&#39;ne_rad&#39;</span><span class="p">:</span><span class="nb">str</span><span class="p">(</span><span class="mi">45</span><span class="p">),</span>
                <span class="s">&#39;e_rad&#39;</span><span class="p">:</span><span class="nb">str</span><span class="p">(</span><span class="mi">90</span><span class="p">)</span>   <span class="p">}</span>
        <span class="c"># (lat_min,lon_min) is southwest most point</span>
        <span class="c"># lattice created by moving northeast</span>

        <span class="c">## North     azimuth 0       (0)</span>
        <span class="c">## East      azimuth 90      (pi/2)</span>
        <span class="c">## South     azimuth 180     (pi)</span>
        <span class="c">## West      azimuth 270     (pi*1.5)</span>
        <span class="n">cmd</span> <span class="o">=</span>   <span class="s">&quot;&quot;&quot;</span>
<span class="s">                INSERT INTO </span><span class="si">%(table_name)s</span><span class="s">(x,y)</span>
<span class="s">                    select</span>
<span class="s">                        st_x(e_geom::geometry(Point,4326))  e_geom_x,   </span>
<span class="s">                        st_y(n_geom::geometry(Point,4326))  n_geom_y</span>
<span class="s">                    FROM</span>
<span class="s">                        (select </span>
<span class="s">                            ST_Project( st_geomfromtext(&#39;Point(</span><span class="si">%(X)s</span><span class="s"> </span><span class="si">%(Y)s</span><span class="s">)&#39;,4326), </span>
<span class="s">                                        </span><span class="si">%(n_dist)s</span><span class="s">, </span>
<span class="s">                                        radians(</span><span class="si">%(n_rad)s</span><span class="s">)) n_geom) as foo1,</span>
<span class="s">                        (select </span>
<span class="s">                            ST_Project( st_geomfromtext(&#39;Point(</span><span class="si">%(X)s</span><span class="s"> </span><span class="si">%(Y)s</span><span class="s">)&#39;,4326), </span>
<span class="s">                                        </span><span class="si">%(e_dist)s</span><span class="s">, </span>
<span class="s">                                        radians(</span><span class="si">%(e_rad)s</span><span class="s">)) e_geom) as foo2;</span>

<span class="s">                &quot;&quot;&quot;</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span><span class="o">%</span><span class="k">T</span>
        <span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>            
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;UPDATE </span><span class="si">%s</span><span class="s"> SET geom = ST_SetSRID(ST_MakePoint(x,y), 4326);&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">lattice_table_name</span><span class="p">))</span>

<span class="c"># remove points outside geographic land boundary of manhattan</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">    drop table if exists tmp;</span>

<span class="s">    create table tmp as</span>
<span class="s">    select st_buffer(st_concavehull(all_pts,50)::geography,</span><span class="si">%(buf_rad)s</span><span class="s">)::geometry geom </span>
<span class="s">        from</span>
<span class="s">        (SELECT ST_Collect(f.the_geom) as all_pts </span>
<span class="s">            FROM ( </span>
<span class="s">            SELECT (ST_Dump(geom)).geom as the_geom </span>
<span class="s">            FROM pluto_centroids) </span>
<span class="s">            as f) </span>
<span class="s">        as f1;</span>

<span class="s">    delete from scrape_lattice l</span>
<span class="s">    using tmp t</span>
<span class="s">    where not st_within(l.geom,t.geom);</span>

<span class="s">    drop table tmp;</span>
<span class="s">    &quot;&quot;&quot;</span><span class="o">%</span><span class="p">{</span><span class="s">&#39;buf_rad&#39;</span><span class="p">:</span><span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">((</span><span class="n">pt_buff_in_miles</span> <span class="o">*</span> <span class="mf">1609.34</span><span class="p">)</span><span class="o">/</span><span class="mf">2.0</span><span class="p">))})</span>

<span class="c"># match lattice points with closest tax lots and collect addresses</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">    drop table if exists tmp1;</span>
<span class="s">    </span>
<span class="s">    create table tmp1 as</span>
<span class="s">            SELECT st_collect(pc.geom) all_pts </span>
<span class="s">            FROM pluto_centroids pc</span>
<span class="s">            INNER JOIN pluto p on p.gid=pc.p_gid</span>
<span class="s">            WHERE NOT p.zipcode=0</span>
<span class="s">            AND p.address is not null;</span>
<span class="s">    &quot;&quot;&quot;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">    drop table if exists tmp2;</span>
<span class="s">    </span>
<span class="s">    create table tmp2 as</span>
<span class="s">    WITH res AS (</span>
<span class="s">        SELECT</span>
<span class="s">            l.gid l_gid,</span>
<span class="s">            st_closestpoint(t.all_pts,l.geom) t_geom,</span>
<span class="s">            ROW_NUMBER() OVER(PARTITION BY l.geom</span>
<span class="s">                              ORDER BY st_closestpoint(t.all_pts,l.geom) DESC) AS rk</span>
<span class="s">        FROM scrape_lattice l,tmp1 t</span>
<span class="s">        )</span>
<span class="s">    SELECT s.l_gid l_gid,p.gid p_gid</span>
<span class="s">        FROM res s</span>
<span class="s">        INNER JOIN pluto_centroids pc on pc.geom=s.t_geom</span>
<span class="s">        INNER JOIN pluto p on p.gid=pc.p_gid</span>
<span class="s">        WHERE s.rk = 1;</span>
<span class="s">    &quot;&quot;&quot;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;        </span>
<span class="s">    update scrape_lattice l</span>
<span class="s">    set</span>
<span class="s">        address = p.address,</span>
<span class="s">        bbl = p.bbl,</span>
<span class="s">        zipcode = p.zipcode</span>
<span class="s">    from tmp2 t</span>
<span class="s">    INNER JOIN pluto p on p.gid=t.p_gid</span>
<span class="s">    WHERE t.l_gid = l.gid;</span>
<span class="s">    </span>
<span class="s">    drop table tmp2;</span>
<span class="s">    drop table tmp1;</span>
<span class="s">    &quot;&quot;&quot;</span><span class="p">)</span>

<span class="c"># remove lattice points furthest from tax lot having duplicate BBL values</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot; </span>
<span class="s">    drop table if exists tmp1;</span>
<span class="s">    create table tmp1 as</span>
<span class="s">        WITH res AS (</span>
<span class="s">            SELECT</span>
<span class="s">                l.gid l_gid,</span>
<span class="s">                ROW_NUMBER() OVER(PARTITION BY l.bbl</span>
<span class="s">                                  ORDER BY st_distance(pc.geom,l.geom) ASC) AS rk</span>

<span class="s">            FROM scrape_lattice l</span>
<span class="s">            INNER JOIN pluto p on p.bbl=l.bbl</span>
<span class="s">            INNER JOIN pluto_centroids pc on pc.p_gid = p.gid</span>
<span class="s">            )</span>
<span class="s">        SELECT s.l_gid l_gid</span>
<span class="s">            FROM res s</span>
<span class="s">            WHERE s.rk = 1;</span>
<span class="s">    </span>
<span class="s">    drop table if exists tmp2;</span>
<span class="s">    create table tmp2 as</span>
<span class="s">        select *</span>
<span class="s">        from scrape_lattice l</span>
<span class="s">        WHERE EXISTS (select 1 from tmp1 t where t.l_gid=l.gid);</span>
<span class="s">    drop table scrape_lattice;</span>
<span class="s">    alter table tmp2 rename to scrape_lattice;</span>
<span class="s">    </span>
<span class="s">    drop table if exists tmp1;</span>
<span class="s">    drop table if exists tmp2;</span>
<span class="s">    &quot;&quot;&quot;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### __ create pluto centroids table</span>
<span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">    drop table if exists pluto_centroids;</span>

<span class="s">    create table pluto_centroids (</span>
<span class="s">        pc_gid serial primary key,</span>
<span class="s">        p_gid integer,</span>
<span class="s">        bbl numeric,</span>
<span class="s">        geom geometry(Point,4326)</span>
<span class="s">        );</span>

<span class="s">    UPDATE pluto_centroids </span>
<span class="s">    SET pc_gid = nextval(pg_get_serial_sequence(&#39;pluto_centroids&#39;,&#39;pc_gid&#39;));</span>
<span class="s"> </span>
<span class="s">    INSERT INTO pluto_centroids (p_gid,geom,bbl)</span>
<span class="s">    SELECT p.gid,st_centroid(p.geom),p.bbl</span>
<span class="s">    FROM pluto p;</span>

<span class="s">                &quot;&quot;&quot;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### __ create &#39;geocoded&#39;</span>
<span class="n">cmd</span><span class="o">=</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">CREATE TABLE geocoded</span>
<span class="s">(</span>
<span class="s">    id serial primary key,</span>
<span class="s">    addr_valid boolean,</span>
<span class="s">    form_addr text,</span>
<span class="s">    geometry text,</span>
<span class="s">    orig_addr text,</span>
<span class="s">    partial_match boolean,</span>
<span class="s">    res_data text,</span>
<span class="s">    res_i bigint,</span>
<span class="s">    lat double precision,</span>
<span class="s">    lon double precision,</span>
<span class="s">    seamless_id bigint,</span>
<span class="s">    yelp_id bigint,</span>
<span class="s">    mnv_id bigint,</span>
<span class="s">    bbl numeric(10),</span>
<span class="s">    lot_idx numeric(10,5)</span>
<span class="s">);</span>

<span class="s">update geocoded set id = nextval(pg_get_serial_sequence(&#39;geocoded&#39;,&#39;id&#39;));</span>
<span class="s">&quot;&quot;&quot;</span>
<span class="n">conn</span><span class="o">.</span><span class="n">set_isolation_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### __ created lot_pts</span>

<span class="n">Ran</span> <span class="n">this</span> <span class="ow">in</span> <span class="n">pgAdmin3</span> 

    <span class="n">table</span> <span class="n">lot_pts</span> <span class="k">as</span> 
    <span class="n">select</span> <span class="n">p</span><span class="o">.</span><span class="n">Borough</span><span class="p">,</span><span class="n">p</span><span class="o">.</span><span class="n">Block</span><span class="p">,</span><span class="n">p</span><span class="o">.</span><span class="n">Lot</span><span class="p">,</span><span class="n">p</span><span class="o">.</span><span class="n">Address</span><span class="p">,</span><span class="n">l</span><span class="o">.</span><span class="n">SegmentID</span><span class="p">,</span><span class="n">l</span><span class="o">.</span><span class="n">Street</span> 
    <span class="kn">from</span> <span class="nn">pluto</span> <span class="nn">p</span> 
    <span class="n">inner</span> <span class="n">join</span> <span class="n">lion_ways</span> <span class="n">l</span> 
    <span class="n">on</span> <span class="n">l</span><span class="o">.</span><span class="n">Street</span> <span class="o">~*</span> <span class="n">p</span><span class="o">.</span><span class="n">Address</span>
    
    <span class="n">ALTER</span> <span class="n">TABLE</span> <span class="n">lot_pts</span> <span class="n">ADD</span> <span class="n">COLUMN</span> <span class="nb">id</span> <span class="n">SERIAL</span><span class="p">;</span>
    <span class="n">UPDATE</span> <span class="n">lot_pts</span> <span class="n">SET</span> <span class="nb">id</span> <span class="o">=</span> <span class="n">nextval</span><span class="p">(</span><span class="n">pg_get_serial_sequence</span><span class="p">(</span><span class="s">&#39;lot_pts&#39;</span><span class="p">,</span><span class="s">&#39;id&#39;</span><span class="p">));</span>
    <span class="n">ALTER</span> <span class="n">TABLE</span> <span class="n">lot_pts</span> <span class="n">ADD</span> <span class="n">PRIMARY</span> <span class="n">KEY</span> <span class="p">(</span><span class="nb">id</span><span class="p">);</span>

    
    <span class="n">create</span> <span class="n">table</span> <span class="n">lot_pts</span> <span class="p">(</span>
        <span class="n">Borough</span>		<span class="n">character</span> <span class="n">varying</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
        <span class="n">Block</span> 		<span class="n">integer</span><span class="p">,</span>
        <span class="n">Lot</span> 		<span class="n">smallint</span><span class="p">,</span>
        <span class="n">bldg_num</span> 	<span class="n">integer</span><span class="p">,</span>
        <span class="n">bldg_street</span> 	<span class="n">character</span> <span class="n">varying</span><span class="p">(</span><span class="mi">28</span><span class="p">),</span>
        <span class="n">Address</span> 	<span class="n">character</span> <span class="n">varying</span><span class="p">(</span><span class="mi">28</span><span class="p">),</span>
        <span class="n">SegmentID</span> 	<span class="n">character</span> <span class="n">varying</span><span class="p">(</span><span class="mi">254</span><span class="p">),</span>
        <span class="n">Street</span> 		<span class="n">character</span> <span class="n">varying</span><span class="p">(</span><span class="mi">254</span><span class="p">),</span>
        <span class="n">CONSTRAINT</span> <span class="n">bbl</span> <span class="n">PRIMARY</span> <span class="n">KEY</span><span class="p">(</span><span class="n">Borough</span><span class="p">,</span><span class="n">Block</span><span class="p">,</span><span class="n">Lot</span><span class="p">)</span>
    <span class="p">);</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### __ create the topology:</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">    SELECT pgr_createTopology(&#39;lion_ways_slim&#39;, 0.0005, &#39;geom&#39;, &#39;gid&#39;);</span>
<span class="s">    REINDEX INDEX lion_slim_source_idx;</span>
<span class="s">    REINDEX INDEX lion_slim_target_idx;</span>
<span class="s">    &quot;&quot;&quot;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Custom-PostGIS-Functions">Custom PostGIS Functions<a class="anchor-link" href="#Custom-PostGIS-Functions">&#182;</a></h1>
</div>
</div>
</div>

<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### Hausdorff Distance</span>
<span class="n">coords</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">lot</span><span class="o">.</span><span class="n">boundary</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">coords</span><span class="o">.</span><span class="n">xy</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">coords</span><span class="p">)):</span>

    <span class="k">print</span> <span class="n">i</span><span class="p">,</span><span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">    SELECT </span>
<span class="s">        st_HausdorffDistance(</span>
<span class="s">            st_MakeLine(</span>
<span class="s">                st_MakePoint( </span><span class="si">%(x1y1)s</span><span class="s"> ),</span>
<span class="s">                st_MakePoint( </span><span class="si">%(x2y2)s</span><span class="s"> )),</span>
<span class="s">            st_geomfromtext(&#39; </span><span class="si">%(street)s</span><span class="s"> &#39;) ) dist;</span>
<span class="s">    &quot;&quot;&quot;</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\t</span><span class="s">&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span><span class="o">%</span><span class="p">{</span>  	<span class="s">&#39;street&#39;</span><span class="p">:</span><span class="nb">str</span><span class="p">(</span><span class="n">tmp_part_line</span><span class="o">.</span><span class="n">geom</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
            <span class="s">&#39;x1y1&#39;</span> <span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">coords</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s">&#39;()&#39;</span><span class="p">),</span>
            <span class="s">&#39;x2y2&#39;</span> <span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">coords</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s">&#39;()&#39;</span><span class="p">)},</span>
    <span class="n">engine</span><span class="p">)</span><span class="o">.</span><span class="n">dist</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### Azimuth Angles</span>
<span class="n">coords</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">lot</span><span class="o">.</span><span class="n">boundary</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">coords</span><span class="o">.</span><span class="n">xy</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">coords</span><span class="p">)):</span>

	<span class="k">print</span> <span class="n">i</span><span class="p">,</span><span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">	SELECT </span>
<span class="s">    	ST_Azimuth(</span>
<span class="s">            	st_MakePoint( </span><span class="si">%(x1y1)s</span><span class="s"> ),</span>
<span class="s">            	st_MakePoint( </span><span class="si">%(x2y2)s</span><span class="s"> )) seg_ang,</span>
<span class="s">        ST_Azimuth(</span>
<span class="s">        	ST_StartPoint( st_geomfromtext(&#39; </span><span class="si">%(street)s</span><span class="s"> &#39;,4326) ),</span>
<span class="s">            ST_EndPoint( st_geomfromtext(&#39; </span><span class="si">%(street)s</span><span class="s"> &#39;,4326) )) street_ang</span>
<span class="s">	&quot;&quot;&quot;</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\t</span><span class="s">&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span><span class="o">%</span><span class="p">{</span>  	
            <span class="s">&#39;street&#39;</span><span class="p">:</span><span class="nb">str</span><span class="p">(</span><span class="n">tmp_part_line</span><span class="o">.</span><span class="n">geom</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
        	<span class="s">&#39;x1y1&#39;</span> <span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">coords</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s">&#39;()&#39;</span><span class="p">),</span>
        	<span class="s">&#39;x2y2&#39;</span> <span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">coords</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s">&#39;()&#39;</span><span class="p">)</span>
    <span class="p">},</span>	<span class="n">engine</span><span class="p">)</span>

    
<span class="n">plt</span><span class="o">.</span><span class="n">clf</span><span class="p">()</span>
<span class="n">A</span><span class="o">=</span><span class="p">[]</span>
<span class="c">#A.append(line_lot_to_street.geom[0])</span>
<span class="c">#A.append(this_lot_pt[0])</span>
<span class="n">A</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">lot_seg_mid_pt</span><span class="o">.</span><span class="n">geom</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="c">#A.append(lot.geom[0])</span>
<span class="c">#A.append(lot.boundary[0])</span>
<span class="n">A</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">tmp_part_line</span><span class="o">.</span><span class="n">geom</span><span class="p">)</span>
<span class="n">A</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">gd</span><span class="o">.</span><span class="n">read_postgis</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">	SELECT st_MakeLine(</span>
<span class="s">        st_MakePoint( </span><span class="si">%(x1y1)s</span><span class="s"> ),</span>
<span class="s">        st_MakePoint( </span><span class="si">%(x2y2)s</span><span class="s"> )) geom</span>
<span class="s">	&quot;&quot;&quot;</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\t</span><span class="s">&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span><span class="o">%</span><span class="p">{</span>
        	<span class="s">&#39;x1y1&#39;</span> <span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">coords</span><span class="p">[</span><span class="mi">7</span><span class="p">])</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s">&#39;()&#39;</span><span class="p">),</span>
        	<span class="s">&#39;x2y2&#39;</span> <span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">coords</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s">&#39;()&#39;</span><span class="p">)},</span>
	<span class="n">engine</span><span class="p">)</span><span class="o">.</span><span class="n">geom</span><span class="p">)</span>
<span class="n">gd</span><span class="o">.</span><span class="n">GeoSeries</span><span class="p">(</span><span class="n">A</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>



<span class="c"># In[1]:</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### Plot Geoms Using z_get_way_box</span>
<span class="n">A</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">A</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">gd</span><span class="o">.</span><span class="n">read_postgis</span><span class="p">(</span><span class="s">&quot;select z_get_way_box(&#39;14 st&#39;,&#39;10 ave&#39;,&#39;59 st&#39;,&#39;1 ave&#39;) geom&quot;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span><span class="o">.</span><span class="n">geom</span><span class="p">)</span>
<span class="c"># A.extend(gd.read_postgis(&quot;select ST_MinimumBoundingCircle(z_get_way_box(&#39;14 st&#39;,&#39;10 ave&#39;,&#39;59 st&#39;,&#39;1 ave&#39;)) geom&quot;,engine).geom)</span>
<span class="n">A</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
    <span class="n">gd</span><span class="o">.</span><span class="n">read_postgis</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">    select st_closestpoint(st_intersection(st_buffer(pt,.003),nodes),pt) geom</span>
<span class="s">    from</span>
<span class="s">        (select st_geomfromtext(&#39;POINT (-73.97832978915525 40.75142795208318)&#39;) pt) as t1,</span>
<span class="s">        (select the_geom nodes from mn_ways_vertices_pgr) as t2</span>
<span class="s">        &quot;&quot;&quot;</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">),</span><span class="n">engine</span><span class="p">)</span><span class="o">.</span><span class="n">geom</span><span class="p">)</span>
<span class="c"># A.extend(g.geom)  ## combined numbered streets (e/w)</span>
<span class="c"># A.extend(gd.GeoDataFrame(save_for_later).geom)  ## numbered streets not combined</span>

<span class="c">### MN_VERTICES IN BOX</span>
<span class="n">cmd</span> <span class="o">=</span>   <span class="s">&quot;&quot;&quot;</span>
<span class="s">        select the_geom geom </span>
<span class="s">        from </span>
<span class="s">        </span>
<span class="s">            mn_ways_vertices_pgr,</span>
<span class="s">            </span>
<span class="s">            (select z_get_way_box(&#39;14 st&#39;,&#39;10 ave&#39;,&#39;59 st&#39;,&#39;1 ave&#39;) box_geom) as t</span>
<span class="s">        where st_within(the_geom,box_geom)</span>
<span class="s">        &quot;&quot;&quot;</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span><span class="s">&#39; &#39;</span><span class="p">)</span>
<span class="c"># A.extend(gd.read_postgis(cmd,engine).geom)</span>

<span class="c">### MN_WAYS IN BOX</span>
<span class="n">cmd</span> <span class="o">=</span>   <span class="s">&quot;&quot;&quot;</span>
<span class="s">        select st_intersection(m.the_geom,box_geom) geom </span>
<span class="s">        from </span>
<span class="s">            (select z_get_way_box(&#39;14 st&#39;,&#39;10 ave&#39;,&#39;59 st&#39;,&#39;1 ave&#39;) box_geom) as t,</span>
<span class="s">            </span>
<span class="s">            mn_ways m</span>
<span class="s">            </span>
<span class="s">        &quot;&quot;&quot;</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span><span class="s">&#39; &#39;</span><span class="p">)</span>
<span class="c"># A.extend(gd.read_postgis(cmd,engine).geom)</span>

<span class="c">### AVENUES IN BOX</span>
<span class="n">cmd</span> <span class="o">=</span>   <span class="s">&quot;&quot;&quot;</span>
<span class="s">        select st_intersection(geom,box_geom) geom </span>
<span class="s">        from </span>
<span class="s">            address_idx,</span>
<span class="s">            (select z_get_way_box(&#39;14 st&#39;,&#39;10 ave&#39;,&#39;59 st&#39;,&#39;1 ave&#39;) box_geom) as t</span>
<span class="s">        where geom is not null and street ~* &#39;ave&#39;&quot;&quot;&quot;</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span><span class="s">&#39; &#39;</span><span class="p">)</span>
<span class="c"># A.extend(gd.read_postgis(cmd,engine).geom)</span>

<span class="c">### VENDORS IN BOX</span>
<span class="n">cmd</span> <span class="o">=</span>   <span class="s">&quot;&quot;&quot;</span>
<span class="s">        select st_intersection(geom,box_geom) geom </span>
<span class="s">        from </span>
<span class="s">            vendors,</span>
<span class="s">            (select z_get_way_box(&#39;14 st&#39;,&#39;10 ave&#39;,&#39;59 st&#39;,&#39;1 ave&#39;) box_geom) as t</span>
<span class="s">        where geom is not null&quot;&quot;&quot;</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span><span class="s">&#39; &#39;</span><span class="p">)</span>
<span class="c"># A.extend(gd.read_postgis(cmd,engine).geom)</span>

<span class="c"># geom_inside_street_box(ways,geom_table,geom_label,table_cols=None,conditions=None)</span>

<span class="n">gd</span><span class="o">.</span><span class="n">GeoSeries</span><span class="p">(</span><span class="n">A</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">alpha</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span><span class="n">fig_size</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">8</span><span class="p">))</span>


<span class="c"># In[137]:</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Useful-SQL/PG-SQL-Queries">Useful SQL/PG SQL Queries<a class="anchor-link" href="#Useful-SQL/PG-SQL-Queries">&#182;</a></h1>
</div>
</div>
</div>

<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre>      
<span class="n">Get</span> <span class="n">PostGIS</span> <span class="n">version</span><span class="p">:</span>

    <span class="n">SELECT</span> <span class="n">PostGIS_full_version</span><span class="p">();</span>

<span class="n">Get</span> <span class="n">GPS</span> <span class="n">Coordinates</span><span class="p">:</span>

    <span class="n">SELECT</span> <span class="n">ST_X</span><span class="p">(</span><span class="n">geom</span><span class="p">),</span> <span class="n">ST_Y</span><span class="p">(</span><span class="n">geom</span><span class="p">),</span> <span class="n">ST_AsText</span><span class="p">(</span><span class="n">geom</span><span class="p">)</span> <span class="n">FROM</span> <span class="n">lion_nodes</span> <span class="n">LIMIT</span> <span class="mi">1</span><span class="p">;</span>

<span class="n">Create</span> <span class="n">Topology</span> <span class="k">for</span> <span class="n">lion_ways</span><span class="p">:</span>

    <span class="n">ALTER</span> <span class="n">TABLE</span> <span class="n">lion_ways</span> <span class="n">ADD</span> <span class="n">COLUMN</span> <span class="s">&quot;source&quot;</span> <span class="n">integer</span><span class="p">;</span>
    <span class="n">ALTER</span> <span class="n">TABLE</span> <span class="n">lion_ways</span> <span class="n">ADD</span> <span class="n">COLUMN</span> <span class="s">&quot;target&quot;</span> <span class="n">integer</span><span class="p">;</span>
    <span class="n">SELECT</span> <span class="n">pgr_createTopology</span><span class="p">(</span><span class="s">&#39;lion_ways&#39;</span><span class="p">,</span> <span class="mf">0.00001</span><span class="p">,</span> <span class="s">&#39;geom&#39;</span><span class="p">,</span> <span class="s">&#39;gid&#39;</span><span class="p">);</span>
    <span class="n">CREATE</span> <span class="n">INDEX</span> <span class="n">lion_source_idx</span> <span class="n">ON</span> <span class="n">lion_ways</span><span class="p">(</span><span class="s">&quot;source&quot;</span><span class="p">);</span>
    <span class="n">CREATE</span> <span class="n">INDEX</span> <span class="n">lion_target_idx</span> <span class="n">ON</span> <span class="n">lion_ways</span><span class="p">(</span><span class="s">&quot;target&quot;</span><span class="p">);</span>

<span class="n">Add</span> <span class="n">Routing</span> <span class="n">Prerequisites</span><span class="p">:</span>

    <span class="n">ALTER</span> <span class="n">TABLE</span> <span class="n">lion_ways</span> <span class="n">ADD</span> <span class="n">COLUMN</span> <span class="n">reverse_cost</span> <span class="n">double</span> <span class="n">precision</span><span class="p">;</span>
    <span class="n">UPDATE</span> <span class="n">lion_ways</span> <span class="n">SET</span> <span class="n">reverse_cost</span> <span class="o">=</span> <span class="n">shape_leng</span><span class="p">;</span>


<span class="n">Get</span> <span class="n">data</span> <span class="k">with</span> <span class="n">street</span> <span class="n">name</span> <span class="n">containing</span> <span class="s">&#39;madison&#39;</span><span class="p">:</span>

    <span class="n">SELECT</span> <span class="o">*</span> <span class="kn">from</span> <span class="nn">lion_ways</span> <span class="nn">where</span> <span class="nn">lion_ways.street</span> <span class="o">~*</span> <span class="s">&#39;madison&#39;</span><span class="p">;</span>
    <span class="n">SELECT</span> <span class="o">*</span> <span class="kn">from</span> <span class="nn">pluto</span> <span class="nn">where</span> <span class="nn">pluto.address</span> <span class="o">~*</span> <span class="s">&#39;madison&#39;</span> <span class="n">limit</span> <span class="mi">1</span><span class="p">;</span>

<span class="n">Copy</span> <span class="kn">from</span> <span class="nn">Pandas</span> <span class="nn">Import</span> <span class="nn">Table</span> <span class="nn">to</span> <span class="nn">Pluto</span><span class="p">:</span>

    <span class="n">UPDATE</span> <span class="n">pluto</span> <span class="n">SET</span> <span class="n">bldg_num</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="n">update</span> <span class="n">pluto</span> <span class="nb">set</span> <span class="n">bldg_num</span> <span class="o">=</span> <span class="n">info</span><span class="o">.</span><span class="n">bldg_num</span>
        <span class="kn">from</span> <span class="nn">pluto_info</span> <span class="nn">info</span> <span class="nn">where</span> <span class="nn">info.gid</span> <span class="o">=</span> <span class="n">pluto</span><span class="o">.</span><span class="n">gid</span><span class="p">;</span>

    <span class="n">UPDATE</span> <span class="n">pluto</span> <span class="n">SET</span> <span class="n">bldg_street</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">;</span>
    <span class="n">update</span> <span class="n">pluto</span> <span class="nb">set</span> <span class="n">bldg_street</span> <span class="o">=</span> <span class="n">info</span><span class="o">.</span><span class="n">bldg_street</span>
        <span class="kn">from</span> <span class="nn">pluto_info</span> <span class="nn">info</span> <span class="nn">where</span> <span class="nn">info.gid</span> <span class="o">=</span> <span class="n">pluto</span><span class="o">.</span><span class="n">gid</span><span class="p">;</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Useful-PostGIS-Functions:">Useful PostGIS Functions:<a class="anchor-link" href="#Useful-PostGIS-Functions:">&#182;</a></h1>
</div>
</div>
</div>

<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Conversion-Functions">Conversion Functions<a class="anchor-link" href="#Conversion-Functions">&#182;</a></h2>
</div>
</div>
</div>

<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre>    <span class="n">multi</span><span class="o">-</span><span class="n">poly</span> <span class="n">to</span> <span class="n">poly</span><span class="p">:</span>

        <span class="n">select</span> <span class="n">ST_AsText</span><span class="p">((</span><span class="n">ST_Dump</span><span class="p">(</span><span class="n">pluto</span><span class="o">.</span><span class="n">geom</span><span class="p">))</span><span class="o">.</span><span class="n">geom</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">pluto</span> <span class="nn">where</span> <span class="nn">block</span><span class="o">=</span><span class="mi">860</span> <span class="ow">and</span> <span class="n">lot</span><span class="o">=</span><span class="mi">26</span> <span class="n">limit</span> <span class="mi">100</span><span class="p">;</span>
    
    
    <span class="n">Linear</span> <span class="n">Referencing</span>

        <span class="nb">float</span> <span class="n">ST_LineLocatePoint</span><span class="p">(</span><span class="n">geometry</span> <span class="n">a_linestring</span><span class="p">,</span> <span class="n">geometry</span> <span class="n">a_point</span><span class="p">);</span>
    
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Geometry-Constructors">Geometry Constructors<a class="anchor-link" href="#Geometry-Constructors">&#182;</a></h2>
</div>
</div>
</div>

<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre>    <span class="n">Polygon</span> <span class="n">geometry</span> <span class="n">ST_BdPolyFromText</span><span class="p">(</span><span class="n">text</span> <span class="n">WKT</span> <span class="n">MultiLineString</span><span class="p">,</span> <span class="n">integer</span> <span class="n">srid</span><span class="p">)</span>
    
    <span class="n">MultiPolygon</span> <span class="n">geometry</span> <span class="n">ST_BdMPolyFromText</span><span class="p">(</span><span class="n">text</span> <span class="n">WKT</span> <span class="n">MultiLineString</span><span class="p">,</span> <span class="n">integer</span> <span class="n">srid</span><span class="p">);</span>
    
    <span class="n">geometry</span> <span class="n">ST_GeomCollFromText</span><span class="p">(</span><span class="n">text</span> <span class="n">WKT</span><span class="p">,</span> <span class="n">integer</span> <span class="n">srid</span><span class="p">);</span> 
    <span class="n">geometry</span> <span class="n">ST_GeomCollFromText</span><span class="p">(</span><span class="n">text</span> <span class="n">WKT</span><span class="p">);</span>
    
    <span class="n">geometry</span> <span class="n">ST_GeomFromText</span><span class="p">(</span><span class="n">text</span> <span class="n">WKT</span><span class="p">);</span>
    <span class="n">geometry</span> <span class="n">ST_GeomFromText</span><span class="p">(</span><span class="n">text</span> <span class="n">WKT</span><span class="p">,</span> <span class="n">integer</span> <span class="n">srid</span><span class="p">);</span>
    
    <span class="n">geometry</span> <span class="n">ST_GeomFromGeoJSON</span><span class="p">(</span><span class="n">text</span> <span class="n">geomjson</span><span class="p">);</span>
    
    <span class="n">geometry</span> <span class="n">ST_LineFromMultiPoint</span><span class="p">(</span><span class="n">geometry</span> <span class="n">aMultiPoint</span><span class="p">);</span>
    
    <span class="n">geometry</span> <span class="n">ST_LineFromText</span><span class="p">(</span><span class="n">text</span> <span class="n">WKT</span><span class="p">);</span>
    <span class="n">geometry</span> <span class="n">ST_LineFromText</span><span class="p">(</span><span class="n">text</span> <span class="n">WKT</span><span class="p">,</span> <span class="n">integer</span> <span class="n">srid</span><span class="p">);</span>
    
        <span class="n">SELECT</span> <span class="n">ST_LineFromText</span><span class="p">(</span><span class="err">â</span><span class="n">LINESTRING</span><span class="p">(</span><span class="mi">1</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">)</span><span class="err">â</span><span class="p">)</span> <span class="n">AS</span> <span class="n">aline</span><span class="p">,</span> <span class="n">ST_LineFromText</span><span class="p">(</span><span class="err">â</span><span class="n">POINT</span><span class="p">(</span><span class="mi">1</span> <span class="mi">2</span><span class="p">)</span><span class="err">â</span><span class="p">)</span> <span class="n">AS</span> <span class="n">null_return</span><span class="p">;</span>

    <span class="n">box2d</span> <span class="n">ST_MakeBox2D</span><span class="p">(</span><span class="n">geometry</span> <span class="n">pointLowLeft</span><span class="p">,</span> <span class="n">geometry</span> <span class="n">pointUpRight</span><span class="p">);</span>
    
        <span class="n">SELECT</span> <span class="n">feature_id</span><span class="p">,</span> <span class="n">feature_name</span><span class="p">,</span> <span class="n">the_geom</span>
        <span class="n">FROM</span> <span class="n">features</span>
        <span class="n">WHERE</span> <span class="n">the_geom</span> <span class="o">&amp;&amp;</span> <span class="n">ST_SetSRID</span><span class="p">(</span><span class="n">ST_MakeBox2D</span><span class="p">(</span><span class="n">ST_Point</span><span class="p">(</span><span class="o">-</span><span class="mf">989502.1875</span><span class="p">,</span> <span class="mf">528439.5625</span><span class="p">),</span>
          <span class="n">ST_Point</span><span class="p">(</span><span class="o">-</span><span class="mf">987121.375</span> <span class="p">,</span><span class="mf">529933.1875</span><span class="p">)),</span><span class="mi">2163</span><span class="p">)</span>

    <span class="n">point</span><span class="o">-</span><span class="ow">or</span><span class="o">-</span><span class="n">line</span> <span class="n">geometry</span> <span class="n">ST_MakeLine</span><span class="p">(</span><span class="n">geometry</span> <span class="nb">set</span> <span class="n">geoms</span><span class="p">);</span>
    <span class="n">array</span> <span class="n">of</span> <span class="n">point</span><span class="o">-</span><span class="ow">or</span><span class="o">-</span><span class="n">lines</span> <span class="n">geometry</span> <span class="n">ST_MakeLine</span><span class="p">(</span><span class="n">geometry</span> <span class="n">geom1</span><span class="p">,</span> <span class="n">geometry</span> <span class="n">geom2</span><span class="p">);</span> 
    <span class="n">two</span> <span class="n">point</span><span class="o">-</span><span class="ow">or</span><span class="o">-</span><span class="n">line</span> <span class="n">geometry</span> <span class="n">ST_MakeLine</span><span class="p">(</span><span class="n">geometry</span><span class="p">[]</span> <span class="n">geoms_array</span><span class="p">);</span>
    
    <span class="n">closed</span> <span class="n">lines</span> <span class="n">geometry</span> <span class="n">ST_MakePolygon</span><span class="p">(</span><span class="n">geometry</span> <span class="n">linestring</span><span class="p">);</span>
    <span class="n">closed</span> <span class="n">lines</span> <span class="n">geometry</span> <span class="n">ST_MakePolygon</span><span class="p">(</span><span class="n">geometry</span> <span class="n">outerlinestring</span><span class="p">,</span> <span class="n">geometry</span><span class="p">[]</span> <span class="n">interiorlinestrings</span><span class="p">);</span>
    
    <span class="n">geometry</span> <span class="n">ST_MakePoint</span><span class="p">(</span><span class="n">double</span> <span class="n">precision</span> <span class="n">x</span><span class="p">,</span> <span class="n">double</span> <span class="n">precision</span> <span class="n">y</span><span class="p">);</span>
    
    <span class="n">geometry</span> <span class="n">ST_MakePointM</span><span class="p">(</span><span class="nb">float</span> <span class="n">x</span><span class="p">,</span> <span class="nb">float</span> <span class="n">y</span><span class="p">,</span> <span class="nb">float</span> <span class="n">m</span><span class="p">);</span>
    
    <span class="n">geometry</span> <span class="n">ST_MLineFromText</span><span class="p">(</span><span class="n">text</span> <span class="n">WKT</span><span class="p">,</span> <span class="n">integer</span> <span class="n">srid</span><span class="p">);</span> 
    <span class="n">geometry</span> <span class="n">ST_MLineFromText</span><span class="p">(</span><span class="n">text</span> <span class="n">WKT</span><span class="p">);</span>

    <span class="n">ST_MPointFromText</span>
    <span class="n">ST_MPolyFromText</span>
    
    <span class="n">geometry</span> <span class="n">ST_Point</span><span class="p">(</span><span class="nb">float</span> <span class="n">x_lon</span><span class="p">,</span> <span class="nb">float</span> <span class="n">y_lat</span><span class="p">);</span>
    
    <span class="n">geometry</span> <span class="n">ST_PointFromText</span><span class="p">(</span><span class="n">text</span> <span class="n">WKT</span><span class="p">);</span>
    <span class="n">geometry</span> <span class="n">ST_PointFromText</span><span class="p">(</span><span class="n">text</span> <span class="n">WKT</span><span class="p">,</span> <span class="n">integer</span> <span class="n">srid</span><span class="p">);</span>
    
    <span class="n">geometry</span> <span class="n">ST_PolygonFromText</span><span class="p">(</span><span class="n">text</span> <span class="n">WKT</span><span class="p">);</span>
    <span class="n">geometry</span> <span class="n">ST_PolygonFromText</span><span class="p">(</span><span class="n">text</span> <span class="n">WKT</span><span class="p">,</span> <span class="n">integer</span> <span class="n">srid</span><span class="p">);</span>
    
    <span class="n">text</span> <span class="n">GeometryType</span><span class="p">(</span><span class="n">geometry</span> <span class="n">geomA</span><span class="p">);</span>
        <span class="c">#returns geom_type as text</span>
    <span class="n">text</span> <span class="n">ST_GeometryType</span><span class="p">(</span><span class="n">geometry</span> <span class="n">g1</span><span class="p">);</span>
        <span class="c"># returns string with &quot;ST_&quot;</span>
        
    <span class="n">geometry</span> <span class="n">ST_Boundary</span><span class="p">(</span><span class="n">geometry</span> <span class="n">geomA</span><span class="p">);</span>
    
    <span class="n">geometry</span> <span class="n">ST_StartPoint</span><span class="p">(</span><span class="n">geometry</span> <span class="n">geomA</span><span class="p">);</span>
    
    <span class="n">boolean</span> <span class="n">ST_EndPoint</span><span class="p">(</span><span class="n">geometry</span> <span class="n">g</span><span class="p">);</span>
        <span class="c"># returns linestring endpoint</span>
        <span class="n">SELECT</span> <span class="n">ST_AsText</span><span class="p">(</span><span class="n">ST_EndPoint</span><span class="p">(</span><span class="err">â</span><span class="n">LINESTRING</span><span class="p">(</span><span class="mi">1</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span> <span class="mi">3</span><span class="p">)</span><span class="err">â</span><span class="p">::</span><span class="n">geometry</span><span class="p">));</span>
    
    <span class="n">geometry</span> <span class="n">ST_Envelope</span><span class="p">(</span><span class="n">geometry</span> <span class="n">g1</span><span class="p">);</span>
        <span class="c">#Returns the float8 minimum bounding box for the supplied geometry, as a geometry. </span>
        <span class="c">#The polygon is defined by the corner points of the bounding box </span>
        <span class="c">#((MINX, MINY), (MINX, MAXY), (MAXX, MAXY), (MAXX, MINY), (MINX, MINY)).</span>
    
    <span class="n">linestring</span> <span class="n">geometry</span> <span class="n">ST_ExteriorRing</span><span class="p">(</span><span class="n">geometry</span> <span class="n">a_polygon</span><span class="p">);</span>
        <span class="c">#polygon only</span>
    
    <span class="n">linestring</span> <span class="n">geometry</span> <span class="n">ST_InteriorRingN</span><span class="p">(</span><span class="n">geometry</span> <span class="n">a_polygon</span><span class="p">,</span> <span class="n">integer</span> <span class="n">n</span><span class="p">);</span>
    
    <span class="n">boolean</span> <span class="n">ST_IsClosed</span><span class="p">(</span><span class="n">geometry</span> <span class="n">g</span><span class="p">);</span>
    
    <span class="n">boolean</span> <span class="n">ST_IsCollection</span><span class="p">(</span><span class="n">geometry</span> <span class="n">g</span><span class="p">);</span>
        <span class="err">â¢</span> <span class="n">GEOMETRYCOLLECTION</span>
        <span class="err">â¢</span> <span class="n">MULTI</span><span class="p">{</span><span class="n">POINT</span><span class="p">,</span><span class="n">POLYGON</span><span class="p">,</span><span class="n">LINESTRING</span><span class="p">,</span><span class="n">CURVE</span><span class="p">,</span><span class="n">SURFACE</span><span class="p">}</span> 
        <span class="err">â¢</span> <span class="n">COMPOUNDCURVE</span>
    
    <span class="n">boolean</span> <span class="n">ST_IsEmpty</span><span class="p">(</span><span class="n">geometry</span> <span class="n">geomA</span><span class="p">);</span>
    
    <span class="n">boolean</span> <span class="n">ST_IsRing</span><span class="p">(</span><span class="n">geometry</span> <span class="n">g</span><span class="p">);</span>
        <span class="n">Returns</span> <span class="n">TRUE</span> <span class="k">if</span> <span class="n">this</span> <span class="n">LINESTRING</span> <span class="ow">is</span> <span class="n">both</span> 
        <span class="n">ST_IsClosed</span> <span class="p">(</span><span class="n">ST_StartPoint</span><span class="p">((</span><span class="n">g</span><span class="p">))</span> <span class="o">~=</span> <span class="n">ST_Endpoint</span><span class="p">((</span><span class="n">g</span><span class="p">)))</span> <span class="ow">and</span> 
        <span class="n">ST_IsSimple</span> <span class="p">(</span><span class="n">does</span> <span class="ow">not</span> <span class="bp">self</span> <span class="n">intersect</span><span class="p">)</span><span class="o">.</span>
    
    <span class="n">boolean</span> <span class="n">ST_IsSimple</span><span class="p">(</span><span class="n">geometry</span> <span class="n">geomA</span><span class="p">);</span>
        <span class="c">#no anomalous geometric points, such as self intersection or self tangency</span>
    
    <span class="nb">float</span> <span class="n">ST_M</span><span class="p">(</span><span class="n">geometry</span> <span class="n">a_point</span><span class="p">);</span>
    
    <span class="n">integer</span> <span class="n">ST_NPoints</span><span class="p">(</span><span class="n">geometry</span> <span class="n">g1</span><span class="p">);</span>
        <span class="c">#Return the number of points (vertexes) in a geometry.</span>
    
    <span class="n">integer</span> <span class="n">ST_NumPoints</span><span class="p">(</span><span class="n">geometry</span> <span class="n">g1</span><span class="p">);</span>
        <span class="c">#number of points in an ST_LineString or ST_CircularString value.</span>
    
    <span class="n">geometry</span> <span class="n">ST_PointN</span><span class="p">(</span><span class="n">geometry</span> <span class="n">a_linestring</span><span class="p">,</span> <span class="n">integer</span> <span class="n">n</span><span class="p">);</span>
        <span class="c">#NULL if there is no linestring in the geometry.</span>
    
    <span class="n">text</span> <span class="n">ST_Summary</span><span class="p">(</span><span class="n">geometry</span> <span class="n">g</span><span class="p">);</span>
    
    <span class="nb">float</span> <span class="n">ST_X</span><span class="p">(</span><span class="n">geometry</span> <span class="n">a_point</span><span class="p">);</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Geometry-Editors">Geometry Editors<a class="anchor-link" href="#Geometry-Editors">&#182;</a></h2>
</div>
</div>
</div>

<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre>    <span class="n">geometry</span> <span class="n">ST_RemovePoint</span><span class="p">(</span><span class="n">geometry</span> <span class="n">linestring</span><span class="p">,</span> <span class="n">integer</span> <span class="n">offset</span><span class="p">);</span>
    <span class="n">geometry</span> <span class="n">ST_AddPoint</span><span class="p">(</span><span class="n">geometry</span> <span class="n">linestring</span><span class="p">,</span> <span class="n">geometry</span> <span class="n">point</span><span class="p">);</span>
    <span class="n">geometry</span> <span class="n">ST_AddPoint</span><span class="p">(</span><span class="n">geometry</span> <span class="n">linestring</span><span class="p">,</span> <span class="n">geometry</span> <span class="n">point</span><span class="p">,</span> <span class="n">integer</span> <span class="n">position</span><span class="p">);</span>
        <span class="n">Adds</span> <span class="n">a</span> <span class="n">point</span> <span class="n">to</span> <span class="n">a</span> <span class="n">LineString</span> <span class="n">before</span> <span class="n">point</span> <span class="o">&lt;</span><span class="n">position</span><span class="o">&gt;</span> <span class="p">(</span><span class="mi">0</span><span class="o">-</span><span class="n">based</span> <span class="n">index</span><span class="p">)</span><span class="o">.</span> 
        <span class="n">Third</span> <span class="n">parameter</span> <span class="n">can</span> <span class="n">be</span> <span class="n">omitted</span> <span class="ow">or</span> <span class="nb">set</span> <span class="n">to</span> <span class="o">-</span><span class="mi">1</span> <span class="k">for</span> <span class="n">appending</span><span class="o">.</span>
        
    <span class="p">[</span> <span class="n">LineStrings</span> <span class="p">]</span> <span class="n">geometry</span> <span class="n">ST_LineMerge</span><span class="p">(</span><span class="n">geometry</span> <span class="n">amultilinestring</span><span class="p">);</span>
    
    <span class="n">geometry</span> <span class="n">ST_CollectionHomogenize</span><span class="p">(</span><span class="n">geometry</span> <span class="n">collection</span><span class="p">);</span>
    
    <span class="n">geometry</span> <span class="n">ST_Multi</span><span class="p">(</span><span class="n">geometry</span> <span class="n">g1</span><span class="p">);</span>
        <span class="c"># g1 --&gt; ST_GeomFromText</span>
    
    <span class="n">geometry</span> <span class="n">ST_Reverse</span><span class="p">(</span><span class="n">geometry</span> <span class="n">g1</span><span class="p">);</span>
    
    <span class="n">geometry</span> <span class="n">ST_Segmentize</span><span class="p">(</span><span class="n">geometry</span> <span class="n">geom</span><span class="p">,</span> <span class="nb">float</span> <span class="n">max_segment_length</span><span class="p">);</span>
    
    <span class="n">geometry</span> <span class="n">ST_SetPoint</span><span class="p">(</span><span class="n">geometry</span> <span class="n">linestring</span><span class="p">,</span> <span class="n">integer</span> <span class="n">zerobasedposition</span><span class="p">,</span> <span class="n">geometry</span> <span class="n">point</span><span class="p">);</span>
    
    <span class="n">geometry</span> <span class="n">ST_Snap</span><span class="p">(</span><span class="n">geometry</span> <span class="nb">input</span><span class="p">,</span> <span class="n">geometry</span> <span class="n">reference</span><span class="p">,</span> <span class="nb">float</span> <span class="n">tolerance</span><span class="p">);</span>
        <span class="c"># vertices and segments of a geometry with another Geometryâs vertices</span>
    
    <span class="n">geometry</span> <span class="n">ST_TransScale</span><span class="p">(</span><span class="n">geometry</span> <span class="n">geomA</span><span class="p">,</span> <span class="nb">float</span> <span class="n">deltaX</span><span class="p">,</span> <span class="nb">float</span> <span class="n">deltaY</span><span class="p">,</span> <span class="nb">float</span> <span class="n">XFactor</span><span class="p">,</span> <span class="nb">float</span> <span class="n">YFactor</span><span class="p">);</span>
        <span class="n">Translates</span> <span class="n">the</span> <span class="n">geometry</span> <span class="n">using</span> <span class="n">the</span> <span class="n">deltaX</span> <span class="ow">and</span> <span class="n">deltaY</span> <span class="n">args</span><span class="p">,</span> 
        <span class="n">then</span> <span class="n">scales</span> <span class="n">it</span> <span class="n">using</span> <span class="n">the</span> <span class="n">XFactor</span><span class="p">,</span> <span class="n">YFactor</span> <span class="n">args</span><span class="p">,</span> <span class="n">working</span> <span class="ow">in</span> <span class="mi">2</span><span class="n">D</span> <span class="n">only</span><span class="o">.</span>
    
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Geometry-Outputs">Geometry Outputs<a class="anchor-link" href="#Geometry-Outputs">&#182;</a></h2>
</div>
</div>
</div>

<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre>    
    <span class="n">text</span> <span class="n">ST_AsEWKT</span><span class="p">(</span><span class="n">geometry</span> <span class="n">g1</span><span class="p">);</span>
    
    <span class="n">text</span> <span class="n">ST_AsGeoJSON</span><span class="p">(</span><span class="n">geometry</span> <span class="n">geom</span><span class="p">,</span> <span class="n">integer</span> <span class="n">maxdecimaldigits</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">integer</span> <span class="n">options</span><span class="o">=</span><span class="mi">0</span><span class="p">);</span>
    
    <span class="n">text</span> <span class="n">ST_AsText</span><span class="p">(</span><span class="n">geometry</span> <span class="n">g1</span><span class="p">);</span>
    
    <span class="n">text</span> <span class="n">ST_AsLatLonText</span><span class="p">(</span><span class="n">geometry</span> <span class="n">pt</span><span class="p">,</span> <span class="n">text</span> <span class="n">format</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">);</span>
        <span class="c"># Returns the Degrees, Minutes, Seconds representation of the point.</span>
        <span class="c"># SELECT (ST_AsLatLonText(âPOINT (-3.2342342 -2.32498)â, âD.DDDD degrees Câ));</span>
    
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Operators">Operators<a class="anchor-link" href="#Operators">&#182;</a></h2>
</div>
</div>
</div>

<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre>    
    <span class="n">Match</span> <span class="s">&quot;&amp;&amp;&quot;</span> 
        <span class="o">&amp;&amp;</span><span class="p">(</span> <span class="n">geometry</span> <span class="n">A</span> <span class="p">,</span> <span class="n">geometry</span> <span class="n">B</span> <span class="p">);</span>
    <span class="n">Overlap</span> <span class="s">&quot;&amp;&lt;&quot;</span><span class="p">,</span><span class="s">&quot;&gt;&amp;&quot;</span>
    <span class="n">Overlap</span><span class="o">/</span><span class="n">below</span> <span class="s">&quot;&amp;&lt;|&quot;</span>
    <span class="n">Strictly</span> <span class="n">right</span><span class="o">/</span><span class="n">left</span> <span class="s">&quot;&lt;&lt;&quot;</span> <span class="s">&quot;&gt;&gt;&quot;</span>
    <span class="o">*</span><span class="n">Equals</span> <span class="s">&quot;=&quot;</span> <span class="n">ONLY</span> <span class="n">returns</span> <span class="n">true</span> <span class="k">if</span> <span class="n">bounding</span> <span class="n">box</span> <span class="ow">is</span> <span class="n">same</span><span class="p">,</span> <span class="n">geom</span> <span class="n">NOT</span> <span class="n">matter</span>
    <span class="n">Contained</span> <span class="n">by</span> <span class="s">&quot;@&quot;</span>
    <span class="n">Contains</span> <span class="n">another</span> <span class="s">&quot;~&quot;</span>
        <span class="o">~</span><span class="p">(</span> <span class="n">geometry</span> <span class="n">A</span> <span class="p">,</span> <span class="n">geometry</span> <span class="n">B</span> <span class="p">);</span>
    <span class="n">Distance</span> <span class="s">&quot;&lt;-&gt;&quot;</span>
    <span class="n">Distance</span> <span class="n">b</span><span class="o">/</span><span class="n">t</span> <span class="n">bounding</span> <span class="n">boxes</span> <span class="s">&quot;&lt;#&gt;&quot;</span>
    
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Relationships-&amp;-Measurements">Relationships &amp; Measurements<a class="anchor-link" href="#Relationships-&amp;-Measurements">&#182;</a></h2>
</div>
</div>
</div>

<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre>    
    <span class="nb">float</span> <span class="n">ST_Area</span><span class="p">(</span><span class="n">geometry</span> <span class="n">g1</span><span class="p">);</span>
    
    <span class="n">geometry</span> <span class="n">ST_Centroid</span><span class="p">(</span><span class="n">geometry</span> <span class="n">g1</span><span class="p">);</span>
    
    <span class="n">geometry</span> <span class="n">ST_ClosestPoint</span><span class="p">(</span><span class="n">geometry</span> <span class="n">g1</span><span class="p">,</span> <span class="n">geometry</span> <span class="n">g2</span><span class="p">);</span>

    <span class="n">boolean</span> <span class="n">ST_Contains</span><span class="p">(</span><span class="n">geometry</span> <span class="n">geomA</span><span class="p">,</span> <span class="n">geometry</span> <span class="n">geomB</span><span class="p">);</span>
    
        <span class="n">A</span> <span class="n">circle</span> <span class="n">within</span> <span class="n">a</span> <span class="n">circle</span>
            <span class="n">SELECT</span> <span class="n">ST_Contains</span><span class="p">(</span><span class="n">smallc</span><span class="p">,</span> <span class="n">bigc</span><span class="p">)</span> <span class="n">As</span> <span class="n">smallcontainsbig</span><span class="p">,</span>
                 <span class="n">ST_Contains</span><span class="p">(</span><span class="n">bigc</span><span class="p">,</span><span class="n">smallc</span><span class="p">)</span> <span class="n">As</span> <span class="n">bigcontainssmall</span><span class="p">,</span>
                 <span class="n">ST_Contains</span><span class="p">(</span><span class="n">bigc</span><span class="p">,</span> <span class="n">ST_Union</span><span class="p">(</span><span class="n">smallc</span><span class="p">,</span> <span class="n">bigc</span><span class="p">))</span> <span class="k">as</span> <span class="n">bigcontainsunion</span><span class="p">,</span>
                 <span class="n">ST_Equals</span><span class="p">(</span><span class="n">bigc</span><span class="p">,</span> <span class="n">ST_Union</span><span class="p">(</span><span class="n">smallc</span><span class="p">,</span> <span class="n">bigc</span><span class="p">))</span> <span class="k">as</span> <span class="n">bigisunion</span><span class="p">,</span>
                 <span class="n">ST_Covers</span><span class="p">(</span><span class="n">bigc</span><span class="p">,</span> <span class="n">ST_ExteriorRing</span><span class="p">(</span><span class="n">bigc</span><span class="p">))</span> <span class="n">As</span> <span class="n">bigcoversexterior</span><span class="p">,</span>
                 <span class="n">ST_Contains</span><span class="p">(</span><span class="n">bigc</span><span class="p">,</span> <span class="n">ST_ExteriorRing</span><span class="p">(</span><span class="n">bigc</span><span class="p">))</span> <span class="n">As</span> <span class="n">bigcontainsexterior</span>
            <span class="n">FROM</span> <span class="p">(</span><span class="n">SELECT</span> <span class="n">ST_Buffer</span><span class="p">(</span><span class="n">ST_GeomFromText</span><span class="p">(</span><span class="err">â</span><span class="n">POINT</span><span class="p">(</span><span class="mi">1</span> <span class="mi">2</span><span class="p">)</span><span class="err">â</span><span class="p">),</span> <span class="mi">10</span><span class="p">)</span> <span class="n">As</span> <span class="n">smallc</span><span class="p">,</span>
                   <span class="n">ST_Buffer</span><span class="p">(</span><span class="n">ST_GeomFromText</span><span class="p">(</span><span class="err">â</span><span class="n">POINT</span><span class="p">(</span><span class="mi">1</span> <span class="mi">2</span><span class="p">)</span><span class="err">â</span><span class="p">),</span> <span class="mi">20</span><span class="p">)</span> <span class="n">As</span> <span class="n">bigc</span><span class="p">)</span> <span class="n">As</span> <span class="n">foo</span><span class="p">;</span>

    <span class="n">boolean</span> <span class="n">ST_ContainsProperly</span><span class="p">(</span><span class="n">geometry</span> <span class="n">geomA</span><span class="p">,</span> <span class="n">geometry</span> <span class="n">geomB</span><span class="p">);</span>
        
        <span class="n">a</span> <span class="n">circle</span> <span class="n">within</span> <span class="n">a</span> <span class="n">circle</span>
            <span class="n">SELECT</span> <span class="n">ST_ContainsProperly</span><span class="p">(</span><span class="n">smallc</span><span class="p">,</span> <span class="n">bigc</span><span class="p">)</span> <span class="n">As</span> <span class="n">smallcontainspropbig</span><span class="p">,</span> 
                <span class="n">ST_ContainsProperly</span><span class="p">(</span><span class="n">bigc</span><span class="p">,</span><span class="n">smallc</span><span class="p">)</span> <span class="n">As</span> <span class="n">bigcontainspropsmall</span><span class="p">,</span>
                <span class="n">ST_ContainsProperly</span><span class="p">(</span><span class="n">bigc</span><span class="p">,</span> <span class="n">ST_Union</span><span class="p">(</span><span class="n">smallc</span><span class="p">,</span> <span class="n">bigc</span><span class="p">))</span> <span class="k">as</span> <span class="n">bigcontainspropunion</span><span class="p">,</span> 
                <span class="n">ST_Equals</span><span class="p">(</span><span class="n">bigc</span><span class="p">,</span> <span class="n">ST_Union</span><span class="p">(</span><span class="n">smallc</span><span class="p">,</span> <span class="n">bigc</span><span class="p">))</span> <span class="k">as</span> <span class="n">bigisunion</span><span class="p">,</span>
                <span class="n">ST_Covers</span><span class="p">(</span><span class="n">bigc</span><span class="p">,</span> <span class="n">ST_ExteriorRing</span><span class="p">(</span><span class="n">bigc</span><span class="p">))</span> <span class="n">As</span> <span class="n">bigcoversexterior</span><span class="p">,</span> 
                <span class="n">ST_ContainsProperly</span><span class="p">(</span><span class="n">bigc</span><span class="p">,</span> <span class="n">ST_ExteriorRing</span><span class="p">(</span><span class="n">bigc</span><span class="p">))</span> <span class="n">As</span> <span class="n">bigcontainsexterior</span>
            <span class="n">FROM</span> <span class="p">(</span><span class="n">SELECT</span> <span class="n">ST_Buffer</span><span class="p">(</span><span class="n">ST_GeomFromText</span><span class="p">(</span><span class="err">â</span><span class="n">POINT</span><span class="p">(</span><span class="mi">1</span> <span class="mi">2</span><span class="p">)</span><span class="err">â</span><span class="p">),</span> <span class="mi">10</span><span class="p">)</span> <span class="n">As</span> <span class="n">smallc</span><span class="p">,</span> 
                <span class="n">ST_Buffer</span><span class="p">(</span><span class="n">ST_GeomFromText</span><span class="p">(</span><span class="err">â</span><span class="n">POINT</span><span class="p">(</span><span class="mi">1</span> <span class="mi">2</span><span class="p">)</span><span class="err">â</span><span class="p">),</span> <span class="mi">20</span><span class="p">)</span> <span class="n">As</span> <span class="n">bigc</span><span class="p">)</span> <span class="n">As</span> <span class="n">foo</span><span class="p">;</span>

    <span class="n">boolean</span> <span class="n">ST_CoveredBy</span><span class="p">(</span><span class="n">geometry</span> <span class="n">geomA</span><span class="p">,</span> <span class="n">geometry</span> <span class="n">geomB</span><span class="p">);</span>
    <span class="n">boolean</span> <span class="n">ST_Covers</span><span class="p">(</span><span class="n">geometry</span> <span class="n">geomA</span><span class="p">,</span> <span class="n">geometry</span> <span class="n">geomB</span><span class="p">);</span>
        <span class="n">Returns</span> <span class="mi">1</span> <span class="p">(</span><span class="n">TRUE</span><span class="p">)</span> <span class="k">if</span> <span class="n">no</span> <span class="n">point</span> <span class="ow">in</span> <span class="n">Geometry</span><span class="o">/</span><span class="n">Geography</span> <span class="n">B</span> <span class="ow">is</span> <span class="n">outside</span> <span class="n">Geometry</span><span class="o">/</span><span class="n">Geography</span> <span class="n">A</span>
        
<span class="o">--</span>    <span class="n">boolean</span> <span class="n">ST_Crosses</span><span class="p">(</span><span class="n">geometry</span> <span class="n">g1</span><span class="p">,</span> <span class="n">geometry</span> <span class="n">g2</span><span class="p">);</span><span class="o">*</span>

    <span class="n">integer</span> <span class="n">ST_LineCrossingDirection</span><span class="p">(</span><span class="n">geometry</span> <span class="n">linestringA</span><span class="p">,</span> <span class="n">geometry</span> <span class="n">linestringB</span><span class="p">);</span>
    
    <span class="n">boolean</span> <span class="n">ST_Disjoint</span><span class="p">(</span> <span class="n">geometry</span> <span class="n">A</span> <span class="p">,</span> <span class="n">geometry</span> <span class="n">B</span> <span class="p">);</span>
    
    <span class="nb">float</span> <span class="n">ST_Distance</span><span class="p">(</span><span class="n">geometry</span> <span class="n">g1</span><span class="p">,</span> <span class="n">geometry</span> <span class="n">g2</span><span class="p">);</span>
        <span class="c"># the 2-D minimum cartesian distance between two geometries in projected spatial ref units</span>
    
    <span class="nb">float</span> <span class="n">ST_MaxDistance</span><span class="p">(</span><span class="n">geometry</span> <span class="n">g1</span><span class="p">,</span> <span class="n">geometry</span> <span class="n">g2</span><span class="p">);</span>
        <span class="c"># SELECT ST_MaxDistance(âPOINT(0 0)â::geometry, âLINESTRING ( 2 0, 0 2 )â::geometry);</span>
    
    <span class="n">boolean</span> <span class="n">ST_DFullyWithin</span><span class="p">(</span><span class="n">geometry</span> <span class="n">g1</span><span class="p">,</span> <span class="n">geometry</span> <span class="n">g2</span><span class="p">,</span> <span class="n">double</span> <span class="n">precision</span> <span class="n">distance</span><span class="p">);</span>
        <span class="c"># Returns true if the geometries is fully within the specified distance of one another.</span>
    
    <span class="n">boolean</span> <span class="n">ST_Intersects</span><span class="p">(</span> <span class="n">geometry</span> <span class="n">geomA</span> <span class="p">,</span> <span class="n">geometry</span> <span class="n">geomB</span> <span class="p">);</span>
        <span class="c"># tolerance is 0.00001 meters (so any points that close are considered to intersect)</span>
    
    <span class="nb">float</span> <span class="n">ST_Length</span><span class="p">(</span><span class="n">geometry</span> <span class="n">a_2dlinestring</span><span class="p">);</span>
        <span class="c"># multilinestring too</span>
    
    <span class="n">geometry</span> <span class="n">ST_ShortestLine</span><span class="p">(</span><span class="n">geometry</span> <span class="n">g1</span><span class="p">,</span> <span class="n">geometry</span> <span class="n">g2</span><span class="p">);</span>
    <span class="n">geometry</span> <span class="n">ST_LongestLine</span><span class="p">(</span><span class="n">geometry</span> <span class="n">g1</span><span class="p">,</span> <span class="n">geometry</span> <span class="n">g2</span><span class="p">);</span>
    
    <span class="n">boolean</span> <span class="n">ST_Overlaps</span><span class="p">(</span><span class="n">geometry</span> <span class="n">A</span><span class="p">,</span> <span class="n">geometry</span> <span class="n">B</span><span class="p">);</span>
    
    <span class="nb">float</span> <span class="n">ST_Perimeter</span><span class="p">(</span><span class="n">geometry</span> <span class="n">g1</span><span class="p">);</span>
        <span class="n">ST_Surface</span> <span class="ow">or</span> <span class="n">ST_MultiSurface</span> <span class="n">geometry</span> <span class="ow">or</span> <span class="n">geography</span><span class="o">.</span> <span class="p">(</span><span class="n">Polygon</span><span class="p">,</span> <span class="n">Multipolygon</span><span class="p">)</span><span class="o">.</span>
        <span class="c"># use ST_Length for linestrings</span>
    
    <span class="n">boolean</span> <span class="n">ST_Touches</span><span class="p">(</span><span class="n">geometry</span> <span class="n">g1</span><span class="p">,</span> <span class="n">geometry</span> <span class="n">g2</span><span class="p">);</span>
    
    <span class="n">boolean</span> <span class="n">ST_Within</span><span class="p">(</span><span class="n">geometry</span> <span class="n">A</span><span class="p">,</span> <span class="n">geometry</span> <span class="n">B</span><span class="p">);</span>
        <span class="n">TRUE</span> <span class="k">if</span> <span class="n">geometry</span> <span class="n">A</span> <span class="ow">is</span> <span class="n">completely</span> <span class="n">inside</span> <span class="n">geometry</span> <span class="n">B</span><span class="o">.</span>

    <span class="n">geometry</span> <span class="n">ST_Extrude</span><span class="p">(</span><span class="n">geometry</span> <span class="n">geom</span><span class="p">,</span> <span class="nb">float</span> <span class="n">x</span><span class="p">,</span> <span class="nb">float</span> <span class="n">y</span><span class="p">,</span> <span class="nb">float</span> <span class="n">z</span><span class="p">);</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Geometry-Processing">Geometry Processing<a class="anchor-link" href="#Geometry-Processing">&#182;</a></h2>
</div>
</div>
</div>

<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre>    <span class="n">geometry</span> <span class="n">ST_Buffer</span><span class="p">(</span><span class="n">geometry</span> <span class="n">g1</span><span class="p">,</span> <span class="nb">float</span> <span class="n">radius_of_buffer</span><span class="p">);</span>
    <span class="n">geometry</span> <span class="n">ST_Buffer</span><span class="p">(</span><span class="n">geometry</span> <span class="n">g1</span><span class="p">,</span> <span class="nb">float</span> <span class="n">radius_of_buffer</span><span class="p">,</span> <span class="n">integer</span> <span class="n">num_seg_quarter_circle</span><span class="p">);</span> 
    <span class="n">geometry</span> <span class="n">ST_Buffer</span><span class="p">(</span><span class="n">geometry</span> <span class="n">g1</span><span class="p">,</span> <span class="nb">float</span> <span class="n">radius_of_buffer</span><span class="p">,</span> <span class="n">text</span> <span class="n">buffer_style_parameters</span><span class="p">);</span>
        <span class="c">#buffer_style options: quad_segs=#,endcap=round|flat|square,join=round|mitre|bevel,mitre_limit=#.#</span>
    
    <span class="n">geometry</span> <span class="n">ST_BuildArea</span><span class="p">(</span><span class="n">geometry</span> <span class="n">A</span><span class="p">);</span>
    
    <span class="n">geometry</span> <span class="n">ST_Collect</span><span class="p">(</span><span class="n">geometry</span> <span class="nb">set</span> <span class="n">g1field</span><span class="p">);</span> 
    <span class="n">geometry</span> <span class="n">ST_Collect</span><span class="p">(</span><span class="n">geometry</span> <span class="n">g1</span><span class="p">,</span> <span class="n">geometry</span> <span class="n">g2</span><span class="p">);</span> 
    <span class="n">geometry</span> <span class="n">ST_Collect</span><span class="p">(</span><span class="n">geometry</span><span class="p">[]</span> <span class="n">g1_array</span><span class="p">);</span>
    
        <span class="n">SELECT</span> <span class="n">stusps</span><span class="p">,</span>
             <span class="n">ST_Multi</span><span class="p">(</span><span class="n">ST_Collect</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">the_geom</span><span class="p">))</span> <span class="k">as</span> <span class="n">singlegeom</span>
           <span class="n">FROM</span> <span class="p">(</span><span class="n">SELECT</span> <span class="n">stusps</span><span class="p">,</span> <span class="p">(</span><span class="n">ST_Dump</span><span class="p">(</span><span class="n">the_geom</span><span class="p">))</span><span class="o">.</span><span class="n">geom</span> <span class="n">As</span> <span class="n">the_geom</span>
            <span class="n">FROM</span>
            <span class="n">somestatetable</span> <span class="p">)</span> <span class="n">As</span> <span class="n">f</span>
        <span class="n">GROUP</span> <span class="n">BY</span> <span class="n">stusps</span>
    
    <span class="n">geometry</span> <span class="n">ST_ConvexHull</span><span class="p">(</span><span class="n">geometry</span> <span class="n">geomA</span><span class="p">);</span>
        <span class="c"># minimum convex geometry that encloses all geometries within the set.</span>
    
    <span class="n">geometry</span> <span class="n">ST_Difference</span><span class="p">(</span><span class="n">geometry</span> <span class="n">geomA</span><span class="p">,</span> <span class="n">geometry</span> <span class="n">geomB</span><span class="p">);</span>
    
    <span class="n">geometry</span> <span class="n">ST_Intersection</span><span class="p">(</span> <span class="n">geometry</span> <span class="n">geomA</span> <span class="p">,</span> <span class="n">geometry</span> <span class="n">geomB</span> <span class="p">);</span>
    
    <span class="n">geometry</span> <span class="n">ST_MakeValid</span><span class="p">(</span><span class="n">geometry</span> <span class="nb">input</span><span class="p">);</span>
    
    <span class="n">geometry</span> <span class="n">ST_MinimumBoundingCircle</span><span class="p">(</span><span class="n">geometry</span> <span class="n">geomA</span><span class="p">,</span> <span class="n">integer</span> <span class="n">num_segs_per_qt_circ</span><span class="o">=</span><span class="mi">48</span><span class="p">);</span>
    
    <span class="n">geometry</span> <span class="n">ST_Polygonize</span><span class="p">(</span><span class="n">geometry</span> <span class="nb">set</span> <span class="n">geomfield</span><span class="p">);</span> <span class="n">geometry</span> <span class="n">ST_Polygonize</span><span class="p">(</span><span class="n">geometry</span><span class="p">[]</span> <span class="n">geom_array</span><span class="p">);</span>
    
    <span class="n">geometry</span> <span class="n">ST_RemoveRepeatedPoints</span><span class="p">(</span><span class="n">geometry</span> <span class="n">geom</span><span class="p">);</span>
    
<span class="o">--</span>    <span class="n">geometry</span> <span class="n">ST_SharedPaths</span><span class="p">(</span><span class="n">geometry</span> <span class="n">lineal1</span><span class="p">,</span> <span class="n">geometry</span> <span class="n">lineal2</span><span class="p">);</span><span class="o">*</span>

    <span class="n">geometry</span> <span class="n">ST_UnaryUnion</span><span class="p">(</span><span class="n">geometry</span> <span class="n">geom</span><span class="p">);</span>
    
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Other-Functions">Other Functions<a class="anchor-link" href="#Other-Functions">&#182;</a></h1>
</div>
</div>
</div>

<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### [old stuff]</span>
<span class="c">### Combine Street Segments to Single Geom</span>
<span class="c">### Read Lion Ways from DB/File</span>
<span class="n">current_db</span><span class="p">,</span><span class="n">new_db</span> <span class="o">=</span> <span class="s">&#39;lion_ways&#39;</span><span class="p">,</span><span class="s">&#39;lion_ways2&#39;</span>
<span class="n">conditions</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot; where specaddr is null&quot;</span><span class="p">,</span>
              <span class="s">&#39; and (lboro = 1 or rboro=1) &#39;</span><span class="p">,</span>
              <span class="s">&quot; and segmenttyp != &#39;R&#39; &quot;</span><span class="p">]</span>

<span class="c"># cols = [&#39;gid&#39;,&#39;street&#39;,&#39;safstreetn&#39;,&#39;featuretyp&#39;,&#39;segmenttyp&#39;,&#39;rb_layer&#39;,</span>
<span class="c">#    &#39;specaddr&#39;,&#39;facecode&#39;,&#39;seqnum&#39;,&#39;streetcode&#39;,&#39;safstreetc&#39;,&#39;geom&#39;]</span>

<span class="n">cmd</span> <span class="o">=</span> <span class="s">&quot;select </span><span class="si">%(1)s</span><span class="s"> from </span><span class="si">%(3)s</span><span class="s"> </span><span class="si">%(2)s</span><span class="s">&quot;</span> <span class="o">%</span>         <span class="p">{</span> <span class="s">&#39;1&#39;</span> <span class="p">:</span> <span class="s">&#39;*&#39;</span><span class="p">,</span><span class="c">#&#39;,&#39;.join(cols),</span>
          <span class="s">&#39;2&#39;</span> <span class="p">:</span> <span class="s">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">conditions</span><span class="p">),</span>
          <span class="s">&#39;3&#39;</span> <span class="p">:</span> <span class="n">current_db</span><span class="p">}</span>
<span class="n">a1</span> <span class="o">=</span> <span class="n">gd</span><span class="o">.</span><span class="n">read_postgis</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>

<span class="n">cmd2</span> <span class="o">=</span> <span class="s">&quot;select </span><span class="si">%(1)s</span><span class="s"> from </span><span class="si">%(3)s</span><span class="s"> </span><span class="si">%(2)s</span><span class="s">&quot;</span> <span class="o">%</span>         <span class="p">{</span> <span class="s">&#39;1&#39;</span> <span class="p">:</span> <span class="s">&#39;*&#39;</span><span class="p">,</span><span class="c">#&#39;,&#39;.join(cols),</span>
          <span class="s">&#39;2&#39;</span> <span class="p">:</span> <span class="s">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">conditions</span><span class="p">),</span>
          <span class="s">&#39;3&#39;</span> <span class="p">:</span> <span class="n">new_db</span><span class="p">}</span>
<span class="n">a2</span> <span class="o">=</span> <span class="n">gd</span><span class="o">.</span><span class="n">read_postgis</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
<span class="c">### Split DF by &quot;safstreetc&quot;</span>
<span class="n">c</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;gid&#39;</span><span class="p">,</span><span class="s">&#39;street&#39;</span><span class="p">,</span><span class="s">&#39;safstreetn&#39;</span><span class="p">,</span><span class="s">&#39;featuretyp&#39;</span><span class="p">,</span><span class="s">&#39;segmenttyp&#39;</span><span class="p">,</span><span class="s">&#39;rb_layer&#39;</span><span class="p">,</span>
   <span class="s">&#39;specaddr&#39;</span><span class="p">,</span><span class="s">&#39;facecode&#39;</span><span class="p">,</span><span class="s">&#39;seqnum&#39;</span><span class="p">,</span><span class="s">&#39;streetcode&#39;</span><span class="p">,</span><span class="s">&#39;safstreetc&#39;</span><span class="p">,</span><span class="s">&#39;geom&#39;</span><span class="p">]</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">a1</span><span class="p">[</span><span class="n">a1</span><span class="o">.</span><span class="n">safstreetc</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="bp">True</span> <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">==</span><span class="s">&#39;None&#39;</span> <span class="k">else</span> <span class="bp">False</span><span class="p">)]</span><span class="o">.</span><span class="n">ix</span><span class="p">[:,</span><span class="n">c</span><span class="p">]</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">a1</span><span class="p">[</span><span class="n">a1</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span><span class="o">==</span><span class="bp">False</span><span class="p">]</span><span class="o">.</span><span class="n">ix</span><span class="p">[:,</span><span class="n">c</span><span class="p">]</span>
<span class="n">b2</span> <span class="o">=</span> <span class="n">a2</span><span class="p">[</span><span class="n">a2</span><span class="o">.</span><span class="n">safstreetc</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="bp">True</span> <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">==</span><span class="s">&#39;None&#39;</span> <span class="k">else</span> <span class="bp">False</span><span class="p">)]</span><span class="o">.</span><span class="n">ix</span><span class="p">[:,</span><span class="n">c</span><span class="p">]</span>
<span class="n">d2</span> <span class="o">=</span> <span class="n">a2</span><span class="p">[</span><span class="n">a2</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span><span class="o">==</span><span class="bp">False</span><span class="p">]</span><span class="o">.</span><span class="n">ix</span><span class="p">[:,</span><span class="n">c</span><span class="p">]</span>
<span class="c">### Combine Street Segments to Single Geom</span>
<span class="n">t</span><span class="p">,</span><span class="n">g</span><span class="p">,</span><span class="n">g2</span> <span class="o">=</span> <span class="p">[],</span><span class="n">b</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s">&#39;streetcode&#39;</span><span class="p">),</span><span class="n">b2</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s">&#39;streetcode&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">g</span><span class="o">.</span><span class="n">groups</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">get_group</span><span class="p">(</span><span class="n">k</span><span class="p">)</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s">&#39;seqnum&#39;</span><span class="p">)</span>
    <span class="n">j</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">gid</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
    <span class="n">T</span> <span class="o">=</span> <span class="p">{</span> <span class="s">&#39;1&#39;</span>                <span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">geom</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s">&#39;[]&#39;</span><span class="p">)}</span>
    <span class="n">cmd</span> <span class="o">=</span>   <span class="s">&quot;&quot;&quot;</span>
<span class="s">            select st_makeline(array_agg(arr)) geom</span>
<span class="s">            from </span>
<span class="s">            (select ( st_dump( st_geomfromtext( unnest(array[ </span><span class="si">%(1)s</span><span class="s"> ]) ) )).geom arr) as t</span>
<span class="s">            &quot;&quot;&quot;</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span><span class="s">&#39; &#39;</span><span class="p">)</span> <span class="o">%</span> <span class="n">T</span>
    <span class="n">save1</span> <span class="o">=</span> <span class="n">gd</span><span class="o">.</span><span class="n">read_postgis</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
    
    <span class="n">x2</span> <span class="o">=</span> <span class="n">g2</span><span class="o">.</span><span class="n">get_group</span><span class="p">(</span><span class="n">k</span><span class="p">)</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s">&#39;seqnum&#39;</span><span class="p">)</span>
    <span class="n">j2</span> <span class="o">=</span> <span class="n">x2</span><span class="o">.</span><span class="n">gid</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
    <span class="k">if</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">j</span><span class="p">)</span><span class="o">!=</span><span class="nb">sorted</span><span class="p">(</span><span class="n">j2</span><span class="p">):</span>
        <span class="k">print</span> <span class="s">&#39;check now&#39;</span>
        <span class="k">print</span> <span class="nb">len</span><span class="p">(</span><span class="n">j</span><span class="p">),</span><span class="nb">len</span><span class="p">(</span><span class="n">j2</span><span class="p">)</span>
        <span class="k">break</span>
    <span class="n">T</span> <span class="o">=</span> <span class="p">{</span> <span class="s">&#39;1&#39;</span>                <span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">geom</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s">&#39;[]&#39;</span><span class="p">)}</span>
    <span class="n">cmd2</span> <span class="o">=</span>   <span class="s">&quot;&quot;&quot;</span>
<span class="s">            select st_makeline(array_agg(arr)) geom</span>
<span class="s">            from </span>
<span class="s">            (select ( st_dump( st_geomfromtext( unnest(array[ </span><span class="si">%(1)s</span><span class="s"> ]) ) )).geom arr) as t</span>
<span class="s">            &quot;&quot;&quot;</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span><span class="s">&#39; &#39;</span><span class="p">)</span> <span class="o">%</span> <span class="n">T</span>
    <span class="n">save2</span> <span class="o">=</span> <span class="n">gd</span><span class="o">.</span><span class="n">read_postgis</span><span class="p">(</span><span class="n">cmd2</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
    <span class="n">t</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>  <span class="s">&#39;street&#39;</span>     <span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">street</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                <span class="s">&#39;streetcode&#39;</span> <span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">streetcode</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                <span class="s">&#39;geom&#39;</span>       <span class="p">:</span> <span class="n">save1</span><span class="p">})</span>

<span class="c"># d = pd.DataFrame(t)</span>
<span class="c"># d.streetcode.tolist(),d.streetcode.tolist()</span>

<span class="c"># print len(d)</span>
<span class="c"># print d.head()</span>
<span class="c"># % matplotlib inline</span>
<span class="c"># gd.GeoDataFrame(d,geometry=&#39;geom&#39;).plot(fig_size=(30,25))</span>


<span class="c"># In[ ]:</span>

<span class="c">###Test Dijkstra&#39;s Short Path on Random Lots</span>

<span class="n">cmd</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;SELECT cost FROM pgr_dijkstra(&#39;</span>
<span class="s">                SELECT gid AS id,</span>
<span class="s">                         source::integer,</span>
<span class="s">                         target::integer,</span>
<span class="s">                         length::double precision AS cost</span>
<span class="s">                        FROM mn_ways&#39;,</span>
<span class="s">                5142, 4913, false, false);&quot;&quot;&quot;</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span>
<span class="k">print</span> <span class="nb">round</span><span class="p">((</span><span class="n">pd</span><span class="o">.</span><span class="n">read_sql_query</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span><span class="o">.</span><span class="n">cost</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">*</span><span class="mf">3.280839895</span><span class="p">)</span> <span class="o">/</span> <span class="mi">5280</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span><span class="s">&#39;miles between points&#39;</span>


<span class="c"># In[ ]:</span>

<span class="c">###Add &quot;bldg_zip&quot; values</span>

<span class="n">l</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql_query</span><span class="p">(</span><span class="s">&#39;select bbl from lot_pts where bldg_zip is null&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql_query</span><span class="p">(</span><span class="s">&#39;select bbl from pluto where zipcode &gt; 9999&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
<span class="n">l_bbl</span> <span class="o">=</span> <span class="n">l</span><span class="o">.</span><span class="n">bbl</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="n">p_bbl</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">bbl</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

<span class="k">print</span> <span class="s">&#39;bbl in lots but not pluto&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">l</span><span class="p">[(</span><span class="n">l</span><span class="o">.</span><span class="n">bbl</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">p_bbl</span><span class="p">)</span><span class="o">==</span><span class="bp">False</span><span class="p">)]</span><span class="o">.</span><span class="n">bbl</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>
<span class="k">print</span> <span class="s">&#39;bbl in pluto but not lots&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="p">[(</span><span class="n">p</span><span class="o">.</span><span class="n">bbl</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">l_bbl</span><span class="p">)</span><span class="o">==</span><span class="bp">False</span><span class="p">)]</span><span class="o">.</span><span class="n">bbl</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>

<span class="n">ignore_lots</span> <span class="o">=</span> <span class="n">l</span><span class="p">[(</span><span class="n">l</span><span class="o">.</span><span class="n">bbl</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">p_bbl</span><span class="p">)</span><span class="o">==</span><span class="bp">False</span><span class="p">)]</span><span class="o">.</span><span class="n">bbl</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="c"># engine.execute(&#39;drop table if exists temp&#39;)</span>

<span class="n">l</span><span class="p">[(</span><span class="n">l</span><span class="o">.</span><span class="n">bbl</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">p_bbl</span><span class="p">)</span><span class="o">==</span><span class="bp">False</span><span class="p">)]</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s">&#39;check&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">,</span><span class="n">if_exists</span><span class="o">=</span><span class="s">&#39;append&#39;</span><span class="p">,</span><span class="n">index</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="c"># engine.execute(&#39;update lot_pts l set bldg_zip = t.bldg_zip from temp t where t.bbl = l.bbl&#39;)</span>
<span class="c"># engine.execute(&#39;drop table if exists temp&#39;)</span>
<span class="n">cmd1</span> <span class="o">=</span> <span class="s">&quot;alter table lot_pts drop column if exists bldg_zip&quot;</span>
<span class="n">cmd2</span> <span class="o">=</span> <span class="s">&#39;alter table lot_pts add column &quot;bldg_zip&quot; integer&#39;</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">cmd1</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">cmd2</span><span class="p">)</span>

<span class="n">l</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql_query</span><span class="p">(</span><span class="s">&#39;select bbl,bldg_zip from lot_pts where bldg_zip is null&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
<span class="n">l</span> <span class="o">=</span> <span class="n">l</span><span class="p">[(</span><span class="n">l</span><span class="o">.</span><span class="n">bbl</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">ignore_lots</span><span class="p">)</span><span class="o">==</span><span class="bp">False</span><span class="p">)]</span>

<span class="n">p</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql_query</span><span class="p">(</span><span class="s">&#39;select bbl,zipcode from pluto where zipcode &gt; 9999&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>

<span class="n">bbl_to_zip_map</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">bbl</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span><span class="n">p</span><span class="o">.</span><span class="n">zipcode</span><span class="o">.</span><span class="n">tolist</span><span class="p">()))</span>

<span class="n">l</span><span class="o">.</span><span class="n">bldg_zip</span> <span class="o">=</span> <span class="n">l</span><span class="o">.</span><span class="n">bbl</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">bbl_to_zip_map</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;drop table if exists temp&#39;</span><span class="p">)</span>
<span class="n">l</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s">&#39;temp&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">,</span><span class="n">if_exists</span><span class="o">=</span><span class="s">&#39;append&#39;</span><span class="p">,</span><span class="n">index</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;update lot_pts l set bldg_zip = t.bldg_zip from temp t where t.bbl = l.bbl&#39;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;drop table if exists temp&#39;</span><span class="p">)</span>
<span class="k">print</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql_query</span><span class="p">(</span><span class="s">&#39;select count(*) cnt from lot_pts&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span><span class="o">.</span><span class="n">cnt</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="s">&#39;</span><span class="se">\t</span><span class="s">TOTAL LOTS&#39;</span>
<span class="k">print</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql_query</span><span class="p">(</span><span class="s">&#39;select count(*) cnt from lot_pts where bldg_num_end is null&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span><span class="o">.</span><span class="n">cnt</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="s">&#39;</span><span class="se">\t</span><span class="s">remaining lots without bldg_num_end&#39;</span>
<span class="k">print</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql_query</span><span class="p">(</span><span class="s">&#39;select count(*) cnt from lot_pts where bldg_num_end is not null&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span><span class="o">.</span><span class="n">cnt</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="s">&#39;</span><span class="se">\t</span><span class="s">lots with bldg_num_end&#39;</span>
<span class="k">print</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql_query</span><span class="p">(</span><span class="s">&#39;select count(*) cnt from lot_pts where bldg_num_end is not null and bldg_zip is not null&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span><span class="o">.</span><span class="n">cnt</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="s">&#39;</span><span class="se">\t</span><span class="s">lots with bldg_num_end and zipcode&#39;</span>
<span class="k">print</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql_query</span><span class="p">(</span><span class="s">&#39;select count(*) cnt from lot_pts where bldg_zip is null&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span><span class="o">.</span><span class="n">cnt</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="s">&#39;</span><span class="se">\t</span><span class="s">lots with zipcode is null&#39;</span>
<span class="k">print</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql_query</span><span class="p">(</span><span class="s">&#39;select count(*) cnt from lot_pts where bldg_street is null&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span><span class="o">.</span><span class="n">cnt</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="s">&#39;</span><span class="se">\t</span><span class="s">lots with bldg_street is null&#39;</span>
<span class="k">print</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql_query</span><span class="p">(</span><span class="s">&quot;select count(*) cnt from lot_pts where bldg_street = &#39;&#39;&quot;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span><span class="o">.</span><span class="n">cnt</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="s">&quot;</span><span class="se">\t</span><span class="s">lots with bldg_street = &#39;&#39;&quot;</span>


<span class="c"># In[ ]:</span>

<span class="c">###Create &quot;zsb&quot; values</span>

<span class="n">l</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql_query</span><span class="p">(</span><span class="s">&quot;select bbl,bldg_num,bldg_street,bldg_zip from lot_pts &quot;</span><span class="o">+</span>
                      <span class="s">&quot;where bldg_num != 0 and &quot;</span><span class="o">+</span>
                      <span class="s">&quot;bldg_num is not null and &quot;</span><span class="o">+</span>
                      <span class="s">&quot;bldg_street != &#39;&#39; and &quot;</span><span class="o">+</span>
                      <span class="s">&quot;bldg_zip is not null&quot;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql_table</span><span class="p">(</span><span class="s">&quot;address_idx&quot;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
<span class="n">full_uniq_addr</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">addr</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="n">l</span> <span class="o">=</span> <span class="n">l</span><span class="p">[</span><span class="n">l</span><span class="o">.</span><span class="n">bldg_street</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">full_uniq_addr</span><span class="p">)]</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="c"># 5 digit zip</span>
<span class="c"># 5 digit street</span>
<span class="c"># 5 digit bldg_num</span>

<span class="n">street_to_idx_map</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">full_uniq_addr</span><span class="p">,</span><span class="n">a</span><span class="o">.</span><span class="n">bldg_street_idx</span><span class="o">.</span><span class="n">tolist</span><span class="p">()))</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">l</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="mi">0</span><span class="p">,:]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="c"># print eval(str(s[3])+str(street_to_idx_map[s[2]])+str(&#39;%05d&#39;%s[1]))</span>

<span class="n">l</span><span class="p">[</span><span class="s">&#39;zsb&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">l</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="nb">eval</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">street_to_idx_map</span><span class="p">[</span><span class="n">s</span><span class="p">[</span><span class="mi">2</span><span class="p">]])</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%05d</span><span class="s">&#39;</span><span class="o">%</span><span class="k">s</span><span class="p">[</span><span class="mi">1</span><span class="p">])),</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="k">print</span> <span class="nb">len</span><span class="p">(</span><span class="n">l</span><span class="p">)</span>
<span class="n">l</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
<span class="c"># engine.execute(&#39;drop table if exists temp&#39;)</span>
<span class="c"># l.to_sql(&#39;temp&#39;,engine,if_exists=&#39;append&#39;,index=False)</span>
<span class="c"># engine.execute(&#39;update lot_pts l set start_idx = t.zsb from temp t where t.bbl = l.bbl&#39;)</span>
<span class="c"># engine.execute(&#39;drop table if exists temp&#39;)</span>

<span class="c">## SAME THING EXCEPT FOR &#39;end_idx&#39;</span>
<span class="n">l</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql_query</span><span class="p">(</span><span class="s">&quot;select bbl,bldg_num_end,bldg_street,bldg_zip from lot_pts &quot;</span><span class="o">+</span>
                      <span class="s">&quot;where bldg_num_end != 0 and &quot;</span><span class="o">+</span>
                      <span class="s">&quot;bldg_num_end is not null and &quot;</span><span class="o">+</span>
                      <span class="s">&quot;bldg_street != &#39;&#39; and &quot;</span><span class="o">+</span>
                      <span class="s">&quot;bldg_zip is not null&quot;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql_table</span><span class="p">(</span><span class="s">&quot;address_idx&quot;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
<span class="n">full_uniq_addr</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">addr</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="n">l</span> <span class="o">=</span> <span class="n">l</span><span class="p">[</span><span class="n">l</span><span class="o">.</span><span class="n">bldg_street</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">full_uniq_addr</span><span class="p">)]</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">street_to_idx_map</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">full_uniq_addr</span><span class="p">,</span><span class="n">a</span><span class="o">.</span><span class="n">bldg_street_idx</span><span class="o">.</span><span class="n">tolist</span><span class="p">()))</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">l</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="mi">0</span><span class="p">,:]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

<span class="n">l</span><span class="p">[</span><span class="s">&#39;zsb&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">l</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="nb">eval</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">street_to_idx_map</span><span class="p">[</span><span class="n">s</span><span class="p">[</span><span class="mi">2</span><span class="p">]])</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%05d</span><span class="s">&#39;</span><span class="o">%</span><span class="k">s</span><span class="p">[</span><span class="mi">1</span><span class="p">])),</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="k">print</span> <span class="nb">len</span><span class="p">(</span><span class="n">l</span><span class="p">)</span>
<span class="n">l</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>

<span class="c"># engine.execute(&#39;drop table if exists temp&#39;)</span>
<span class="c"># l.to_sql(&#39;temp&#39;,engine,if_exists=&#39;append&#39;,index=False)</span>
<span class="c"># engine.execute(&#39;update lot_pts l set end_idx = t.zsb from temp t where t.bbl = l.bbl&#39;)</span>
<span class="c"># engine.execute(&#39;drop table if exists temp&#39;)</span>


<span class="c"># In[ ]:</span>

<span class="c">###lot_pts with no bldg_street values</span>

<span class="n">cmd</span> <span class="o">=</span> <span class="s">&quot;select bbl,bldg_street,address from lot_pts where bldg_street = &#39;&#39;&quot;</span>
<span class="n">l</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql_query</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
<span class="k">print</span> <span class="nb">len</span><span class="p">(</span><span class="n">l</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
<span class="n">l</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
<span class="n">l</span><span class="p">[</span><span class="s">&#39;bldg_street&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">l</span><span class="o">.</span><span class="n">address</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">if</span> <span class="n">s</span><span class="o">!=</span><span class="bp">None</span> <span class="k">else</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
<span class="c"># l[&#39;bldg_street&#39;] = l.address.map(lambda s: s.lower())</span>
<span class="n">u</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s">&#39;uniq_st&#39;</span><span class="p">:</span><span class="n">l</span><span class="o">.</span><span class="n">bldg_street</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">tolist</span><span class="p">()})</span>
<span class="k">print</span> <span class="nb">len</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
<span class="n">i</span><span class="o">=</span><span class="mi">0</span>
<span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">it</span> <span class="ow">in</span> <span class="n">u</span><span class="o">.</span><span class="n">uniq_st</span><span class="o">.</span><span class="n">iterkv</span><span class="p">():</span>
    <span class="k">print</span> <span class="n">i</span><span class="p">,</span><span class="s">&#39;</span><span class="se">\t</span><span class="s">&#39;</span><span class="p">,</span><span class="n">it</span>
    <span class="n">i</span><span class="o">+=</span><span class="mi">1</span>

<span class="c"># going back to non-uniq values...</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;drop table if exists temp&#39;</span><span class="p">)</span>
<span class="n">l</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s">&#39;temp&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">,</span><span class="n">if_exists</span><span class="o">=</span><span class="s">&#39;append&#39;</span><span class="p">,</span><span class="n">index</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;update lot_pts l set bldg_street = t.bldg_street from temp t where t.bbl = l.bbl&#39;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;drop table if exists temp&#39;</span><span class="p">)</span>
<span class="n">cmd</span> <span class="o">=</span> <span class="s">&quot;select bbl,bldg_num,bldg_street from lot_pts where geom is not null and ignore is false and address is not null and bldg_num_end is null&quot;</span>
<span class="n">l</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql_query</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>

<span class="n">i_list</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;1004170051&#39;</span><span class="p">:</span><span class="s">&#39;null values for almost everything&#39;</span><span class="p">,</span>
            <span class="p">}</span>

<span class="c"># cmd = &quot;select gid,bbl from pluto where gid = any(array&quot;+str(i_list.keys()).replace(&quot;&#39;&quot;,&#39;&#39;)+&quot;)&quot;</span>
<span class="c"># print cmd</span>
<span class="c"># p = pd.read_sql_query(cmd,engine)</span>
<span class="c"># cmd = &quot;select bbl,ignore,ignore_reason from lot_pts where bbl = any(array&quot;+str(i_list.keys()).replace(&quot;&#39;&quot;,&#39;&#39;)+&quot;)&quot;</span>
<span class="n">cmd</span> <span class="o">=</span> <span class="s">&quot;select bbl,ignore,ignore_reason from lot_pts where address is null&quot;</span>
<span class="c"># print cmd</span>
<span class="n">l</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql_query</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
<span class="n">l</span><span class="p">[</span><span class="s">&#39;ignore&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
<span class="n">l</span><span class="p">[</span><span class="s">&#39;ignore_reason&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;null address in pluto&#39;</span><span class="c">#l.bbl.map(lambda s: i_list[str(s).replace(&#39;.0&#39;,&#39;&#39;)])</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;drop table if exists temp&#39;</span><span class="p">)</span>
<span class="n">l</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s">&#39;temp&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">,</span><span class="n">if_exists</span><span class="o">=</span><span class="s">&#39;append&#39;</span><span class="p">,</span><span class="n">index</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;update lot_pts l set ignore = t.ignore from temp t where t.bbl = l.bbl&#39;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;update lot_pts l set ignore_reason = t.ignore_reason from temp t where t.bbl = l.bbl&#39;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;drop table if exists temp&#39;</span><span class="p">)</span>

<span class="n">add_points_to_remaining_lots</span><span class="p">()</span>
<span class="n">update_remaining_lots</span><span class="p">()</span>

<span class="n">cmd</span> <span class="o">=</span> <span class="s">&quot;select bbl,bldg_num,bldg_street from lot_pts where geom is not null and ignore is false and address is not null and bldg_num_end is null&quot;</span>
<span class="n">l</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql_query</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>

<span class="n">places</span> <span class="o">=</span> <span class="p">[</span><span class="mi">26204</span><span class="p">,</span>
            <span class="mi">3637</span><span class="p">,</span>
            <span class="mi">37959</span><span class="p">,</span>
            <span class="mi">6797</span><span class="p">,</span>
            <span class="mi">27057</span><span class="p">,</span>
            <span class="mi">1796</span><span class="p">]</span>
<span class="c"># cmd = &quot;select gid,bbl from pluto where gid = any(array&quot;+str(places).replace(&quot;&#39;&quot;,&#39;&#39;)+&quot;)&quot;</span>
<span class="c"># print cmd</span>
<span class="c"># p = pd.read_sql_query(cmd,engine)</span>
<span class="c"># cmd = &quot;select bbl,place from lot_pts where bbl = any(array&quot;+str(p.bbl.tolist()).replace(&quot;&#39;&quot;,&#39;&#39;)+&quot;)&quot;</span>
<span class="n">cmd</span> <span class="o">=</span> <span class="s">&quot;select bbl,bldg_num,bldg_street,place from lot_pts where bldg_street ~* &#39;pier&#39;&quot;</span>
<span class="c"># print cmd</span>
<span class="n">l</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql_query</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
<span class="k">print</span> <span class="nb">len</span><span class="p">(</span><span class="n">l</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
<span class="n">l</span><span class="p">[</span><span class="s">&#39;new_num&#39;</span><span class="p">]</span> <span class="o">=</span> 
<span class="n">l</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">## update lot_pts with places</span>
<span class="c"># bbl_to_gid = dict(zip(p.bbl.tolist(),p.gid.tolist()))</span>

<span class="c"># liberty island&#39;,</span>
<span class="c"># world trade center</span>
<span class="c"># liberty plaza</span>
<span class="c"># police plaza</span>
<span class="c"># sheridan square</span>
<span class="c"># morton square</span>
<span class="c"># waterside plaza</span>
<span class="c"># lincoln square</span>
<span class="c"># lincoln center plaza&#39;]</span>

<span class="n">l</span><span class="p">[</span><span class="s">&#39;place&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;drop table if exists temp&#39;</span><span class="p">)</span>
<span class="n">l</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s">&#39;temp&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">,</span><span class="n">if_exists</span><span class="o">=</span><span class="s">&#39;append&#39;</span><span class="p">,</span><span class="n">index</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="c"># engine.execute(&#39;update lot_pts l set place = t.place from temp t where t.bbl = l.bbl&#39;)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;update pluto p set bldg_street = t.bldg_street from temp t where t.bbl = p.bbl&quot;</span><span class="p">)</span>
<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;drop table if exists temp&#39;</span><span class="p">)</span>


<span class="c"># cmd = &quot;select bbl,bldg_street from lot_pts where bldg_street ~* &#39;/2&#39;&quot;</span>
<span class="c"># l = pd.read_sql_query(cmd,engine)</span>
<span class="c"># l[&#39;bldg_street&#39;] = l.bldg_street.map(lambda s: s.replace(&#39;1/2 &#39;,&#39;&#39;))</span>
<span class="c"># engine.execute(&#39;drop table if exists temp&#39;)</span>
<span class="c"># l.to_sql(&#39;temp&#39;,engine,if_exists=&#39;append&#39;,index=False)</span>
<span class="c"># engine.execute(&#39;update lot_pts l set bldg_street = t.bldg_street from temp t where t.bbl = l.bbl&#39;)</span>
<span class="c"># engine.execute(&#39;drop table if exists temp&#39;)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[7]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### Load Libraries</span>
<span class="kn">from</span> <span class="nn">os</span> <span class="kn">import</span> <span class="n">getcwd</span>
<span class="n">this_cwd</span> <span class="o">=</span> <span class="n">getcwd</span><span class="p">()</span><span class="o">+</span><span class="s">&#39;/&#39;</span>
<span class="kn">from</span> <span class="nn">sys</span> <span class="kn">import</span> <span class="n">path</span> <span class="k">as</span> <span class="n">sys_path</span>
<span class="n">sys_path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">this_cwd</span><span class="o">+</span><span class="s">&#39;../../geolocation&#39;</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">f_postgres</span> <span class="kn">import</span> <span class="n">geom_inside_street_box</span><span class="p">,</span><span class="n">make_column_primary_serial_key</span>
<span class="kn">import</span> <span class="nn">geopandas</span> <span class="kn">as</span> <span class="nn">gd</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s">&#39;display.max_rows&#39;</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span>
<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s">r&#39;postgresql://postgres:postgres@192.168.2.50:8800/routing&#39;</span><span class="p">,</span>
                       <span class="n">encoding</span><span class="o">=</span><span class="s">&#39;utf-8&#39;</span><span class="p">,</span>
                       <span class="n">echo</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">seamless</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### Assumptions</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">Assumption</span><span class="p">(</span><span class="n">get_var</span><span class="o">=</span><span class="s">&#39;all&#39;</span><span class="p">)</span>
<span class="nb">sorted</span><span class="p">([</span><span class="n">it</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">a</span><span class="o">.</span><span class="n">iteritems</span><span class="p">()])</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### Initial Var Setup</span>
<span class="k">if</span> <span class="n">global_op_vars</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span>
    <span class="k">global</span> <span class="n">sim_data</span><span class="p">,</span><span class="n">order_q</span><span class="p">,</span><span class="n">order_delivered</span><span class="p">,</span><span class="n">dg_pool</span><span class="p">,</span><span class="n">dg_pool_pt</span><span class="p">,</span><span class="n">dg_q</span><span class="p">,</span><span class="n">dg_delivered</span>
<span class="k">else</span><span class="p">:</span> <span class="k">global</span> <span class="n">sim_data</span>
<span class="n">global_simulation_vars</span><span class="p">()</span>

<span class="n">makeData</span><span class="o">=</span><span class="bp">False</span>

<span class="k">if</span> <span class="n">makeData</span><span class="o">==</span><span class="bp">True</span><span class="p">:</span> <span class="n">sim_data</span> <span class="o">=</span> <span class="n">make_simulation_data_from_real_data</span><span class="p">()</span>
<span class="k">else</span><span class="p">:</span> <span class="n">sim_data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql_table</span><span class="p">(</span><span class="s">&#39;sim_data&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">,</span><span class="n">index_col</span><span class="o">=</span><span class="s">&#39;deliv_id&#39;</span><span class="p">)</span>
<span class="n">sim_data</span> <span class="o">=</span> <span class="n">sim_data</span><span class="o">.</span><span class="n">sort_index</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;order_time&#39;</span><span class="p">,</span><span class="s">&#39;vend_id&#39;</span><span class="p">],</span> <span class="n">ascending</span><span class="o">=</span><span class="p">[</span><span class="bp">True</span><span class="p">,</span><span class="bp">True</span><span class="p">])</span>

<span class="n">globalVars_plus</span> <span class="o">=</span> <span class="n">init_global_vars</span><span class="p">(</span><span class="n">load</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">save</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">resume</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

<span class="n">order_q</span><span class="p">,</span><span class="n">order_delivered</span><span class="p">,</span><span class="n">dg_q</span><span class="p">,</span><span class="n">dg_delivered</span><span class="p">,</span><span class="n">dg_pool</span><span class="p">,</span><span class="n">dg_pool_pt</span><span class="p">,</span><span class="n">program_stats</span><span class="p">,</span><span class="n">stpt</span> <span class="o">=</span> <span class="n">globalVars_plus</span>
<span class="n">globalVars</span> <span class="o">=</span> <span class="n">order_q</span><span class="p">,</span><span class="n">order_delivered</span><span class="p">,</span><span class="n">dg_q</span><span class="p">,</span><span class="n">dg_delivered</span><span class="p">,</span><span class="n">dg_pool</span><span class="p">,</span><span class="n">dg_pool_pt</span>

<span class="n">stpt</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">print</span> <span class="s">&#39;starting at&#39;</span><span class="p">,</span><span class="n">stpt</span>
<span class="n">pt</span><span class="o">=</span><span class="mi">0</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### iteration through orders</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">stpt</span><span class="p">,</span><span class="n">totalTime</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
    <span class="n">now</span><span class="o">=</span><span class="n">i</span>

    <span class="c"># maintain lists of data</span>
    <span class="n">globalVars</span> <span class="o">=</span> <span class="n">update_global_vars</span><span class="p">(</span><span class="n">globalVars</span><span class="p">,</span><span class="s">&#39;update per minute&#39;</span><span class="p">,</span><span class="n">now</span><span class="p">)</span>

    <span class="c"># export data on a regular basis</span>
    <span class="k">if</span> <span class="n">pt</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>
        <span class="n">pt</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="n">save</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span> <span class="n">x</span> <span class="o">=</span> <span class="n">export_all_data</span><span class="p">(</span><span class="n">globalVars</span><span class="p">,</span><span class="n">program_stats</span><span class="p">)</span>
    <span class="n">pt</span><span class="o">+=</span><span class="mi">1</span>

    <span class="c"># process all current orders</span>
    <span class="n">ordersNow</span><span class="o">=</span><span class="n">sim_data</span><span class="p">[(</span><span class="n">sim_data</span><span class="o">.</span><span class="n">order_time</span> <span class="o">==</span> <span class="n">now</span><span class="p">)]</span>
    <span class="n">t1</span><span class="o">=</span><span class="n">time</span><span class="p">()</span>

    <span class="n">globalVars</span> <span class="o">=</span> <span class="n">order_by_min</span><span class="p">(</span><span class="n">globalVars</span><span class="p">,</span><span class="n">ordersNow</span><span class="p">,</span><span class="n">errorCheck</span><span class="o">=</span><span class="n">errorCheck</span><span class="p">)</span>
    <span class="c"># print &#39;finished&#39;</span>
    <span class="c"># systemError()</span>

    <span class="c"># for j in range(0,len(ordersNow.index)):</span>
    <span class="c">#     thisOrder=ordersNow.iloc[j,:].copy()</span>
    <span class="c">#     thisOrder[&#39;deliv_id&#39;] = ordersNow.index[j]</span>
    <span class="c">#     # if thisOrder[&#39;deliv_id&#39;] == 384:</span>
    <span class="c">#     globalVars = getBestDG(globalVars,thisOrder,errorCheck=errorCheck)</span>
    <span class="c"># raise SystemError</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ordersNow</span><span class="o">.</span><span class="n">index</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">program_stats</span> <span class="o">=</span> <span class="n">program_stats</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="n">i</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">ordersNow</span><span class="o">.</span><span class="n">index</span><span class="p">),</span><span class="nb">round</span><span class="p">((</span><span class="n">time</span><span class="p">()</span><span class="o">-</span><span class="n">t1</span><span class="p">)</span><span class="o">/</span><span class="nb">len</span><span class="p">(</span><span class="n">ordersNow</span><span class="o">.</span><span class="n">index</span><span class="p">),</span><span class="mi">2</span><span class="p">),</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">())],</span><span class="n">index</span><span class="o">=</span><span class="n">program_stats</span><span class="o">.</span><span class="n">columns</span><span class="p">),</span><span class="n">ignore_index</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="k">print</span> <span class="s">&#39;minute&#39;</span><span class="o">+</span><span class="s">&#39;</span><span class="se">\t</span><span class="s">&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">+</span><span class="s">&#39;</span><span class="se">\t</span><span class="s">&#39;</span><span class="o">+</span><span class="s">&#39;orders=&#39;</span><span class="o">+</span><span class="s">&#39;</span><span class="se">\t</span><span class="s">&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ordersNow</span><span class="o">.</span><span class="n">index</span><span class="p">))</span><span class="o">+</span><span class="s">&#39;</span><span class="se">\t</span><span class="s">&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">((</span><span class="n">time</span><span class="p">()</span><span class="o">-</span><span class="n">t1</span><span class="p">)</span><span class="o">/</span><span class="nb">len</span><span class="p">(</span><span class="n">ordersNow</span><span class="o">.</span><span class="n">index</span><span class="p">))</span><span class="o">+</span><span class="s">&#39;</span><span class="se">\t</span><span class="s">&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">time</span><span class="p">())</span>


<span class="c"># move remaining orders at close to &#39;delivered&#39;</span>
<span class="k">if</span> <span class="n">now</span> <span class="o">==</span> <span class="n">totalTime</span><span class="p">:</span> <span class="n">globalVars</span> <span class="o">=</span> <span class="n">update_global_vars</span><span class="p">(</span><span class="n">globalVars</span><span class="p">,</span><span class="s">&#39;update per minute&#39;</span><span class="p">,</span><span class="n">globalVars</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">end_time</span><span class="o">.</span><span class="n">max</span><span class="p">())</span>
<span class="k">if</span> <span class="n">save</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span> <span class="n">export_all_data</span><span class="p">(</span><span class="n">globalVars</span><span class="p">,</span><span class="n">program_stats</span><span class="p">)</span>
<span class="k">print</span> <span class="s">&#39;done&#39;</span>
<span class="k">print</span> <span class="n">time</span><span class="p">()</span><span class="o">-</span><span class="n">t1A</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[6]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="kn">import</span> <span class="nn">IPython.nbformat.current</span> <span class="kn">as</span> <span class="nn">nbf</span>
<span class="n">cwd</span> <span class="o">=</span> <span class="err">!</span><span class="n">pwd</span>
<span class="n">nb</span> <span class="o">=</span> <span class="n">nbf</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">cwd</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">+</span><span class="s">&#39;/seamless.py&#39;</span><span class="p">,</span> <span class="s">&#39;r&#39;</span><span class="p">),</span> <span class="s">&#39;py&#39;</span><span class="p">)</span>
<span class="n">nbf</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">nb</span><span class="p">,</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;seamless.ipynb&#39;</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">),</span> <span class="s">&#39;ipynb&#39;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[5]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="nb">str</span><span class="p">(</span><span class="n">cwd</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">+</span><span class="s">&#39;/seamless.py&#39;</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">
    Out[5]:</div>


<div class="output_text output_subarea output_pyout">
<pre>&apos;/Users/admin/SERVER2/BD_Scripts/RD/src/seamless.py&apos;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="mf">1.</span> <span class="n">python</span><span class="o">/</span><span class="n">ipython</span> <span class="n">developer</span> <span class="n">familiar</span> <span class="k">with</span> <span class="n">at</span> <span class="n">least</span> <span class="n">one</span> <span class="n">module</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">group</span> <span class="n">of</span> <span class="n">pandas</span><span class="p">,</span> 
<span class="n">geopandas</span><span class="p">,</span> <span class="n">cython</span> 

<span class="mf">2.</span> <span class="n">an</span> <span class="n">nginx</span><span class="p">,</span><span class="n">lua</span><span class="p">,</span><span class="n">postgres</span> <span class="n">developer</span>

<span class="mf">3.</span> <span class="n">a</span> <span class="n">webpage</span> <span class="n">scraper</span> <span class="n">preferable</span> <span class="n">operating</span> <span class="n">within</span> <span class="n">current</span> <span class="n">library</span> <span class="n">of</span> <span class="n">python</span><span class="p">,</span> <span class="n">mechanize</span><span class="p">,</span> <span class="n">selenium</span><span class="p">,</span> <span class="n">bs4</span><span class="p">,</span> <span class="n">etc</span><span class="o">...</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">i</span><span class="o">=</span><span class="n">Image</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="s">&#39;/Users/admin/Projects/GIS/matplotlib_data/nyc_block_and_lot.png&#39;</span><span class="p">,</span><span class="n">width</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[2]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### Load Initial Libraries</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">geopandas</span> <span class="kn">as</span> <span class="nn">gd</span>
<span class="kn">from</span> <span class="nn">types</span> <span class="kn">import</span> <span class="n">NoneType</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span>

<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s">r&#39;postgresql://postgres:postgres@localhost/routing&#39;</span><span class="p">,</span>
                       <span class="n">encoding</span><span class="o">=</span><span class="s">&#39;utf-8&#39;</span><span class="p">,</span>
                       <span class="n">echo</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="o">%</span><span class="k">load_ext</span> <span class="n">sql</span>
<span class="o">%</span><span class="k">sql</span> <span class="n">postgresql</span><span class="p">:</span><span class="o">//</span><span class="n">postgres</span><span class="p">:</span><span class="n">postgres</span><span class="nd">@localhost</span><span class="o">/</span><span class="n">routing</span>

<span class="o">%</span><span class="k">matplotlib</span> <span class="n">inline</span>
        
<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">display</span><span class="p">,</span><span class="n">Image</span>
<span class="n">i</span><span class="o">=</span><span class="n">Image</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="s">&#39;/Users/admin/Projects/GIS/matplotlib_data/nyc_block_and_lot.png&#39;</span><span class="p">,</span><span class="n">width</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[7]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># for it in p.columns.tolist():</span>
<span class="c">#     print it.upper()</span>
<span class="kn">from</span> <span class="nn">sys</span> <span class="kn">import</span> <span class="n">path</span> <span class="k">as</span> <span class="n">sys_path</span>
<span class="n">sys_path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;/Users/admin/SERVER2/BD_Scripts/geolocation&#39;</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">f_postgres</span> <span class="kn">import</span> <span class="n">geoparse</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql_query</span><span class="p">(</span><span class="s">&#39;select bbl,address from pluto&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
<span class="n">df_ignore</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s">&#39;address&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="nb">type</span><span class="p">(</span><span class="n">s</span><span class="p">))</span><span class="o">==</span><span class="n">NoneType</span><span class="p">]</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">-</span><span class="n">df_ignore</span><span class="o">.</span><span class="n">index</span><span class="p">,:]</span>
<span class="n">df</span><span class="p">[</span><span class="s">&#39;street&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">address</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="s">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39; &#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">:])</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[10]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">df</span> <span class="o">=</span> <span class="n">geoparse</span><span class="p">(</span><span class="n">df</span><span class="p">,</span><span class="s">&#39;street&#39;</span><span class="p">,</span><span class="s">&#39;street&#39;</span><span class="p">)</span>

<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;drop table if exists temp;&#39;</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s">&#39;temp&#39;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>

<span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">UPDATE pluto p</span>
<span class="s">SET street = t.street</span>
<span class="s">FROM temp t </span>
<span class="s">WHERE p.bbl = t.bbl</span>
<span class="s">&quot;&quot;&quot;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">
    Out[10]:</div>


<div class="output_text output_subarea output_pyout">
<pre>&lt;sqlalchemy.engine.result.ResultProxy at 0x1120429d0&gt;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[23]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># Test f(x)</span>
<span class="k">def</span> <span class="nf">test_get_best_combo</span><span class="p">(</span><span class="n">start_X</span><span class="p">,</span>
                        <span class="n">start_Y</span><span class="p">,</span>
                        <span class="n">mockCombo</span><span class="p">,</span>
                        <span class="n">realCombo</span><span class="p">,</span>
                        <span class="n">orderSK</span><span class="p">,</span>
                        <span class="n">pointSK</span><span class="p">,</span>
                        <span class="n">order_times</span><span class="p">,</span>
                        <span class="n">deliv_ids</span><span class="p">,</span>
                        <span class="n">d</span><span class="p">,</span>
                        <span class="n">tripStart</span><span class="p">,</span> <span class="n">sp</span><span class="p">,</span>
                        <span class="n">maxOrderTime</span><span class="p">,</span>
                        <span class="n">maxTravelTime</span><span class="p">,</span>
                        <span class="n">tT</span><span class="p">,</span>                 <span class="c"># c_travel_times</span>
                        <span class="n">sT</span><span class="p">,</span>                 <span class="c"># c_start_times</span>
                        <span class="n">eT</span><span class="p">,</span>                 <span class="c"># c_end_times</span>
                        <span class="n">odt</span><span class="p">,</span>                <span class="c"># c_odtTimes</span>
                        <span class="n">oMax</span><span class="p">,</span>               <span class="c"># c_max_order-to-deliveryTime</span>
                        <span class="n">tMax</span><span class="p">,</span>               <span class="c"># c_MaxTravelToLocTime</span>
                        <span class="n">tdd</span><span class="p">,</span>                <span class="c"># c_tddTimes</span>
                        <span class="n">ctm</span><span class="p">,</span>                <span class="c"># c_ctMarker</span>
                        <span class="n">return_orders</span><span class="p">):</span>     <span class="c"># c_returnVars</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">mockCombo</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>                                    <span class="c"># number of rows</span>
    <span class="n">pts</span> <span class="o">=</span> <span class="n">mockCombo</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>                                  <span class="c"># number of pts</span>
    <span class="n">BI</span> <span class="o">=</span> <span class="n">r</span><span class="o">+</span><span class="mi">1</span>                                                  <span class="c"># time in between each pt, best index.</span>
    <span class="n">minT</span> <span class="o">=</span> <span class="mi">8</span><span class="o">*</span><span class="n">maxOrderTime</span>                                     <span class="c"># minimum total route time (assuming 8 routes is max route #)</span>

    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">pts</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">r</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">j</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">xptb</span><span class="o">=</span><span class="n">realCombo</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">yptb</span><span class="o">=</span><span class="n">realCombo</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">x</span><span class="o">=</span><span class="nb">abs</span><span class="p">(</span><span class="n">start_X</span><span class="o">-</span><span class="n">xptb</span><span class="p">)</span>
                <span class="n">y</span><span class="o">=</span><span class="nb">abs</span><span class="p">(</span><span class="n">start_Y</span><span class="o">-</span><span class="n">yptb</span><span class="p">)</span>
                <span class="n">t</span><span class="o">=</span><span class="n">sp</span><span class="o">*</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="p">)</span>
                <span class="n">ctm</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">tripStart</span><span class="o">+</span><span class="n">t</span>
                <span class="n">tT</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">tripStart</span><span class="o">+</span><span class="n">t</span>
                <span class="n">oMax</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="n">tMax</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">tripStart</span><span class="o">+</span><span class="n">t</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">xpta</span><span class="o">=</span><span class="n">realCombo</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">ypta</span><span class="o">=</span><span class="n">realCombo</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">xptb</span><span class="o">=</span><span class="n">realCombo</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">yptb</span><span class="o">=</span><span class="n">realCombo</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">x</span><span class="o">=</span><span class="nb">abs</span><span class="p">(</span><span class="n">xpta</span><span class="o">-</span><span class="n">xptb</span><span class="p">)</span>
                <span class="n">y</span><span class="o">=</span><span class="nb">abs</span><span class="p">(</span><span class="n">ypta</span><span class="o">-</span><span class="n">yptb</span><span class="p">)</span>
                <span class="n">t</span><span class="o">=</span><span class="n">sp</span><span class="o">*</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="p">)</span>
                <span class="n">ctm</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+=</span> <span class="n">t</span>
                <span class="n">tT</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">t</span>
                <span class="k">if</span> <span class="n">t</span> <span class="o">&gt;</span> <span class="n">tMax</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span>
                    <span class="n">tMax</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">t</span>

            <span class="n">mc_pt</span><span class="o">=</span><span class="n">mockCombo</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">mc_pt</span><span class="o">&lt;</span><span class="mi">100</span><span class="p">:</span> <span class="n">sT</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">mc_pt</span><span class="p">]</span><span class="o">=</span><span class="n">ctm</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span> <span class="n">eT</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">mc_pt</span><span class="o">-</span><span class="mi">100</span><span class="p">]</span><span class="o">=</span><span class="n">ctm</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>

            <span class="k">if</span> <span class="n">j</span> <span class="o">==</span> <span class="n">pts</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span>                          <span class="c"># this is the last part of the 2D iteration</span>
                <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">d</span><span class="p">):</span>
                    <span class="n">orderSK_pt</span><span class="o">=</span><span class="n">orderSK</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">k</span><span class="p">]</span>
                    <span class="n">eT_pt</span><span class="o">=</span><span class="n">eT</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">k</span><span class="p">]</span>
                    <span class="n">tdd</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">k</span><span class="p">]</span><span class="o">=</span><span class="n">eT_pt</span><span class="o">-</span><span class="n">sT</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">k</span><span class="p">]</span>
                    <span class="n">odt_pt</span><span class="o">=</span><span class="n">eT_pt</span><span class="o">-</span><span class="n">order_times</span><span class="p">[</span><span class="n">orderSK_pt</span><span class="p">]</span>
                    <span class="n">odt</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">k</span><span class="p">]</span><span class="o">=</span><span class="n">odt_pt</span>
                    <span class="k">if</span> <span class="n">odt_pt</span><span class="o">&gt;</span><span class="n">oMax</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span>
                        <span class="n">oMax</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">=</span><span class="n">odt_pt</span>              <span class="c"># update max order-to-delivery time [ per row ] -- keeping biggest value</span>

                <span class="k">if</span> <span class="n">oMax</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">&lt;=</span><span class="n">maxOrderTime</span><span class="p">:</span>           <span class="c"># if order-to-delivery max is acceptable &amp;</span>
                    <span class="k">if</span> <span class="n">tMax</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">maxTravelTime</span><span class="p">:</span>    <span class="c"># max travelToLoc time is acceptable --&gt;  save row as Best Index</span>
                        <span class="k">if</span> <span class="n">ctm</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">&lt;</span><span class="n">minT</span><span class="p">:</span>             <span class="c"># for all acceptable rows, keep one with lowest cumul. time.</span>
                            <span class="n">minT</span><span class="o">=</span><span class="n">ctm</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                            <span class="n">BI</span><span class="o">=</span><span class="n">i</span>

    <span class="k">if</span> <span class="n">minT</span><span class="o">==</span><span class="mi">8</span><span class="o">*</span><span class="n">maxOrderTime</span><span class="p">:</span>
        <span class="n">return_orders</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">13</span><span class="p">]</span><span class="o">=</span><span class="mi">0</span>                      <span class="c"># interpretted on return as an error</span>
        <span class="n">return_orders</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">13</span><span class="p">]</span><span class="o">=</span><span class="n">BI</span>
        <span class="k">return</span> <span class="n">return_orders</span>
    <span class="k">elif</span> <span class="n">BI</span> <span class="o">==</span> <span class="n">r</span><span class="o">+</span><span class="mi">1</span><span class="p">:</span>
        <span class="n">return_orders</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">13</span><span class="p">]</span><span class="o">=</span><span class="mi">0</span>                      <span class="c"># interpretted on return as an error</span>
        <span class="n">return_orders</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">13</span><span class="p">]</span><span class="o">=</span><span class="mi">505</span>                    <span class="c"># interpretted on return as &quot;error setting best index&quot;</span>
        <span class="k">return</span> <span class="n">return_orders</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">d</span><span class="p">):</span>
            <span class="n">orderSK_pt</span><span class="o">=</span><span class="n">orderSK</span><span class="p">[</span><span class="n">BI</span><span class="p">][</span><span class="n">e</span><span class="p">]</span>
            <span class="n">return_orders</span><span class="p">[</span><span class="n">e</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">start_X</span>                <span class="c"># dg_X</span>
            <span class="n">return_orders</span><span class="p">[</span><span class="n">e</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">start_Y</span>                <span class="c"># dg_Y</span>
            <span class="n">return_orders</span><span class="p">[</span><span class="n">e</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">orderSK_pt</span><span class="o">+</span><span class="mi">1</span>             <span class="c"># deliv_num (starts at zero)</span>
            <span class="n">return_orders</span><span class="p">[</span><span class="n">e</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">deliv_ids</span><span class="p">[</span><span class="n">orderSK_pt</span><span class="p">]</span>          <span class="c"># deliv_id (already sorted by key)</span>
            <span class="n">return_orders</span><span class="p">[</span><span class="n">e</span><span class="p">][</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="n">order_times</span><span class="p">[</span><span class="n">orderSK_pt</span><span class="p">]</span>           <span class="c"># order_time</span>
            <span class="n">mc_pt</span><span class="o">=</span><span class="n">pointSK</span><span class="p">[</span><span class="n">BI</span><span class="p">][</span><span class="n">e</span><span class="o">*</span><span class="mi">2</span><span class="p">]</span>
            <span class="n">return_orders</span><span class="p">[</span><span class="n">e</span><span class="p">][</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="n">tT</span><span class="p">[</span><span class="n">BI</span><span class="p">][</span><span class="n">mc_pt</span><span class="p">]</span>        <span class="c"># travel_time_to_loc</span>
            <span class="n">return_orders</span><span class="p">[</span><span class="n">e</span><span class="p">][</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="n">realCombo</span><span class="p">[</span><span class="n">BI</span><span class="p">][</span><span class="n">mc_pt</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>     <span class="c"># startX // see below for explanation</span>
            <span class="n">return_orders</span><span class="p">[</span><span class="n">e</span><span class="p">][</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="n">realCombo</span><span class="p">[</span><span class="n">BI</span><span class="p">][</span><span class="n">mc_pt</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>     <span class="c"># startY</span>
            <span class="n">return_orders</span><span class="p">[</span><span class="n">e</span><span class="p">][</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="n">sT</span><span class="p">[</span><span class="n">BI</span><span class="p">][</span><span class="n">e</span><span class="p">]</span>            <span class="c"># start_time</span>
            <span class="n">return_orders</span><span class="p">[</span><span class="n">e</span><span class="p">][</span><span class="mi">9</span><span class="p">]</span> <span class="o">=</span> <span class="n">tdd</span><span class="p">[</span><span class="n">BI</span><span class="p">][</span><span class="n">e</span><span class="p">]</span>           <span class="c"># travel_time</span>
            <span class="n">return_orders</span><span class="p">[</span><span class="n">e</span><span class="p">][</span><span class="mi">10</span><span class="p">]</span><span class="o">=</span> <span class="n">eT</span><span class="p">[</span><span class="n">BI</span><span class="p">][</span><span class="n">e</span><span class="p">]</span>            <span class="c"># end_time</span>
            <span class="n">mc_pt</span><span class="o">=</span><span class="n">pointSK</span><span class="p">[</span><span class="n">BI</span><span class="p">][</span><span class="n">e</span><span class="o">*</span><span class="mi">2</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">return_orders</span><span class="p">[</span><span class="n">e</span><span class="p">][</span><span class="mi">11</span><span class="p">]</span><span class="o">=</span> <span class="n">realCombo</span><span class="p">[</span><span class="n">BI</span><span class="p">][</span><span class="n">mc_pt</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>     <span class="c"># endX</span>
            <span class="n">return_orders</span><span class="p">[</span><span class="n">e</span><span class="p">][</span><span class="mi">12</span><span class="p">]</span><span class="o">=</span> <span class="n">realCombo</span><span class="p">[</span><span class="n">BI</span><span class="p">][</span><span class="n">mc_pt</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>     <span class="c"># endY</span>
            <span class="n">return_orders</span><span class="p">[</span><span class="n">e</span><span class="p">][</span><span class="mi">13</span><span class="p">]</span><span class="o">=</span> <span class="n">odt</span><span class="p">[</span><span class="n">BI</span><span class="p">][</span><span class="n">e</span><span class="p">]</span>           <span class="c"># total_order_time</span>
            <span class="n">return_orders</span><span class="p">[</span><span class="n">e</span><span class="p">][</span><span class="mi">14</span><span class="p">]</span><span class="o">=</span> <span class="n">BI</span>
        <span class="k">return</span> <span class="n">return_orders</span>

    <span class="c">## Assume [1,0] = orderSK, a.k.a. Order Sort Key.</span>
    <span class="c">##  the &#39;1&#39; being first means the second order, i.e., order B, is picked up first.</span>
    <span class="c">##  thus, orderSK[0] = 1.</span>
    <span class="c">##</span>
    <span class="c">## Assume [1,3,0,2] = pointSK, a.k.a. Point Sort Key, which corresponds to points [A1,A2,B1,B2].</span>
    <span class="c">##  the &#39;1&#39; at the beginning means the pickup of the first order, i.e., A1, occurs at index 1 in the route.</span>
    <span class="c">##  the &#39;0&#39; in the third position means that pickup of B1 occurs at index 0 in the route.</span>
    <span class="c">##</span>
    <span class="c">## In order to identify the X-axis location of a point on a particular order,</span>
    <span class="c">##  Start with the order key, which shows that the second order pickup precedes the first order pickup.</span>
    <span class="c">##      deliv_num = 1 and the second order is the subject of the first iteration of return_orders.</span>
    <span class="c">##  Now, orderSK[e]=1 can be used as an index in pointSK to identify the index of B1 in the permutated array of locations.</span>
    <span class="c">##      (The &#39;*2&#39; keeps the index consistent with an order pickup being every other point in [A1,A2,B1,B2,...n1,n2].)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[24]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># f(x) COLLECTION</span>

<span class="c"># Parallel Processing f(x)s</span>
<span class="kn">from</span> <span class="nn">parallel_fxs</span> <span class="kn">import</span> <span class="n">run_parallel</span>
<span class="c"># Normal Delivery Simulation</span>
<span class="kn">from</span> <span class="nn">normal_deliv</span> <span class="kn">import</span> <span class="n">NormalDelivery</span><span class="p">,</span><span class="n">bestDeliveryRoute</span>
<span class="c"># Utility &amp; Permutation f(x)s</span>
<span class="kn">from</span> <span class="nn">utility_and_permutation_fxs</span> <span class="kn">import</span> <span class="n">listFout</span><span class="p">,</span><span class="n">systemError</span><span class="p">,</span><span class="n">genSeg</span><span class="p">,</span><span class="n">genAllPairPerm_NoRep</span>
<span class="kn">from</span> <span class="nn">utility_and_permutation_fxs</span> <span class="kn">import</span> <span class="n">getFilesFolders</span><span class="p">,</span><span class="n">genOrderedPairPerm</span><span class="p">,</span><span class="n">fileDataGenerator</span>
<span class="kn">from</span> <span class="nn">utility_and_permutation_fxs</span> <span class="kn">import</span> <span class="n">all_perms</span><span class="p">,</span><span class="n">all_pair_perms</span><span class="p">,</span><span class="n">good_perms</span><span class="p">,</span><span class="n">good_combos</span>
<span class="kn">from</span> <span class="nn">utility_and_permutation_fxs</span> <span class="kn">import</span> <span class="n">gen_good_perms</span><span class="p">,</span><span class="n">gen_good_combos</span><span class="p">,</span><span class="n">listFin</span>
<span class="c"># f(x)s for f(x)s</span>
<span class="kn">from</span> <span class="nn">fxs_for_fxs</span> <span class="kn">import</span> <span class="n">get_travel_time</span><span class="p">,</span><span class="n">pd_get_travel_time</span><span class="p">,</span><span class="n">pd_combine</span><span class="p">,</span><span class="n">pd_min_of_list</span>
<span class="kn">from</span> <span class="nn">fxs_for_fxs</span> <span class="kn">import</span> <span class="n">pd_index_of_list</span><span class="p">,</span><span class="n">pd_index_in_list</span><span class="p">,</span><span class="n">pd_append_list</span><span class="p">,</span><span class="n">pd_list_to_combo_index</span>
<span class="kn">from</span> <span class="nn">fxs_for_fxs</span> <span class="kn">import</span> <span class="n">pd_set_to_orderedSet_index</span><span class="p">,</span><span class="n">create_combo_sortKey</span><span class="p">,</span><span class="n">pd_create_sortKey</span>
<span class="kn">from</span> <span class="nn">fxs_for_fxs</span> <span class="kn">import</span> <span class="n">apply_sortKey</span><span class="p">,</span><span class="n">pd_split_tuple</span><span class="p">,</span><span class="n">pd_get_combo_index</span><span class="p">,</span><span class="n">pd_get_trip_times</span>
<span class="kn">from</span> <span class="nn">fxs_for_fxs</span> <span class="kn">import</span> <span class="n">pd_get_diff_StEn</span><span class="p">,</span><span class="n">pd_proximity</span><span class="p">,</span><span class="n">pd_mock_to_num_dict</span><span class="p">,</span><span class="n">get_multi_travel_times</span>
<span class="c"># PG f(x)s</span>
<span class="kn">from</span> <span class="nn">pg_fxs</span> <span class="kn">import</span> <span class="n">pg_get_random_pt_in_circle_around_node</span><span class="p">,</span><span class="n">pg_get_random_node_in_box</span><span class="p">,</span><span class="n">pg_get_nodes_in_geom</span>
<span class="kn">from</span> <span class="nn">pg_fxs</span> <span class="kn">import</span> <span class="n">pg_update_table_with_random_pt_in_circle_around_node</span><span class="p">,</span><span class="n">pg_get_cir_ctr_and_rad_bounding_way_box</span>
<span class="kn">from</span> <span class="nn">pg_fxs</span> <span class="kn">import</span> <span class="n">pg_get_travel_time</span><span class="p">,</span><span class="n">pg_get_travel_cost</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[25]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># Simulation Assumptions</span>

<span class="kn">import</span> <span class="nn">assumptions</span> <span class="kn">as</span> <span class="nn">A</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[26]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># Simulation Vars</span>
<span class="n">use_cython</span><span class="o">=</span><span class="bp">True</span>
<span class="c"># cython=False</span>
<span class="c"># resume=True</span>
<span class="n">resume</span><span class="o">=</span><span class="bp">False</span>
<span class="c"># save=True</span>
<span class="n">save</span><span class="o">=</span><span class="bp">False</span>

<span class="n">makeData</span><span class="o">=</span><span class="bp">False</span>
<span class="n">runNormalDel</span><span class="o">=</span><span class="bp">False</span>
<span class="n">alert_bell</span><span class="o">=</span><span class="bp">False</span>

<span class="n">showRealData</span><span class="o">=</span><span class="bp">False</span>
<span class="n">showSimData</span><span class="o">=</span><span class="bp">False</span>
<span class="c"># normal_sim = True</span>
<span class="n">normal_sim</span> <span class="o">=</span> <span class="bp">False</span>
<span class="n">show_normal_results</span> <span class="o">=</span> <span class="bp">False</span>
<span class="n">chaos_sim</span> <span class="o">=</span> <span class="bp">True</span>
<span class="c"># chaos_sim = False</span>
<span class="c"># show_data_results = True</span>
<span class="n">show_data_results</span> <span class="o">=</span> <span class="bp">False</span>
<span class="n">lattice_sim</span> <span class="o">=</span> <span class="bp">False</span>

<span class="c"># load=True</span>
<span class="n">load</span><span class="o">=</span><span class="bp">False</span>
<span class="n">errorCheck</span><span class="o">=</span><span class="bp">False</span>
<span class="n">global_op_vars</span><span class="o">=</span><span class="bp">False</span>

<span class="n">way_t</span><span class="p">,</span><span class="n">vert_t</span><span class="p">,</span><span class="n">vert_g</span> <span class="o">=</span> <span class="s">&#39;lion_ways_slim&#39;</span><span class="p">,</span><span class="s">&#39;lion_ways_slim_vertices_pgr&#39;</span><span class="p">,</span><span class="s">&#39;the_geom&#39;</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[27]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># Process Libraries</span>
<span class="kn">from</span> <span class="nn">rd_lib</span> <span class="kn">import</span> <span class="n">sys</span><span class="p">,</span><span class="n">randint</span><span class="p">,</span><span class="n">random</span><span class="p">,</span><span class="n">time</span><span class="p">,</span><span class="n">NoneType</span><span class="p">,</span><span class="n">path</span><span class="p">,</span><span class="n">listdir</span><span class="p">,</span><span class="n">system</span><span class="p">,</span><span class="n">this_cwd</span><span class="p">,</span><span class="n">py_path</span>
<span class="kn">from</span> <span class="nn">rd_lib</span> <span class="kn">import</span> <span class="n">sqrt</span><span class="p">,</span><span class="n">pd</span><span class="p">,</span><span class="n">np</span><span class="p">,</span><span class="n">gd</span><span class="p">,</span><span class="n">engine</span>


<span class="k">if</span> <span class="n">use_cython</span><span class="o">==</span><span class="bp">False</span><span class="p">:</span>   <span class="kn">from</span> <span class="nn">order_by_min2</span> <span class="kn">import</span> <span class="n">c2_order_by_min</span> <span class="k">as</span> <span class="n">c_order_by_min</span>
<span class="k">else</span><span class="p">:</span>                   <span class="kn">from</span> <span class="nn">cy_lib</span> <span class="kn">import</span> <span class="n">pyximport</span><span class="p">,</span><span class="n">pp</span><span class="p">,</span><span class="n">cy</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[28]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># Simulation Data Generation</span>
<span class="kn">from</span> <span class="nn">sim_data_gen</span> <span class="kn">import</span> <span class="n">make_simulation_data_from_real_data</span><span class="p">,</span><span class="n">make_simulation_data</span><span class="p">,</span><span class="n">open_pd_sim_data</span>
<span class="kn">from</span> <span class="nn">sim_data_gen</span> <span class="kn">import</span> <span class="n">open_simulation_data</span><span class="p">,</span><span class="n">init_dg_pool</span><span class="p">,</span><span class="n">init_global_vars</span><span class="p">,</span><span class="n">get_saved_global_vars</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[29]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># Cython Var Generation</span>

<span class="kn">from</span> <span class="nn">cy_var_gen</span> <span class="kn">import</span> <span class="n">global_simulation_vars</span><span class="p">,</span><span class="n">make_orderSet_store</span><span class="p">,</span><span class="n">make_pairSet_store</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[30]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># Process f(x)s</span>
<span class="k">def</span> <span class="nf">new_dg_to_order_q</span><span class="p">(</span><span class="n">new</span><span class="p">,</span><span class="n">order_q_i</span><span class="p">,</span><span class="n">errorCheck</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
    <span class="n">row</span> <span class="o">=</span> <span class="n">order_q_i</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="mi">0</span><span class="p">,:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">row</span><span class="p">[</span><span class="s">&#39;status&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;on deck&#39;</span>
    <span class="n">row</span><span class="p">[</span><span class="s">&#39;deliv_num&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>

    <span class="n">node_array</span> <span class="o">=</span> <span class="p">[</span><span class="n">order_q_i</span><span class="p">[</span><span class="s">&#39;dg_node&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span><span class="n">new</span><span class="p">[</span><span class="s">&#39;end_node&#39;</span><span class="p">]]</span>
    <span class="n">cost_tbl</span> <span class="o">=</span> <span class="n">pg_get_travel_cost</span><span class="p">(</span><span class="n">new</span><span class="p">[</span><span class="s">&#39;start_node&#39;</span><span class="p">],</span><span class="n">node_array</span><span class="p">)</span>

    <span class="n">row</span><span class="p">[</span><span class="s">&#39;travel_time_to_loc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">cost_tbl</span><span class="o">.</span><span class="n">cost</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">MPH</span>
    <span class="n">row</span><span class="p">[</span><span class="s">&#39;deliv_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">new</span><span class="p">[</span><span class="s">&#39;deliv_id&#39;</span><span class="p">]</span>
    <span class="n">row</span><span class="p">[</span><span class="s">&#39;order_time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">new</span><span class="p">[</span><span class="s">&#39;order_time&#39;</span><span class="p">]</span>
    <span class="n">row</span><span class="p">[</span><span class="s">&#39;start_point&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">new</span><span class="p">[</span><span class="s">&#39;start_point&#39;</span><span class="p">]</span>
    <span class="n">row</span><span class="p">[</span><span class="s">&#39;start_node&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">new</span><span class="p">[</span><span class="s">&#39;start_node&#39;</span><span class="p">]</span>
    <span class="n">row</span><span class="p">[</span><span class="s">&#39;start_time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">new</span><span class="p">[</span><span class="s">&#39;order_time&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">row</span><span class="p">[</span><span class="s">&#39;travel_time_to_loc&#39;</span><span class="p">]</span>

    <span class="n">row</span><span class="p">[</span><span class="s">&#39;travel_time&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">cost_tbl</span><span class="o">.</span><span class="n">cost</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">MPH</span>
    <span class="n">row</span><span class="p">[</span><span class="s">&#39;end_time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s">&#39;start_time&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">row</span><span class="p">[</span><span class="s">&#39;travel_time&#39;</span><span class="p">]</span>
    <span class="n">row</span><span class="p">[</span><span class="s">&#39;end_point&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">new</span><span class="p">[</span><span class="s">&#39;end_point&#39;</span><span class="p">]</span>
    <span class="n">row</span><span class="p">[</span><span class="s">&#39;end_node&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">new</span><span class="p">[</span><span class="s">&#39;end_node&#39;</span><span class="p">]</span>
    <span class="n">row</span><span class="p">[</span><span class="s">&#39;total_order_time&#39;</span><span class="p">]</span><span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s">&#39;end_time&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">row</span><span class="p">[</span><span class="s">&#39;order_time&#39;</span><span class="p">]</span>

    <span class="n">updated_order_q_i</span> <span class="o">=</span> <span class="n">order_q_i</span><span class="o">.</span><span class="n">ix</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">,:]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
    <span class="n">updated_dg_q_i</span> <span class="o">=</span> <span class="n">pull_from_order</span><span class="p">(</span><span class="n">updated_order_q_i</span><span class="p">,</span><span class="n">errorCheck</span><span class="o">=</span><span class="n">errorCheck</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">errorCheck</span><span class="o">==</span><span class="bp">True</span><span class="p">:</span> <span class="n">error_check</span><span class="p">(</span><span class="n">order_q_i</span><span class="o">=</span><span class="n">updated_order_q_i</span><span class="p">,</span><span class="n">dg_q_i</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">updated_order_q_i</span><span class="p">,</span><span class="n">updated_dg_q_i</span>
<span class="k">def</span> <span class="nf">updateCurrentLocation</span><span class="p">(</span><span class="n">globalVars</span><span class="p">,</span><span class="n">now</span><span class="p">,</span><span class="n">changedDG</span><span class="o">=</span><span class="p">[]):</span>
    <span class="n">order_q</span><span class="p">,</span><span class="n">order_delivered</span><span class="p">,</span><span class="n">dg_q</span><span class="p">,</span><span class="n">dg_delivered</span><span class="p">,</span><span class="n">dg_pool</span><span class="p">,</span><span class="n">dg_pool_pt</span> <span class="o">=</span> <span class="n">globalVars</span>
    <span class="n">travel_speed</span><span class="o">=</span><span class="n">A</span><span class="o">.</span><span class="n">travel_speed</span>

    <span class="c"># if just finishing delivery, and currentDeliv will be 0, update location from order_q endPoint ...</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">changedDG</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">oq</span> <span class="o">=</span> <span class="n">order_q</span>
        <span class="n">last_orders</span> <span class="o">=</span> <span class="n">oq</span><span class="p">[(</span><span class="n">oq</span><span class="o">.</span><span class="n">id</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">changedDG</span><span class="p">)</span><span class="o">==</span><span class="bp">True</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">oq</span><span class="o">.</span><span class="n">end_time</span><span class="o">==</span><span class="n">now</span><span class="p">)]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">last_orders</span><span class="p">)</span><span class="o">!=</span><span class="mi">0</span><span class="p">:</span>
            <span class="n">last_order_ids</span> <span class="o">=</span> <span class="n">last_orders</span><span class="o">.</span><span class="n">id</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
            <span class="n">last_order_id_ind_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">last_orders</span><span class="o">.</span><span class="n">id</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span><span class="n">last_orders</span><span class="o">.</span><span class="n">index</span><span class="p">))</span>

            <span class="n">dyn_dg_pool</span> <span class="o">=</span> <span class="n">dg_pool</span><span class="p">[</span><span class="n">dg_pool</span><span class="o">.</span><span class="n">dg_id</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">last_order_ids</span><span class="p">)</span><span class="o">==</span><span class="bp">True</span><span class="p">]</span>
            <span class="n">dyn_dg_pool_ids</span> <span class="o">=</span> <span class="n">dyn_dg_pool</span><span class="o">.</span><span class="n">dg_id</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

            <span class="n">take_index</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">last_order_id_ind_dict</span><span class="p">[</span><span class="n">s</span><span class="p">],</span><span class="n">dyn_dg_pool_ids</span><span class="p">)</span>

            <span class="n">stat_dg_pool</span> <span class="o">=</span> <span class="n">dg_pool</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">dg_pool</span><span class="o">.</span><span class="n">index</span> <span class="o">-</span> <span class="n">dyn_dg_pool</span><span class="o">.</span><span class="n">index</span><span class="p">]</span>

            <span class="n">dyn_dg_pool</span><span class="p">[[</span><span class="s">&#39;dg_X&#39;</span><span class="p">,</span><span class="s">&#39;dg_Y&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">last_orders</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">dyn_dg_pool_ids</span><span class="p">,[</span><span class="s">&#39;end_X&#39;</span><span class="p">,</span><span class="s">&#39;end_Y&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">values</span>
            <span class="n">dg_pool</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">stat_dg_pool</span><span class="p">,</span><span class="n">dyn_dg_pool</span><span class="p">,</span><span class="n">how</span><span class="o">=</span><span class="s">&#39;outer&#39;</span><span class="p">)</span>

    <span class="n">static_dg_pool</span> <span class="o">=</span> <span class="n">dg_pool</span><span class="p">[(</span><span class="n">dg_pool</span><span class="o">.</span><span class="n">current_deliveries</span><span class="o">==</span><span class="mi">0</span><span class="p">)]</span>
    <span class="n">dyn_dg_pool</span> <span class="o">=</span> <span class="n">dg_pool</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">dg_pool</span><span class="o">.</span><span class="n">index</span> <span class="o">-</span> <span class="n">static_dg_pool</span><span class="o">.</span><span class="n">index</span><span class="p">,:]</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">dyn_dg_pool</span><span class="o">.</span><span class="n">index</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span> <span class="k">return</span> <span class="n">globalVars</span>
    <span class="n">dyn_dg_pool_ids</span> <span class="o">=</span> <span class="n">dyn_dg_pool</span><span class="o">.</span><span class="n">dg_id</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
    <span class="n">dg_q_i</span> <span class="o">=</span> <span class="n">dg_q</span><span class="p">[(</span><span class="n">dg_q</span><span class="o">.</span><span class="n">dg_id</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">dyn_dg_pool_ids</span><span class="p">)</span><span class="o">==</span><span class="bp">True</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">dg_q</span><span class="p">[</span><span class="s">&#39;pta-t&#39;</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">now</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">now</span> <span class="o">&lt;=</span><span class="n">dg_q</span><span class="p">[</span><span class="s">&#39;ptb-t&#39;</span><span class="p">])]</span>

    <span class="n">dg_q_start</span> <span class="o">=</span> <span class="n">dg_q_i</span><span class="p">[</span><span class="n">dg_q_i</span><span class="p">[</span><span class="s">&#39;pta-t&#39;</span><span class="p">]</span><span class="o">==</span><span class="n">now</span><span class="p">]</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">dg_q_start</span><span class="o">.</span><span class="n">index</span><span class="p">)</span><span class="o">!=</span><span class="mi">0</span><span class="p">:</span>
        <span class="n">dg_q_start_ids</span> <span class="o">=</span> <span class="n">dg_q_start</span><span class="o">.</span><span class="n">dg_id</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
        <span class="n">new_dg_pool</span> <span class="o">=</span> <span class="n">dg_pool</span><span class="p">[</span><span class="n">dg_pool</span><span class="o">.</span><span class="n">dg_id</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">dg_q_start_ids</span><span class="p">)]</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="n">new_dg_pool</span><span class="p">[</span><span class="s">&#39;map&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_dg_pool</span><span class="o">.</span><span class="n">dg_id</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">dg_q_start_ids</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">s</span><span class="p">)))</span>
        <span class="n">new_dg_pool</span><span class="o">.</span><span class="n">ix</span><span class="p">[:,[</span><span class="s">&#39;dg_X&#39;</span><span class="p">,</span><span class="s">&#39;dg_Y&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">dg_q_start</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">new_dg_pool</span><span class="o">.</span><span class="n">map</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),[</span><span class="s">&#39;ptax&#39;</span><span class="p">,</span><span class="s">&#39;ptay&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">values</span>

        <span class="n">globalVars</span> <span class="o">=</span> <span class="n">update_global_vars</span><span class="p">(</span><span class="n">globalVars</span><span class="p">,</span><span class="s">&#39;update dg_pool&#39;</span><span class="p">,</span><span class="n">newAddVar</span><span class="o">=</span><span class="n">new_dg_pool</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s">&#39;map&#39;</span><span class="p">],</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">),</span><span class="n">newSubVar</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">replaceVar</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;id&#39;</span><span class="p">:</span><span class="n">dg_q_start_ids</span><span class="p">})</span>
        <span class="n">order_q</span><span class="p">,</span><span class="n">order_delivered</span><span class="p">,</span><span class="n">dg_q</span><span class="p">,</span><span class="n">dg_delivered</span><span class="p">,</span><span class="n">dg_pool</span><span class="p">,</span><span class="n">dg_pool_pt</span> <span class="o">=</span> <span class="n">globalVars</span>
        <span class="n">globalVars</span> <span class="o">=</span> <span class="n">order_q</span><span class="p">,</span><span class="n">order_delivered</span><span class="p">,</span><span class="n">dg_q</span><span class="p">,</span><span class="n">dg_delivered</span><span class="p">,</span><span class="n">dg_pool</span><span class="p">,</span><span class="n">dg_pool_pt</span>

    <span class="n">dg_q_end</span> <span class="o">=</span> <span class="n">dg_q_i</span><span class="p">[</span><span class="n">dg_q_i</span><span class="p">[</span><span class="s">&#39;ptb-t&#39;</span><span class="p">]</span><span class="o">==</span><span class="n">now</span><span class="p">]</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">dg_q_end</span><span class="o">.</span><span class="n">index</span><span class="p">)</span><span class="o">!=</span><span class="mi">0</span><span class="p">:</span>
        <span class="n">dg_q_end_ids</span> <span class="o">=</span> <span class="n">dg_q_end</span><span class="o">.</span><span class="n">dg_id</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
        <span class="n">new_dg_pool</span> <span class="o">=</span> <span class="n">dg_pool</span><span class="p">[</span><span class="n">dg_pool</span><span class="o">.</span><span class="n">dg_id</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">dg_q_end_ids</span><span class="p">)]</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="n">new_dg_pool</span><span class="p">[</span><span class="s">&#39;map&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_dg_pool</span><span class="o">.</span><span class="n">dg_id</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">dg_q_end_ids</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">s</span><span class="p">)))</span>
        <span class="n">new_dg_pool</span><span class="o">.</span><span class="n">ix</span><span class="p">[:,[</span><span class="s">&#39;dg_X&#39;</span><span class="p">,</span><span class="s">&#39;dg_Y&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">dg_q_end</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">new_dg_pool</span><span class="o">.</span><span class="n">map</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),[</span><span class="s">&#39;ptax&#39;</span><span class="p">,</span><span class="s">&#39;ptay&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">values</span>

        <span class="n">globalVars</span> <span class="o">=</span> <span class="n">update_global_vars</span><span class="p">(</span><span class="n">globalVars</span><span class="p">,</span><span class="s">&#39;update dg_pool&#39;</span><span class="p">,</span><span class="n">newAddVar</span><span class="o">=</span><span class="n">new_dg_pool</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s">&#39;map&#39;</span><span class="p">],</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">),</span><span class="n">newSubVar</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">replaceVar</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;id&#39;</span><span class="p">:</span><span class="n">dg_q_end_ids</span><span class="p">})</span>
        <span class="n">order_q</span><span class="p">,</span><span class="n">order_delivered</span><span class="p">,</span><span class="n">dg_q</span><span class="p">,</span><span class="n">dg_delivered</span><span class="p">,</span><span class="n">dg_pool</span><span class="p">,</span><span class="n">dg_pool_pt</span> <span class="o">=</span> <span class="n">globalVars</span>
        <span class="n">globalVars</span> <span class="o">=</span> <span class="n">order_q</span><span class="p">,</span><span class="n">order_delivered</span><span class="p">,</span><span class="n">dg_q</span><span class="p">,</span><span class="n">dg_delivered</span><span class="p">,</span><span class="n">dg_pool</span><span class="p">,</span><span class="n">dg_pool_pt</span>

    <span class="n">df</span> <span class="o">=</span> <span class="n">dg_q_i</span><span class="p">[(</span><span class="n">dg_q_i</span><span class="p">[</span><span class="s">&#39;pta-t&#39;</span><span class="p">]</span><span class="o">&gt;</span><span class="n">now</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">now</span><span class="o">&lt;</span><span class="n">dg_q_i</span><span class="p">[</span><span class="s">&#39;ptb-t&#39;</span><span class="p">])]</span> <span class="c"># do not reset index as it is used later</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">)</span><span class="o">!=</span><span class="mi">0</span><span class="p">:</span>
        <span class="n">df</span><span class="p">[</span><span class="s">&#39;L&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">now</span> <span class="o">-</span> <span class="n">df</span><span class="p">[</span><span class="s">&#39;pta-t&#39;</span><span class="p">])</span><span class="o">*</span><span class="n">travel_speed</span>
        <span class="n">df</span><span class="p">[</span><span class="s">&#39;dx&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s">&#39;ptbx&#39;</span><span class="p">]</span><span class="o">-</span><span class="n">df</span><span class="p">[</span><span class="s">&#39;ptax&#39;</span><span class="p">]</span>
        <span class="n">df</span><span class="p">[</span><span class="s">&#39;posx&#39;</span><span class="p">]</span> <span class="o">=</span>  <span class="n">df</span><span class="o">.</span><span class="n">dx</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="bp">True</span> <span class="k">if</span> <span class="n">s</span><span class="o">&gt;</span><span class="mi">0</span> <span class="k">else</span> <span class="bp">False</span><span class="p">)</span>
        <span class="n">df</span><span class="p">[</span><span class="s">&#39;dy&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s">&#39;ptby&#39;</span><span class="p">]</span><span class="o">-</span><span class="n">df</span><span class="p">[</span><span class="s">&#39;ptay&#39;</span><span class="p">]</span>
        <span class="n">df</span><span class="p">[</span><span class="s">&#39;posy&#39;</span><span class="p">]</span> <span class="o">=</span>  <span class="n">df</span><span class="o">.</span><span class="n">dy</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="bp">True</span> <span class="k">if</span> <span class="n">s</span><span class="o">&gt;</span><span class="mi">0</span> <span class="k">else</span> <span class="bp">False</span><span class="p">)</span>
        <span class="n">df</span><span class="p">[</span><span class="s">&#39;abs_dx&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">dx</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span> <span class="k">if</span> <span class="n">s</span><span class="o">&gt;</span><span class="mi">0</span> <span class="k">else</span> <span class="o">-</span><span class="mi">1</span><span class="o">*</span><span class="n">s</span><span class="p">)</span>
        <span class="n">df</span><span class="p">[</span><span class="s">&#39;xonly&#39;</span><span class="p">]</span> <span class="o">=</span>  <span class="n">df</span><span class="o">.</span><span class="n">abs_dx</span> <span class="o">-</span> <span class="n">df</span><span class="o">.</span><span class="n">L</span>
        <span class="n">df</span><span class="p">[</span><span class="s">&#39;xonly&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">xonly</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="bp">True</span> <span class="k">if</span> <span class="n">s</span><span class="o">&gt;=</span><span class="mi">0</span> <span class="k">else</span> <span class="bp">False</span><span class="p">)</span>
        <span class="n">df_xonly</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">xonly</span><span class="o">==</span><span class="bp">True</span><span class="p">]</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">df_xonly</span><span class="o">.</span><span class="n">index</span><span class="p">)</span><span class="o">!=</span><span class="mi">0</span><span class="p">:</span>

            <span class="n">df_xonly</span><span class="p">[</span><span class="s">&#39;dg_X&#39;</span><span class="p">],</span><span class="n">df_xonly</span><span class="p">[</span><span class="s">&#39;dg_Y&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">df_xonly</span><span class="o">.</span><span class="n">index</span><span class="p">),),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">),</span><span class="n">df_xonly</span><span class="p">[</span><span class="s">&#39;ptay&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
            <span class="n">df_xonly_posInd</span> <span class="o">=</span> <span class="n">df_xonly</span><span class="p">[</span><span class="n">df_xonly</span><span class="o">.</span><span class="n">posx</span><span class="o">==</span><span class="bp">True</span><span class="p">]</span><span class="o">.</span><span class="n">index</span>
            <span class="n">df_xonly_negInd</span> <span class="o">=</span> <span class="n">df_xonly</span><span class="o">.</span><span class="n">index</span> <span class="o">-</span> <span class="n">df_xonly_posInd</span>

            <span class="n">df_xonly</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">df_xonly_posInd</span><span class="p">,</span><span class="s">&#39;dg_X&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_xonly</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">df_xonly_posInd</span><span class="p">,</span><span class="s">&#39;ptax&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">df_xonly</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">df_xonly_posInd</span><span class="p">,</span><span class="s">&#39;L&#39;</span><span class="p">]</span>
            <span class="n">df_xonly</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">df_xonly_negInd</span><span class="p">,</span><span class="s">&#39;dg_X&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_xonly</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">df_xonly_negInd</span><span class="p">,</span><span class="s">&#39;ptax&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">df_xonly</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">df_xonly_negInd</span><span class="p">,</span><span class="s">&#39;L&#39;</span><span class="p">]</span>

            <span class="n">df_xonly_ids</span> <span class="o">=</span> <span class="n">df_xonly</span><span class="o">.</span><span class="n">dg_id</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
            <span class="n">new_dg_pool</span> <span class="o">=</span> <span class="n">dg_pool</span><span class="p">[</span><span class="n">dg_pool</span><span class="o">.</span><span class="n">dg_id</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">df_xonly_ids</span><span class="p">)]</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
            <span class="n">new_dg_pool</span><span class="p">[</span><span class="s">&#39;map&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_dg_pool</span><span class="o">.</span><span class="n">dg_id</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">df_xonly_ids</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">s</span><span class="p">)))</span>
            <span class="n">new_dg_pool</span><span class="o">.</span><span class="n">ix</span><span class="p">[:,[</span><span class="s">&#39;dg_X&#39;</span><span class="p">,</span><span class="s">&#39;dg_Y&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">df_xonly</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">new_dg_pool</span><span class="o">.</span><span class="n">map</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),[</span><span class="s">&#39;ptax&#39;</span><span class="p">,</span><span class="s">&#39;ptay&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">values</span>
            <span class="n">globalVars</span> <span class="o">=</span> <span class="n">update_global_vars</span><span class="p">(</span><span class="n">globalVars</span><span class="p">,</span><span class="s">&#39;update dg_pool&#39;</span><span class="p">,</span><span class="n">newAddVar</span><span class="o">=</span><span class="n">new_dg_pool</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s">&#39;map&#39;</span><span class="p">],</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">),</span><span class="n">newSubVar</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">replaceVar</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;id&#39;</span><span class="p">:</span><span class="n">df_xonly_ids</span><span class="p">})</span>
            <span class="n">order_q</span><span class="p">,</span><span class="n">order_delivered</span><span class="p">,</span><span class="n">dg_q</span><span class="p">,</span><span class="n">dg_delivered</span><span class="p">,</span><span class="n">dg_pool</span><span class="p">,</span><span class="n">dg_pool_pt</span> <span class="o">=</span> <span class="n">globalVars</span>
            <span class="n">globalVars</span> <span class="o">=</span> <span class="n">order_q</span><span class="p">,</span><span class="n">order_delivered</span><span class="p">,</span><span class="n">dg_q</span><span class="p">,</span><span class="n">dg_delivered</span><span class="p">,</span><span class="n">dg_pool</span><span class="p">,</span><span class="n">dg_pool_pt</span>

            <span class="n">df_xonly</span><span class="p">[</span><span class="s">&#39;zero&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_xonly</span><span class="o">.</span><span class="n">dx</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="bp">True</span> <span class="k">if</span> <span class="n">s</span><span class="o">==</span><span class="mi">0</span> <span class="k">else</span> <span class="bp">False</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">df_xonly</span><span class="p">[</span><span class="n">df_xonly</span><span class="o">.</span><span class="n">zero</span><span class="o">==</span><span class="bp">True</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
                <span class="k">print</span> <span class="s">&#39;check this in update location&#39;</span>
                <span class="n">systemError</span><span class="p">()</span>

        <span class="n">df_xy</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">index</span> <span class="o">-</span> <span class="n">df_xonly</span><span class="o">.</span><span class="n">index</span><span class="p">,:]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">df_xy</span><span class="o">.</span><span class="n">index</span><span class="p">)</span><span class="o">!=</span><span class="mi">0</span><span class="p">:</span>
            <span class="n">df_xy</span><span class="p">[</span><span class="s">&#39;dg_X&#39;</span><span class="p">],</span><span class="n">df_xy</span><span class="p">[</span><span class="s">&#39;dg_Y&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_xy</span><span class="p">[</span><span class="s">&#39;ptbx&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">df_xy</span><span class="o">.</span><span class="n">index</span><span class="p">),),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">)</span>
            <span class="c"># change L based on X-axis changes</span>
            <span class="n">df_xy_posInd</span> <span class="o">=</span> <span class="n">df_xy</span><span class="p">[</span><span class="n">df_xy</span><span class="o">.</span><span class="n">posx</span><span class="o">==</span><span class="bp">True</span><span class="p">]</span><span class="o">.</span><span class="n">index</span>
            <span class="n">df_xy_negInd</span> <span class="o">=</span> <span class="n">df_xy</span><span class="o">.</span><span class="n">index</span> <span class="o">-</span> <span class="n">df_xy_posInd</span>
            <span class="n">df_xy</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">df_xy_posInd</span><span class="p">,</span><span class="s">&#39;L&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_xy</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">df_xy_posInd</span><span class="p">,</span><span class="s">&#39;L&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">df_xy</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">df_xy_posInd</span><span class="p">,</span><span class="s">&#39;dx&#39;</span><span class="p">]</span>
            <span class="n">df_xy</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">df_xy_negInd</span><span class="p">,</span><span class="s">&#39;L&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_xy</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">df_xy_negInd</span><span class="p">,</span><span class="s">&#39;L&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">df_xy</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">df_xy_negInd</span><span class="p">,</span><span class="s">&#39;dx&#39;</span><span class="p">]</span>
            <span class="c"># Determine Y-axis values</span>
            <span class="n">df_xy_posInd</span> <span class="o">=</span> <span class="n">df_xy</span><span class="p">[</span><span class="n">df_xy</span><span class="o">.</span><span class="n">posy</span><span class="o">==</span><span class="bp">True</span><span class="p">]</span><span class="o">.</span><span class="n">index</span>
            <span class="n">df_xy_negInd</span> <span class="o">=</span> <span class="n">df_xy</span><span class="o">.</span><span class="n">index</span> <span class="o">-</span> <span class="n">df_xy_posInd</span>
            <span class="n">df_xy</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">df_xy_posInd</span><span class="p">,</span><span class="s">&#39;dg_Y&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_xy</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">df_xy_posInd</span><span class="p">,</span><span class="s">&#39;ptay&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">df_xy</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">df_xy_posInd</span><span class="p">,</span><span class="s">&#39;L&#39;</span><span class="p">]</span>
            <span class="n">df_xy</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">df_xy_negInd</span><span class="p">,</span><span class="s">&#39;dg_Y&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_xy</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">df_xy_negInd</span><span class="p">,</span><span class="s">&#39;ptay&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">df_xy</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">df_xy_negInd</span><span class="p">,</span><span class="s">&#39;L&#39;</span><span class="p">]</span>
            <span class="c"># Update dg_pool</span>
            <span class="n">df_xy_ids</span> <span class="o">=</span> <span class="n">df_xy</span><span class="o">.</span><span class="n">dg_id</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
            <span class="n">new_dg_pool</span> <span class="o">=</span> <span class="n">dg_pool</span><span class="p">[</span><span class="n">dg_pool</span><span class="o">.</span><span class="n">dg_id</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">df_xy_ids</span><span class="p">)]</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
            <span class="n">new_dg_pool</span><span class="p">[</span><span class="s">&#39;map&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_dg_pool</span><span class="o">.</span><span class="n">dg_id</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">df_xy_ids</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">s</span><span class="p">)))</span>
            <span class="n">new_dg_pool</span><span class="o">.</span><span class="n">ix</span><span class="p">[:,[</span><span class="s">&#39;dg_X&#39;</span><span class="p">,</span><span class="s">&#39;dg_Y&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">df_xy</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">new_dg_pool</span><span class="o">.</span><span class="n">map</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),[</span><span class="s">&#39;ptax&#39;</span><span class="p">,</span><span class="s">&#39;ptay&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">values</span>
            <span class="n">globalVars</span> <span class="o">=</span> <span class="n">update_global_vars</span><span class="p">(</span><span class="n">globalVars</span><span class="p">,</span><span class="s">&#39;update dg_pool&#39;</span><span class="p">,</span><span class="n">newAddVar</span><span class="o">=</span><span class="n">new_dg_pool</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s">&#39;map&#39;</span><span class="p">],</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">),</span><span class="n">newSubVar</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">replaceVar</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;id&#39;</span><span class="p">:</span><span class="n">df_xy_ids</span><span class="p">})</span>
            <span class="n">order_q</span><span class="p">,</span><span class="n">order_delivered</span><span class="p">,</span><span class="n">dg_q</span><span class="p">,</span><span class="n">dg_delivered</span><span class="p">,</span><span class="n">dg_pool</span><span class="p">,</span><span class="n">dg_pool_pt</span> <span class="o">=</span> <span class="n">globalVars</span>
            <span class="n">globalVars</span> <span class="o">=</span> <span class="n">order_q</span><span class="p">,</span><span class="n">order_delivered</span><span class="p">,</span><span class="n">dg_q</span><span class="p">,</span><span class="n">dg_delivered</span><span class="p">,</span><span class="n">dg_pool</span><span class="p">,</span><span class="n">dg_pool_pt</span>

    <span class="k">return</span> <span class="n">globalVars</span>
<span class="k">def</span> <span class="nf">eval_combos</span><span class="p">(</span><span class="n">var_group</span><span class="p">,</span><span class="n">saveOutput</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="n">delivery_count</span><span class="p">,</span><span class="n">dg_group_i</span><span class="p">,</span><span class="n">new</span><span class="p">,</span><span class="n">deliv_id</span><span class="p">,</span><span class="n">start_loc</span><span class="p">,</span><span class="n">end_loc</span><span class="o">=</span><span class="n">var_group</span>
    <span class="n">location_count</span><span class="o">=</span><span class="p">(</span><span class="n">delivery_count</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span>
    <span class="n">row</span><span class="o">=</span><span class="n">dg_group_i</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">,:]</span>

    <span class="c">#</span>
    <span class="c"># mock_pairs = pairSet[pairSet[&#39;mc&#39;+str(delivery_count)]==True][[&#39;a&#39;,&#39;b&#39;]]</span>
    <span class="c"># mock_pairs.a = mock_pairs.a.map(num_to_mock_dict)</span>
    <span class="c"># mock_pairs.b = mock_pairs.b.map(num_to_mock_dict)</span>
    <span class="c">#</span>
    <span class="c"># mock_travel_combos = orderSet[orderSet[&#39;mc&#39;+str(delivery_count)]==True].ix[:,&#39;pt0&#39;:&#39;pt7&#39;]</span>
    <span class="c"># for i in range(0,len(mock_travel_combos.columns)):</span>
    <span class="c">#     mock_travel_combos[mock_travel_combos.columns.tolist()[i]]=mock_travel_combos.iloc[:,i].map(num_to_mock_dict)</span>
    <span class="c"># mock_travel_combos = mock_travel_combos.apply(lambda s: [pd_combine(*s)],axis=1).head()</span>
    <span class="c"># mock_travel_combos = mock_travel_combos.map(lambda s: s[0]).tolist()</span>
    <span class="c">#</span>


    <span class="n">mock_pairs</span><span class="o">=</span><span class="n">genAllPairPerm_NoRep</span><span class="p">(</span><span class="n">delivery_count</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>

    <span class="n">ABC</span><span class="o">=</span><span class="s">&#39;ABCDEFGHIJKLMNOPQRUSTUVXYZ&#39;</span>
    <span class="n">mock_pairs_locs</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">mock_pairs</span><span class="p">)</span>
    <span class="c"># convert all combos having placeholder variables to real locations</span>
    <span class="c"># first, adjustment to convert A0 to the starting point</span>
    <span class="n">x1</span><span class="p">,</span><span class="n">y1</span><span class="o">=</span><span class="n">row</span><span class="p">[</span><span class="s">&#39;dg_X&#39;</span><span class="p">],</span><span class="n">row</span><span class="p">[</span><span class="s">&#39;dg_Y&#39;</span><span class="p">]</span>
    <span class="c"># new_var=str(x1)+&#39;, &#39;+str(y1)</span>
    <span class="c"># mock_pairs_locs=mock_pairs_locs.replace(&quot;&#39;A0&#39;&quot;,new_var)</span>
         
    <span class="n">mock_travel_combos</span> <span class="o">=</span> <span class="n">genOrderedPairPerm</span><span class="p">(</span><span class="n">delivery_count</span><span class="p">)</span>
    <span class="n">mock_travel_combos</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">mock_travel_combos</span><span class="p">)</span>
    <span class="c"># need to incorporate starting position in mock_travel_combos    </span>
    <span class="c"># t=mock_travel_combos[1:]</span>
    <span class="c"># mock_travel_combos=&#39;[&#39;+t.replace(&#39;[&#39;,&quot;[&#39;A0&#39;, &quot;)</span>
    <span class="n">mock_travel_combos_locs</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">mock_travel_combos</span><span class="p">)</span>
    <span class="c"># # as seen above with mock_pairs_loc</span>
    <span class="c"># mock_travel_combos_locs=mock_travel_combos_locs.replace(&quot;&#39;A0&#39;&quot;,new_var)</span>

    <span class="n">pt</span><span class="o">=</span><span class="mi">0</span>
    <span class="n">deliv_ids</span><span class="o">=</span><span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">delivery_count</span><span class="p">):</span>
        <span class="n">ind</span><span class="o">=</span><span class="n">ABC</span><span class="p">[</span><span class="n">pt</span><span class="p">]</span>
        <span class="n">pt</span><span class="o">+=</span><span class="mi">1</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">dg_group_i</span><span class="o">.</span><span class="n">index</span><span class="p">):</span>
            <span class="n">deliv_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dg_group_i</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="s">&#39;deliv_id&#39;</span><span class="p">])</span>  <span class="c"># delivery IDs #1 will now correspond with A1-A2, etc..</span>
            <span class="n">x1</span><span class="p">,</span><span class="n">y1</span><span class="o">=</span><span class="n">dg_group_i</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="s">&#39;start_X&#39;</span><span class="p">],</span><span class="n">dg_group_i</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="s">&#39;start_Y&#39;</span><span class="p">]</span>
            <span class="n">x2</span><span class="p">,</span><span class="n">y2</span><span class="o">=</span><span class="n">dg_group_i</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="s">&#39;end_X&#39;</span><span class="p">],</span><span class="n">dg_group_i</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="s">&#39;end_Y&#39;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>                   <span class="c"># accounts for adding new delivery</span>
            <span class="n">deliv_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">deliv_id</span><span class="p">)</span>
            <span class="n">x1</span><span class="p">,</span><span class="n">y1</span><span class="o">=</span><span class="n">start_loc</span>
            <span class="n">x2</span><span class="p">,</span><span class="n">y2</span><span class="o">=</span><span class="n">end_loc</span>
            
        <span class="n">new_var</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">x1</span><span class="p">)</span><span class="o">+</span><span class="s">&#39;, &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">y1</span><span class="p">)</span>
        <span class="n">mock_pairs_locs</span><span class="o">=</span><span class="n">mock_pairs_locs</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&quot;&#39;&quot;</span><span class="o">+</span><span class="n">ind</span><span class="o">+</span><span class="s">&quot;1&#39;&quot;</span><span class="p">,</span><span class="n">new_var</span><span class="p">)</span>
        <span class="n">mock_travel_combos_locs</span><span class="o">=</span><span class="n">mock_travel_combos_locs</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&quot;&#39;&quot;</span><span class="o">+</span><span class="n">ind</span><span class="o">+</span><span class="s">&quot;1&#39;&quot;</span><span class="p">,</span><span class="n">new_var</span><span class="p">)</span>
        
        <span class="n">new_var</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">x2</span><span class="p">)</span><span class="o">+</span><span class="s">&#39;, &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">y2</span><span class="p">)</span>
        <span class="n">mock_pairs_locs</span><span class="o">=</span><span class="n">mock_pairs_locs</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&quot;&#39;&quot;</span><span class="o">+</span><span class="n">ind</span><span class="o">+</span><span class="s">&quot;2&#39;&quot;</span><span class="p">,</span><span class="n">new_var</span><span class="p">)</span>
        <span class="n">mock_travel_combos_locs</span><span class="o">=</span><span class="n">mock_travel_combos_locs</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&quot;&#39;&quot;</span><span class="o">+</span><span class="n">ind</span><span class="o">+</span><span class="s">&quot;2&#39;&quot;</span><span class="p">,</span><span class="n">new_var</span><span class="p">)</span>

    <span class="n">mock_pairs_locs</span><span class="o">=</span><span class="nb">eval</span><span class="p">(</span><span class="n">mock_pairs_locs</span><span class="p">)</span>
    <span class="n">mock_travel_combos</span><span class="o">=</span><span class="nb">eval</span><span class="p">(</span><span class="n">mock_travel_combos</span><span class="p">)</span>
    <span class="n">mock_travel_combos_locs</span><span class="o">=</span><span class="nb">eval</span><span class="p">(</span><span class="n">mock_travel_combos_locs</span><span class="p">)</span>
    <span class="n">printString</span><span class="o">=</span><span class="s">&#39;</span><span class="se">\r\n</span><span class="s">Mock Pair Locs</span><span class="se">\r\n</span><span class="s">&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">mock_pairs_locs</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">+</span><span class="s">&#39;</span><span class="se">\n\r</span><span class="s">&#39;</span>
    
    <span class="n">column_names</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;p1x&#39;</span><span class="p">,</span><span class="s">&#39;p1y&#39;</span><span class="p">,</span><span class="s">&#39;p2x&#39;</span><span class="p">,</span><span class="s">&#39;p2y&#39;</span><span class="p">]</span>
    <span class="n">pairs</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">mock_pairs_locs</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="n">column_names</span><span class="p">,</span><span class="n">dtype</span> <span class="o">=</span> <span class="s">&#39;int32&#39;</span><span class="p">)</span>
    <span class="n">pairs</span><span class="p">[</span><span class="s">&#39;travel_time&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">pairs</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">pd_get_travel_time</span><span class="p">(</span><span class="o">*</span><span class="n">s</span><span class="p">),</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

    <span class="n">pairs</span><span class="p">[</span><span class="s">&#39;combined&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">pairs</span><span class="p">[</span><span class="n">column_names</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">pd_combine</span><span class="p">(</span><span class="o">*</span><span class="n">s</span><span class="p">),</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">printString</span><span class="o">+=</span><span class="s">&#39;pairs - shape&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">pairs</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span><span class="o">+</span><span class="s">&#39;</span><span class="se">\n\r</span><span class="s">&#39;</span>
    <span class="n">printString</span><span class="o">+=</span><span class="nb">str</span><span class="p">(</span><span class="n">pairs</span><span class="o">.</span><span class="n">head</span><span class="p">())</span><span class="o">+</span><span class="s">&#39;</span><span class="se">\n\r</span><span class="s">&#39;</span>
    <span class="n">mapper</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">pairs</span><span class="o">.</span><span class="n">combined</span><span class="p">,</span><span class="n">pairs</span><span class="o">.</span><span class="n">travel_time</span><span class="p">))</span>
    
    <span class="n">combos</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">mock_travel_combos_locs</span><span class="p">,</span><span class="n">dtype</span> <span class="o">=</span> <span class="s">&#39;int32&#39;</span><span class="p">)</span>
    <span class="n">combos</span><span class="p">[</span><span class="s">&#39;Mock Combos&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">mock_travel_combos</span><span class="p">)</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">pd_combine</span><span class="p">(</span><span class="o">*</span><span class="n">s</span><span class="p">),</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">combos</span><span class="p">[</span><span class="s">&#39;travel_time&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">combos</span><span class="o">.</span><span class="n">index</span><span class="p">),))</span>
    
    <span class="n">printString</span><span class="o">+=</span><span class="s">&#39;</span><span class="se">\r\n</span><span class="s">Mock Travel Combos </span><span class="se">\r\n</span><span class="s">&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">combos</span><span class="o">.</span><span class="n">head</span><span class="p">())</span><span class="o">+</span><span class="s">&#39;</span><span class="se">\n\r</span><span class="s">&#39;</span>
    
    <span class="n">trip_names</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="n">ABC</span><span class="p">[:</span><span class="n">location_count</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">location_count</span><span class="o">-</span><span class="mi">2</span><span class="p">):</span>
        <span class="n">testCols</span><span class="o">=</span><span class="n">combos</span><span class="p">[</span><span class="n">combos</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">i</span><span class="o">*</span><span class="mi">2</span><span class="p">:</span><span class="n">i</span><span class="o">*</span><span class="mi">2</span><span class="o">+</span><span class="mi">4</span><span class="p">]]</span>
        <span class="n">testCols</span><span class="p">[</span><span class="s">&#39;combined&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">testCols</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">pd_combine</span><span class="p">(</span><span class="o">*</span><span class="n">s</span><span class="p">),</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">testCols</span><span class="p">[</span><span class="s">&#39;travel_times&#39;</span><span class="p">]</span><span class="o">=</span> <span class="p">[</span> <span class="n">mapper</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">testCols</span><span class="p">[</span><span class="s">&#39;combined&#39;</span><span class="p">]</span> <span class="p">]</span>
        <span class="n">combos</span><span class="p">[</span><span class="s">&#39;travel_time&#39;</span><span class="p">]</span><span class="o">+=</span><span class="n">testCols</span><span class="p">[</span><span class="s">&#39;travel_times&#39;</span><span class="p">]</span>
        <span class="n">combos</span><span class="p">[</span><span class="n">trip_names</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span><span class="o">=</span><span class="n">testCols</span><span class="p">[</span><span class="s">&#39;travel_times&#39;</span><span class="p">]</span>

    <span class="n">combos</span><span class="p">[</span><span class="s">&#39;combined&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">combos</span><span class="p">[</span><span class="n">trip_names</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">pd_combine</span><span class="p">(</span><span class="o">*</span><span class="n">s</span><span class="p">),</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>        
    <span class="n">delivery_cols</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ABC</span><span class="p">[:</span><span class="n">delivery_count</span><span class="p">])</span><span class="o">.</span><span class="n">upper</span><span class="p">())</span>
    <span class="n">order_times</span><span class="o">=</span><span class="n">dg_group_i</span><span class="o">.</span><span class="n">ix</span><span class="p">[:,</span><span class="s">&#39;order_time&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
    <span class="n">order_times</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new</span><span class="p">[</span><span class="s">&#39;order_time&#39;</span><span class="p">])</span>
    <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">delivery_cols</span><span class="p">:</span>
        <span class="n">combos</span><span class="p">[</span><span class="s">&#39;i-&#39;</span><span class="o">+</span><span class="n">it</span><span class="p">]</span><span class="o">=</span><span class="n">combos</span><span class="p">[</span><span class="s">&#39;Mock Combos&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">pd_get_combo_index</span><span class="p">(</span><span class="n">it</span><span class="p">,</span><span class="n">s</span><span class="p">))</span>
        <span class="n">combos</span><span class="p">[</span><span class="n">it</span><span class="o">+</span><span class="s">&#39;-St&#39;</span><span class="p">],</span><span class="n">combos</span><span class="p">[</span><span class="n">it</span><span class="o">+</span><span class="s">&#39;-En&#39;</span><span class="p">]</span><span class="o">=</span><span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">combos</span><span class="p">[[</span><span class="s">&#39;combined&#39;</span><span class="p">,</span><span class="s">&#39;i-&#39;</span><span class="o">+</span><span class="n">it</span><span class="p">]]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">pd_get_trip_times</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">pd_split_tuple</span><span class="p">))</span>
        <span class="n">combos</span><span class="p">[</span><span class="n">it</span><span class="o">+</span><span class="s">&#39;-T&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">combos</span><span class="p">[[</span><span class="n">it</span><span class="o">+</span><span class="s">&#39;-St&#39;</span><span class="p">,</span><span class="n">it</span><span class="o">+</span><span class="s">&#39;-En&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">pd_get_diff_StEn</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">combos</span><span class="p">[</span><span class="n">it</span><span class="o">+</span><span class="s">&#39;-OT&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">combos</span><span class="p">[</span><span class="n">it</span><span class="o">+</span><span class="s">&#39;-En&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">-</span><span class="n">order_times</span><span class="p">[</span><span class="n">delivery_cols</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">it</span><span class="p">)])</span>

    <span class="n">indCols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;i-&#39;</span><span class="o">+</span><span class="n">it</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">delivery_cols</span><span class="p">]</span>
    <span class="n">combos</span><span class="p">[</span><span class="s">&#39;deliv_ids&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">combos</span><span class="p">[</span><span class="n">indCols</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">pd_combine</span><span class="p">(</span><span class="o">*</span><span class="n">s</span><span class="p">),</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">pd_list_to_combo_index</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">deliv_ids</span><span class="p">))</span>
    <span class="n">TravelTimesCols</span> <span class="o">=</span> <span class="p">[</span><span class="n">it</span><span class="o">+</span><span class="s">&#39;-T&#39;</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">delivery_cols</span><span class="p">]</span>
    <span class="n">combos</span><span class="p">[</span><span class="s">&#39;travel_times&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">combos</span><span class="p">[</span><span class="n">TravelTimesCols</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">pd_combine</span><span class="p">(</span><span class="o">*</span><span class="n">s</span><span class="p">),</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">OrderTimesCols</span> <span class="o">=</span> <span class="p">[</span><span class="n">it</span><span class="o">+</span><span class="s">&#39;-OT&#39;</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">delivery_cols</span><span class="p">]</span>
    <span class="n">combos</span><span class="p">[</span><span class="s">&#39;orderLen&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">combos</span><span class="p">[</span><span class="n">OrderTimesCols</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">pd_combine</span><span class="p">(</span><span class="o">*</span><span class="n">s</span><span class="p">),</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">combos</span><span class="p">[</span><span class="s">&#39;maxOrderTime&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">combos</span><span class="p">[</span><span class="s">&#39;orderLen&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="nb">max</span><span class="p">(</span><span class="nb">eval</span><span class="p">(</span><span class="n">s</span><span class="p">)))</span> 
    <span class="n">X_cols</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="o">*</span><span class="n">n</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">location_count</span><span class="p">)]</span>
    <span class="n">Y_cols</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="o">*</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">location_count</span><span class="p">)]</span>
<span class="c">#     combos[&#39;ave_X&#39;] = combos[X_cols].apply(lambda s: pd_combine(*s),axis=1).apply(lambda s: np.mean(eval(s)))</span>
<span class="c">#     combos[&#39;ave_Y&#39;] = combos[Y_cols].apply(lambda s: pd_combine(*s),axis=1).apply(lambda s: np.mean(eval(s)))</span>
    <span class="n">combos</span><span class="p">[</span><span class="s">&#39;tripMean&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">combos</span><span class="p">[</span><span class="s">&#39;travel_times&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="nb">eval</span><span class="p">(</span><span class="n">s</span><span class="p">)))</span>
    <span class="n">combos</span><span class="p">[</span><span class="s">&#39;tripStd&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">combos</span><span class="p">[</span><span class="s">&#39;travel_times&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="nb">eval</span><span class="p">(</span><span class="n">s</span><span class="p">)))</span>
    <span class="n">max_delivery_time</span> <span class="o">=</span> <span class="n">A</span><span class="o">.</span><span class="n">max_delivery_time</span>
    <span class="c">#combos=combos[(combos.maxOrderTime &lt;= max_delivery_time)]</span>
    <span class="n">saveOutput</span><span class="o">=</span><span class="bp">True</span>
    <span class="k">if</span> <span class="n">saveOutput</span><span class="o">==</span><span class="bp">True</span><span class="p">:</span>
        <span class="n">pd_Combos_path</span><span class="o">=</span><span class="n">this_cwd</span><span class="o">+</span><span class="s">&#39;/sim_data/EDA_combos_data.txt&#39;</span>
        <span class="n">combos</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">pd_Combos_path</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s">&#39;</span><span class="se">\t</span><span class="s">&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">combos</span>

<span class="k">def</span> <span class="nf">get_best_combo</span><span class="p">(</span><span class="n">testSet</span><span class="p">,</span><span class="n">get_combo_vars</span><span class="p">,</span><span class="n">c_global_vars</span><span class="p">,</span><span class="n">test</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">parallel</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="c"># if parallel == True:</span>
    <span class="kn">from</span> <span class="nn">get_best_combo</span> <span class="kn">import</span> <span class="n">c_get_best_combo</span>
    <span class="kn">from</span> <span class="nn">map_points_to_combos</span> <span class="kn">import</span> <span class="n">c_mapper2</span><span class="p">,</span><span class="n">c_mapper3</span><span class="p">,</span><span class="n">c_mapper4</span><span class="p">,</span><span class="n">c_mapper5</span><span class="p">,</span><span class="n">c_mapper6</span><span class="p">,</span><span class="n">c_mapper7</span>
    <span class="n">stPtx</span><span class="p">,</span><span class="n">stPty</span><span class="p">,</span><span class="n">c_tripStartTime</span><span class="p">,</span><span class="n">order_times</span><span class="p">,</span><span class="n">c_travel_speed</span><span class="p">,</span><span class="n">c_max_delivery_time</span><span class="p">,</span><span class="n">c_max_travelToLocTime</span><span class="p">,</span><span class="n">c_delivery_count</span><span class="p">,</span><span class="n">deliv_ids</span><span class="p">,</span><span class="n">realPoints</span> <span class="o">=</span> <span class="n">get_combo_vars</span>
    <span class="n">c_travel_times_r</span><span class="p">,</span><span class="n">c_start_times_r</span><span class="p">,</span><span class="n">c_end_times_r</span><span class="p">,</span><span class="n">c_odtTimes_r</span><span class="p">,</span><span class="n">c_oMaxTimes_r</span><span class="p">,</span><span class="n">c_tMaxTimes_r</span><span class="p">,</span><span class="n">c_tddTimes_r</span><span class="p">,</span><span class="n">c_ctMarker_r</span><span class="p">,</span><span class="n">c_returnVars_r</span> <span class="o">=</span> <span class="n">c_global_vars</span>

    <span class="n">points</span><span class="o">=</span><span class="n">testSet</span><span class="o">.</span><span class="n">ix</span><span class="p">[:,</span><span class="s">&#39;pt0&#39;</span><span class="p">:</span><span class="s">&#39;pt&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">c_delivery_count</span><span class="o">*</span><span class="mi">2</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span>
    <span class="n">orderSortKey</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">testSet</span><span class="o">.</span><span class="n">ix</span><span class="p">[:,</span><span class="s">&#39;i0&#39;</span><span class="p">:</span><span class="s">&#39;i&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">c_delivery_count</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span><span class="o">.</span><span class="n">as_matrix</span><span class="p">(),</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">)</span>
    <span class="n">ptsSortKey</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">testSet</span><span class="o">.</span><span class="n">ix</span><span class="p">[:,</span><span class="s">&#39;a1&#39;</span><span class="p">:</span><span class="n">ABC</span><span class="p">[</span><span class="n">c_delivery_count</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">+</span><span class="s">&#39;2&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">as_matrix</span><span class="p">(),</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">)</span>
    <span class="n">mockCombos</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">points</span><span class="o">.</span><span class="n">as_matrix</span><span class="p">(),</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">)</span>
    <span class="n">r</span><span class="p">,</span><span class="n">c</span> <span class="o">=</span> <span class="n">mockCombos</span><span class="o">.</span><span class="n">shape</span>
    <span class="n">realCombos</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="n">r</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">,</span><span class="n">order</span><span class="o">=</span><span class="s">&#39;C&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">c_delivery_count</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>  <span class="n">realCombos</span> <span class="o">=</span> <span class="n">c_mapper2</span><span class="p">(</span><span class="n">realPoints</span><span class="p">,</span> <span class="n">mockCombos</span><span class="p">,</span> <span class="n">realCombos</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">c_delivery_count</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>  <span class="n">realCombos</span> <span class="o">=</span> <span class="n">c_mapper3</span><span class="p">(</span><span class="n">realPoints</span><span class="p">,</span> <span class="n">mockCombos</span><span class="p">,</span> <span class="n">realCombos</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">c_delivery_count</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>  <span class="n">realCombos</span> <span class="o">=</span> <span class="n">c_mapper4</span><span class="p">(</span><span class="n">realPoints</span><span class="p">,</span> <span class="n">mockCombos</span><span class="p">,</span> <span class="n">realCombos</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">c_delivery_count</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>  <span class="n">realCombos</span> <span class="o">=</span> <span class="n">c_mapper5</span><span class="p">(</span><span class="n">realPoints</span><span class="p">,</span> <span class="n">mockCombos</span><span class="p">,</span> <span class="n">realCombos</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">c_delivery_count</span> <span class="o">==</span> <span class="mi">6</span><span class="p">:</span>  <span class="n">realCombos</span> <span class="o">=</span> <span class="n">c_mapper6</span><span class="p">(</span><span class="n">realPoints</span><span class="p">,</span> <span class="n">mockCombos</span><span class="p">,</span> <span class="n">realCombos</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">c_delivery_count</span> <span class="o">==</span> <span class="mi">7</span><span class="p">:</span>  <span class="n">realCombos</span> <span class="o">=</span> <span class="n">c_mapper7</span><span class="p">(</span><span class="n">realPoints</span><span class="p">,</span> <span class="n">mockCombos</span><span class="p">,</span> <span class="n">realCombos</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">test</span><span class="o">==</span><span class="bp">True</span><span class="p">:</span>
        <span class="n">c_vars</span> <span class="o">=</span> <span class="n">test_get_best_combo</span><span class="p">(</span><span class="n">stPtx</span><span class="p">,</span> <span class="n">stPty</span><span class="p">,</span> <span class="n">mockCombos</span><span class="p">,</span> <span class="n">realCombos</span><span class="p">,</span>
                                  <span class="n">orderSortKey</span><span class="p">,</span> <span class="n">ptsSortKey</span><span class="p">,</span> <span class="n">order_times</span><span class="p">,</span>
                                  <span class="n">deliv_ids</span><span class="p">,</span> <span class="n">c_delivery_count</span><span class="p">,</span> <span class="n">c_tripStartTime</span><span class="p">,</span> <span class="n">c_travel_speed</span><span class="p">,</span> <span class="n">c_max_delivery_time</span><span class="p">,</span>
                                  <span class="n">c_max_travelToLocTime</span><span class="p">,</span> <span class="n">c_travel_times_r</span><span class="p">,</span> <span class="n">c_start_times_r</span><span class="p">,</span> <span class="n">c_end_times_r</span><span class="p">,</span>
                                  <span class="n">c_odtTimes_r</span><span class="p">,</span> <span class="n">c_oMaxTimes_r</span><span class="p">,</span> <span class="n">c_tMaxTimes_r</span><span class="p">,</span> <span class="n">c_tddTimes_r</span><span class="p">,</span>
                                  <span class="n">c_ctMarker_r</span><span class="p">,</span> <span class="n">c_returnVars_r</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">c_vars</span> <span class="o">=</span> <span class="n">c_get_best_combo</span><span class="p">(</span><span class="n">stPtx</span><span class="p">,</span> <span class="n">stPty</span><span class="p">,</span> <span class="n">mockCombos</span><span class="p">,</span> <span class="n">realCombos</span><span class="p">,</span>
                                  <span class="n">orderSortKey</span><span class="p">,</span> <span class="n">ptsSortKey</span><span class="p">,</span> <span class="n">order_times</span><span class="p">,</span>
                                  <span class="n">deliv_ids</span><span class="p">,</span> <span class="n">c_delivery_count</span><span class="p">,</span> <span class="n">c_tripStartTime</span><span class="p">,</span> <span class="n">c_travel_speed</span><span class="p">,</span> <span class="n">c_max_delivery_time</span><span class="p">,</span>
                                  <span class="n">c_max_travelToLocTime</span><span class="p">,</span> <span class="n">c_travel_times_r</span><span class="p">,</span> <span class="n">c_start_times_r</span><span class="p">,</span> <span class="n">c_end_times_r</span><span class="p">,</span>
                                  <span class="n">c_odtTimes_r</span><span class="p">,</span> <span class="n">c_oMaxTimes_r</span><span class="p">,</span> <span class="n">c_tMaxTimes_r</span><span class="p">,</span> <span class="n">c_tddTimes_r</span><span class="p">,</span>
                                  <span class="n">c_ctMarker_r</span><span class="p">,</span> <span class="n">c_returnVars_r</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">c_vars</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">13</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">order_q_results</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([[</span><span class="n">col</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">row</span><span class="p">]</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">c_vars</span><span class="p">],</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;dg_X&#39;</span><span class="p">,</span><span class="s">&#39;dg_Y&#39;</span><span class="p">,</span><span class="s">&#39;deliv_num&#39;</span><span class="p">,</span><span class="s">&#39;deliv_id&#39;</span><span class="p">,</span><span class="s">&#39;order_time&#39;</span><span class="p">,</span><span class="s">&#39;travel_time_to_loc&#39;</span><span class="p">,</span><span class="s">&#39;start_X&#39;</span><span class="p">,</span><span class="s">&#39;start_Y&#39;</span><span class="p">,</span><span class="s">&#39;start_time&#39;</span><span class="p">,</span><span class="s">&#39;travel_time&#39;</span><span class="p">,</span><span class="s">&#39;end_time&#39;</span><span class="p">,</span><span class="s">&#39;end_X&#39;</span><span class="p">,</span><span class="s">&#39;end_Y&#39;</span><span class="p">,</span><span class="s">&#39;total_order_time&#39;</span><span class="p">,</span><span class="s">&#39;bestIndex&#39;</span><span class="p">])</span>
        <span class="n">order_q_results</span> <span class="o">=</span> <span class="n">order_q_results</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s">&#39;bestIndex&#39;</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="c"># print &#39;best index = &#39;,c_vars[0][14]</span>
        <span class="k">return</span> <span class="n">order_q_results</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">c_vars</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">13</span><span class="p">]</span> <span class="o">==</span> <span class="mi">505</span><span class="p">:</span> <span class="k">print</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">get_best_combo --&gt; Best Index Not Set</span><span class="se">\n</span><span class="s">&quot;</span>
        <span class="k">return</span> <span class="bp">None</span>

    <span class="c"># TODO: add column and other pertinent info for one less delivery (for later improving overall times)</span>
    <span class="c"># TODO: add trip_positions to eval_combo? -- 3D Interpolation</span>

<span class="k">def</span> <span class="nf">getSortedPoints</span><span class="p">(</span><span class="n">new_dg_q_group</span><span class="p">):</span>
    <span class="n">A</span><span class="o">=</span><span class="n">new_dg_q_group</span><span class="o">.</span><span class="n">mock_pt</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
    <span class="n">B</span><span class="o">=</span><span class="nb">sorted</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
    <span class="n">B</span><span class="o">=</span><span class="n">B</span><span class="p">[:</span><span class="n">B</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="mi">100</span><span class="p">)]</span>
    <span class="n">B</span><span class="o">=</span><span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">A</span> <span class="k">if</span> <span class="n">B</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">!=</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">C</span><span class="o">=</span><span class="p">[]</span>
    <span class="n">w</span><span class="o">=</span><span class="p">[</span><span class="n">C</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">x</span><span class="p">,</span><span class="n">x</span><span class="o">+</span><span class="mi">100</span><span class="p">])</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">B</span><span class="p">]</span>
    <span class="n">D</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">A</span><span class="p">,</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">A</span><span class="p">))))</span>
    <span class="n">sortOrder</span><span class="o">=</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">D</span><span class="p">[</span><span class="n">s</span><span class="p">],</span><span class="n">C</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">new_dg_q_group</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">sortOrder</span><span class="p">,:]</span>
<span class="k">def</span> <span class="nf">adjustTripPoints</span><span class="p">(</span><span class="n">dg_q_group</span><span class="p">):</span>
    <span class="n">dg_q_group</span> <span class="o">=</span> <span class="n">dg_q_group</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">mock_pts</span> <span class="o">=</span> <span class="n">dg_q_group</span><span class="o">.</span><span class="n">mock_pt</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
    <span class="n">del_ids</span> <span class="o">=</span> <span class="n">dg_q_group</span><span class="o">.</span><span class="n">deliv_id</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
    <span class="n">locs</span><span class="p">,</span><span class="n">mocks</span><span class="p">,</span><span class="n">ids</span><span class="o">=</span><span class="p">[],[],[]</span>
    <span class="k">for</span> <span class="n">mpt</span> <span class="ow">in</span> <span class="n">mock_pts</span><span class="p">:</span>
        <span class="n">i</span> <span class="o">=</span> <span class="n">mock_pts</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">mpt</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ids</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">del_ids</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span> <span class="n">ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">del_ids</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
        <span class="n">pair_here</span> <span class="o">=</span> <span class="bp">True</span> <span class="k">if</span> <span class="n">del_ids</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">del_ids</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="o">&gt;</span><span class="mi">1</span> <span class="k">else</span> <span class="bp">False</span>
        <span class="k">if</span> <span class="n">pair_here</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span>
            <span class="n">locs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dg_q_group</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">i</span><span class="p">,[</span><span class="s">&#39;ptbx&#39;</span><span class="p">,</span><span class="s">&#39;ptby&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>
            <span class="n">mocks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mpt</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">mpt</span><span class="o">&gt;=</span><span class="mi">100</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">i</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span> <span class="n">locs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">dg_q_group</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">i</span><span class="p">,[</span><span class="s">&#39;ptax&#39;</span><span class="p">,</span><span class="s">&#39;ptay&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span><span class="n">dg_q_group</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">i</span><span class="p">,[</span><span class="s">&#39;ptbx&#39;</span><span class="p">,</span><span class="s">&#39;ptby&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()])</span>
                <span class="k">else</span><span class="p">:</span> <span class="n">locs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">dg_q_group</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">i</span><span class="p">,[</span><span class="s">&#39;ptbx&#39;</span><span class="p">,</span><span class="s">&#39;ptby&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span><span class="n">dg_q_group</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">i</span><span class="p">,[</span><span class="s">&#39;ptbx&#39;</span><span class="p">,</span><span class="s">&#39;ptby&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()])</span>
                <span class="n">mocks</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">mpt</span><span class="o">-</span><span class="mi">100</span><span class="p">,</span><span class="n">mpt</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">print</span> <span class="s">&#39;unknown option in adjustRealPoints&#39;</span>
                <span class="k">print</span> <span class="n">dg_q_group</span>
                <span class="n">systemError</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">locs</span><span class="p">,</span><span class="n">mocks</span><span class="p">,</span><span class="n">ids</span>
<span class="k">def</span> <span class="nf">un_adjustTripPoints</span><span class="p">(</span><span class="n">order_q</span><span class="p">,</span><span class="n">static_dg_q</span><span class="p">,</span><span class="n">dynamic_dg_q</span><span class="p">,</span><span class="n">order_result</span><span class="p">):</span>
    <span class="n">dg_ID</span> <span class="o">=</span> <span class="n">dynamic_dg_q</span><span class="o">.</span><span class="n">dg_id</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="n">static_dg_q</span> <span class="o">=</span> <span class="n">static_dg_q</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">stat_del_ids</span> <span class="o">=</span> <span class="n">static_dg_q</span><span class="o">.</span><span class="n">deliv_id</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
    <span class="n">dynamic_dg_q</span> <span class="o">=</span> <span class="n">dynamic_dg_q</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">dyn_mock_pts</span> <span class="o">=</span> <span class="n">dynamic_dg_q</span><span class="o">.</span><span class="n">mock_pt</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
    <span class="n">dyn_del_ids</span> <span class="o">=</span> <span class="n">dynamic_dg_q</span><span class="o">.</span><span class="n">deliv_id</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
    <span class="n">order_result_ids</span> <span class="o">=</span> <span class="n">order_result</span><span class="o">.</span><span class="n">deliv_id</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
    <span class="n">order_q_group</span> <span class="o">=</span> <span class="n">order_q</span><span class="p">[(</span><span class="n">order_q</span><span class="o">.</span><span class="n">id</span><span class="o">==</span><span class="n">dg_ID</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">order_q</span><span class="o">.</span><span class="n">status</span><span class="o">!=</span><span class="s">&#39;on route&#39;</span><span class="p">)]</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">ord_q_del_ids</span> <span class="o">=</span> <span class="n">order_q_group</span><span class="o">.</span><span class="n">deliv_id</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">mpt</span> <span class="ow">in</span> <span class="n">dyn_mock_pts</span><span class="p">:</span>
        <span class="n">i</span> <span class="o">=</span> <span class="n">dyn_mock_pts</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">mpt</span><span class="p">)</span>
        <span class="n">pair_here</span> <span class="o">=</span> <span class="bp">True</span> <span class="k">if</span> <span class="n">dyn_del_ids</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">dyn_del_ids</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="o">&gt;</span><span class="mi">1</span> <span class="k">else</span> <span class="bp">False</span>
        <span class="k">if</span> <span class="n">pair_here</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span> <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">mpt</span><span class="o">&gt;=</span><span class="mi">100</span><span class="p">:</span>
                <span class="n">ord_row_ind</span> <span class="o">=</span> <span class="n">order_result_ids</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">dyn_del_ids</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
                <span class="n">ord_row</span> <span class="o">=</span> <span class="n">order_result</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">ord_row_ind</span><span class="p">,:]</span>

                <span class="n">A</span> <span class="o">=</span> <span class="n">order_q_group</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">ord_q_del_ids</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">dyn_del_ids</span><span class="p">[</span><span class="n">i</span><span class="p">]),:]</span>
                <span class="n">ord_row</span><span class="p">[[</span><span class="s">&#39;start_X&#39;</span><span class="p">,</span><span class="s">&#39;start_Y&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">A</span><span class="p">[[</span><span class="s">&#39;start_X&#39;</span><span class="p">,</span><span class="s">&#39;start_Y&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">values</span>
                <span class="n">ord_row</span><span class="p">[</span><span class="s">&#39;start_time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="s">&#39;start_time&#39;</span><span class="p">]</span>
                <span class="n">ord_row</span><span class="p">[</span><span class="s">&#39;travel_time_to_loc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="s">&#39;travel_time_to_loc&#39;</span><span class="p">]</span>
                <span class="n">order_result</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">ord_row_ind</span><span class="p">,:]</span> <span class="o">=</span> <span class="n">ord_row</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">print</span> <span class="s">&#39;unknown option in un-adjustRealPoints&#39;</span>
                <span class="n">systemError</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">order_result</span>
<span class="k">def</span> <span class="nf">eval_additional_order</span><span class="p">(</span><span class="n">tripStartPt</span><span class="p">,</span><span class="n">tripStartTime</span><span class="p">,</span><span class="n">var_group</span><span class="p">,</span><span class="n">errorCheck</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
    <span class="n">order_q_i</span><span class="p">,</span><span class="n">new</span><span class="p">,</span><span class="n">start_loc</span><span class="p">,</span><span class="n">end_loc</span> <span class="o">=</span> <span class="n">var_group</span>
    <span class="n">pta</span><span class="p">,</span><span class="n">ptb</span><span class="p">,</span><span class="n">ptc</span> <span class="o">=</span> <span class="n">tripStartPt</span><span class="p">,</span><span class="nb">list</span><span class="p">(</span><span class="n">start_loc</span><span class="p">),</span><span class="nb">list</span><span class="p">(</span><span class="n">end_loc</span><span class="p">)</span>
    <span class="n">toLoc</span> <span class="o">=</span> <span class="n">pd_get_travel_time</span><span class="p">(</span><span class="o">*</span><span class="n">pta</span><span class="o">+</span><span class="n">ptb</span><span class="p">)</span>
    <span class="n">toDel</span> <span class="o">=</span> <span class="n">pd_get_travel_time</span><span class="p">(</span><span class="o">*</span><span class="n">ptb</span><span class="o">+</span><span class="n">ptc</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">tripStartTime</span> <span class="o">+</span> <span class="n">toLoc</span> <span class="o">+</span> <span class="n">toDel</span> <span class="o">&lt;=</span> <span class="n">max_delivery_time</span><span class="p">:</span>
        <span class="n">row</span><span class="o">=</span><span class="n">order_q_i</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="mi">0</span><span class="p">,:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">row</span><span class="p">[</span><span class="s">&#39;deliv_num&#39;</span><span class="p">]</span><span class="o">=</span><span class="mi">2</span>
        <span class="n">row</span><span class="p">[</span><span class="s">&#39;travel_time_to_loc&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">toLoc</span>
        <span class="n">row</span><span class="p">[</span><span class="s">&#39;deliv_id&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">new</span><span class="p">[</span><span class="s">&#39;deliv_id&#39;</span><span class="p">]</span>
        <span class="n">row</span><span class="p">[</span><span class="s">&#39;order_time&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">new</span><span class="p">[</span><span class="s">&#39;order_time&#39;</span><span class="p">]</span>
        <span class="n">row</span><span class="p">[</span><span class="s">&#39;start_X&#39;</span><span class="p">],</span><span class="n">row</span><span class="p">[</span><span class="s">&#39;start_Y&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">new</span><span class="p">[</span><span class="s">&#39;start_X&#39;</span><span class="p">],</span><span class="n">new</span><span class="p">[</span><span class="s">&#39;start_Y&#39;</span><span class="p">]</span>
        <span class="n">row</span><span class="p">[</span><span class="s">&#39;start_time&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">tripStartTime</span><span class="o">+</span><span class="n">toLoc</span>
        <span class="n">row</span><span class="p">[</span><span class="s">&#39;end_time&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">row</span><span class="p">[</span><span class="s">&#39;start_time&#39;</span><span class="p">]</span><span class="o">+</span><span class="n">toDel</span>
        <span class="n">row</span><span class="p">[</span><span class="s">&#39;end_X&#39;</span><span class="p">],</span><span class="n">row</span><span class="p">[</span><span class="s">&#39;end_Y&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">end_loc</span>
        <span class="n">row</span><span class="p">[</span><span class="s">&#39;total_order_time&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">row</span><span class="p">[</span><span class="s">&#39;end_time&#39;</span><span class="p">]</span><span class="o">-</span><span class="n">row</span><span class="p">[</span><span class="s">&#39;order_time&#39;</span><span class="p">]</span>
        <span class="n">row</span><span class="p">[</span><span class="s">&#39;travel_time&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">row</span><span class="p">[</span><span class="s">&#39;end_time&#39;</span><span class="p">]</span><span class="o">-</span><span class="n">row</span><span class="p">[</span><span class="s">&#39;start_time&#39;</span><span class="p">]</span>
        <span class="n">order_results</span> <span class="o">=</span> <span class="n">order_q_i</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row</span><span class="p">,</span><span class="n">ignore_index</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="n">dg_q_results</span> <span class="o">=</span> <span class="n">pull_from_order</span><span class="p">(</span><span class="n">order_results</span><span class="p">,</span><span class="n">errorCheck</span><span class="o">=</span><span class="n">errorCheck</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">order_results</span><span class="p">,</span><span class="n">dg_q_results</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">None</span><span class="p">,</span><span class="bp">None</span>

<span class="k">def</span> <span class="nf">getPtsFrom_dg_q</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="n">ptxs</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">ptax</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span><span class="o">+</span><span class="n">x</span><span class="o">.</span><span class="n">ptbx</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
    <span class="n">ptys</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">ptay</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span><span class="o">+</span><span class="n">x</span><span class="o">.</span><span class="n">ptby</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">ptxs</span><span class="p">,</span><span class="n">ptys</span><span class="p">],</span><span class="n">dtype</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">dg_q_reorganize_mock_pts</span><span class="p">(</span><span class="n">dg_result</span><span class="p">):</span>
    <span class="c"># reorganize mock_pts for consistency and b/c values are reduced later upon completed delivery</span>
    <span class="n">A</span><span class="o">=</span><span class="n">dg_result</span><span class="o">.</span><span class="n">mock_pt</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
    <span class="n">B</span><span class="o">=</span><span class="nb">sorted</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">B</span><span class="p">)</span><span class="o">/</span><span class="mf">2.0</span><span class="p">)[</span><span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">B</span><span class="p">)</span><span class="o">/</span><span class="mf">2.0</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;.&#39;</span><span class="p">):</span><span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">B</span><span class="p">)</span><span class="o">/</span><span class="mf">2.0</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;.&#39;</span><span class="p">)</span><span class="o">+</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="s">&#39;.0&#39;</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">&#39;why odd number of mock_pts to organize?&#39;</span>
        <span class="n">systemError</span><span class="p">()</span>
    <span class="n">sorted_pickup_pts</span><span class="o">=</span><span class="n">B</span><span class="p">[:</span><span class="nb">len</span><span class="p">(</span><span class="n">B</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">]</span>
    <span class="n">unsorted_pickup_pts</span><span class="o">=</span><span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">A</span> <span class="k">if</span> <span class="n">sorted_pickup_pts</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">!=</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">E</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">unsorted_pickup_pts</span><span class="p">,</span><span class="n">sorted_pickup_pts</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">j</span> <span class="ow">in</span> <span class="n">E</span><span class="o">.</span><span class="n">items</span><span class="p">():</span> <span class="n">E</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="n">i</span><span class="o">+</span><span class="mi">100</span><span class="p">:</span><span class="n">j</span><span class="o">+</span><span class="mi">100</span><span class="p">})</span>
    <span class="n">dg_result</span><span class="o">.</span><span class="n">mock_pt</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">E</span><span class="p">[</span><span class="n">s</span><span class="p">],</span><span class="n">A</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">dg_result</span>
<span class="k">def</span> <span class="nf">dg_q_reorganize_BY_mock_pts</span><span class="p">(</span><span class="n">dg_q_i</span><span class="p">,</span><span class="n">reset</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">dg_q_i</span><span class="o">.</span><span class="n">index</span><span class="p">)</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span> <span class="k">return</span> <span class="n">dg_q_i</span>
    <span class="n">A</span> <span class="o">=</span> <span class="n">dg_q_i</span><span class="o">.</span><span class="n">mock_pt</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
    <span class="n">B</span> <span class="o">=</span> <span class="p">[</span><span class="n">it</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">A</span> <span class="k">if</span> <span class="n">it</span><span class="o">&lt;</span><span class="mi">100</span><span class="p">]</span>
    <span class="n">C</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">A</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">B</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">it</span><span class="p">)</span><span class="o">!=</span><span class="mi">0</span><span class="p">:</span>
            <span class="n">C</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">it</span><span class="p">,</span><span class="n">it</span><span class="o">+</span><span class="mi">100</span><span class="p">])</span>               <span class="c"># if startPt, add start and end pts (assuming there is an endPt in list)</span>
        <span class="k">elif</span> <span class="n">B</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">it</span><span class="o">-</span><span class="mi">100</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span> <span class="n">C</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">it</span><span class="p">)</span>   <span class="c"># if &#39;it&#39; is an endPt without a startPt, then add &#39;it&#39;</span>
        <span class="k">else</span><span class="p">:</span> <span class="k">pass</span>                              <span class="c"># else, it is an endPt that is already accounted for with its startPt</span>
    <span class="n">new_dg_q_i</span> <span class="o">=</span> <span class="n">dg_q_i</span>
    <span class="k">if</span> <span class="n">A</span> <span class="o">!=</span> <span class="n">C</span><span class="p">:</span>
        <span class="n">D</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">([</span><span class="n">A</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">it</span><span class="p">)</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">C</span><span class="p">],</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">A</span><span class="p">))))</span>
        <span class="n">new_sort</span> <span class="o">=</span> <span class="p">[</span><span class="n">D</span><span class="p">[</span><span class="n">it</span><span class="p">]</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">D</span><span class="o">.</span><span class="n">keys</span><span class="p">())]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">new_sort</span><span class="p">)</span><span class="o">!=</span><span class="nb">len</span><span class="p">(</span><span class="n">new_dg_q_i</span><span class="o">.</span><span class="n">index</span><span class="p">):</span>
            <span class="k">print</span> <span class="s">&#39;why diff len?&#39;</span>
            <span class="n">systemError</span><span class="p">()</span>
        <span class="n">new_dg_q_i</span><span class="p">[</span><span class="s">&#39;sortOrder&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">new_sort</span>
        <span class="n">new_dg_q_i</span> <span class="o">=</span> <span class="n">new_dg_q_i</span><span class="o">.</span><span class="n">sort_index</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s">&#39;sortOrder&#39;</span><span class="p">,</span><span class="n">ascending</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s">&#39;sortOrder&#39;</span><span class="p">],</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">reset</span><span class="o">==</span><span class="bp">True</span><span class="p">:</span> <span class="n">new_dg_q_i</span> <span class="o">=</span> <span class="n">new_dg_q_i</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">new_dg_q_i</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[31]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># Data Preparation f(x)s</span>
<span class="kn">from</span> <span class="nn">data_prep</span> <span class="kn">import</span> <span class="n">set_mock_pts</span><span class="p">,</span><span class="n">order_q_re_order_deliv_num</span><span class="p">,</span><span class="n">getComboStartInfo</span>
<span class="kn">from</span> <span class="nn">data_prep</span> <span class="kn">import</span> <span class="n">format_new_to_order</span><span class="p">,</span><span class="n">set_dg_pool_order</span><span class="p">,</span><span class="n">set_dg_pool_grp_order</span><span class="p">,</span><span class="n">getBestDG_grp_old</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[32]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># Cython Prep f(x)s</span>
<span class="k">def</span> <span class="nf">c_check5</span><span class="p">(</span><span class="n">globalVars</span><span class="p">,</span><span class="n">grp</span><span class="p">,</span><span class="n">new</span><span class="p">,</span><span class="n">checkOrder</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">,</span><span class="n">errorCheck</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
    <span class="n">order_q</span> <span class="o">=</span> <span class="n">globalVars</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">D</span> <span class="o">=</span> <span class="n">globalVars</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="c"># orders delivered</span>
    <span class="n">dg_pool</span> <span class="o">=</span> <span class="n">globalVars</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>

    <span class="n">grp_ids</span> <span class="o">=</span> <span class="n">grp</span><span class="o">.</span><span class="n">dg_id</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>  <span class="c"># the order of IDs is important</span>

    <span class="n">order_q_grp</span> <span class="o">=</span> <span class="n">order_q</span><span class="o">.</span><span class="n">ix</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">,:]</span>
    <span class="n">dg_pool_grp</span> <span class="o">=</span> <span class="n">dg_pool</span><span class="o">.</span><span class="n">ix</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">,:]</span>
    <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">grp_ids</span><span class="p">:</span>
        <span class="n">order_q_grp</span> <span class="o">=</span> <span class="n">order_q_grp</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">order_q</span><span class="p">[(</span><span class="n">order_q</span><span class="o">.</span><span class="n">dg_id</span><span class="o">==</span><span class="n">it</span><span class="p">)]</span><span class="o">.</span><span class="n">sort_index</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s">&#39;start_time&#39;</span><span class="p">,</span><span class="n">ascending</span><span class="o">=</span><span class="bp">True</span><span class="p">))</span>
        <span class="n">dg_pool_grp</span> <span class="o">=</span> <span class="n">dg_pool_grp</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dg_pool</span><span class="p">[(</span><span class="n">dg_pool</span><span class="o">.</span><span class="n">dg_id</span><span class="o">==</span><span class="n">it</span><span class="p">)])</span>
    <span class="c"># order_q_grp.dg_X = order_q_grp.id.map(lambda s: dg_pool[dg_pool.dg_id==s].ix[:,&#39;dg_X&#39;].values[0])</span>
    <span class="c"># order_q_grp.dg_Y = order_q_grp.id.map(lambda s: dg_pool[dg_pool.dg_id==s].ix[:,&#39;dg_Y&#39;].values[0])</span>
    <span class="c"># order_q_grp = order_q_grp.reset_index(drop=True)</span>

    <span class="c"># print &#39;\nGroup:\n&#39;,grp</span>
    <span class="c"># print &#39;\nDeliveryID =&#39;,new[&#39;deliv_id&#39;],&#39;- Group IDs =&#39;,grp_ids</span>
    <span class="c"># print &#39;\norders being considered\n&#39;,order_q_grp.append(format_new_to_order(new,order_q))</span>

    <span class="c"># new[[&#39;deliv_id&#39;,&#39;order_time&#39;,&#39;start_time&#39;,&#39;start_node&#39;,&#39;travel_time&#39;,&#39;end_node&#39;,&#39;end_time&#39;,&#39;total_order_time&#39;]].astype(np.long)</span>
    <span class="c"># c_new = np.ascontiguousarray(new.astype(np.long).tolist(),dtype=np.long)</span>
    <span class="n">c_new</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">new</span><span class="p">[[</span><span class="s">&#39;deliv_id&#39;</span><span class="p">,</span><span class="s">&#39;order_time&#39;</span><span class="p">,</span><span class="s">&#39;start_node&#39;</span><span class="p">,</span><span class="s">&#39;end_node&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">))</span>

    <span class="n">c_grp</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">order_q_grp</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s">&#39;status&#39;</span><span class="p">,</span><span class="s">&#39;ave_speed&#39;</span><span class="p">,</span><span class="s">&#39;dg_point&#39;</span><span class="p">,</span><span class="s">&#39;start_point&#39;</span><span class="p">,</span><span class="s">&#39;end_point&#39;</span><span class="p">],</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">)</span><span class="o">.</span><span class="n">as_matrix</span><span class="p">())</span>
    <span class="n">c_grp_ids</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">grp_ids</span><span class="p">,</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">)</span>
    <span class="n">c_dgp</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">dg_pool_grp</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">)</span><span class="o">.</span><span class="n">as_matrix</span><span class="p">())</span>
    <span class="c"># dg_pool_grp = dg_pool[(dg_pool.dg_id.isin(grp_ids)==True)]</span>
    <span class="n">max_return_rows</span> <span class="o">=</span> <span class="n">dg_pool_grp</span><span class="o">.</span><span class="n">current_deliveries</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="n">c_returnVars</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="n">max_return_rows</span><span class="p">,</span><span class="mi">15</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">,</span><span class="n">order</span><span class="o">=</span><span class="s">&#39;C&#39;</span><span class="p">))</span>

    <span class="n">c_vars</span> <span class="o">=</span> <span class="n">c_getBestDG</span><span class="p">(</span> <span class="n">c_new</span><span class="p">,</span>
                          <span class="n">c_grp</span><span class="p">,</span> <span class="c"># dg_id,dg_node&#39;, u&#39;coords&#39;, u&#39;end_node&#39;, u&#39;order_time&#39;, u&#39;travel_time_to_loc&#39;, u&#39;start_time&#39;, u&#39;start_node&#39;, u&#39;travel_time&#39;, u&#39;end_time&#39;, u&#39;total_order_time&#39;, u&#39;deliv_id&#39;, u&#39;deliv_num&#39;</span>
                          <span class="n">c_grp_ids</span><span class="p">,</span>
                          <span class="n">c_dgp</span><span class="p">,</span>
                          <span class="n">c_deliv_ids</span><span class="p">,</span>
                          <span class="n">c_order_times</span><span class="p">,</span>
                          <span class="n">c_speed</span><span class="p">,</span>
                          <span class="n">c_max_delivery_time</span><span class="p">,</span>
                          <span class="n">c_max_delivery_per_dg</span><span class="p">,</span>
                          <span class="n">c_mttlt</span><span class="p">,</span>
                          <span class="n">c_tripPoints</span><span class="p">,</span>
                          <span class="n">c_orderSet2</span><span class="p">,</span>
                          <span class="n">c_orderSet3</span><span class="p">,</span>
                          <span class="n">c_orderSet4</span><span class="p">,</span>
                          <span class="n">c_orderSet5</span><span class="p">,</span>
                          <span class="n">c_orderSetInd</span><span class="p">,</span>
                          <span class="n">c_realCombos</span><span class="p">,</span>
                          <span class="n">c_travel_times</span><span class="p">,</span>
                          <span class="n">c_start_times</span><span class="p">,</span>
                          <span class="n">c_end_times</span><span class="p">,</span>
                          <span class="n">c_odtTimes</span><span class="p">,</span>
                          <span class="n">c_oMaxTimes</span><span class="p">,</span>
                          <span class="n">c_tMaxTimes</span><span class="p">,</span>
                          <span class="n">c_tddTimes</span><span class="p">,</span>
                          <span class="n">c_ctMarker</span><span class="p">,</span>
                          <span class="n">c_rv_comboStartInfo</span><span class="p">,</span>
                          <span class="n">c_rv_bestCombo</span><span class="p">,</span>
                          <span class="n">c_rv_updatedBestCombo</span><span class="p">,</span>
                          <span class="n">c_returnVars</span><span class="p">)</span>

    <span class="c">#----------------------------------------------------------------------------</span>
    <span class="c">#----------------------------------------------------------------------------</span>

    <span class="c"># a = np.asarray(c_vars)</span>
    <span class="c"># print a,&#39;\n&#39;</span>
    <span class="c"># for i in range(0,a.shape[0]):</span>
    <span class="c">#     b=a[i].astype(pd.np.int64).tolist()</span>
    <span class="c">#     print b[9],b</span>
    <span class="c"># if a.shape[1]==15:</span>
    <span class="c">#     # &quot;oq&quot; format</span>
    <span class="c">#     c = pd.DataFrame(a,columns=[&#39;id&#39;,&#39;dg_X&#39;,&#39;dg_Y&#39;,&#39;deliv_num&#39;,&#39;travel_time_to_loc&#39;,&#39;deliv_id&#39;,&#39;order_time&#39;,</span>
    <span class="c">#                                     &#39;start_X&#39;,&#39;start_Y&#39;,&#39;start_time&#39;,&#39;end_time&#39;,&#39;end_X&#39;,&#39;end_Y&#39;,&#39;total_order_time&#39;,</span>
    <span class="c">#                                     &#39;travel_time&#39;])</span>
    <span class="c">#     # &quot;o_res&quot; format</span>
    <span class="c">#     # c = pd.DataFrame(a,columns=[&#39;dg_X&#39;,&#39;dg_Y&#39;,&#39;deliv_num&#39;,&#39;deliv_id&#39;,&#39;order_time&#39;,&#39;travel_time_to_loc&#39;,&#39;start_X&#39;,</span>
    <span class="c">#     #                                 &#39;start_Y&#39;,&#39;start_time&#39;,&#39;travel_time&#39;,&#39;end_time&#39;,&#39;end_X&#39;,&#39;end_Y&#39;,&#39;total_order_time&#39;,</span>
    <span class="c">#     #                                 &#39;bestIndex&#39;])</span>
    <span class="c">#     # c.columns = [&#39;dg_X&#39;,&#39;dg_Y&#39;,&#39;deliv_num&#39;,&#39;travel_time_to_loc&#39;,&#39;deliv_id&#39;,&#39;order_time&#39;,</span>
    <span class="c">#     #              &#39;start_X&#39;,&#39;start_Y&#39;,&#39;start_time&#39;,&#39;end_time&#39;,&#39;end_X&#39;,&#39;end_Y&#39;,&#39;total_order_time&#39;,</span>
    <span class="c">#     #              &#39;travel_time&#39;,&#39;bestIndex&#39;]</span>
    <span class="c">#     print c</span>
    <span class="c">#     if type(checkOrder) != str:</span>
    <span class="c">#         compare_orders(checkOrder,c)</span>
    <span class="c">#         print &#39;\nCompare Orders -- PASSED\n&#39;</span>
    <span class="c"># raise SystemError()</span>

    <span class="c">#----------------------------------------------------------------------------</span>
    <span class="c">#----------------------------------------------------------------------------</span>

    <span class="k">if</span> <span class="n">c_vars</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">13</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">order_q_i</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">c_vars</span><span class="p">),</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;id&#39;</span><span class="p">,</span><span class="s">&#39;dg_X&#39;</span><span class="p">,</span><span class="s">&#39;dg_Y&#39;</span><span class="p">,</span><span class="s">&#39;deliv_num&#39;</span><span class="p">,</span><span class="s">&#39;travel_time_to_loc&#39;</span><span class="p">,</span>
                                                                    <span class="s">&#39;deliv_id&#39;</span><span class="p">,</span><span class="s">&#39;order_time&#39;</span><span class="p">,</span><span class="s">&#39;start_X&#39;</span><span class="p">,</span><span class="s">&#39;start_Y&#39;</span><span class="p">,</span>
                                                                    <span class="s">&#39;start_time&#39;</span><span class="p">,</span><span class="s">&#39;end_time&#39;</span><span class="p">,</span><span class="s">&#39;end_X&#39;</span><span class="p">,</span><span class="s">&#39;end_Y&#39;</span><span class="p">,</span>
                                                                    <span class="s">&#39;total_order_time&#39;</span><span class="p">,</span><span class="s">&#39;travel_time&#39;</span><span class="p">])</span>
        <span class="n">order_q_i</span><span class="p">[</span><span class="s">&#39;ave_X&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
        <span class="n">order_q_i</span><span class="p">[</span><span class="s">&#39;ave_Y&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">order_q_i</span><span class="o">.</span><span class="n">ave_X</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="p">)</span>
        <span class="n">order_q_i</span><span class="p">[</span><span class="s">&#39;status&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">order_q_i</span><span class="o">.</span><span class="n">ave_X</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="s">&#39;on deck&#39;</span><span class="p">)</span>
        <span class="n">c</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;id&#39;</span><span class="p">,</span><span class="s">&#39;dg_X&#39;</span><span class="p">,</span><span class="s">&#39;dg_Y&#39;</span><span class="p">,</span><span class="s">&#39;ave_X&#39;</span><span class="p">,</span><span class="s">&#39;ave_Y&#39;</span><span class="p">,</span><span class="s">&#39;status&#39;</span><span class="p">,</span><span class="s">&#39;deliv_num&#39;</span><span class="p">,</span><span class="s">&#39;travel_time_to_loc&#39;</span><span class="p">,</span><span class="s">&#39;deliv_id&#39;</span><span class="p">,</span><span class="s">&#39;order_time&#39;</span><span class="p">,</span>
           <span class="s">&#39;start_X&#39;</span><span class="p">,</span><span class="s">&#39;start_Y&#39;</span><span class="p">,</span><span class="s">&#39;start_time&#39;</span><span class="p">,</span><span class="s">&#39;end_time&#39;</span><span class="p">,</span><span class="s">&#39;end_X&#39;</span><span class="p">,</span><span class="s">&#39;end_Y&#39;</span><span class="p">,</span><span class="s">&#39;total_order_time&#39;</span><span class="p">,</span><span class="s">&#39;travel_time&#39;</span><span class="p">]</span>
        <span class="n">order_q_i</span> <span class="o">=</span> <span class="n">order_q_i</span><span class="o">.</span><span class="n">ix</span><span class="p">[:,</span><span class="n">c</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">checkOrder</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">str</span> <span class="ow">and</span> <span class="nb">type</span><span class="p">(</span><span class="n">checkOrder</span><span class="p">)</span> <span class="o">!=</span> <span class="n">NoneType</span><span class="p">:</span>
            <span class="n">compare_orders</span><span class="p">(</span><span class="n">checkOrder</span><span class="p">,</span><span class="n">order_q_i</span><span class="p">)</span>
        <span class="n">DG_ID</span> <span class="o">=</span> <span class="n">order_q_i</span><span class="o">.</span><span class="n">dg_id</span><span class="o">.</span><span class="n">tolist</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">earliestStart</span> <span class="o">=</span> <span class="n">order_q_grp</span><span class="o">.</span><span class="n">start_time</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
        <span class="n">check_order_q_i</span> <span class="o">=</span> <span class="n">order_q_i</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">D</span><span class="p">[(</span><span class="n">D</span><span class="o">.</span><span class="n">id</span><span class="o">==</span><span class="n">DG_ID</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">D</span><span class="o">.</span><span class="n">end_time</span><span class="o">&gt;</span><span class="n">earliestStart</span><span class="p">)])</span>
        <span class="n">dg_q_i</span> <span class="o">=</span> <span class="n">pull_from_order</span><span class="p">(</span><span class="n">check_order_q_i</span><span class="p">,</span><span class="n">errorCheck</span><span class="o">=</span><span class="n">errorCheck</span><span class="p">)</span>
        <span class="n">updated</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">return</span> <span class="n">updated</span><span class="p">,</span><span class="n">order_q_i</span><span class="p">,</span><span class="n">dg_q_i</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">updated</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="k">return</span> <span class="n">updated</span><span class="p">,</span><span class="bp">None</span><span class="p">,</span><span class="bp">None</span>
    
<span class="k">def</span> <span class="nf">c_check4</span><span class="p">(</span><span class="n">new</span><span class="p">,</span><span class="n">order_q_i</span><span class="p">,</span><span class="n">check_order_result</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">):</span>

    <span class="n">c_new</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">new</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">long</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">)</span>
    <span class="n">c_order_q_i</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">order_q_i</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s">&#39;status&#39;</span><span class="p">,</span><span class="s">&#39;ave_X&#39;</span><span class="p">,</span><span class="s">&#39;ave_Y&#39;</span><span class="p">],</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">long</span><span class="p">)</span><span class="o">.</span><span class="n">as_matrix</span><span class="p">(),</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">)</span>
    <span class="n">d</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">order_q_i</span><span class="p">[</span><span class="n">order_q_i</span><span class="o">.</span><span class="n">end_time</span><span class="o">&gt;</span><span class="n">new</span><span class="p">[</span><span class="s">&#39;order_time&#39;</span><span class="p">]])</span><span class="o">+</span><span class="mi">1</span>
    <span class="n">int_vars</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">([</span><span class="n">d</span><span class="p">,</span><span class="n">travel_speed</span><span class="p">,</span><span class="n">max_delivery_time</span><span class="p">,</span><span class="n">max_travelToLocTime</span><span class="p">],</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">)</span>
    <span class="n">c_delivery_count</span><span class="p">,</span><span class="n">c_speed</span><span class="p">,</span><span class="n">c_max_delivery_time</span><span class="p">,</span><span class="n">c_mttlt</span> <span class="o">=</span> <span class="n">int_vars</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">int_vars</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">int_vars</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span><span class="n">int_vars</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>

    <span class="n">c_tripPoints</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="n">d</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">,</span><span class="n">order</span><span class="o">=</span><span class="s">&#39;C&#39;</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">)</span>
    <span class="n">c_deliv_ids</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="n">d</span><span class="p">,),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">,</span><span class="n">order</span><span class="o">=</span><span class="s">&#39;C&#39;</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">)</span>
    <span class="n">c_order_times</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="n">d</span><span class="p">,),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">,</span><span class="n">order</span><span class="o">=</span><span class="s">&#39;C&#39;</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">)</span>
    <span class="n">c_returnVar</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="n">d</span><span class="p">,</span><span class="mi">14</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">,</span><span class="n">order</span><span class="o">=</span><span class="s">&#39;C&#39;</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">d</span> <span class="o">&lt;</span> <span class="n">max_delivery_per_dg</span><span class="p">:</span> <span class="n">testSet</span> <span class="o">=</span> <span class="n">orderSet</span><span class="p">[</span><span class="n">orderSet</span><span class="p">[</span><span class="s">&#39;mc&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">d</span><span class="p">)]</span><span class="o">==</span><span class="bp">True</span><span class="p">]</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span> <span class="n">testSet</span> <span class="o">=</span> <span class="n">orderSet</span>

    <span class="n">c_orderSortKey</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">testSet</span><span class="o">.</span><span class="n">ix</span><span class="p">[:,</span><span class="s">&#39;i0&#39;</span><span class="p">:</span><span class="s">&#39;i&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">d</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">long</span><span class="p">)</span><span class="o">.</span><span class="n">as_matrix</span><span class="p">(),</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">)</span>
    <span class="n">c_ptsSortKey</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">testSet</span><span class="o">.</span><span class="n">ix</span><span class="p">[:,</span><span class="s">&#39;a1&#39;</span><span class="p">:</span><span class="n">ABC</span><span class="p">[</span><span class="n">d</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">+</span><span class="s">&#39;2&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">long</span><span class="p">)</span><span class="o">.</span><span class="n">as_matrix</span><span class="p">(),</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">)</span>
    <span class="n">points</span> <span class="o">=</span> <span class="n">testSet</span><span class="o">.</span><span class="n">ix</span><span class="p">[:,</span><span class="s">&#39;pt0&#39;</span><span class="p">:</span><span class="s">&#39;pt&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">d</span><span class="o">*</span><span class="mi">2</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span>
    <span class="n">c_mockCombos</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">points</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">long</span><span class="p">)</span><span class="o">.</span><span class="n">as_matrix</span><span class="p">(),</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">)</span>
    <span class="n">r</span><span class="p">,</span><span class="n">c</span> <span class="o">=</span> <span class="n">c_mockCombos</span><span class="o">.</span><span class="n">shape</span>
    <span class="n">c_realCombos</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="n">r</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">,</span><span class="n">order</span><span class="o">=</span><span class="s">&#39;C&#39;</span><span class="p">)</span>

    <span class="n">test_pt</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">testSet</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
    <span class="n">c_global_vars</span> <span class="o">=</span> <span class="p">(</span><span class="n">c_travel_times</span><span class="p">[:</span><span class="n">test_pt</span><span class="p">],</span><span class="n">c_start_times</span><span class="p">[:</span><span class="n">test_pt</span><span class="p">],</span><span class="n">c_end_times</span><span class="p">[:</span><span class="n">test_pt</span><span class="p">],</span><span class="n">c_odtTimes</span><span class="p">[:</span><span class="n">test_pt</span><span class="p">],</span>
                     <span class="n">c_oMaxTimes</span><span class="p">[:</span><span class="n">test_pt</span><span class="p">],</span><span class="n">c_tMaxTimes</span><span class="p">[:</span><span class="n">test_pt</span><span class="p">],</span><span class="n">c_tddTimes</span><span class="p">[:</span><span class="n">test_pt</span><span class="p">],</span><span class="n">c_ctMarker</span><span class="p">[:</span><span class="n">test_pt</span><span class="p">],</span><span class="n">c_returnVars</span><span class="p">[:</span><span class="n">r</span><span class="p">])</span>

    <span class="n">c_travel_times_r</span><span class="p">,</span><span class="n">c_start_times_r</span><span class="p">,</span><span class="n">c_end_times_r</span><span class="p">,</span><span class="n">c_odtTimes_r</span><span class="p">,</span><span class="n">c_oMaxTimes_r</span><span class="p">,</span><span class="n">c_tMaxTimes_r</span><span class="p">,</span><span class="n">c_tddTimes_r</span><span class="p">,</span><span class="n">c_ctMarker_r</span><span class="p">,</span><span class="n">c_returnVars_r</span> <span class="o">=</span> <span class="n">c_global_vars</span>

    <span class="n">c_vars</span> <span class="o">=</span> <span class="n">c_bestED</span><span class="p">(</span><span class="n">c_new</span><span class="p">,</span>
                      <span class="n">c_order_q_i</span><span class="p">,</span>
                      <span class="n">c_delivery_count</span><span class="p">,</span>
                      <span class="n">c_deliv_ids</span><span class="p">,</span>
                      <span class="n">c_order_times</span><span class="p">,</span>
                      <span class="n">c_speed</span><span class="p">,</span>
                      <span class="n">c_max_delivery_time</span><span class="p">,</span>
                      <span class="n">c_mttlt</span><span class="p">,</span>
                      <span class="n">c_tripPoints</span><span class="p">,</span>
                      <span class="n">c_mockCombos</span><span class="p">,</span>
                      <span class="n">c_realCombos</span><span class="p">,</span>
                      <span class="n">c_orderSortKey</span><span class="p">,</span>
                      <span class="n">c_ptsSortKey</span><span class="p">,</span>
                      <span class="n">c_travel_times_r</span><span class="p">,</span>
                      <span class="n">c_start_times_r</span><span class="p">,</span>
                      <span class="n">c_end_times_r</span><span class="p">,</span>
                      <span class="n">c_odtTimes_r</span><span class="p">,</span>
                      <span class="n">c_oMaxTimes_r</span><span class="p">,</span>
                      <span class="n">c_tMaxTimes_r</span><span class="p">,</span>
                      <span class="n">c_tddTimes_r</span><span class="p">,</span>
                      <span class="n">c_ctMarker_r</span><span class="p">,</span>
                      <span class="n">c_returnVars_r</span><span class="p">,</span>
                      <span class="n">c_returnVar</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">c_vars</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">13</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>   <span class="c"># (general error | error setting best index)</span>
        <span class="n">c_order_q_i</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([[</span><span class="n">col</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">row</span><span class="p">]</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">c_vars</span><span class="p">],</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;dg_X&#39;</span><span class="p">,</span><span class="s">&#39;dg_Y&#39;</span><span class="p">,</span><span class="s">&#39;deliv_num&#39;</span><span class="p">,</span><span class="s">&#39;deliv_id&#39;</span><span class="p">,</span><span class="s">&#39;order_time&#39;</span><span class="p">,</span><span class="s">&#39;travel_time_to_loc&#39;</span><span class="p">,</span><span class="s">&#39;start_X&#39;</span><span class="p">,</span><span class="s">&#39;start_Y&#39;</span><span class="p">,</span><span class="s">&#39;start_time&#39;</span><span class="p">,</span><span class="s">&#39;travel_time&#39;</span><span class="p">,</span><span class="s">&#39;end_time&#39;</span><span class="p">,</span><span class="s">&#39;end_X&#39;</span><span class="p">,</span><span class="s">&#39;end_Y&#39;</span><span class="p">,</span><span class="s">&#39;total_order_time&#39;</span><span class="p">,</span><span class="s">&#39;bestIndex&#39;</span><span class="p">])</span>
        <span class="n">c_order_q_i</span> <span class="o">=</span> <span class="n">c_order_q_i</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s">&#39;bestIndex&#39;</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

        <span class="c"># add in extra info and organize columns</span>
        <span class="n">results_with_dg_format</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">order_q_i</span><span class="p">,</span><span class="n">c_order_q_i</span><span class="p">,</span><span class="n">how</span><span class="o">=</span><span class="s">&#39;right&#39;</span><span class="p">)</span>
        <span class="n">fillColumns</span> <span class="o">=</span><span class="p">[</span><span class="s">&#39;id&#39;</span><span class="p">,</span><span class="s">&#39;dg_X&#39;</span><span class="p">,</span><span class="s">&#39;dg_Y&#39;</span><span class="p">,</span><span class="s">&#39;ave_X&#39;</span><span class="p">,</span><span class="s">&#39;ave_Y&#39;</span><span class="p">,</span><span class="s">&#39;status&#39;</span><span class="p">]</span>
        <span class="n">results_with_dg_format</span><span class="p">[</span><span class="n">fillColumns</span><span class="p">]</span> <span class="o">=</span> <span class="n">order_q_i</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="n">fillColumns</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span> <span class="o">+</span> <span class="p">[</span><span class="s">&#39;on deck&#39;</span><span class="p">]</span>
        <span class="n">c_order_q_results</span> <span class="o">=</span> <span class="n">results_with_dg_format</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="n">c_order_q_results</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="n">order_q_i</span><span class="o">.</span><span class="n">columns</span>

        <span class="c"># re-adjust delivery numbers (resulting from partial trip analysis) and error check</span>
        <span class="n">new_order_q_i</span> <span class="o">=</span> <span class="n">order_q_re_order_deliv_num</span><span class="p">(</span><span class="n">c_order_q_results</span><span class="p">)</span>
        <span class="n">now</span> <span class="o">=</span> <span class="n">new</span><span class="p">[</span><span class="s">&#39;order_time&#39;</span><span class="p">]</span>
        <span class="n">check_order_q_i</span> <span class="o">=</span> <span class="n">new_order_q_i</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">order_q_i</span><span class="p">[</span><span class="n">order_q_i</span><span class="o">.</span><span class="n">end_time</span><span class="o">&lt;=</span><span class="n">now</span><span class="p">])</span><span class="o">.</span><span class="n">sort_index</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s">&#39;start_time&#39;</span><span class="p">,</span><span class="n">ascending</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">errorCheck</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span> <span class="n">error_check</span><span class="p">(</span><span class="n">order_q_i</span><span class="o">=</span><span class="n">check_order_q_i</span><span class="p">,</span><span class="n">dg_q_i</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">arg3</span><span class="o">=</span><span class="s">&#39;sim_data&#39;</span><span class="p">)</span>

        <span class="n">check_dg_q_i</span> <span class="o">=</span> <span class="n">pull_from_order</span><span class="p">(</span><span class="n">check_order_q_i</span><span class="p">,</span><span class="n">errorCheck</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span> <span class="c"># false here because it would duplicate part of the above check</span>
        <span class="n">new_dg_q_i</span> <span class="o">=</span> <span class="n">check_dg_q_i</span><span class="p">[</span><span class="n">check_dg_q_i</span><span class="p">[</span><span class="s">&#39;ptb-t&#39;</span><span class="p">]</span><span class="o">&gt;</span><span class="n">now</span><span class="p">]</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">c_vars</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">13</span><span class="p">]</span> <span class="o">==</span> <span class="mi">505</span><span class="p">:</span>
            <span class="k">print</span> <span class="s">&#39;c_check4 -- error with data:  trouble setting best index&#39;</span>
            <span class="n">systemError</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span> <span class="n">new_order_q_i</span><span class="p">,</span><span class="n">new_dg_q_i</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span><span class="bp">None</span>



    <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">check_order_result</span><span class="p">)</span> <span class="o">==</span> <span class="s">&#39;&#39;</span><span class="p">:</span> <span class="k">return</span> <span class="n">new_order_q_i</span><span class="p">,</span><span class="n">new_dg_q_i</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">check_order_result</span><span class="p">)</span> <span class="o">==</span> <span class="nb">type</span><span class="p">(</span><span class="n">new_order_q_i</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">type</span><span class="p">(</span><span class="n">new_order_q_i</span><span class="p">)</span> <span class="o">==</span> <span class="n">NoneType</span><span class="p">:</span> <span class="k">return</span>
        <span class="k">else</span><span class="p">:</span> <span class="k">return</span> <span class="n">compare_orders</span><span class="p">(</span><span class="n">check_order_result</span><span class="p">,</span><span class="n">new_order_q_i</span><span class="p">,</span><span class="n">order_q_i</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">c_check3</span><span class="p">(</span><span class="n">new</span><span class="p">,</span><span class="n">order_q_i</span><span class="p">,</span><span class="n">tripStartPtX</span><span class="p">,</span><span class="n">tripStartPtY</span><span class="p">,</span><span class="n">tripStartTime</span><span class="p">,</span><span class="n">check_order_results</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">):</span>
    <span class="n">c_new</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">new</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">long</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">)</span>
    <span class="n">c_order_q_i</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">order_q_i</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s">&#39;status&#39;</span><span class="p">,</span><span class="s">&#39;ave_X&#39;</span><span class="p">,</span><span class="s">&#39;ave_Y&#39;</span><span class="p">],</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">long</span><span class="p">)</span><span class="o">.</span><span class="n">as_matrix</span><span class="p">(),</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">)</span>
    <span class="n">c_tripStartPtX</span> <span class="o">=</span> <span class="nb">long</span><span class="p">(</span><span class="n">tripStartPtX</span><span class="p">)</span>
    <span class="n">c_tripStartPtY</span> <span class="o">=</span> <span class="nb">long</span><span class="p">(</span><span class="n">tripStartPtY</span><span class="p">)</span>
    <span class="n">c_tripStartTime</span> <span class="o">=</span> <span class="nb">long</span><span class="p">(</span><span class="n">tripStartTime</span><span class="p">)</span>
    <span class="n">c_speed</span> <span class="o">=</span> <span class="nb">long</span><span class="p">(</span><span class="n">travel_speed</span><span class="p">)</span>
    <span class="n">c_max_delivery_time</span> <span class="o">=</span> <span class="nb">long</span><span class="p">(</span><span class="n">max_delivery_time</span><span class="p">)</span>
    <span class="n">r</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">order_q_i</span><span class="p">[</span><span class="n">order_q_i</span><span class="o">.</span><span class="n">end_time</span><span class="o">&gt;</span><span class="n">new</span><span class="p">[</span><span class="s">&#39;order_time&#39;</span><span class="p">]])</span><span class="o">+</span><span class="mi">1</span> <span class="c"># how is this being set?</span>
    <span class="k">print</span> <span class="s">&#39;check c_check3&#39;</span>
    <span class="n">systemError</span><span class="p">()</span>
    <span class="n">c_returnVar</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="n">r</span><span class="p">,</span><span class="mi">14</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">,</span><span class="n">order</span><span class="o">=</span><span class="s">&#39;C&#39;</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">)</span>

    <span class="n">c_order_result</span> <span class="o">=</span> <span class="n">c_eval_single_order</span><span class="p">(</span><span class="n">c_new</span><span class="p">,</span><span class="n">c_order_q_i</span><span class="p">,</span><span class="n">c_tripStartPtX</span><span class="p">,</span><span class="n">c_tripStartPtY</span><span class="p">,</span>
                                   <span class="n">c_tripStartTime</span><span class="p">,</span><span class="n">c_speed</span><span class="p">,</span><span class="n">c_max_delivery_time</span><span class="p">,</span><span class="n">c_returnVar</span><span class="p">)</span>
    <span class="n">new_order_result</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">c_order_result</span><span class="p">)</span><span class="o">.</span><span class="n">T</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="n">order_q_i</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">check_order_result</span><span class="p">)</span> <span class="o">==</span> <span class="s">&#39;&#39;</span><span class="p">:</span> <span class="k">return</span> <span class="n">new_order_result</span>
    <span class="k">else</span><span class="p">:</span> <span class="k">return</span> <span class="n">compare_orders</span><span class="p">(</span><span class="n">check_order_results</span><span class="p">,</span><span class="n">new_order_result</span><span class="p">,</span><span class="n">order_q_i</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">c_check2</span><span class="p">(</span><span class="n">order_q_i</span><span class="p">,</span><span class="n">order_results</span><span class="p">,</span><span class="n">new</span><span class="p">,</span><span class="n">check_order_results</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">):</span>
    <span class="n">now</span> <span class="o">=</span> <span class="n">new</span><span class="p">[</span><span class="s">&#39;order_time&#39;</span><span class="p">]</span>
    <span class="n">c_order_q_i</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">order_q_i</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s">&#39;status&#39;</span><span class="p">,</span><span class="s">&#39;ave_X&#39;</span><span class="p">,</span><span class="s">&#39;ave_Y&#39;</span><span class="p">],</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">long</span><span class="p">)</span><span class="o">.</span><span class="n">as_matrix</span><span class="p">(),</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">)</span>
    <span class="n">c_order_results</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">order_results</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">long</span><span class="p">)</span><span class="o">.</span><span class="n">as_matrix</span><span class="p">(),</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">)</span>
    <span class="n">c_now</span> <span class="o">=</span> <span class="nb">long</span><span class="p">(</span><span class="n">now</span><span class="p">)</span>
    <span class="n">c_order_results</span> <span class="o">=</span> <span class="n">c_update_order_results</span><span class="p">(</span><span class="n">c_order_q_i</span><span class="p">,</span><span class="n">c_order_results</span><span class="p">,</span><span class="n">c_now</span><span class="p">)</span>
    <span class="n">new_order_results</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">c_order_results</span><span class="p">),</span><span class="n">columns</span><span class="o">=</span><span class="n">order_results</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">check_order_results</span><span class="p">)</span> <span class="o">==</span> <span class="s">&#39;&#39;</span><span class="p">:</span> <span class="k">return</span> <span class="n">new_order_results</span>
    <span class="k">else</span><span class="p">:</span> <span class="k">return</span> <span class="n">compare_orders</span><span class="p">(</span><span class="n">check_order_results</span><span class="p">,</span><span class="n">new_order_results</span><span class="p">,</span><span class="n">order_q_i</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">c_check1</span><span class="p">(</span><span class="n">new</span><span class="p">,</span><span class="n">order_q_i</span><span class="p">,</span><span class="n">bestComboVars</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">):</span>
    <span class="c">#from get_combo_start_info import c_get_combo_start_info</span>

    <span class="n">c_new</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">new</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">long</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">)</span>
    <span class="n">c_order_q_i</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">order_q_i</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s">&#39;status&#39;</span><span class="p">,</span><span class="s">&#39;ave_X&#39;</span><span class="p">,</span><span class="s">&#39;ave_Y&#39;</span><span class="p">],</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">long</span><span class="p">)</span><span class="o">.</span><span class="n">as_matrix</span><span class="p">(),</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">)</span>
    <span class="n">r</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">order_q_i</span><span class="p">[</span><span class="n">new</span><span class="p">[</span><span class="s">&#39;order_time&#39;</span><span class="p">]</span><span class="o">&lt;</span><span class="n">order_q_i</span><span class="o">.</span><span class="n">end_time</span><span class="p">])</span>
    <span class="n">c_returnVar</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="n">r</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="mi">9</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">,</span><span class="n">order</span><span class="o">=</span><span class="s">&#39;C&#39;</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">)</span>

    <span class="n">c_returnVar</span> <span class="o">=</span> <span class="n">c_get_combo_start_info</span><span class="p">(</span><span class="n">c_new</span><span class="p">,</span><span class="n">c_order_q_i</span><span class="p">,</span><span class="n">c_returnVar</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">c_returnVar</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">5</span><span class="p">]</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">only single order&#39;</span>
        <span class="n">tripStartTime</span><span class="p">,</span><span class="n">tripStartPt</span> <span class="o">=</span> <span class="n">new</span><span class="p">[</span><span class="s">&#39;order_time&#39;</span><span class="p">],[</span><span class="n">new</span><span class="p">[</span><span class="s">&#39;start_X&#39;</span><span class="p">],</span><span class="n">new</span><span class="p">[</span><span class="s">&#39;start_Y&#39;</span><span class="p">]]</span>
        <span class="n">bestComboVars</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span><span class="n">tripStartTime</span><span class="p">,</span><span class="n">tripStartPt</span><span class="p">,</span><span class="bp">None</span><span class="p">,</span><span class="bp">None</span>
        <span class="k">return</span> <span class="n">bestComboVars</span>
    <span class="n">C</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">c_returnVar</span><span class="p">)</span>
    <span class="n">c_tripStartTime</span> <span class="o">=</span> <span class="n">C</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">c_tripStartPt</span> <span class="o">=</span> <span class="n">C</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span><span class="o">+</span><span class="n">C</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span><span class="o">+</span><span class="n">C</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
    <span class="n">c_tripPoints</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">list</span><span class="p">,</span><span class="nb">zip</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)),</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">)</span>
    <span class="n">c_tripDeliveryIDs</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
    <span class="n">c_tripOrderTimes</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
    <span class="n">c_bestComboVars</span> <span class="o">=</span> <span class="n">c_tripPoints</span><span class="p">,</span><span class="n">c_tripStartTime</span><span class="p">,</span><span class="n">c_tripStartPt</span><span class="p">,</span><span class="n">c_tripDeliveryIDs</span><span class="p">,</span><span class="n">c_tripOrderTimes</span>
    <span class="k">if</span> <span class="n">bestComboVars</span> <span class="o">==</span> <span class="s">&#39;&#39;</span><span class="p">:</span> <span class="k">return</span> <span class="n">c_bestComboVars</span>
    <span class="n">tripPoints</span><span class="p">,</span><span class="n">tripStartTime</span><span class="p">,</span><span class="n">tripStartPt</span><span class="p">,</span><span class="n">tripDeliveryIDs</span><span class="p">,</span><span class="n">tripOrderTimes</span> <span class="o">=</span> <span class="n">bestComboVars</span>

    <span class="c"># print &#39;\n&#39;</span>
    <span class="c"># print tripPoints.astype(pd.np.int64).tolist()</span>
    <span class="c"># print c_tripPoints.astype(pd.np.int64).tolist()</span>
    <span class="c"># c_check4(new,order_q_i,check_order_result=&#39;&#39;)</span>

    <span class="n">a</span> <span class="o">=</span> <span class="bp">True</span> <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">tripPoints</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>    <span class="o">==</span><span class="nb">str</span><span class="p">(</span><span class="n">c_tripPoints</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span> <span class="k">else</span> <span class="bp">False</span>
    <span class="n">b</span> <span class="o">=</span> <span class="bp">True</span> <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">tripStartTime</span><span class="p">)</span>                      <span class="o">==</span><span class="nb">str</span><span class="p">(</span><span class="n">c_tripStartTime</span><span class="p">)</span> <span class="k">else</span> <span class="bp">False</span>
    <span class="n">c</span> <span class="o">=</span> <span class="bp">True</span> <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">tripStartPt</span><span class="p">)</span>                        <span class="o">==</span><span class="nb">str</span><span class="p">(</span><span class="n">c_tripStartPt</span><span class="p">)</span> <span class="k">else</span> <span class="bp">False</span>
    <span class="n">d</span> <span class="o">=</span> <span class="bp">True</span> <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">tripDeliveryIDs</span><span class="p">)</span>                    <span class="o">==</span><span class="nb">str</span><span class="p">(</span><span class="n">tripDeliveryIDs</span><span class="p">)</span> <span class="k">else</span> <span class="bp">False</span>
    <span class="n">e</span> <span class="o">=</span> <span class="bp">True</span> <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">tripOrderTimes</span><span class="p">)</span>                     <span class="o">==</span><span class="nb">str</span><span class="p">(</span><span class="n">c_tripOrderTimes</span><span class="p">)</span> <span class="k">else</span> <span class="bp">False</span>
    <span class="k">if</span> <span class="p">[</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">d</span><span class="p">,</span><span class="n">e</span><span class="p">]</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span><span class="o">!=</span><span class="mi">0</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">c_check1: trouble with c_getStartInfo&#39;</span>
        <span class="k">print</span> <span class="p">[</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">d</span><span class="p">,</span><span class="n">e</span><span class="p">]</span>
        <span class="k">print</span> <span class="n">tripPoints</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
        <span class="k">print</span> <span class="n">c_tripPoints</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
        <span class="k">print</span> <span class="n">tripOrderTimes</span>
        <span class="k">print</span> <span class="n">c_tripOrderTimes</span>
        <span class="k">print</span> <span class="n">order_q_i</span>
        <span class="k">print</span> <span class="n">new</span>
        <span class="n">systemError</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[33]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># Cython Result f(x)s</span>
<span class="k">def</span> <span class="nf">receive_c_order_by_min</span><span class="p">(</span><span class="n">ret_order_q</span><span class="p">,</span><span class="n">showVar</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">ret_order_q</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">showVar</span><span class="o">==</span><span class="bp">True</span><span class="p">:</span> <span class="k">print</span> <span class="n">a</span><span class="p">,</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span>
    <span class="c"># print a.shape</span>

    <span class="n">sim_cols</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;vendorID&#39;</span><span class="p">,</span><span class="s">&#39;vend_X&#39;</span><span class="p">,</span><span class="s">&#39;vend_Y&#39;</span><span class="p">,</span><span class="s">&#39;order_num&#39;</span><span class="p">,</span><span class="s">&#39;deliv_id&#39;</span><span class="p">,</span><span class="s">&#39;order_time&#39;</span><span class="p">,</span><span class="s">&#39;start_X&#39;</span><span class="p">,</span><span class="s">&#39;start_Y&#39;</span><span class="p">,</span><span class="s">&#39;end_X&#39;</span><span class="p">,</span><span class="s">&#39;end_Y&#39;</span><span class="p">]</span>
    <span class="n">oq_cols</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;id&#39;</span><span class="p">,</span><span class="s">&#39;dg_X&#39;</span><span class="p">,</span><span class="s">&#39;dg_Y&#39;</span><span class="p">,</span><span class="s">&#39;deliv_num&#39;</span><span class="p">,</span><span class="s">&#39;travel_time_to_loc&#39;</span><span class="p">,</span><span class="s">&#39;deliv_id&#39;</span><span class="p">,</span><span class="s">&#39;order_time&#39;</span><span class="p">,</span><span class="s">&#39;start_X&#39;</span><span class="p">,</span><span class="s">&#39;start_Y&#39;</span><span class="p">,</span><span class="s">&#39;start_time&#39;</span><span class="p">,</span><span class="s">&#39;end_time&#39;</span><span class="p">,</span><span class="s">&#39;end_X&#39;</span><span class="p">,</span><span class="s">&#39;end_Y&#39;</span><span class="p">,</span><span class="s">&#39;total_order_time&#39;</span><span class="p">,</span><span class="s">&#39;travel_time&#39;</span><span class="p">]</span>
    <span class="n">o_res_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;dg_X&#39;</span><span class="p">,</span><span class="s">&#39;dg_Y&#39;</span><span class="p">,</span><span class="s">&#39;deliv_num&#39;</span><span class="p">,</span><span class="s">&#39;deliv_id&#39;</span><span class="p">,</span><span class="s">&#39;order_time&#39;</span><span class="p">,</span><span class="s">&#39;travel_time_to_loc&#39;</span><span class="p">,</span>
                     <span class="s">&#39;start_X&#39;</span><span class="p">,</span><span class="s">&#39;start_Y&#39;</span><span class="p">,</span><span class="s">&#39;start_time&#39;</span><span class="p">,</span><span class="s">&#39;travel_time&#39;</span><span class="p">,</span><span class="s">&#39;end_time&#39;</span><span class="p">,</span><span class="s">&#39;end_X&#39;</span><span class="p">,</span><span class="s">&#39;end_Y&#39;</span><span class="p">,</span>
                     <span class="s">&#39;total_order_time&#39;</span><span class="p">,</span><span class="s">&#39;id&#39;</span><span class="p">]</span>
    <span class="n">ret_cols</span> <span class="o">=</span> <span class="n">o_res_cols</span> <span class="k">if</span> <span class="n">a</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">==</span><span class="mi">14</span> <span class="k">else</span> <span class="n">oq_cols</span>
    <span class="n">order_q_ret</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="n">ret_cols</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">showVar</span><span class="o">==</span><span class="bp">True</span><span class="p">:</span> <span class="k">print</span> <span class="n">order_q_ret</span>

    <span class="n">remaining_deliv_ids</span> <span class="o">=</span> <span class="n">order_q_ret</span><span class="p">[</span><span class="n">order_q_ret</span><span class="o">.</span><span class="n">deliv_num</span><span class="o">==</span><span class="mi">950</span><span class="p">]</span><span class="o">.</span><span class="n">deliv_id</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
    <span class="n">order_q_ret</span> <span class="o">=</span> <span class="n">order_q_ret</span><span class="p">[(</span><span class="n">order_q_ret</span><span class="o">.</span><span class="n">deliv_num</span><span class="o">!=</span><span class="mi">0</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">order_q_ret</span><span class="o">.</span><span class="n">deliv_id</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">remaining_deliv_ids</span><span class="p">)</span><span class="o">==</span><span class="bp">False</span><span class="p">)]</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">order_q_ret</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">as_matrix</span><span class="p">()</span>
    <span class="n">order_q_ret</span><span class="p">[</span><span class="s">&#39;ave_X&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
    <span class="n">order_q_ret</span><span class="p">[</span><span class="s">&#39;ave_Y&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">order_q_ret</span><span class="o">.</span><span class="n">ave_X</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="p">)</span>
    <span class="n">order_q_ret</span><span class="p">[</span><span class="s">&#39;status&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">order_q_ret</span><span class="o">.</span><span class="n">ave_X</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="s">&#39;on deck&#39;</span><span class="p">)</span>
    <span class="n">c</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;id&#39;</span><span class="p">,</span><span class="s">&#39;dg_X&#39;</span><span class="p">,</span><span class="s">&#39;dg_Y&#39;</span><span class="p">,</span><span class="s">&#39;ave_X&#39;</span><span class="p">,</span><span class="s">&#39;ave_Y&#39;</span><span class="p">,</span><span class="s">&#39;status&#39;</span><span class="p">,</span><span class="s">&#39;deliv_num&#39;</span><span class="p">,</span><span class="s">&#39;travel_time_to_loc&#39;</span><span class="p">,</span><span class="s">&#39;deliv_id&#39;</span><span class="p">,</span><span class="s">&#39;order_time&#39;</span><span class="p">,</span>
           <span class="s">&#39;start_X&#39;</span><span class="p">,</span><span class="s">&#39;start_Y&#39;</span><span class="p">,</span><span class="s">&#39;start_time&#39;</span><span class="p">,</span><span class="s">&#39;end_time&#39;</span><span class="p">,</span><span class="s">&#39;end_X&#39;</span><span class="p">,</span><span class="s">&#39;end_Y&#39;</span><span class="p">,</span><span class="s">&#39;total_order_time&#39;</span><span class="p">,</span><span class="s">&#39;travel_time&#39;</span><span class="p">]</span>
    <span class="n">order_q_ret</span> <span class="o">=</span> <span class="n">order_q_ret</span><span class="o">.</span><span class="n">ix</span><span class="p">[:,</span><span class="n">c</span><span class="p">]</span>

    <span class="k">return</span> <span class="n">order_q_ret</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">remaining_deliv_ids</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[34]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># Handle Results f(x)s</span>
<span class="k">def</span> <span class="nf">pull_from_order</span><span class="p">(</span><span class="n">order_q_i</span><span class="p">,</span><span class="n">errorCheck</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Get data from Order[i] and copy to DG Queue&quot;&quot;&quot;</span>
    <span class="n">dg_ID</span> <span class="o">=</span> <span class="n">order_q_i</span><span class="o">.</span><span class="n">dg_id</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">order_q_i</span> <span class="o">=</span> <span class="n">order_q_i</span><span class="o">.</span><span class="n">sort_index</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;start_time&#39;</span><span class="p">,</span><span class="s">&#39;end_time&#39;</span><span class="p">],</span> <span class="n">ascending</span><span class="o">=</span><span class="p">[</span><span class="bp">True</span><span class="p">,</span><span class="bp">True</span><span class="p">])</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">order_q_i</span><span class="o">.</span><span class="n">ix</span><span class="p">[:,[</span><span class="s">&#39;start_time&#39;</span><span class="p">,</span><span class="s">&#39;start_node&#39;</span><span class="p">,</span><span class="s">&#39;deliv_id&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">as_matrix</span><span class="p">(),</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;time&#39;</span><span class="p">,</span><span class="s">&#39;pt&#39;</span><span class="p">,</span><span class="s">&#39;deliv_id&#39;</span><span class="p">])</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">order_q_i</span><span class="o">.</span><span class="n">ix</span><span class="p">[:,[</span><span class="s">&#39;end_time&#39;</span><span class="p">,</span><span class="s">&#39;end_node&#39;</span><span class="p">,</span><span class="s">&#39;deliv_id&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">as_matrix</span><span class="p">(),</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;time&#39;</span><span class="p">,</span><span class="s">&#39;pt&#39;</span><span class="p">,</span><span class="s">&#39;deliv_id&#39;</span><span class="p">]),</span><span class="n">ignore_index</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">order_q_i</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="s">&#39;dg_node&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span> <span class="o">!=</span> <span class="n">order_q_i</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="s">&#39;start_node&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">):</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="n">order_q_i</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="mi">0</span><span class="p">,[</span><span class="s">&#39;order_time&#39;</span><span class="p">,</span><span class="s">&#39;dg_node&#39;</span><span class="p">,</span><span class="s">&#39;deliv_id&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()],</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;time&#39;</span><span class="p">,</span><span class="s">&#39;pt&#39;</span><span class="p">,</span><span class="s">&#39;deliv_id&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>

    <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">sort_index</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s">&#39;time&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">df_ind</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
    <span class="n">pta_ind</span><span class="p">,</span><span class="n">ptb_ind</span> <span class="o">=</span> <span class="n">df_ind</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span><span class="n">df_ind</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
    <span class="c"># pta deliv_id is dropped because deliv_id and mock_pt based on destination pt</span>
    <span class="n">pta</span><span class="p">,</span><span class="n">ptb</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">pta_ind</span><span class="p">,:]</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s">&#39;deliv_id&#39;</span><span class="p">],</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">),</span><span class="n">df</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">ptb_ind</span><span class="p">,:]</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">new_dg_q</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pta</span><span class="o">.</span><span class="n">as_matrix</span><span class="p">(),</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;pta-t&#39;</span><span class="p">,</span><span class="s">&#39;pta&#39;</span><span class="p">])</span>
    <span class="n">new_dg_q</span><span class="p">[</span><span class="s">&#39;ptb-t&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ptb</span><span class="p">[</span><span class="s">&#39;time&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
    <span class="n">new_dg_q</span><span class="p">[</span><span class="s">&#39;ptb&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ptb</span><span class="p">[</span><span class="s">&#39;pt&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
    <span class="n">new_dg_q</span><span class="p">[</span><span class="s">&#39;deliv_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ptb</span><span class="p">[</span><span class="s">&#39;deliv_id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
    <span class="n">new_dg_q</span><span class="p">[</span><span class="s">&#39;dg_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dg_ID</span>
    <span class="n">new_dg_q</span> <span class="o">=</span> <span class="n">new_dg_q</span><span class="p">[[</span><span class="s">&#39;dg_id&#39;</span><span class="p">,</span><span class="s">&#39;pta&#39;</span><span class="p">,</span><span class="s">&#39;ptb&#39;</span><span class="p">,</span><span class="s">&#39;pta-t&#39;</span><span class="p">,</span><span class="s">&#39;ptb-t&#39;</span><span class="p">,</span><span class="s">&#39;deliv_id&#39;</span><span class="p">]]</span>
    <span class="n">new_dg_q</span> <span class="o">=</span> <span class="n">new_dg_q</span><span class="o">.</span><span class="n">sort_index</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;dg_id&#39;</span><span class="p">,</span><span class="s">&#39;pta-t&#39;</span><span class="p">,</span><span class="s">&#39;ptb-t&#39;</span><span class="p">,</span><span class="s">&#39;deliv_id&#39;</span><span class="p">],</span> <span class="n">ascending</span><span class="o">=</span><span class="p">[</span><span class="bp">True</span><span class="p">,</span><span class="bp">True</span><span class="p">,</span><span class="bp">True</span><span class="p">,</span><span class="bp">True</span><span class="p">])</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

    <span class="c"># rearrange inconsistent route due to multi-purpose point</span>
    <span class="n">ordered_dg_q</span> <span class="o">=</span> <span class="n">rearrange_dupe_locs_dg_q</span><span class="p">(</span><span class="n">new_dg_q</span><span class="p">)</span>

    <span class="c"># fill in mock points</span>
    <span class="n">final_dg_q</span> <span class="o">=</span> <span class="n">set_mock_pts</span><span class="p">(</span><span class="n">ordered_dg_q</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">errorCheck</span><span class="o">==</span><span class="bp">True</span><span class="p">:</span> <span class="n">error_check</span><span class="p">(</span><span class="n">order_q_i</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">dg_q_i</span><span class="o">=</span><span class="n">final_dg_q</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">final_dg_q</span>
<span class="k">def</span> <span class="nf">updateOrderResults</span><span class="p">(</span><span class="n">order_q_i</span><span class="p">,</span><span class="n">new</span><span class="p">,</span><span class="n">order_results</span><span class="p">,</span><span class="n">errorCheck</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
    <span class="n">now</span> <span class="o">=</span> <span class="n">new</span><span class="p">[</span><span class="s">&#39;order_time&#39;</span><span class="p">]</span>
    <span class="c"># First, format order_results with proper columns and fill static data</span>
    <span class="c"># Second, reverse adjustments made for partial, non-completed trip analysis</span>
    <span class="c"># Third, add-in any staticOrders (which should fit perfectly in place)</span>
    <span class="c"># Fourth, re-adjust delivery numbers (resulting from partial trip analysis) and error check</span>

    <span class="c"># First:</span>
    <span class="n">results_with_dg_format</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">order_q_i</span><span class="p">,</span><span class="n">order_results</span><span class="p">,</span><span class="n">how</span><span class="o">=</span><span class="s">&#39;right&#39;</span><span class="p">)</span>
    <span class="n">fillColumns</span> <span class="o">=</span><span class="p">[</span><span class="s">&#39;id&#39;</span><span class="p">,</span><span class="s">&#39;dg_X&#39;</span><span class="p">,</span><span class="s">&#39;dg_Y&#39;</span><span class="p">,</span><span class="s">&#39;ave_X&#39;</span><span class="p">,</span><span class="s">&#39;ave_Y&#39;</span><span class="p">,</span><span class="s">&#39;status&#39;</span><span class="p">]</span>
    <span class="n">results_with_dg_format</span><span class="p">[</span><span class="n">fillColumns</span><span class="p">]</span> <span class="o">=</span> <span class="n">order_q_i</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="n">fillColumns</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span> <span class="o">+</span> <span class="p">[</span><span class="s">&#39;on deck&#39;</span><span class="p">]</span>
    <span class="n">f_ord_res</span> <span class="o">=</span> <span class="n">results_with_dg_format</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

    <span class="c"># Second:</span>
    <span class="n">partial_check_orders</span> <span class="o">=</span> <span class="n">order_q_i</span><span class="p">[(</span><span class="n">order_q_i</span><span class="o">.</span><span class="n">start_time</span><span class="o">&lt;=</span><span class="n">now</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">order_q_i</span><span class="o">.</span><span class="n">end_time</span><span class="o">&gt;</span><span class="n">now</span><span class="p">)]</span><span class="o">.</span><span class="n">sort_index</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s">&#39;deliv_id&#39;</span><span class="p">,</span><span class="n">ascending</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">partial_check_orders</span><span class="o">.</span><span class="n">index</span><span class="p">)</span><span class="o">!=</span><span class="mi">0</span><span class="p">:</span>
        <span class="n">partial_ids</span> <span class="o">=</span> <span class="n">partial_check_orders</span><span class="o">.</span><span class="n">deliv_id</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
        <span class="n">res_needing_edit</span> <span class="o">=</span> <span class="n">f_ord_res</span><span class="p">[</span><span class="n">f_ord_res</span><span class="o">.</span><span class="n">deliv_id</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">partial_ids</span><span class="p">)</span><span class="o">==</span><span class="bp">True</span><span class="p">]</span><span class="o">.</span><span class="n">sort_index</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s">&#39;deliv_id&#39;</span><span class="p">,</span><span class="n">ascending</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="n">replCols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;travel_time_to_loc&#39;</span><span class="p">,</span><span class="s">&#39;order_time&#39;</span><span class="p">,</span><span class="s">&#39;start_X&#39;</span><span class="p">,</span><span class="s">&#39;start_Y&#39;</span><span class="p">,</span><span class="s">&#39;start_time&#39;</span><span class="p">]</span>
        <span class="n">res_needing_edit</span><span class="o">.</span><span class="n">ix</span><span class="p">[:,</span><span class="n">replCols</span><span class="p">]</span> <span class="o">=</span> <span class="n">partial_check_orders</span><span class="o">.</span><span class="n">ix</span><span class="p">[:,</span><span class="n">replCols</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
        <span class="n">a</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">res_needing_edit</span><span class="p">,</span><span class="n">f_ord_res</span><span class="p">[</span><span class="n">f_ord_res</span><span class="o">.</span><span class="n">deliv_id</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">partial_ids</span><span class="p">)</span><span class="o">==</span><span class="bp">False</span><span class="p">],</span><span class="n">how</span><span class="o">=</span><span class="s">&#39;outer&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sort_index</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s">&#39;start_time&#39;</span><span class="p">)</span>
        <span class="n">clean_ord_results</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span> <span class="n">clean_ord_results</span> <span class="o">=</span> <span class="n">f_ord_res</span>

    <span class="c"># Third:</span>
    <span class="n">clean_ord_res_ids</span> <span class="o">=</span> <span class="n">clean_ord_results</span><span class="o">.</span><span class="n">deliv_id</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
    <span class="n">orders_to_add</span> <span class="o">=</span> <span class="n">partial_check_orders</span><span class="p">[</span><span class="n">partial_check_orders</span><span class="o">.</span><span class="n">deliv_id</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">clean_ord_res_ids</span><span class="p">)</span><span class="o">==</span><span class="bp">False</span><span class="p">]</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">orders_to_add</span><span class="o">.</span><span class="n">index</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">full_order_q_i</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">orders_to_add</span><span class="p">,</span><span class="n">clean_ord_results</span><span class="p">,</span><span class="n">how</span><span class="o">=</span><span class="s">&#39;outer&#39;</span><span class="p">)</span>
        <span class="k">print</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">did it</span><span class="se">\n</span><span class="s">&#39;</span>
    <span class="k">else</span><span class="p">:</span> <span class="n">full_order_q_i</span> <span class="o">=</span> <span class="n">clean_ord_results</span>

    <span class="n">c_check2</span><span class="p">(</span><span class="n">order_q_i</span><span class="p">,</span><span class="n">order_results</span><span class="p">,</span><span class="n">new</span><span class="p">,</span><span class="n">full_order_q_i</span><span class="p">)</span>

    <span class="c"># Fourth:</span>
    <span class="n">new_order_q_i</span> <span class="o">=</span> <span class="n">order_q_re_order_deliv_num</span><span class="p">(</span><span class="n">full_order_q_i</span><span class="p">)</span>
    <span class="n">check_order_q_i</span> <span class="o">=</span> <span class="n">new_order_q_i</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">order_q_i</span><span class="p">[</span><span class="n">order_q_i</span><span class="o">.</span><span class="n">end_time</span><span class="o">&lt;=</span><span class="n">now</span><span class="p">])</span><span class="o">.</span><span class="n">sort_index</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s">&#39;start_time&#39;</span><span class="p">,</span><span class="n">ascending</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">errorCheck</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span> <span class="n">error_check</span><span class="p">(</span><span class="n">order_q_i</span><span class="o">=</span><span class="n">check_order_q_i</span><span class="p">,</span><span class="n">dg_q_i</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">arg3</span><span class="o">=</span><span class="s">&#39;sim_data&#39;</span><span class="p">)</span>

    <span class="n">check_dg_q_i</span> <span class="o">=</span> <span class="n">pull_from_order</span><span class="p">(</span><span class="n">check_order_q_i</span><span class="p">,</span><span class="n">errorCheck</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span> <span class="c"># false here because it would duplicate part of the above check</span>
    <span class="n">new_dg_q_i</span> <span class="o">=</span> <span class="n">check_dg_q_i</span><span class="p">[</span><span class="n">check_dg_q_i</span><span class="p">[</span><span class="s">&#39;ptb-t&#39;</span><span class="p">]</span><span class="o">&gt;</span><span class="n">now</span><span class="p">]</span>

    <span class="k">return</span> <span class="n">new_order_q_i</span><span class="p">,</span><span class="n">new_dg_q_i</span>
<span class="k">def</span> <span class="nf">compare_orders</span><span class="p">(</span><span class="n">orderA</span><span class="p">,</span><span class="n">orderB</span><span class="p">,</span><span class="n">order_q_i</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">):</span>
    <span class="n">orderA</span> <span class="o">=</span> <span class="n">orderA</span><span class="o">.</span><span class="n">sort_index</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s">&#39;deliv_id&#39;</span><span class="p">,</span><span class="n">ascending</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">orderB</span> <span class="o">=</span> <span class="n">orderB</span><span class="o">.</span><span class="n">sort_index</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s">&#39;deliv_id&#39;</span><span class="p">,</span><span class="n">ascending</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">a</span> <span class="o">=</span> <span class="bp">True</span> <span class="k">if</span> <span class="n">orderA</span><span class="o">.</span><span class="n">deliv_id</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>      <span class="o">==</span> <span class="n">orderB</span><span class="o">.</span><span class="n">deliv_id</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span> <span class="k">else</span> <span class="bp">False</span>
    <span class="n">b</span> <span class="o">=</span> <span class="bp">True</span> <span class="k">if</span> <span class="n">orderA</span><span class="o">.</span><span class="n">id</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>              <span class="o">==</span> <span class="n">orderB</span><span class="o">.</span><span class="n">id</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span> <span class="k">else</span> <span class="bp">False</span>
    <span class="n">c</span> <span class="o">=</span> <span class="bp">True</span> <span class="k">if</span> <span class="n">orderA</span><span class="o">.</span><span class="n">order_time</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>       <span class="o">==</span> <span class="n">orderB</span><span class="o">.</span><span class="n">order_time</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span> <span class="k">else</span> <span class="bp">False</span>
    <span class="n">d</span> <span class="o">=</span> <span class="bp">True</span> <span class="k">if</span> <span class="n">orderA</span><span class="o">.</span><span class="n">start_X</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>         <span class="o">==</span> <span class="n">orderB</span><span class="o">.</span><span class="n">start_X</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span> <span class="k">else</span> <span class="bp">False</span>
    <span class="n">e</span> <span class="o">=</span> <span class="bp">True</span> <span class="k">if</span> <span class="n">orderA</span><span class="o">.</span><span class="n">start_Y</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>         <span class="o">==</span> <span class="n">orderB</span><span class="o">.</span><span class="n">start_Y</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span> <span class="k">else</span> <span class="bp">False</span>
    <span class="n">f</span> <span class="o">=</span> <span class="bp">True</span> <span class="k">if</span> <span class="n">orderA</span><span class="o">.</span><span class="n">start_time</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>       <span class="o">==</span> <span class="n">orderB</span><span class="o">.</span><span class="n">start_time</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span> <span class="k">else</span> <span class="bp">False</span>
    <span class="n">g</span> <span class="o">=</span> <span class="bp">True</span> <span class="k">if</span> <span class="n">orderA</span><span class="o">.</span><span class="n">end_time</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>         <span class="o">==</span> <span class="n">orderB</span><span class="o">.</span><span class="n">end_time</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span> <span class="k">else</span> <span class="bp">False</span>
    <span class="n">h</span> <span class="o">=</span> <span class="bp">True</span> <span class="k">if</span> <span class="n">orderA</span><span class="o">.</span><span class="n">end_X</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>           <span class="o">==</span> <span class="n">orderB</span><span class="o">.</span><span class="n">end_X</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span> <span class="k">else</span> <span class="bp">False</span>
    <span class="n">i</span> <span class="o">=</span> <span class="bp">True</span> <span class="k">if</span> <span class="n">orderA</span><span class="o">.</span><span class="n">end_Y</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>           <span class="o">==</span> <span class="n">orderB</span><span class="o">.</span><span class="n">end_Y</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span> <span class="k">else</span> <span class="bp">False</span>
    <span class="k">if</span> <span class="p">[</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">d</span><span class="p">,</span><span class="n">e</span><span class="p">,</span><span class="n">f</span><span class="p">,</span><span class="n">g</span><span class="p">,</span><span class="n">h</span><span class="p">,</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span><span class="o">!=</span><span class="mi">0</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">&#39;c_trouble with update orders&#39;</span>
        <span class="k">print</span> <span class="p">[</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">d</span><span class="p">,</span><span class="n">e</span><span class="p">,</span><span class="n">f</span><span class="p">,</span><span class="n">g</span><span class="p">,</span><span class="n">h</span><span class="p">,</span><span class="n">i</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">order_q_i</span> <span class="o">!=</span> <span class="s">&#39;&#39;</span><span class="p">:</span> <span class="k">print</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">Non-cython results</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span><span class="n">orderA</span><span class="p">,</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">Cython results</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span><span class="n">orderB</span><span class="p">,</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">order_q_i</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span><span class="n">order_q_i</span>
        <span class="k">else</span><span class="p">:</span> <span class="k">print</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">Non-cython results</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span><span class="n">orderA</span><span class="p">,</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">Cython results</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span><span class="n">orderB</span>
        <span class="n">systemError</span><span class="p">()</span>
    <span class="k">return</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[35]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># Clean Up f(x)s</span>
<span class="k">def</span> <span class="nf">fix_dg_q_delID_dupes</span><span class="p">(</span><span class="n">static_dg_q</span><span class="p">,</span><span class="n">new_dg_q</span><span class="p">,</span><span class="n">arg_dg_group_i</span><span class="p">):</span>
    <span class="c"># there should be only two of each deliv_id, otherwise it needs to be fixed...</span>
    <span class="n">del_ids</span> <span class="o">=</span> <span class="n">new_dg_q</span><span class="o">.</span><span class="n">deliv_id</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
    <span class="n">unique_ids</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">del_ids</span><span class="p">,</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">new_dg_q</span><span class="o">.</span><span class="n">index</span><span class="p">))))</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
    <span class="n">idCount</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">del_ids</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">s</span><span class="p">),</span><span class="n">unique_ids</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">unique_ids</span><span class="p">)</span><span class="o">-</span><span class="n">idCount</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">!=</span><span class="mi">0</span><span class="p">:</span>
        <span class="c"># in some cases, new_dg_q will have three rows with a given deliv_id for a reason different than realPoints adjustment</span>
        <span class="c"># Instance #1:</span>
        <span class="c">#   two orders have same pick-up location, and bestCombo begins by picking up second order.</span>
        <span class="c">#   in such case, new_dg_q would have deliv_id of first order instead of correctly having deliv_id of second order</span>
        <span class="n">rowInd</span> <span class="o">=</span> <span class="n">static_dg_q</span><span class="p">[</span><span class="n">static_dg_q</span><span class="o">.</span><span class="n">deliv_id</span> <span class="o">==</span> <span class="n">unique_ids</span><span class="p">[</span><span class="n">idCount</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="mi">3</span><span class="p">)]]</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">staticRow</span> <span class="o">=</span> <span class="n">static_dg_q</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">rowInd</span><span class="p">,:]</span> <span class="c"># because rowInd is type=int, then Series is result</span>
        <span class="n">rowInd</span> <span class="o">=</span> <span class="n">new_dg_q</span><span class="p">[</span><span class="n">new_dg_q</span><span class="o">.</span><span class="n">ptax</span><span class="o">==</span><span class="n">staticRow</span><span class="p">[</span><span class="s">&#39;ptax&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">row</span> <span class="o">=</span> <span class="n">new_dg_q</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">rowInd</span><span class="p">,:]</span>
        <span class="n">row</span><span class="p">[</span><span class="s">&#39;deliv_id&#39;</span><span class="p">]</span>  <span class="o">=</span> <span class="n">unique_ids</span><span class="p">[</span><span class="n">idCount</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="mi">1</span><span class="p">)]</span>
        <span class="n">static_dg_q</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">rowInd</span><span class="p">,:]</span> <span class="o">=</span> <span class="n">row</span>

        <span class="n">new_dg_q</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">static_dg_q</span><span class="p">,</span><span class="n">new_dg_q</span><span class="p">,</span><span class="n">how</span><span class="o">=</span><span class="s">&#39;outer&#39;</span><span class="p">)</span>
        <span class="n">new_dg_q</span><span class="o">.</span><span class="n">dg_id</span> <span class="o">=</span> <span class="n">arg_dg_group_i</span><span class="o">.</span><span class="n">id</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">idCount</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">1</span> <span class="ow">or</span> <span class="n">idCount</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">:</span>
            <span class="k">print</span> <span class="s">&#39;check update_dg_q_Results -- unknown condition re: delivery ids&#39;</span>
            <span class="n">systemError</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">new_dg_q</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">rearrange_dupe_locs_dg_q</span><span class="p">(</span><span class="n">dg_q_i</span><span class="p">):</span>
    <span class="n">a</span><span class="o">=</span><span class="n">dg_q_i</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">a</span><span class="o">.</span><span class="n">pta</span><span class="o">.</span><span class="n">tolist</span><span class="p">()[</span><span class="mi">1</span><span class="p">:]</span><span class="o">!=</span><span class="n">a</span><span class="o">.</span><span class="n">ptb</span><span class="o">.</span><span class="n">tolist</span><span class="p">()[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s">&#39;ptb-t&#39;</span><span class="p">)</span>
        <span class="n">end_times_all</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="s">&#39;ptb-t&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
        <span class="n">end_times_uniq</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">groups</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
        <span class="n">end_time_cnt</span> <span class="o">=</span> <span class="p">[</span><span class="n">end_times_all</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">end_times_uniq</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">end_time_cnt</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
            <span class="k">print</span> <span class="s">&#39;unknown inconsistency with route&#39;</span>
            <span class="k">print</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">all:</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span><span class="n">end_times_all</span><span class="p">,</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">uniq:</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span><span class="n">end_times_uniq</span><span class="p">,</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">count:</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span><span class="n">end_time_cnt</span>
            <span class="k">print</span> <span class="n">a</span>
            <span class="c"># systemError()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">timePt</span> <span class="o">=</span> <span class="n">end_times_uniq</span><span class="p">[</span><span class="n">end_time_cnt</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="mi">3</span><span class="p">)]</span>
            <span class="c"># stPt = end_times_all.index(timePt)</span>
            <span class="n">end_times_all</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">end_times_all</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">it</span><span class="o">==</span><span class="n">timePt</span><span class="p">:</span>
                    <span class="n">endPt</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">end_times_all</span><span class="p">)</span> <span class="o">-</span> <span class="n">end_times_all</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">it</span><span class="p">)</span>
                    <span class="k">break</span>
            <span class="n">a</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">ix</span><span class="p">[:</span><span class="n">endPt</span><span class="o">-</span><span class="mi">3</span><span class="p">,:]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">endPt</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span><span class="n">endPt</span><span class="o">-</span><span class="mi">1</span><span class="p">,:])</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">endPt</span><span class="o">-</span><span class="mi">2</span><span class="p">:</span><span class="n">endPt</span><span class="o">-</span><span class="mi">2</span><span class="p">,:])</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">a</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[36]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># Data Validation f(x)s</span>

<span class="kn">from</span> <span class="nn">data_validation</span> <span class="kn">import</span> <span class="n">error_check</span><span class="p">,</span><span class="n">order_by_min</span><span class="p">,</span><span class="n">update_global_vars</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[37]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># Data Recordation</span>

<span class="kn">from</span> <span class="nn">data_recordation</span> <span class="kn">import</span> <span class="n">export_all_data</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[38]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># Data Visualization</span>

<span class="kn">from</span> <span class="nn">data_visual</span> <span class="kn">import</span> <span class="n">DISPLAY_REAL_DATA</span><span class="p">,</span><span class="n">DISPLAY_SIMULATION_DATA</span><span class="p">,</span><span class="n">DISPLAY_NORMAL_DELIVERY_DATA</span><span class="p">,</span><span class="n">DISPLAY_EDA_DATA</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[39]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># Execution f(x)s</span>

<span class="k">def</span> <span class="nf">RUN_CHAOS_SIMULATION</span><span class="p">(</span><span class="n">assumptions</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">makeData</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">showSimData</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">runNormalDel</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">load</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">save</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                         <span class="n">resume</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">errorCheck</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">global_op_vars</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>

    <span class="c">#pass</span>
    <span class="c"># global c_get_best_combo</span>
    <span class="c"># global c_mapper2,c_mapper3,c_mapper4,c_mapper5,c_mapper6,c_mapper7</span>
    <span class="c"># global minimum_relative_distance</span>
    <span class="c"># from get_best_combo import c_get_best_combo</span>
    <span class="c"># from get_combo_start_info import c_get_combo_start_info</span>
    <span class="c"># from map_points_to_combos import c_mapper2,c_mapper3,c_mapper4,c_mapper5,c_mapper6,c_mapper7</span>
    <span class="c"># from math_functions import minimum_relative_distance</span>

    <span class="n">t1A</span><span class="o">=</span><span class="n">time</span><span class="p">()</span>
    <span class="k">print</span> <span class="n">t1A</span>
    <span class="k">if</span> <span class="n">global_op_vars</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span>
        <span class="k">global</span> <span class="n">sim_data</span><span class="p">,</span><span class="n">order_q</span><span class="p">,</span><span class="n">order_delivered</span><span class="p">,</span><span class="n">dg_pool</span><span class="p">,</span><span class="n">dg_pool_pt</span><span class="p">,</span><span class="n">dg_q</span><span class="p">,</span><span class="n">dg_delivered</span>
    <span class="k">else</span><span class="p">:</span> <span class="k">global</span> <span class="n">sim_data</span>
    <span class="n">global_simulation_vars</span><span class="p">(</span><span class="n">assumptions</span><span class="p">)</span>

    <span class="n">sim_data_Path</span><span class="o">=</span><span class="n">this_cwd</span><span class="o">+</span><span class="s">&#39;/sim_data/vendor_sim_data.txt&#39;</span>
    <span class="k">if</span> <span class="n">makeData</span><span class="o">==</span><span class="bp">True</span><span class="p">:</span> <span class="n">sim_data</span> <span class="o">=</span> <span class="n">make_simulation_data_from_real_data</span><span class="p">(</span><span class="n">savePath</span><span class="o">=</span><span class="n">sim_data_Path</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">sim_data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_hdf</span><span class="p">(</span><span class="n">sim_data_Path</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s">&#39;.txt&#39;</span><span class="p">)</span><span class="o">+</span><span class="s">&#39;.h5&#39;</span><span class="p">,</span> <span class="s">&#39;table&#39;</span><span class="p">)</span>
        <span class="c"># sim_data = pd.read_sql_table(&#39;sim_data&#39;,engine,index_col=&#39;deliv_id&#39;)</span>
    <span class="n">sim_data</span> <span class="o">=</span> <span class="n">sim_data</span><span class="o">.</span><span class="n">sort_index</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;order_time&#39;</span><span class="p">,</span><span class="s">&#39;vend_id&#39;</span><span class="p">],</span> <span class="n">ascending</span><span class="o">=</span><span class="p">[</span><span class="bp">True</span><span class="p">,</span><span class="bp">True</span><span class="p">])</span>

    <span class="k">if</span> <span class="n">showSimData</span><span class="o">==</span><span class="bp">True</span><span class="p">:</span> <span class="n">DISPLAY_SIMULATION_DATA</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">runNormalDel</span><span class="o">==</span><span class="bp">True</span><span class="p">:</span> <span class="n">RUN_NORMAL_DELIVERY_SIMULATION</span><span class="p">(</span><span class="n">makeData</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">showSimData</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

    <span class="n">globalVars_plus</span> <span class="o">=</span> <span class="n">init_global_vars</span><span class="p">(</span><span class="n">load</span><span class="p">,</span><span class="n">save</span><span class="p">,</span><span class="n">resume</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">globalVars_plus</span><span class="o">==</span><span class="bp">None</span><span class="p">:</span> <span class="k">return</span>

    <span class="n">order_q</span><span class="p">,</span><span class="n">order_delivered</span><span class="p">,</span><span class="n">dg_q</span><span class="p">,</span><span class="n">dg_delivered</span><span class="p">,</span><span class="n">dg_pool</span><span class="p">,</span><span class="n">dg_pool_pt</span><span class="p">,</span><span class="n">program_stats</span><span class="p">,</span><span class="n">stpt</span> <span class="o">=</span> <span class="n">globalVars_plus</span>
    <span class="n">globalVars</span> <span class="o">=</span> <span class="n">order_q</span><span class="p">,</span><span class="n">order_delivered</span><span class="p">,</span><span class="n">dg_q</span><span class="p">,</span><span class="n">dg_delivered</span><span class="p">,</span><span class="n">dg_pool</span><span class="p">,</span><span class="n">dg_pool_pt</span>

    <span class="n">stpt</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">print</span> <span class="s">&#39;starting at&#39;</span><span class="p">,</span><span class="n">stpt</span>
    <span class="n">pt</span><span class="o">=</span><span class="mi">0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">stpt</span><span class="p">,</span><span class="n">totalTime</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">now</span><span class="o">=</span><span class="n">i</span>

        <span class="c"># maintain lists of data</span>
        <span class="n">globalVars</span> <span class="o">=</span> <span class="n">update_global_vars</span><span class="p">(</span><span class="n">globalVars</span><span class="p">,</span><span class="s">&#39;update per minute&#39;</span><span class="p">,</span><span class="n">now</span><span class="p">)</span>

        <span class="c"># UPDATE to/from PGSQL HERE</span>

        <span class="c"># export data on a regular basis</span>
        <span class="c"># if pt==1:</span>
        <span class="c">#     pt = 0</span>
        <span class="c">#     if save == True: x = export_all_data(globalVars,program_stats)</span>
        <span class="c"># pt+=1</span>

        <span class="c"># process all current orders</span>
        <span class="n">ordersNow</span><span class="o">=</span><span class="n">sim_data</span><span class="p">[(</span><span class="n">sim_data</span><span class="o">.</span><span class="n">order_time</span> <span class="o">==</span> <span class="n">now</span><span class="p">)]</span>
        <span class="n">t1</span><span class="o">=</span><span class="n">time</span><span class="p">()</span>

        <span class="c"># globalVars = order_by_min(globalVars,ordersNow,errorCheck=errorCheck)</span>
        <span class="c"># print &#39;finished&#39;</span>
        <span class="c"># systemError()</span>

        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">ordersNow</span><span class="o">.</span><span class="n">index</span><span class="p">)):</span>
            <span class="n">thisOrder</span> <span class="o">=</span> <span class="n">ordersNow</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">j</span><span class="p">,:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="n">globalVars</span> <span class="o">=</span> <span class="n">getBestDG</span><span class="p">(</span><span class="n">globalVars</span><span class="p">,</span><span class="n">thisOrder</span><span class="p">,</span><span class="n">errorCheck</span><span class="o">=</span><span class="n">errorCheck</span><span class="p">)</span>
        <span class="c"># raise SystemError</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ordersNow</span><span class="o">.</span><span class="n">index</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">program_stats</span> <span class="o">=</span> <span class="n">program_stats</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="n">i</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">ordersNow</span><span class="o">.</span><span class="n">index</span><span class="p">),</span><span class="nb">round</span><span class="p">((</span><span class="n">time</span><span class="p">()</span><span class="o">-</span><span class="n">t1</span><span class="p">)</span><span class="o">/</span><span class="nb">len</span><span class="p">(</span><span class="n">ordersNow</span><span class="o">.</span><span class="n">index</span><span class="p">),</span><span class="mi">2</span><span class="p">),</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">())],</span><span class="n">index</span><span class="o">=</span><span class="n">program_stats</span><span class="o">.</span><span class="n">columns</span><span class="p">),</span><span class="n">ignore_index</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
            <span class="k">print</span> <span class="s">&#39;minute&#39;</span><span class="o">+</span><span class="s">&#39;</span><span class="se">\t</span><span class="s">&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">+</span><span class="s">&#39;</span><span class="se">\t</span><span class="s">&#39;</span><span class="o">+</span><span class="s">&#39;orders=&#39;</span><span class="o">+</span><span class="s">&#39;</span><span class="se">\t</span><span class="s">&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ordersNow</span><span class="o">.</span><span class="n">index</span><span class="p">))</span><span class="o">+</span><span class="s">&#39;</span><span class="se">\t</span><span class="s">&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">((</span><span class="n">time</span><span class="p">()</span><span class="o">-</span><span class="n">t1</span><span class="p">)</span><span class="o">/</span><span class="nb">len</span><span class="p">(</span><span class="n">ordersNow</span><span class="o">.</span><span class="n">index</span><span class="p">))</span><span class="o">+</span><span class="s">&#39;</span><span class="se">\t</span><span class="s">&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">time</span><span class="p">())</span>


    <span class="c"># move remaining orders at close to &#39;delivered&#39;</span>
    <span class="k">if</span> <span class="n">now</span> <span class="o">==</span> <span class="n">totalTime</span><span class="p">:</span> <span class="n">globalVars</span> <span class="o">=</span> <span class="n">update_global_vars</span><span class="p">(</span><span class="n">globalVars</span><span class="p">,</span><span class="s">&#39;update per minute&#39;</span><span class="p">,</span><span class="n">globalVars</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">end_time</span><span class="o">.</span><span class="n">max</span><span class="p">())</span>
    <span class="k">if</span> <span class="n">save</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span> <span class="n">export_all_data</span><span class="p">(</span><span class="n">globalVars</span><span class="p">,</span><span class="n">program_stats</span><span class="p">)</span>
    <span class="k">print</span> <span class="s">&#39;done&#39;</span>
    <span class="k">print</span> <span class="n">time</span><span class="p">()</span><span class="o">-</span><span class="n">t1A</span>
    <span class="k">return</span>

<span class="k">def</span> <span class="nf">RUN_NORMAL_DELIVERY_SIMULATION</span><span class="p">(</span><span class="n">makeData</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">showSimData</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="n">sim_data_Path</span><span class="o">=</span><span class="n">this_cwd</span><span class="o">+</span><span class="s">&#39;/sim_data/vendor_sim_data.txt&#39;</span>
    <span class="k">if</span> <span class="n">makeData</span><span class="o">==</span><span class="bp">True</span><span class="p">:</span> <span class="n">sim_data</span> <span class="o">=</span> <span class="n">make_simulation_data</span><span class="p">(</span><span class="n">savePath</span><span class="o">=</span><span class="n">sim_data_Path</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span> <span class="n">sim_data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_hdf</span><span class="p">(</span><span class="n">sim_data_Path</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s">&#39;.txt&#39;</span><span class="p">)</span><span class="o">+</span><span class="s">&#39;.h5&#39;</span><span class="p">,</span> <span class="s">&#39;table&#39;</span><span class="p">)</span>
    <span class="n">sim_data</span> <span class="o">=</span> <span class="n">sim_data</span><span class="o">.</span><span class="n">sort_index</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;order_time&#39;</span><span class="p">,</span><span class="s">&#39;vend_Y&#39;</span><span class="p">,</span><span class="s">&#39;vend_X&#39;</span><span class="p">],</span> <span class="n">ascending</span><span class="o">=</span><span class="p">[</span><span class="bp">True</span><span class="p">,</span><span class="bp">True</span><span class="p">,</span><span class="bp">True</span><span class="p">])</span>
    <span class="k">if</span> <span class="n">showSimData</span><span class="o">==</span><span class="bp">True</span><span class="p">:</span> <span class="n">DISPLAY_SIMULATION_DATA</span><span class="p">()</span>
    <span class="n">NormalDelivery</span><span class="p">(</span><span class="n">sim_data</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">RUN_LATTICE_SIMULATION</span><span class="p">():</span>

    <span class="n">global_simulation_vars</span><span class="p">()</span>
    <span class="n">makeData</span><span class="o">=</span><span class="bp">False</span>
    <span class="n">load</span><span class="o">=</span><span class="bp">True</span>
    <span class="n">t1A</span><span class="o">=</span><span class="n">time</span><span class="p">()</span>

    <span class="n">sim_data_Path</span><span class="o">=</span><span class="n">this_cwd</span><span class="o">+</span><span class="s">&#39;/sim_data/vendor_sim_data.txt&#39;</span>
    <span class="k">if</span> <span class="n">makeData</span><span class="o">==</span><span class="bp">True</span><span class="p">:</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">make_simulation_data</span><span class="p">(</span><span class="n">savePath</span><span class="o">=</span><span class="n">sim_data_Path</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_hdf</span><span class="p">(</span><span class="n">sim_data_Path</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s">&#39;.txt&#39;</span><span class="p">)</span><span class="o">+</span><span class="s">&#39;.h5&#39;</span><span class="p">,</span> <span class="s">&#39;table&#39;</span><span class="p">)</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">sort_index</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;order_time&#39;</span><span class="p">,</span><span class="s">&#39;vend_Y&#39;</span><span class="p">,</span><span class="s">&#39;vend_X&#39;</span><span class="p">],</span> <span class="n">ascending</span><span class="o">=</span><span class="p">[</span><span class="bp">True</span><span class="p">,</span><span class="bp">True</span><span class="p">,</span><span class="bp">True</span><span class="p">])</span>

    <span class="c"># vendor min/max X/Y determined here</span>
    <span class="n">Xset</span><span class="p">,</span><span class="n">Yset</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">vend_X</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)),</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">vend_Y</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">))</span>
    <span class="n">Xmin</span><span class="p">,</span><span class="n">Xmax</span><span class="o">=</span><span class="n">Xset</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span><span class="n">Xset</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
    <span class="n">Ymin</span><span class="p">,</span><span class="n">Ymax</span><span class="o">=</span><span class="n">Yset</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span><span class="n">Yset</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>


    <span class="k">global</span> <span class="n">order_q</span><span class="p">,</span><span class="n">dg_q</span><span class="p">,</span><span class="n">dg_pool</span><span class="p">,</span><span class="n">delivered</span>
    <span class="n">dg_head</span> <span class="o">=</span> <span class="n">DG</span><span class="p">()</span><span class="o">.</span><span class="n">printHeader</span><span class="p">(</span><span class="n">printer</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">fullHeading</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\t</span><span class="s">&#39;</span><span class="p">)</span>
    <span class="n">dg_pool</span> <span class="o">=</span> <span class="n">init_dg_pool</span><span class="p">(</span><span class="n">pt</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">old_dg_pool</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">load</span><span class="o">=</span><span class="n">load</span><span class="p">,</span><span class="n">save</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">filePath</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">)</span>
    <span class="n">order_q</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">dg_head</span><span class="p">)</span>
    <span class="n">delivered</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">dg_head</span><span class="p">)</span>
    <span class="n">dg_pool</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">dg_pool</span><span class="p">,</span><span class="n">delivered</span><span class="p">,</span><span class="n">how</span><span class="o">=</span><span class="s">&#39;left&#39;</span><span class="p">)</span>


    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    trav_cols = [ABC[i].lower() for i in range(0,max_delivery_per_dg*2)]</span>
<span class="sd">    desc_cols = [&#39;-i&#39;,&#39;-ID&#39;,&#39;-OT&#39;,&#39;-St&#39;,&#39;-En&#39;]</span>
<span class="sd">    dg_queue_cols = range(0,1+(max_delivery_per_dg*2))+[&#39;mockCombo&#39;,&#39;travel_time&#39;]+trav_cols+[&#39;combined&#39;]</span>
<span class="sd">    dg_queue_cols += [ ABC[pt]+label for pt in range(0,max_delivery_per_dg) for label in desc_cols ]</span>
<span class="sd">    dg_queue_cols += [&#39;deliv_ids&#39;,&#39;travel_times&#39;,&#39;del_times&#39;,&#39;maxDel_time&#39;,&#39;ave_X&#39;,&#39;ave_Y&#39;,&#39;tripMean&#39;,&#39;tripStd&#39;]</span>
<span class="sd">    dg_q = pd.DataFrame(columns=dg_queue_cols)</span>

<span class="sd">    total_time=Assumption(&#39;vend_hours_delivering&#39;)*60</span>
<span class="sd">    for i in range(0,total_time):</span>
<span class="sd">        now=i</span>
<span class="sd">        # remove completed orders on this minute, if any</span>
<span class="sd">        completedOrders=order_q[(order_q.end_time &lt;= now)]</span>
<span class="sd">        delivered=pd.concat([delivered,completedOrders]) # includes completed trips to vendor</span>
<span class="sd">        order_q=order_q[order_q.end_time &gt; now].reset_index(drop=True)</span>
<span class="sd">        # identify and re-pool DG that have completed orders</span>
<span class="sd">        delivered[&#39;ready&#39;]=delivered[&#39;id&#39;].apply(lambda s: (order_q.id.tolist().count(s) == 0 and dg_pool.dg_id.tolist().count(s) == 0))</span>
<span class="sd">        if len(delivered[delivered.ready == True].index) != 0:</span>
<span class="sd">            re_pool = delivered[delivered.ready == True]</span>
<span class="sd">            re_pool.status = &#39;ready&#39;</span>
<span class="sd">            re_pool[&#39;dg_X&#39;],re_pool[&#39;dg_Y&#39;] = re_pool[&#39;end_X&#39;],re_pool[&#39;end_Y&#39;]</span>
<span class="sd">            re_pool = re_pool.drop(&#39;ready&#39;,axis=1).reset_index(drop=True)</span>
<span class="sd">            dg_pool = pd.concat([re_pool,dg_pool]).reset_index(drop=True).groupby(&#39;id&#39;).first().reset_index()</span>
<span class="sd">        delivered = delivered.drop(&#39;ready&#39;,axis=1).reset_index(drop=True)</span>
<span class="sd">        # process all current orders</span>
<span class="sd">        ordersNow=df[(df.order_time == now)]</span>
<span class="sd">        t1=time()</span>
<span class="sd">        for j in range(0,len(ordersNow.index)):</span>
<span class="sd">            thisOrder=ordersNow.iloc[j,:]#.copy()</span>
<span class="sd">            order_q,dg_q,dg_pool = getBestDG(order_q,dg_q,dg_pool,thisOrder,ordersNow.index[j],showVars=False,saveOutput=False)</span>
<span class="sd">        if len(ordersNow.index) != 0: print &#39;minute&#39;+&#39;\t&#39;+str(i)+&#39;\t&#39;+&#39;orders=&#39;+&#39;\t&#39;+str(len(ordersNow.index))+&#39;\t&#39;+str((time()-t1)/len(ordersNow.index))+&#39;\t&#39;+str(time())</span>

<span class="sd">    # move remaining orders at close to &#39;delivered&#39;</span>
<span class="sd">    completedOrders=order_q[(order_q.end_time &gt;= now)]</span>
<span class="sd">    pieces = [delivered,completedOrders]</span>
<span class="sd">    delivered=pd.concat(pieces)</span>

<span class="sd">    print &#39;done&#39;</span>
<span class="sd">    print time()-t1A</span>
<span class="sd">    # cmd=&#39;say -v Bells &quot;dong&quot;&#39;</span>
<span class="sd">    # system(cmd)</span>
<span class="sd">    &quot;&quot;&quot;</span>

<span class="c"># if __name__ == &#39;__main__&#39;:</span>
<span class="c">#     if normal_sim == True: RUN_NORMAL_DELIVERY_SIMULATION()</span>
<span class="c">#     if chaos_sim == True: RUN_CHAOS_SIMULATION(assumptions=None,</span>
<span class="c">#                                                makeData=makeData,</span>
<span class="c">#                                                showSimData=showSimData,</span>
<span class="c">#                                                runNormalDel=runNormalDel,</span>
<span class="c">#                                                load=load,</span>
<span class="c">#                                                save=save,</span>
<span class="c">#                                                resume=resume,</span>
<span class="c">#                                                errorCheck=errorCheck,</span>
<span class="c">#                                                global_op_vars=global_op_vars)</span>
<span class="c">#     if show_data_results == True:</span>
<span class="c">#         # if normal_sim == True: DISPLAY_NORMAL_DELIVERY_DATA()</span>
<span class="c">#         # if chaos_sim == True: DISPLAY_EDA_DATA()</span>
<span class="c">#         DISPLAY_EDA_DATA()</span>
<span class="c">#         # DISPLAY_NORMAL_DELIVERY_DATA()</span>
<span class="c">#         # DISPLAY_SIMULATION_DATA()</span>

<span class="c">#     if showRealData==True: DISPLAY_REAL_DATA()</span>

<span class="c">#     if show_normal_results==True: DISPLAY_NORMAL_DELIVERY_DATA()</span>

<span class="c">#     if lattice_sim == True: RUN_LATTICE_SIMULATION()</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[40]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">RUN_CHAOS_SIMULATION</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_text output_pyerr">
<pre>
<span class="ansired">---------------------------------------------------------------------------</span>
<span class="ansired">NameError</span>                                 Traceback (most recent call last)
<span class="ansigreen">&lt;ipython-input-40-700bb39ff5e8&gt;</span> in <span class="ansicyan">&lt;module&gt;</span><span class="ansiblue">()</span>
<span class="ansigreen">----&gt; 1</span><span class="ansired"> </span>RUN_CHAOS_SIMULATION<span class="ansiblue">(</span><span class="ansiblue">)</span><span class="ansiblue"></span>

<span class="ansigreen">&lt;ipython-input-39-169ef3758665&gt;</span> in <span class="ansicyan">RUN_CHAOS_SIMULATION</span><span class="ansiblue">(assumptions, makeData, showSimData, runNormalDel, load, save, resume, errorCheck, global_op_vars)</span>
<span class="ansigreen">     18</span>         <span class="ansigreen">global</span> sim_data<span class="ansiblue">,</span>order_q<span class="ansiblue">,</span>order_delivered<span class="ansiblue">,</span>dg_pool<span class="ansiblue">,</span>dg_pool_pt<span class="ansiblue">,</span>dg_q<span class="ansiblue">,</span>dg_delivered<span class="ansiblue"></span>
<span class="ansigreen">     19</span>     <span class="ansigreen">else</span><span class="ansiblue">:</span> <span class="ansigreen">global</span> sim_data<span class="ansiblue"></span>
<span class="ansigreen">---&gt; 20</span><span class="ansired">     </span>global_simulation_vars<span class="ansiblue">(</span>assumptions<span class="ansiblue">)</span><span class="ansiblue"></span>
<span class="ansigreen">     21</span> <span class="ansiblue"></span>
<span class="ansigreen">     22</span>     sim_data_Path<span class="ansiblue">=</span>this_cwd<span class="ansiblue">+</span><span class="ansiblue">&apos;/sim_data/vendor_sim_data.txt&apos;</span><span class="ansiblue"></span>

<span class="ansigreen">/Users/admin/SERVER2/BD_Scripts/RD/src/cy_var_gen.py</span> in <span class="ansicyan">global_simulation_vars</span><span class="ansiblue">(assumptions)</span>
<span class="ansigreen">      6</span>     max_delivery_per_dg <span class="ansiblue">=</span> A<span class="ansiblue">.</span>max_delivery_per_dg<span class="ansiblue"></span>
<span class="ansigreen">      7</span>     <span class="ansired">## create dict for total number of possible mock points, e.g., A1:A2,B1:B2,etc...</span><span class="ansiblue"></span><span class="ansiblue"></span>
<span class="ansigreen">----&gt; 8</span><span class="ansired">     </span>mock_to_num_dict<span class="ansiblue">=</span>dict<span class="ansiblue">(</span>zip<span class="ansiblue">(</span><span class="ansiblue">[</span>it<span class="ansiblue">+</span><span class="ansiblue">&apos;1&apos;</span> <span class="ansigreen">for</span> it <span class="ansigreen">in</span> ABC<span class="ansiblue">[</span><span class="ansiblue">:</span>max_delivery_per_dg<span class="ansiblue">]</span><span class="ansiblue">]</span><span class="ansiblue">,</span>np<span class="ansiblue">.</span>arange<span class="ansiblue">(</span><span class="ansicyan">0</span><span class="ansiblue">,</span><span class="ansiblue">(</span>len<span class="ansiblue">(</span>ABC<span class="ansiblue">)</span><span class="ansiblue">+</span><span class="ansicyan">1</span><span class="ansiblue">)</span><span class="ansiblue">,</span><span class="ansicyan">1</span><span class="ansiblue">)</span><span class="ansiblue">.</span>astype<span class="ansiblue">(</span>np<span class="ansiblue">.</span>long<span class="ansiblue">)</span><span class="ansiblue">)</span><span class="ansiblue">)</span><span class="ansiblue"></span>
<span class="ansigreen">      9</span>     mock_to_num_dict<span class="ansiblue">.</span>update<span class="ansiblue">(</span>dict<span class="ansiblue">(</span>zip<span class="ansiblue">(</span><span class="ansiblue">[</span>it<span class="ansiblue">+</span><span class="ansiblue">&apos;2&apos;</span> <span class="ansigreen">for</span> it <span class="ansigreen">in</span> ABC<span class="ansiblue">[</span><span class="ansiblue">:</span>max_delivery_per_dg<span class="ansiblue">]</span><span class="ansiblue">]</span><span class="ansiblue">,</span>np<span class="ansiblue">.</span>arange<span class="ansiblue">(</span><span class="ansicyan">100</span><span class="ansiblue">,</span><span class="ansicyan">100</span><span class="ansiblue">*</span><span class="ansiblue">(</span>len<span class="ansiblue">(</span>ABC<span class="ansiblue">)</span><span class="ansiblue">+</span><span class="ansicyan">1</span><span class="ansiblue">)</span><span class="ansiblue">,</span><span class="ansicyan">1</span><span class="ansiblue">)</span><span class="ansiblue">.</span>astype<span class="ansiblue">(</span>np<span class="ansiblue">.</span>long<span class="ansiblue">)</span><span class="ansiblue">)</span><span class="ansiblue">)</span><span class="ansiblue">)</span><span class="ansiblue"></span>
<span class="ansigreen">     10</span>     num_to_mock_dict <span class="ansiblue">=</span> <span class="ansiblue">{</span>v<span class="ansiblue">:</span>k <span class="ansigreen">for</span> k<span class="ansiblue">,</span>v <span class="ansigreen">in</span> mock_to_num_dict<span class="ansiblue">.</span>iteritems<span class="ansiblue">(</span><span class="ansiblue">)</span><span class="ansiblue">}</span><span class="ansiblue"></span>

<span class="ansired">NameError</span>: global name &apos;np&apos; is not defined</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># %load_ext autoreload</span>
<span class="c"># %autoreload 2</span>
<span class="c"># %pdb</span>
<span class="c"># !ipython nbconvert --to markdown notebook.ipynb --stdout</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[17]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="o">%%</span><span class="nx">javascript</span>
<span class="kd">var</span> <span class="nx">kernel</span> <span class="o">=</span> <span class="nx">IPython</span><span class="p">.</span><span class="nx">notebook</span><span class="p">.</span><span class="nx">kernel</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">thename</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;notebook_name&quot;</span><span class="p">).</span><span class="nx">innerHTML</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">command</span> <span class="o">=</span> <span class="s2">&quot;theNotebook = &quot;</span> <span class="o">+</span> <span class="s2">&quot;&#39;&quot;</span><span class="o">+</span><span class="nx">thename</span><span class="o">+</span><span class="s2">&quot;.ipynb&#39;&quot;</span><span class="p">;</span>
<span class="nx">kernel</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="nx">command</span><span class="p">);</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>


<div class="output_subarea output_javascript ">
<script type="text/javascript">
var kernel = IPython.notebook.kernel;
var thename = window.document.getElementById("notebook_name").innerHTML;
var command = "theNotebook = " + "'"+thename+".ipynb'";
kernel.execute(command);
</script>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[18]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">nb_name</span> <span class="o">=</span> <span class="err">!</span><span class="n">echo</span> <span class="s">&#39;$theNotebook&#39;</span>
<span class="n">this_notebook_text</span> <span class="o">=</span> <span class="err">!</span><span class="n">ipython</span> <span class="n">nbconvert</span> <span class="o">--</span><span class="n">to</span> <span class="n">python</span> <span class="s">&#39;$theNotebook&#39;</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[19]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="o">%</span><span class="k">less</span> <span class="p">{</span><span class="n">nb_name</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;ipynb&#39;</span><span class="p">,</span><span class="s">&#39;py&#39;</span><span class="p">)}</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[3]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="n">np</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">np</span>
<span class="kn">from</span> <span class="nn">os</span> <span class="kn">import</span> <span class="n">getcwd</span>
<span class="n">this_cwd</span> <span class="o">=</span> <span class="n">getcwd</span><span class="p">()</span><span class="o">+</span><span class="s">&#39;/&#39;</span>
<span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">factorial</span> <span class="k">as</span> <span class="n">F</span>
<span class="kn">import</span> <span class="nn">geopandas</span> <span class="kn">as</span> <span class="nn">gd</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span>
<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s">r&#39;postgresql://postgres:postgres@192.168.2.50:8800/routing&#39;</span><span class="p">,</span>
                       <span class="n">encoding</span><span class="o">=</span><span class="s">&#39;utf-8&#39;</span><span class="p">,</span>
                       <span class="n">echo</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="c"># %load_ext autoreload</span>
<span class="c"># %autoreload 2</span>
<span class="c"># %load_ext cythonmagic</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[1]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="kn">from</span> <span class="nn">pg_fxs</span> <span class="kn">import</span> <span class="n">pg_get_travel_dist</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[22]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">d</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1636</span><span class="p">,</span><span class="mi">893</span><span class="p">,</span><span class="mi">430</span><span class="p">,</span><span class="mi">3741</span><span class="p">,</span><span class="mi">1861</span><span class="p">,</span><span class="mi">1794</span><span class="p">,</span><span class="mi">165</span><span class="p">,</span><span class="mi">1759</span><span class="p">,</span><span class="mi">3252</span><span class="p">]</span>
<span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="o">=</span><span class="p">[],[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">d</span><span class="p">)):</span>
    <span class="n">a</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
    <span class="n">b</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
<span class="n">c</span><span class="o">=</span><span class="n">pg_get_travel_dist</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)</span>
<span class="n">s</span><span class="o">=</span><span class="s">&#39;&#39;</span>
<span class="n">cume</span><span class="o">=</span><span class="mi">0</span>
<span class="k">print</span> <span class="s">&#39;ptA</span><span class="se">\t</span><span class="s">ptB</span><span class="se">\t</span><span class="s">Time</span><span class="se">\t</span><span class="s">Cumulative&#39;</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">c</span><span class="p">)):</span>
    <span class="n">cume</span><span class="o">+=</span><span class="nb">round</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">*</span><span class="p">(</span><span class="mi">60</span><span class="o">/</span><span class="mf">12.5</span><span class="p">),</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">print</span> <span class="nb">str</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="o">+</span><span class="s">&#39;</span><span class="se">\t</span><span class="s">&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="o">+</span><span class="s">&#39;</span><span class="se">\t</span><span class="s">&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">*</span><span class="p">(</span><span class="mi">60</span><span class="o">/</span><span class="mf">12.5</span><span class="p">),</span><span class="mi">1</span><span class="p">))</span><span class="o">+</span><span class="s">&#39;</span><span class="se">\t</span><span class="s">&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">cume</span><span class="p">)</span>
<span class="k">print</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">TOTAL</span><span class="se">\t\t</span><span class="s">&#39;</span><span class="p">,</span><span class="nb">round</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">c</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="mi">60</span><span class="o">/</span><span class="mf">12.5</span><span class="p">),</span><span class="mi">1</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>ptA	ptB	Time	Cumulative
1636	893	1.2	1.2
893	430	1.9	3.1
430	3741	2.6	5.7
3741	1861	2.3	8.0
1861	1794	1.2	9.2
1794	165	6.6	15.8
165	1759	2.8	18.6
1759	3252	14.1	32.7

TOTAL		32.6
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[24]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="o">%</span><span class="k">load_ext</span> <span class="n">line_profiler_ext</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_text output_pyerr">
<pre>
<span class="ansired">---------------------------------------------------------------------------</span>
<span class="ansired">ImportError</span>                               Traceback (most recent call last)
<span class="ansigreen">&lt;ipython-input-24-221e740dde48&gt;</span> in <span class="ansicyan">&lt;module&gt;</span><span class="ansiblue">()</span>
<span class="ansigreen">----&gt; 1</span><span class="ansired"> </span>get_ipython<span class="ansiblue">(</span><span class="ansiblue">)</span><span class="ansiblue">.</span>magic<span class="ansiblue">(</span><span class="ansiblue">u&apos;load_ext line_profiler_ext&apos;</span><span class="ansiblue">)</span><span class="ansiblue"></span>

<span class="ansigreen">/Users/admin/SERVER2/BD_Scripts/ipython/ipython/IPython/core/interactiveshell.pyc</span> in <span class="ansicyan">magic</span><span class="ansiblue">(self, arg_s)</span>
<span class="ansigreen">   2275</span>         magic_name<span class="ansiblue">,</span> _<span class="ansiblue">,</span> magic_arg_s <span class="ansiblue">=</span> arg_s<span class="ansiblue">.</span>partition<span class="ansiblue">(</span><span class="ansiblue">&apos; &apos;</span><span class="ansiblue">)</span><span class="ansiblue"></span>
<span class="ansigreen">   2276</span>         magic_name <span class="ansiblue">=</span> magic_name<span class="ansiblue">.</span>lstrip<span class="ansiblue">(</span>prefilter<span class="ansiblue">.</span>ESC_MAGIC<span class="ansiblue">)</span><span class="ansiblue"></span>
<span class="ansigreen">-&gt; 2277</span><span class="ansired">         </span><span class="ansigreen">return</span> self<span class="ansiblue">.</span>run_line_magic<span class="ansiblue">(</span>magic_name<span class="ansiblue">,</span> magic_arg_s<span class="ansiblue">)</span><span class="ansiblue"></span>
<span class="ansigreen">   2278</span> <span class="ansiblue"></span>
<span class="ansigreen">   2279</span>     <span class="ansired">#-------------------------------------------------------------------------</span><span class="ansiblue"></span><span class="ansiblue"></span>

<span class="ansigreen">/Users/admin/SERVER2/BD_Scripts/ipython/ipython/IPython/core/interactiveshell.pyc</span> in <span class="ansicyan">run_line_magic</span><span class="ansiblue">(self, magic_name, line)</span>
<span class="ansigreen">   2196</span>                 kwargs<span class="ansiblue">[</span><span class="ansiblue">&apos;local_ns&apos;</span><span class="ansiblue">]</span> <span class="ansiblue">=</span> sys<span class="ansiblue">.</span>_getframe<span class="ansiblue">(</span>stack_depth<span class="ansiblue">)</span><span class="ansiblue">.</span>f_locals<span class="ansiblue"></span>
<span class="ansigreen">   2197</span>             <span class="ansigreen">with</span> self<span class="ansiblue">.</span>builtin_trap<span class="ansiblue">:</span><span class="ansiblue"></span>
<span class="ansigreen">-&gt; 2198</span><span class="ansired">                 </span>result <span class="ansiblue">=</span> fn<span class="ansiblue">(</span><span class="ansiblue">*</span>args<span class="ansiblue">,</span><span class="ansiblue">**</span>kwargs<span class="ansiblue">)</span><span class="ansiblue"></span>
<span class="ansigreen">   2199</span>             <span class="ansigreen">return</span> result<span class="ansiblue"></span>
<span class="ansigreen">   2200</span> <span class="ansiblue"></span>

<span class="ansigreen">/Users/admin/SERVER2/BD_Scripts/ipython/ipython/IPython/core/magics/extension.pyc</span> in <span class="ansicyan">load_ext</span><span class="ansiblue">(self, module_str)</span>

<span class="ansigreen">/Users/admin/SERVER2/BD_Scripts/ipython/ipython/IPython/core/magic.pyc</span> in <span class="ansicyan">&lt;lambda&gt;</span><span class="ansiblue">(f, *a, **k)</span>
<span class="ansigreen">    191</span>     <span class="ansired"># but it&apos;s overkill for just that one bit of state.</span><span class="ansiblue"></span><span class="ansiblue"></span>
<span class="ansigreen">    192</span>     <span class="ansigreen">def</span> magic_deco<span class="ansiblue">(</span>arg<span class="ansiblue">)</span><span class="ansiblue">:</span><span class="ansiblue"></span>
<span class="ansigreen">--&gt; 193</span><span class="ansired">         </span>call <span class="ansiblue">=</span> <span class="ansigreen">lambda</span> f<span class="ansiblue">,</span> <span class="ansiblue">*</span>a<span class="ansiblue">,</span> <span class="ansiblue">**</span>k<span class="ansiblue">:</span> f<span class="ansiblue">(</span><span class="ansiblue">*</span>a<span class="ansiblue">,</span> <span class="ansiblue">**</span>k<span class="ansiblue">)</span><span class="ansiblue"></span>
<span class="ansigreen">    194</span> <span class="ansiblue"></span>
<span class="ansigreen">    195</span>         <span class="ansigreen">if</span> callable<span class="ansiblue">(</span>arg<span class="ansiblue">)</span><span class="ansiblue">:</span><span class="ansiblue"></span>

<span class="ansigreen">/Users/admin/SERVER2/BD_Scripts/ipython/ipython/IPython/core/magics/extension.pyc</span> in <span class="ansicyan">load_ext</span><span class="ansiblue">(self, module_str)</span>
<span class="ansigreen">     61</span>         <span class="ansigreen">if</span> <span class="ansigreen">not</span> module_str<span class="ansiblue">:</span><span class="ansiblue"></span>
<span class="ansigreen">     62</span>             <span class="ansigreen">raise</span> UsageError<span class="ansiblue">(</span><span class="ansiblue">&apos;Missing module name.&apos;</span><span class="ansiblue">)</span><span class="ansiblue"></span>
<span class="ansigreen">---&gt; 63</span><span class="ansired">         </span>res <span class="ansiblue">=</span> self<span class="ansiblue">.</span>shell<span class="ansiblue">.</span>extension_manager<span class="ansiblue">.</span>load_extension<span class="ansiblue">(</span>module_str<span class="ansiblue">)</span><span class="ansiblue"></span>
<span class="ansigreen">     64</span> <span class="ansiblue"></span>
<span class="ansigreen">     65</span>         <span class="ansigreen">if</span> res <span class="ansiblue">==</span> <span class="ansiblue">&apos;already loaded&apos;</span><span class="ansiblue">:</span><span class="ansiblue"></span>

<span class="ansigreen">/Users/admin/SERVER2/BD_Scripts/ipython/ipython/IPython/core/extensions.pyc</span> in <span class="ansicyan">load_extension</span><span class="ansiblue">(self, module_str)</span>
<span class="ansigreen">     83</span>             <span class="ansigreen">if</span> module_str <span class="ansigreen">not</span> <span class="ansigreen">in</span> sys<span class="ansiblue">.</span>modules<span class="ansiblue">:</span><span class="ansiblue"></span>
<span class="ansigreen">     84</span>                 <span class="ansigreen">with</span> prepended_to_syspath<span class="ansiblue">(</span>self<span class="ansiblue">.</span>ipython_extension_dir<span class="ansiblue">)</span><span class="ansiblue">:</span><span class="ansiblue"></span>
<span class="ansigreen">---&gt; 85</span><span class="ansired">                     </span>__import__<span class="ansiblue">(</span>module_str<span class="ansiblue">)</span><span class="ansiblue"></span>
<span class="ansigreen">     86</span>             mod <span class="ansiblue">=</span> sys<span class="ansiblue">.</span>modules<span class="ansiblue">[</span>module_str<span class="ansiblue">]</span><span class="ansiblue"></span>
<span class="ansigreen">     87</span>             <span class="ansigreen">if</span> self<span class="ansiblue">.</span>_call_load_ipython_extension<span class="ansiblue">(</span>mod<span class="ansiblue">)</span><span class="ansiblue">:</span><span class="ansiblue"></span>

<span class="ansired">ImportError</span>: No module named line_profiler_ext</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[4]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">z</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span>  <span class="mf">0.00000000e+000</span><span class="p">,</span>   <span class="mf">2.80000000e+001</span><span class="p">,</span>   <span class="mf">4.64000000e+001</span><span class="p">,</span>   <span class="mf">2.38000000e+001</span><span class="p">,</span>   <span class="mf">2.12199579e-314</span><span class="p">,</span>   <span class="mf">2.12199579e-314</span><span class="p">,</span>   <span class="mf">2.12199579e-314</span><span class="p">,</span>   <span class="mf">2.12199579e-314</span><span class="p">,</span>   <span class="mf">4.94065646e-324</span><span class="p">,</span>   <span class="mf">2.12199579e-314</span><span class="p">],</span>
       <span class="p">[</span>  <span class="mf">0.00000000e+000</span><span class="p">,</span>   <span class="mf">1.85000000e+001</span><span class="p">,</span>   <span class="mf">4.64000000e+001</span><span class="p">,</span>   <span class="mf">5.41000000e+001</span><span class="p">,</span>   <span class="mf">2.12199579e-314</span><span class="p">,</span>   <span class="mf">2.12199579e-314</span><span class="p">,</span>   <span class="mf">2.12199579e-314</span><span class="p">,</span>   <span class="mf">4.24399158e-314</span><span class="p">,</span>   <span class="mf">4.24399158e-314</span><span class="p">,</span>   <span class="mf">4.24399158e-314</span><span class="p">],</span>
       <span class="p">[</span>  <span class="mf">0.00000000e+000</span><span class="p">,</span>   <span class="mf">1.85000000e+001</span><span class="p">,</span>   <span class="mf">2.80000000e+001</span><span class="p">,</span>   <span class="mf">5.41000000e+001</span><span class="p">,</span>   <span class="mf">4.24399158e-314</span><span class="p">,</span>   <span class="mf">9.88131292e-324</span><span class="p">,</span>   <span class="mf">2.12199579e-314</span><span class="p">,</span>   <span class="mf">2.12199579e-314</span><span class="p">,</span>   <span class="mf">2.12199579e-314</span><span class="p">,</span>   <span class="mf">4.94065646e-324</span><span class="p">],</span>
       <span class="p">[</span>  <span class="mf">0.00000000e+000</span><span class="p">,</span>   <span class="mf">1.85000000e+001</span><span class="p">,</span>   <span class="mf">2.38000000e+001</span><span class="p">,</span>   <span class="mf">5.41000000e+001</span><span class="p">,</span>   <span class="mf">4.24399158e-314</span><span class="p">,</span>   <span class="mf">4.24399158e-314</span><span class="p">,</span>   <span class="mf">4.24399158e-314</span><span class="p">,</span>   <span class="mf">4.24399158e-314</span><span class="p">,</span>   <span class="mf">4.24399158e-314</span><span class="p">,</span>   <span class="mf">4.24399158e-314</span><span class="p">],</span>
       <span class="p">[</span>  <span class="mf">0.00000000e+000</span><span class="p">,</span>   <span class="mf">1.85000000e+001</span><span class="p">,</span>   <span class="mf">3.30000000e+001</span><span class="p">,</span>   <span class="mf">5.41000000e+001</span><span class="p">,</span>   <span class="mf">4.24399158e-314</span><span class="p">,</span>   <span class="mf">4.24399158e-314</span><span class="p">,</span>   <span class="mf">9.88131292e-324</span><span class="p">,</span>   <span class="mf">4.24399158e-314</span><span class="p">,</span>   <span class="mf">4.24399158e-314</span><span class="p">,</span>   <span class="mf">4.24399158e-314</span><span class="p">],</span>
       <span class="p">[</span>  <span class="mf">0.00000000e+000</span><span class="p">,</span>   <span class="mf">2.38000000e+001</span><span class="p">,</span>   <span class="mf">3.30000000e+001</span><span class="p">,</span>   <span class="mf">2.80000000e+001</span><span class="p">,</span>   <span class="mf">2.12199579e-314</span><span class="p">,</span>   <span class="mf">2.12199579e-314</span><span class="p">,</span>   <span class="mf">2.12199579e-314</span><span class="p">,</span>   <span class="mf">2.12199579e-314</span><span class="p">,</span>   <span class="mf">2.12199579e-314</span><span class="p">,</span>   <span class="mf">4.94065646e-324</span><span class="p">]])</span>

<span class="n">z</span><span class="o">.</span><span class="n">T</span><span class="p">[:</span><span class="mi">4</span><span class="p">]</span><span class="o">.</span><span class="n">T</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">
    Out[4]:</div>


<div class="output_text output_subarea output_pyout">
<pre>array([[  0. ,  28. ,  46.4,  23.8],
       [  0. ,  18.5,  46.4,  54.1],
       [  0. ,  18.5,  28. ,  54.1],
       [  0. ,  18.5,  23.8,  54.1],
       [  0. ,  18.5,  33. ,  54.1],
       [  0. ,  23.8,  33. ,  28. ]])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">node_array1</span><span class="o">=</span><span class="mi">50</span>
<span class="n">node_array2</span><span class="o">=</span><span class="p">[</span><span class="mi">435</span><span class="p">,</span><span class="mi">45</span><span class="p">,</span><span class="mi">65</span><span class="p">]</span>
<span class="n">a</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">                select z_get_miles_between_nodes(&#39;</span><span class="si">%s</span><span class="s">&#39;,</span>
<span class="s">                </span><span class="si">%s</span><span class="s">,</span>
<span class="s">                array[</span><span class="si">%s</span><span class="s">]) arr&quot;&quot;&quot;</span><span class="o">%</span><span class="p">(</span><span class="s">&#39;lion_ways_slim&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">node_array1</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s">&#39;[]&#39;</span><span class="p">),</span><span class="nb">str</span><span class="p">(</span><span class="n">node_array2</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s">&#39;[]&#39;</span><span class="p">)),</span><span class="n">engine</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">a</span><span class="o">.</span><span class="n">arr</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">a</span><span class="o">.</span><span class="n">arr</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s">&#39;()&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;,&#39;</span><span class="p">)[</span><span class="mi">3</span><span class="p">])</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre> 
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># f(x) COLLECTION</span>

<span class="c"># Parallel Processing f(x)s</span>
<span class="kn">from</span> <span class="nn">parallel_fxs</span> <span class="kn">import</span> <span class="n">run_parallel</span>
<span class="c"># Normal Delivery Simulation</span>
<span class="kn">from</span> <span class="nn">normal_deliv</span> <span class="kn">import</span> <span class="n">NormalDelivery</span><span class="p">,</span><span class="n">bestDeliveryRoute</span>
<span class="c"># Utility &amp; Permutation f(x)s</span>
<span class="kn">from</span> <span class="nn">utility_and_permutation_fxs</span> <span class="kn">import</span> <span class="n">listFout</span><span class="p">,</span><span class="n">systemError</span><span class="p">,</span><span class="n">genSeg</span><span class="p">,</span><span class="n">genAllPairPerm_NoRep</span>
<span class="kn">from</span> <span class="nn">utility_and_permutation_fxs</span> <span class="kn">import</span> <span class="n">getFilesFolders</span><span class="p">,</span><span class="n">genOrderedPairPerm</span><span class="p">,</span><span class="n">fileDataGenerator</span>
<span class="kn">from</span> <span class="nn">utility_and_permutation_fxs</span> <span class="kn">import</span> <span class="n">all_perms</span><span class="p">,</span><span class="n">all_pair_perms</span><span class="p">,</span><span class="n">good_perms</span><span class="p">,</span><span class="n">good_combos</span>
<span class="kn">from</span> <span class="nn">utility_and_permutation_fxs</span> <span class="kn">import</span> <span class="n">gen_good_perms</span><span class="p">,</span><span class="n">gen_good_combos</span><span class="p">,</span><span class="n">listFin</span>
<span class="c"># f(x)s for f(x)s</span>
<span class="kn">from</span> <span class="nn">fxs_for_fxs</span> <span class="kn">import</span> <span class="n">get_travel_time</span><span class="p">,</span><span class="n">pd_get_travel_time</span><span class="p">,</span><span class="n">pd_combine</span><span class="p">,</span><span class="n">pd_min_of_list</span>
<span class="kn">from</span> <span class="nn">fxs_for_fxs</span> <span class="kn">import</span> <span class="n">pd_index_of_list</span><span class="p">,</span><span class="n">pd_index_in_list</span><span class="p">,</span><span class="n">pd_append_list</span><span class="p">,</span><span class="n">pd_list_to_combo_index</span>
<span class="kn">from</span> <span class="nn">fxs_for_fxs</span> <span class="kn">import</span> <span class="n">pd_set_to_orderedSet_index</span><span class="p">,</span><span class="n">create_combo_sortKey</span><span class="p">,</span><span class="n">pd_create_sortKey</span>
<span class="kn">from</span> <span class="nn">fxs_for_fxs</span> <span class="kn">import</span> <span class="n">apply_sortKey</span><span class="p">,</span><span class="n">pd_split_tuple</span><span class="p">,</span><span class="n">pd_get_combo_index</span><span class="p">,</span><span class="n">pd_get_trip_times</span>
<span class="kn">from</span> <span class="nn">fxs_for_fxs</span> <span class="kn">import</span> <span class="n">pd_get_diff_StEn</span><span class="p">,</span><span class="n">pd_proximity</span><span class="p">,</span><span class="n">pd_mock_to_num_dict</span><span class="p">,</span><span class="n">get_multi_travel_times</span>
<span class="c"># PG f(x)s</span>
<span class="kn">from</span> <span class="nn">pg_fxs</span> <span class="kn">import</span> <span class="n">pg_get_random_pt_in_circle_around_node</span><span class="p">,</span><span class="n">pg_get_random_node_in_box</span><span class="p">,</span><span class="n">pg_get_nodes_in_geom</span>
<span class="kn">from</span> <span class="nn">pg_fxs</span> <span class="kn">import</span> <span class="n">pg_update_table_with_random_pt_in_circle_around_node</span><span class="p">,</span><span class="n">pg_get_cir_ctr_and_rad_bounding_way_box</span>
<span class="kn">from</span> <span class="nn">pg_fxs</span> <span class="kn">import</span> <span class="n">pg_get_travel_time</span><span class="p">,</span><span class="n">pg_get_travel_cost</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># Simulation Assumptions</span>

<span class="kn">import</span> <span class="nn">assumptions</span> <span class="kn">as</span> <span class="nn">A</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># Simulation Vars</span>
<span class="n">use_cython</span><span class="o">=</span><span class="bp">True</span>
<span class="c"># cython=False</span>
<span class="c"># resume=True</span>
<span class="n">resume</span><span class="o">=</span><span class="bp">False</span>
<span class="c"># save=True</span>
<span class="n">save</span><span class="o">=</span><span class="bp">False</span>

<span class="n">makeData</span><span class="o">=</span><span class="bp">False</span>
<span class="n">runNormalDel</span><span class="o">=</span><span class="bp">False</span>
<span class="n">alert_bell</span><span class="o">=</span><span class="bp">False</span>

<span class="n">showRealData</span><span class="o">=</span><span class="bp">False</span>
<span class="n">showSimData</span><span class="o">=</span><span class="bp">False</span>
<span class="c"># normal_sim = True</span>
<span class="n">normal_sim</span> <span class="o">=</span> <span class="bp">False</span>
<span class="n">show_normal_results</span> <span class="o">=</span> <span class="bp">False</span>
<span class="n">chaos_sim</span> <span class="o">=</span> <span class="bp">True</span>
<span class="c"># chaos_sim = False</span>
<span class="c"># show_data_results = True</span>
<span class="n">show_data_results</span> <span class="o">=</span> <span class="bp">False</span>
<span class="n">lattice_sim</span> <span class="o">=</span> <span class="bp">False</span>

<span class="c"># load=True</span>
<span class="n">load</span><span class="o">=</span><span class="bp">False</span>
<span class="n">errorCheck</span><span class="o">=</span><span class="bp">False</span>
<span class="n">global_op_vars</span><span class="o">=</span><span class="bp">False</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># ALL Process Libraries</span>
<span class="kn">from</span> <span class="nn">rd_lib</span> <span class="kn">import</span> <span class="n">sys</span><span class="p">,</span><span class="n">randint</span><span class="p">,</span><span class="n">random</span><span class="p">,</span><span class="n">time</span><span class="p">,</span><span class="n">NoneType</span><span class="p">,</span><span class="n">path</span><span class="p">,</span><span class="n">listdir</span><span class="p">,</span><span class="n">system</span><span class="p">,</span><span class="n">this_cwd</span><span class="p">,</span><span class="n">py_path</span>
<span class="kn">from</span> <span class="nn">rd_lib</span> <span class="kn">import</span> <span class="n">sqrt</span><span class="p">,</span><span class="n">pd</span><span class="p">,</span><span class="n">np</span><span class="p">,</span><span class="n">gd</span><span class="p">,</span><span class="n">engine</span>

<span class="k">if</span> <span class="n">use_cython</span><span class="o">==</span><span class="bp">False</span><span class="p">:</span>   <span class="kn">from</span> <span class="nn">order_by_min2</span> <span class="kn">import</span> <span class="n">c2_order_by_min</span> <span class="k">as</span> <span class="n">c_order_by_min</span>
<span class="k">else</span><span class="p">:</span>                   <span class="kn">from</span> <span class="nn">cy_lib</span> <span class="kn">import</span> <span class="n">pyximport</span><span class="p">,</span><span class="n">pp</span><span class="p">,</span><span class="n">cy</span>

<span class="c"># Simulation Data Generation</span>
<span class="kn">from</span> <span class="nn">sim_data_gen</span> <span class="kn">import</span> <span class="n">make_simulation_data_from_real_data</span><span class="p">,</span><span class="n">make_simulation_data</span><span class="p">,</span><span class="n">open_pd_sim_data</span>
<span class="kn">from</span> <span class="nn">sim_data_gen</span> <span class="kn">import</span> <span class="n">open_simulation_data</span><span class="p">,</span><span class="n">init_dg_pool</span><span class="p">,</span><span class="n">init_global_vars</span><span class="p">,</span><span class="n">get_saved_global_vars</span>

<span class="c"># Cython Var Generation</span>
<span class="kn">from</span> <span class="nn">cy_var_gen</span> <span class="kn">import</span> <span class="n">global_simulation_vars</span><span class="p">,</span><span class="n">make_orderSet_store</span><span class="p">,</span><span class="n">make_pairSet_store</span>

<span class="c"># Data Analysis f(x)s</span>
<span class="kn">from</span> <span class="nn">data_analysis</span> <span class="kn">import</span> <span class="n">new_dg_to_order_q</span><span class="p">,</span><span class="n">eval_combos</span><span class="p">,</span><span class="n">get_best_combo</span><span class="p">,</span><span class="n">getBestDG</span>
<span class="kn">from</span> <span class="nn">data_analysis</span> <span class="kn">import</span> <span class="n">getSortedPoints</span><span class="p">,</span><span class="n">adjustTripPoints</span><span class="p">,</span><span class="n">un_adjustTripPoints</span><span class="p">,</span><span class="n">eval_additional_order</span>
<span class="kn">from</span> <span class="nn">data_analysis</span> <span class="kn">import</span> <span class="n">getPtsFrom_dg_q</span><span class="p">,</span><span class="n">dg_q_reorganize_mock_pts</span><span class="p">,</span><span class="n">dg_q_reorganize_BY_mock_pts</span>

<span class="c"># Data Preparation f(x)s</span>
<span class="kn">from</span> <span class="nn">data_prep</span> <span class="kn">import</span> <span class="n">set_mock_pts</span><span class="p">,</span><span class="n">order_q_re_order_deliv_num</span><span class="p">,</span><span class="n">getComboStartInfo</span>
<span class="kn">from</span> <span class="nn">data_prep</span> <span class="kn">import</span> <span class="n">format_new_to_order</span><span class="p">,</span><span class="n">set_dg_pool_order</span><span class="p">,</span><span class="n">set_dg_pool_grp_order</span>

<span class="c"># Cython Prep f(x)s</span>
<span class="kn">from</span> <span class="nn">cy_prep</span> <span class="kn">import</span> <span class="n">c_check1</span><span class="p">,</span><span class="n">c_check2</span><span class="p">,</span><span class="n">c_check3</span><span class="p">,</span><span class="n">c_check4</span><span class="p">,</span><span class="n">c_check5</span>

<span class="c"># Cython Result f(x)s</span>
<span class="kn">from</span> <span class="nn">cy_results</span> <span class="kn">import</span> <span class="n">receive_c_order_by_min</span>

<span class="c"># Handle Results f(x)s</span>
<span class="kn">from</span> <span class="nn">handle_results</span> <span class="kn">import</span> <span class="n">pull_from_order</span><span class="p">,</span><span class="n">updateOrderResults</span><span class="p">,</span><span class="n">compare_orders</span>

<span class="c"># Clean Up f(x)s</span>
<span class="kn">from</span> <span class="nn">handle_results</span> <span class="kn">import</span> <span class="n">fix_dg_q_delID_dupes</span><span class="p">,</span><span class="n">rearrange_dupe_locs_dg_q</span>

<span class="c"># Data Validation f(x)s</span>
<span class="kn">from</span> <span class="nn">data_validation</span> <span class="kn">import</span> <span class="n">error_check</span><span class="p">,</span><span class="n">order_by_min</span><span class="p">,</span><span class="n">update_global_vars</span><span class="p">,</span><span class="n">updateCurrentLocation</span>

<span class="c"># Data Recordation</span>
<span class="kn">from</span> <span class="nn">data_recordation</span> <span class="kn">import</span> <span class="n">export_all_data</span>

<span class="c"># Data Visualization</span>
<span class="kn">from</span> <span class="nn">data_visual</span> <span class="kn">import</span> <span class="n">DISPLAY_REAL_DATA</span><span class="p">,</span><span class="n">DISPLAY_SIMULATION_DATA</span><span class="p">,</span><span class="n">DISPLAY_NORMAL_DELIVERY_DATA</span><span class="p">,</span><span class="n">DISPLAY_EDA_DATA</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># Execution f(x)s</span>


<span class="k">def</span> <span class="nf">RUN_CHAOS_SIMULATION</span><span class="p">(</span><span class="n">makeData</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">showSimData</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">runNormalDel</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">load</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">save</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                         <span class="n">resume</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">errorCheck</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">global_op_vars</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>

    <span class="c">#pass</span>
    <span class="c"># global c_get_best_combo</span>
    <span class="c"># global c_mapper2,c_mapper3,c_mapper4,c_mapper5,c_mapper6,c_mapper7</span>
    <span class="c"># global minimum_relative_distance</span>
    <span class="c"># from get_best_combo import c_get_best_combo</span>
    <span class="c"># from get_combo_start_info import c_get_combo_start_info</span>
    <span class="c"># from map_points_to_combos import c_mapper2,c_mapper3,c_mapper4,c_mapper5,c_mapper6,c_mapper7</span>
    <span class="c"># from math_functions import minimum_relative_distance</span>

    <span class="n">t1A</span><span class="o">=</span><span class="n">time</span><span class="p">()</span>
    <span class="k">print</span> <span class="n">t1A</span>
    <span class="k">if</span> <span class="n">global_op_vars</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span>
        <span class="k">global</span> <span class="n">sim_data</span><span class="p">,</span><span class="n">order_q</span><span class="p">,</span><span class="n">order_delivered</span><span class="p">,</span><span class="n">dg_pool</span><span class="p">,</span><span class="n">dg_pool_pt</span><span class="p">,</span><span class="n">dg_q</span><span class="p">,</span><span class="n">dg_delivered</span>
    <span class="k">else</span><span class="p">:</span> <span class="k">global</span> <span class="n">sim_data</span>
    <span class="n">global_simulation_vars</span><span class="p">()</span>

    <span class="n">sim_data_Path</span><span class="o">=</span><span class="n">this_cwd</span><span class="o">+</span><span class="s">&#39;/sim_data/vendor_sim_data.txt&#39;</span>
    <span class="k">if</span> <span class="n">makeData</span><span class="o">==</span><span class="bp">True</span><span class="p">:</span> <span class="n">sim_data</span> <span class="o">=</span> <span class="n">make_simulation_data_from_real_data</span><span class="p">(</span><span class="n">savePath</span><span class="o">=</span><span class="n">sim_data_Path</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">sim_data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_hdf</span><span class="p">(</span><span class="n">sim_data_Path</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s">&#39;.txt&#39;</span><span class="p">)</span><span class="o">+</span><span class="s">&#39;.h5&#39;</span><span class="p">,</span> <span class="s">&#39;table&#39;</span><span class="p">)</span>
        <span class="c"># sim_data = pd.read_sql_table(&#39;sim_data&#39;,engine,index_col=&#39;deliv_id&#39;)</span>
    <span class="n">sim_data</span> <span class="o">=</span> <span class="n">sim_data</span><span class="o">.</span><span class="n">sort_index</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;order_time&#39;</span><span class="p">,</span><span class="s">&#39;vend_id&#39;</span><span class="p">],</span> <span class="n">ascending</span><span class="o">=</span><span class="p">[</span><span class="bp">True</span><span class="p">,</span><span class="bp">True</span><span class="p">])</span>

    <span class="k">if</span> <span class="n">showSimData</span><span class="o">==</span><span class="bp">True</span><span class="p">:</span> <span class="n">DISPLAY_SIMULATION_DATA</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">runNormalDel</span><span class="o">==</span><span class="bp">True</span><span class="p">:</span> <span class="n">RUN_NORMAL_DELIVERY_SIMULATION</span><span class="p">(</span><span class="n">makeData</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">showSimData</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

    <span class="n">globalVars_plus</span> <span class="o">=</span> <span class="n">init_global_vars</span><span class="p">(</span><span class="n">load</span><span class="p">,</span><span class="n">save</span><span class="p">,</span><span class="n">resume</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">globalVars_plus</span><span class="o">==</span><span class="bp">None</span><span class="p">:</span> <span class="k">return</span>

    <span class="n">order_q</span><span class="p">,</span><span class="n">order_delivered</span><span class="p">,</span><span class="n">dg_q</span><span class="p">,</span><span class="n">dg_delivered</span><span class="p">,</span><span class="n">dg_pool</span><span class="p">,</span><span class="n">dg_pool_pt</span><span class="p">,</span><span class="n">program_stats</span><span class="p">,</span><span class="n">stpt</span> <span class="o">=</span> <span class="n">globalVars_plus</span>
    <span class="n">globalVars</span> <span class="o">=</span> <span class="n">order_q</span><span class="p">,</span><span class="n">order_delivered</span><span class="p">,</span><span class="n">dg_q</span><span class="p">,</span><span class="n">dg_delivered</span><span class="p">,</span><span class="n">dg_pool</span><span class="p">,</span><span class="n">dg_pool_pt</span>

    <span class="n">stpt</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">print</span> <span class="s">&#39;starting at&#39;</span><span class="p">,</span><span class="n">stpt</span>
    <span class="n">pt</span><span class="o">=</span><span class="mi">0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">stpt</span><span class="p">,</span><span class="n">A</span><span class="o">.</span><span class="n">totalTime</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">now</span><span class="o">=</span><span class="n">i</span>

        <span class="c"># maintain lists of data</span>
        <span class="n">globalVars</span> <span class="o">=</span> <span class="n">update_global_vars</span><span class="p">(</span><span class="n">globalVars</span><span class="p">,</span><span class="s">&#39;update per minute&#39;</span><span class="p">,</span><span class="n">now</span><span class="p">)</span>

        <span class="c"># UPDATE to/from PGSQL HERE</span>

        <span class="c"># export data on a regular basis</span>
        <span class="c"># if pt==1:</span>
        <span class="c">#     pt = 0</span>
        <span class="c">#     if save == True: x = export_all_data(globalVars,program_stats)</span>
        <span class="c"># pt+=1</span>

        <span class="c"># process all current orders</span>
        <span class="n">ordersNow</span><span class="o">=</span><span class="n">sim_data</span><span class="p">[(</span><span class="n">sim_data</span><span class="o">.</span><span class="n">order_time</span> <span class="o">==</span> <span class="n">now</span><span class="p">)]</span>
        <span class="n">t1</span><span class="o">=</span><span class="n">time</span><span class="p">()</span>

        <span class="c"># globalVars = order_by_min(globalVars,ordersNow,errorCheck=errorCheck)</span>
        <span class="c"># print &#39;finished&#39;</span>
        <span class="c"># systemError()</span>

        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">ordersNow</span><span class="o">.</span><span class="n">index</span><span class="p">)):</span>
            <span class="n">thisOrder</span> <span class="o">=</span> <span class="n">ordersNow</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">j</span><span class="p">,:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="c"># bestExpeditedDeliveryRoute(order_q_i,new,errorCheck=True)</span>
            <span class="n">globalVars</span> <span class="o">=</span> <span class="n">getBestDG</span><span class="p">(</span><span class="n">globalVars</span><span class="p">,</span><span class="n">thisOrder</span><span class="p">,</span><span class="n">errorCheck</span><span class="o">=</span><span class="n">errorCheck</span><span class="p">)</span>
        <span class="c"># raise SystemError</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ordersNow</span><span class="o">.</span><span class="n">index</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">program_stats</span> <span class="o">=</span> <span class="n">program_stats</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="n">i</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">ordersNow</span><span class="o">.</span><span class="n">index</span><span class="p">),</span><span class="nb">round</span><span class="p">((</span><span class="n">time</span><span class="p">()</span><span class="o">-</span><span class="n">t1</span><span class="p">)</span><span class="o">/</span><span class="nb">len</span><span class="p">(</span><span class="n">ordersNow</span><span class="o">.</span><span class="n">index</span><span class="p">),</span><span class="mi">2</span><span class="p">),</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">())],</span><span class="n">index</span><span class="o">=</span><span class="n">program_stats</span><span class="o">.</span><span class="n">columns</span><span class="p">),</span><span class="n">ignore_index</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
            <span class="k">print</span> <span class="s">&#39;minute&#39;</span><span class="o">+</span><span class="s">&#39;</span><span class="se">\t</span><span class="s">&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">+</span><span class="s">&#39;</span><span class="se">\t</span><span class="s">&#39;</span><span class="o">+</span><span class="s">&#39;orders=&#39;</span><span class="o">+</span><span class="s">&#39;</span><span class="se">\t</span><span class="s">&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ordersNow</span><span class="o">.</span><span class="n">index</span><span class="p">))</span><span class="o">+</span><span class="s">&#39;</span><span class="se">\t</span><span class="s">&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">((</span><span class="n">time</span><span class="p">()</span><span class="o">-</span><span class="n">t1</span><span class="p">)</span><span class="o">/</span><span class="nb">len</span><span class="p">(</span><span class="n">ordersNow</span><span class="o">.</span><span class="n">index</span><span class="p">))</span><span class="o">+</span><span class="s">&#39;</span><span class="se">\t</span><span class="s">&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">time</span><span class="p">())</span>


    <span class="c"># move remaining orders at close to &#39;delivered&#39;</span>
    <span class="k">if</span> <span class="n">now</span> <span class="o">==</span> <span class="n">totalTime</span><span class="p">:</span> <span class="n">globalVars</span> <span class="o">=</span> <span class="n">update_global_vars</span><span class="p">(</span><span class="n">globalVars</span><span class="p">,</span><span class="s">&#39;update per minute&#39;</span><span class="p">,</span><span class="n">globalVars</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">end_time</span><span class="o">.</span><span class="n">max</span><span class="p">())</span>
    <span class="k">if</span> <span class="n">save</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span> <span class="n">export_all_data</span><span class="p">(</span><span class="n">globalVars</span><span class="p">,</span><span class="n">program_stats</span><span class="p">)</span>
    <span class="k">print</span> <span class="s">&#39;done&#39;</span>
    <span class="k">print</span> <span class="n">time</span><span class="p">()</span><span class="o">-</span><span class="n">t1A</span>
    <span class="k">return</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># Parts for getBestDG</span>
<span class="n">c_new</span><span class="p">,</span><span class="n">c_grp</span><span class="p">,</span><span class="n">c_grp_ids</span><span class="p">,</span><span class="n">c_dgp</span><span class="p">,</span><span class="n">c_deliv_ids</span>

<span class="p">(</span><span class="n">array</span><span class="p">([</span>  <span class="mi">13</span><span class="p">,</span>   <span class="mi">11</span><span class="p">,</span>  <span class="mi">430</span><span class="p">,</span> <span class="mi">2581</span><span class="p">]),</span>
 <span class="n">array</span><span class="p">([[</span><span class="mi">1727</span><span class="p">,</span>    <span class="mi">0</span><span class="p">,</span>   <span class="mi">16</span><span class="p">,</span> <span class="mi">4417</span><span class="p">,</span>    <span class="mi">8</span><span class="p">,</span>    <span class="mi">2</span><span class="p">,</span>   <span class="mi">10</span><span class="p">,</span>  <span class="mi">893</span><span class="p">,</span>    <span class="mi">3</span><span class="p">,</span>   <span class="mi">13</span><span class="p">,</span>    <span class="mi">5</span><span class="p">,</span>   <span class="mi">16</span><span class="p">,</span>    <span class="mi">1</span><span class="p">]]),</span>
 <span class="n">array</span><span class="p">([</span><span class="mi">16</span><span class="p">]),</span>
 <span class="n">array</span><span class="p">([[</span><span class="mi">893</span><span class="p">,</span>   <span class="mi">0</span><span class="p">,</span>   <span class="mi">0</span><span class="p">,</span>   <span class="mi">1</span><span class="p">,</span>  <span class="mi">16</span><span class="p">]]),</span>
 <span class="n">array</span><span class="p">([</span><span class="mi">16</span><span class="p">]))</span>

<span class="n">c_new</span><span class="p">,</span><span class="n">c_grp</span><span class="p">,</span><span class="n">c_grp_ids</span><span class="p">,</span><span class="n">c_dgp</span><span class="p">,</span><span class="n">c_deliv_ids</span>

<span class="p">(</span><span class="n">array</span><span class="p">([</span>  <span class="mi">13</span><span class="p">,</span>   <span class="mi">11</span><span class="p">,</span>  <span class="mi">430</span><span class="p">,</span> <span class="mi">2581</span><span class="p">]),</span>
 <span class="n">array</span><span class="p">([[</span><span class="mi">1727</span><span class="p">,</span>    <span class="mi">0</span><span class="p">,</span>   <span class="mi">16</span><span class="p">,</span> <span class="mi">4417</span><span class="p">,</span>    <span class="mi">8</span><span class="p">,</span>    <span class="mi">2</span><span class="p">,</span>   <span class="mi">10</span><span class="p">,</span>  <span class="mi">893</span><span class="p">,</span>    <span class="mi">3</span><span class="p">,</span>   <span class="mi">13</span><span class="p">,</span>    <span class="mi">5</span><span class="p">,</span>   <span class="mi">16</span><span class="p">,</span>    <span class="mi">1</span><span class="p">]]),</span>
 <span class="n">array</span><span class="p">([</span><span class="mi">16</span><span class="p">]),</span>
 <span class="n">array</span><span class="p">([[</span><span class="mi">893</span><span class="p">,</span>   <span class="mi">0</span><span class="p">,</span>   <span class="mi">0</span><span class="p">,</span>   <span class="mi">1</span><span class="p">,</span>  <span class="mi">16</span><span class="p">]]),</span>
 <span class="n">array</span><span class="p">([</span><span class="mi">16</span><span class="p">]))</span>


<span class="n">c_max_delivery_per_dg</span><span class="p">,</span><span class="n">c_mttlt</span><span class="p">,</span><span class="n">c_tripPoints</span>
<span class="p">(</span><span class="il">5L</span><span class="p">,</span> <span class="il">10L</span><span class="p">,</span> <span class="n">array</span><span class="p">([</span>                   <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">6917520250064828455</span><span class="p">]))</span>

<span class="n">c_orderSet2</span><span class="p">,</span><span class="n">c_orderSet3</span><span class="p">,</span><span class="n">c_orderSet4</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># CYTHON PART</span>



<span class="o">%%</span><span class="k">cython</span>
<span class="kn">from</span> <span class="nn">libc.math</span> <span class="nn">cimport</span> <span class="nn">abs</span> <span class="nn">as</span> <span class="nn">c_abs</span>
<span class="n">cimport</span> <span class="n">cython</span>
<span class="c"># from get_best_combo import c_get_best_combo as get_best_combo</span>

<span class="nd">@cython.boundscheck</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
<span class="nd">@cython.wraparound</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
<span class="n">cpdef</span> <span class="nb">long</span><span class="p">[:,::</span><span class="mi">1</span><span class="p">]</span> <span class="n">ZZ_c_getBestDG</span><span class="p">(</span><span class="nb">long</span><span class="p">[::</span><span class="mi">1</span><span class="p">]</span> <span class="n">new</span><span class="p">,</span>
                            <span class="nb">long</span><span class="p">[:,::</span><span class="mi">1</span><span class="p">]</span> <span class="n">o_grp</span><span class="p">,</span>              <span class="c"># group of order_q_i</span>
                            <span class="nb">long</span><span class="p">[::</span><span class="mi">1</span><span class="p">]</span> <span class="n">grp_ids</span><span class="p">,</span>              <span class="c"># unique IDs for groups</span>
                            <span class="nb">long</span><span class="p">[:,::</span><span class="mi">1</span><span class="p">]</span> <span class="n">dgp</span><span class="p">,</span>
                            <span class="nb">long</span><span class="p">[::</span><span class="mi">1</span><span class="p">]</span> <span class="n">deliveryIDs</span><span class="p">,</span>          <span class="c"># delivery IDs</span>
                            <span class="nb">long</span><span class="p">[::</span><span class="mi">1</span><span class="p">]</span> <span class="n">orderTimes</span><span class="p">,</span>           <span class="c"># order times</span>
                            <span class="nb">long</span> <span class="n">sp</span><span class="p">,</span>                        <span class="c"># speed</span>
                            <span class="nb">long</span> <span class="n">md</span><span class="p">,</span>                        <span class="c"># max delivery time</span>
                            <span class="nb">long</span> <span class="n">mdpp</span><span class="p">,</span>                      <span class="c"># max delivery per person</span>
                            <span class="nb">long</span> <span class="n">mttlt</span><span class="p">,</span>                     <span class="c"># max time to delivery locations</span>
                            <span class="nb">long</span><span class="p">[:,::</span><span class="mi">1</span><span class="p">]</span> <span class="n">c_tripPoints</span><span class="p">,</span>       <span class="c"># empty trip points array</span>
                            <span class="nb">long</span><span class="p">[:,::</span><span class="mi">1</span><span class="p">]</span> <span class="n">orderSet2</span><span class="p">,</span>          <span class="c"># permutation data for 2 orders</span>
                            <span class="nb">long</span><span class="p">[:,::</span><span class="mi">1</span><span class="p">]</span> <span class="n">orderSet3</span><span class="p">,</span>          <span class="c"># permutation data for 2 orders</span>
                            <span class="nb">long</span><span class="p">[:,::</span><span class="mi">1</span><span class="p">]</span> <span class="n">orderSet4</span><span class="p">,</span>          <span class="c"># permutation data for 2 orders</span>
                            <span class="nb">long</span><span class="p">[:,::</span><span class="mi">1</span><span class="p">]</span> <span class="n">orderSet5</span><span class="p">,</span>          <span class="c"># permutation data for 2 orders</span>
                            <span class="nb">long</span><span class="p">[:,::</span><span class="mi">1</span><span class="p">]</span> <span class="n">orderSetInd</span><span class="p">,</span>        <span class="c"># columns for [pt0, pt[i], i0, i[i], a1, [i]]</span>
                            <span class="nb">long</span><span class="p">[:,:,::</span><span class="mi">1</span><span class="p">]</span> <span class="n">realCombos</span><span class="p">,</span>       <span class="c"># blank real points, which will be arranged in same orders as mock combos</span>
                            <span class="nb">long</span><span class="p">[:,::</span><span class="mi">1</span><span class="p">]</span> <span class="n">tT</span><span class="p">,</span>                 <span class="c"># c_travelTimes</span>
                            <span class="nb">long</span><span class="p">[:,::</span><span class="mi">1</span><span class="p">]</span> <span class="n">sT</span><span class="p">,</span>                 <span class="c"># c_startTimes      #   NOTE: the left list with the &quot;c_&quot;</span>
                            <span class="nb">long</span><span class="p">[:,::</span><span class="mi">1</span><span class="p">]</span> <span class="n">eT</span><span class="p">,</span>                 <span class="c"># c_endTimes        #   are indicies for keeping track of</span>
                            <span class="nb">long</span><span class="p">[:,::</span><span class="mi">1</span><span class="p">]</span> <span class="n">odt</span><span class="p">,</span>                <span class="c"># c_odtTimes        #   certain things in getBestCombo.</span>
                            <span class="nb">long</span><span class="p">[::</span><span class="mi">1</span><span class="p">]</span> <span class="n">oMax</span><span class="p">,</span>                 <span class="c"># c_MaxOrderToDeliveryTimes</span>
                            <span class="nb">long</span><span class="p">[::</span><span class="mi">1</span><span class="p">]</span> <span class="n">tMax</span><span class="p">,</span>                 <span class="c"># c_MaxTravelToLocTimes</span>
                            <span class="nb">long</span><span class="p">[:,::</span><span class="mi">1</span><span class="p">]</span> <span class="n">tdd</span><span class="p">,</span>                <span class="c"># c_tddTimes</span>
                            <span class="nb">long</span><span class="p">[::</span><span class="mi">1</span><span class="p">]</span> <span class="n">ctm</span><span class="p">,</span>                  <span class="c"># c_ctm (cumulative time marker)</span>
                            <span class="nb">long</span><span class="p">[:,::</span><span class="mi">1</span><span class="p">]</span> <span class="n">returnVar1</span><span class="p">,</span>         <span class="c"># return for combo start info (cols = 14)</span>
                            <span class="nb">long</span><span class="p">[:,::</span><span class="mi">1</span><span class="p">]</span> <span class="n">returnVar2</span><span class="p">,</span>         <span class="c"># return for eval single order of best combo (cols = 15)</span>
                            <span class="nb">long</span><span class="p">[:,::</span><span class="mi">1</span><span class="p">]</span> <span class="n">returnVar_i</span><span class="p">,</span>        <span class="c"># return for individual order results (cols = 15)</span>
                            <span class="nb">long</span><span class="p">[:,::</span><span class="mi">1</span><span class="p">]</span> <span class="n">returnVars</span><span class="p">):</span>        <span class="c"># return for group results (cols = 15)</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    # IMPORTANT INDICIES:</span>
<span class="sd">    # -------------------------------------------</span>
<span class="sd">    #   Global:</span>
<span class="sd">    #       oq == order_q</span>
<span class="sd">    #       dgp == dg_pool</span>
<span class="sd">    #       o == order_q_i</span>
<span class="sd">    #   Results:</span>
<span class="sd">    #       IR == results from getStartInfo function</span>
<span class="sd">    #       (results from eval_single_order have &#39;oq&#39; format)</span>
<span class="sd">    #       new == new</span>
<span class="sd">    #       o_res == order results</span>
<span class="sd">    # -------------------------------------------</span>
<span class="sd">    # --	        s_d	oq	dgP	o	IR	new	o_res</span>
<span class="sd">    # id (dg)	    --	0	0	--	0	--</span>
<span class="sd">    # id (vendor)	0	--	--	--	--	--	--</span>
<span class="sd">    # vend_X	    1	--	--	--	--	1	--</span>
<span class="sd">    # vend_Y	    2	--	--	--	--	2	--</span>
<span class="sd">    # orderNum	    3	--	--	--	--	3	--</span>
<span class="sd">    # dg_X  	    --	1	1	1	--	--	0</span>
<span class="sd">    # dg_Y  	    --	2	2	2	--	--	1</span>
<span class="sd">    # deliveryNum  	--	3	--	3	--	--	2</span>
<span class="sd">    # travTimeToLoc	--	4	--	4	--	--	5</span>
<span class="sd">    #	--</span>
<span class="sd">    # deliveryID  	4	5	--	5	7	4	3</span>
<span class="sd">    # orderTime  	5	6	--	6	8	5	4</span>
<span class="sd">    #</span>
<span class="sd">    # start_X  	    6	7	--	7	--	6	6</span>
<span class="sd">    # start_Y  	    7	8	--	8	--	7	7</span>
<span class="sd">    #</span>
<span class="sd">    # startTime  	--	9	--	9	--	--	8</span>
<span class="sd">    # endTime  	    --	10	--	10	--	--	9</span>
<span class="sd">    #</span>
<span class="sd">    # end_X  	    8	11	--	11	--	8	10</span>
<span class="sd">    # end_Y  	    9	12	--	12	--	9	11</span>
<span class="sd">    #</span>
<span class="sd">    # totOrdTime 	--	13	--	13	--	--	12</span>
<span class="sd">    # travelTime	--	14	--	14	--	--	13</span>
<span class="sd">    # totalDeliv	--	--	3	--	--	--	--</span>
<span class="sd">    # currDelivs	--	--	4	--	--	--	--</span>
<span class="sd">    # bestIndex	    --	--	--	--	--	--	14</span>
<span class="sd">    # tripStTime	--	--	--	--	0	--	--</span>
<span class="sd">    # tripStX	    --	--	--	--	1	--	--</span>
<span class="sd">    # tripStY	    --	--	--	--	2	--	--</span>
<span class="sd">    # tripPt_X_1st	--	--	--	--	3	--	--</span>
<span class="sd">    # tripPt_Y_1st	--	--	--	--	4	--	--</span>
<span class="sd">    # tripPt_X_2nd	--	--	--	--	5	--	--</span>
<span class="sd">    # tripPt_Y_2nd	--	--	--	--	6	--	--</span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="c"># cdefs</span>
    <span class="n">cdef</span> <span class="nb">long</span><span class="p">[:,::</span><span class="mi">1</span><span class="p">]</span> <span class="n">c_get_combo_start_info</span>
    <span class="n">cdef</span> <span class="nb">int</span> <span class="n">groupNum</span> <span class="o">=</span> <span class="n">grp_ids</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">cdef</span> <span class="nb">int</span> <span class="n">groupRows</span> <span class="o">=</span> <span class="n">o_grp</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">cdef</span> <span class="nb">int</span> <span class="n">grp_s_pt</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">cdef</span> <span class="nb">int</span> <span class="n">grp_e_pt</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">cdef</span> <span class="nb">int</span> <span class="n">complete</span><span class="p">,</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">,</span><span class="n">k</span><span class="p">,</span><span class="n">h</span><span class="p">,</span><span class="n">n</span><span class="p">,</span><span class="n">g</span><span class="p">,</span><span class="n">r_o</span><span class="p">,</span><span class="n">c_o</span><span class="p">,</span><span class="n">r_res</span><span class="p">,</span><span class="n">mpt</span><span class="p">,</span><span class="n">pts</span><span class="p">,</span><span class="n">r_mc</span>
    <span class="n">cdef</span> <span class="nb">int</span> <span class="n">r</span><span class="p">,</span><span class="n">z</span>
    <span class="n">cdef</span> <span class="nb">long</span> <span class="n">s</span><span class="p">,</span><span class="n">e</span><span class="p">,</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">t</span><span class="p">,</span><span class="n">dg_node</span><span class="p">,</span><span class="n">ID</span>
    <span class="n">cdef</span> <span class="nb">long</span> <span class="n">pt1</span><span class="p">,</span><span class="n">pt2</span><span class="p">,</span><span class="n">toLoc</span><span class="p">,</span><span class="n">toDel</span>
    <span class="n">cdef</span> <span class="nb">long</span> <span class="n">orderCount</span><span class="p">,</span><span class="n">currentID</span><span class="p">,</span><span class="n">current_node</span><span class="p">,</span><span class="n">deliveryCount</span>
    <span class="n">cdef</span> <span class="nb">long</span><span class="p">[::</span><span class="mi">1</span><span class="p">]</span> <span class="n">ai</span>
    <span class="n">cdef</span> <span class="nb">long</span><span class="p">[::</span><span class="mi">1</span><span class="p">]</span> <span class="n">grp_row</span>
    <span class="n">cdef</span> <span class="nb">long</span><span class="p">[::</span><span class="mi">1</span><span class="p">]</span> <span class="n">aj</span>
    <span class="n">cdef</span> <span class="nb">long</span><span class="p">[::</span><span class="mi">1</span><span class="p">]</span> <span class="n">ak</span>
    <span class="n">cdef</span> <span class="nb">long</span><span class="p">[::</span><span class="mi">1</span><span class="p">]</span> <span class="n">ah</span>
    <span class="n">cdef</span> <span class="nb">long</span><span class="p">[:,::</span><span class="mi">1</span><span class="p">]</span> <span class="n">o</span>
    <span class="n">cdef</span> <span class="nb">long</span> <span class="n">now</span> <span class="o">=</span> <span class="n">new</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
    <span class="n">cdef</span> <span class="nb">long</span><span class="p">[:,::</span><span class="mi">1</span><span class="p">]</span> <span class="n">aii</span>
    <span class="n">cdef</span> <span class="nb">long</span><span class="p">[:,::</span><span class="mi">1</span><span class="p">]</span> <span class="n">comboStartInfoReturn</span>
    <span class="n">cdef</span> <span class="nb">long</span> <span class="n">tripStartTime</span>
    <span class="n">cdef</span> <span class="nb">long</span> <span class="n">tripStartPt</span>
    <span class="n">cdef</span> <span class="nb">long</span><span class="p">[:,::</span><span class="mi">1</span><span class="p">]</span> <span class="n">tripPoints</span>
    <span class="n">cdef</span> <span class="nb">long</span><span class="p">[:,::</span><span class="mi">1</span><span class="p">]</span> <span class="n">rv_i</span>                   <span class="c"># individual return value</span>
    <span class="n">cdef</span> <span class="nb">long</span> <span class="n">ro</span><span class="p">,</span>
    <span class="n">cdef</span> <span class="nb">long</span><span class="p">[::</span><span class="mi">1</span><span class="p">]</span> <span class="n">bi</span>
    <span class="n">cdef</span> <span class="nb">long</span><span class="p">[:,::</span><span class="mi">1</span><span class="p">]</span> <span class="n">testSet</span>
    <span class="n">cdef</span> <span class="nb">long</span><span class="p">[:,::</span><span class="mi">1</span><span class="p">]</span> <span class="n">bii</span>
    <span class="n">cdef</span> <span class="nb">long</span><span class="p">[:,::</span><span class="mi">1</span><span class="p">]</span> <span class="n">cii</span>
    <span class="n">cdef</span> <span class="nb">long</span><span class="p">[:,::</span><span class="mi">1</span><span class="p">]</span> <span class="n">mockCombos</span>
    <span class="n">cdef</span> <span class="nb">long</span><span class="p">[:,:]</span> <span class="n">orderSK</span>
    <span class="n">cdef</span> <span class="nb">long</span><span class="p">[:,:]</span> <span class="n">pointSK</span>
    <span class="n">cdef</span> <span class="nb">long</span><span class="p">[:,:,::</span><span class="mi">1</span><span class="p">]</span> <span class="n">tmp_realCombos</span>
    <span class="n">cdef</span> <span class="nb">int</span> <span class="n">BI</span>
    <span class="n">cdef</span> <span class="nb">long</span> <span class="n">minT</span>                           <span class="c"># time in between each pt, best index.</span>
    <span class="n">cdef</span> <span class="nb">long</span> <span class="n">mc_pt</span><span class="p">,</span><span class="n">orderSK_pt</span><span class="p">,</span><span class="n">odt_pt</span><span class="p">,</span><span class="n">ttl_pt</span><span class="p">,</span><span class="n">sT_pt</span><span class="p">,</span><span class="n">eT_pt</span><span class="p">,</span><span class="n">pta</span><span class="p">,</span><span class="n">ptb</span>
    <span class="n">cdef</span> <span class="nb">long</span><span class="p">[:,::</span><span class="mi">1</span><span class="p">]</span> <span class="n">akk</span>
    <span class="n">cdef</span> <span class="nb">long</span><span class="p">[:,::</span><span class="mi">1</span><span class="p">]</span> <span class="n">ajj</span>
    <span class="n">cdef</span> <span class="nb">long</span><span class="p">[:,::</span><span class="mi">1</span><span class="p">]</span> <span class="n">tii</span>
    <span class="n">cdef</span> <span class="nb">long</span><span class="p">[:,::</span><span class="mi">1</span><span class="p">]</span> <span class="n">bestComboReturn</span>
    <span class="n">cdef</span> <span class="nb">long</span><span class="p">[:,::</span><span class="mi">1</span><span class="p">]</span> <span class="n">updateResReturn</span>
    <span class="n">cdef</span> <span class="nb">long</span> <span class="n">c</span><span class="p">,</span><span class="n">d</span>
    <span class="n">cdef</span> <span class="nb">long</span> <span class="n">s1</span><span class="p">,</span><span class="n">e1</span><span class="p">,</span><span class="n">s2</span><span class="p">,</span><span class="n">e2</span><span class="p">,</span><span class="n">checkVar</span>
    <span class="n">cdef</span> <span class="nb">long</span><span class="p">[::</span><span class="mi">1</span><span class="p">]</span> <span class="n">bj</span>
    <span class="n">cdef</span> <span class="nb">long</span> <span class="n">minVar</span> <span class="o">=</span> <span class="n">md</span>
    <span class="n">cdef</span> <span class="nb">int</span> <span class="n">ept</span> <span class="o">=</span> <span class="n">returnVars</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre> 
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="o">%</span><span class="k">run</span> <span class="n">cy_scratch</span><span class="o">.</span><span class="n">py</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># Sample Data and Call to getBestDG</span>
<span class="kn">from</span> <span class="nn">cy_scratch</span> <span class="kn">import</span> <span class="n">N_getBestDG</span>
<span class="kn">from</span> <span class="nn">rd_lib</span> <span class="kn">import</span> <span class="n">G</span>

<span class="n">c_new</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span>  <span class="mi">13</span><span class="p">,</span>   <span class="mi">11</span><span class="p">,</span>  <span class="mi">430</span><span class="p">,</span> <span class="mi">2581</span><span class="p">]),</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">)</span>
<span class="n">c_grp</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1727</span><span class="p">,</span>    <span class="mi">0</span><span class="p">,</span>   <span class="mi">16</span><span class="p">,</span> <span class="mi">4417</span><span class="p">,</span>    <span class="mi">8</span><span class="p">,</span>    <span class="mi">2</span><span class="p">,</span>   <span class="mi">10</span><span class="p">,</span>  <span class="mi">893</span><span class="p">,</span>    <span class="mi">3</span><span class="p">,</span>   <span class="mi">13</span><span class="p">,</span>    <span class="mi">5</span><span class="p">,</span>   <span class="mi">16</span><span class="p">,</span>    <span class="mi">1</span><span class="p">]]),</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">)</span>
<span class="n">c_grp_ids</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">16</span><span class="p">]),</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">)</span>
<span class="n">c_dgp</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">893</span><span class="p">,</span>   <span class="mi">0</span><span class="p">,</span>   <span class="mi">0</span><span class="p">,</span>   <span class="mi">1</span><span class="p">,</span>  <span class="mi">16</span><span class="p">]]),</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">)</span>

<span class="n">a</span><span class="o">=</span><span class="n">N_getBestDG</span><span class="p">(</span>  <span class="n">c_new</span><span class="p">,</span>
              <span class="n">c_grp</span><span class="p">,</span>
              <span class="n">c_grp_ids</span><span class="p">,</span>
              <span class="n">c_dgp</span><span class="p">,</span>
              <span class="n">G</span><span class="o">.</span><span class="n">c_deliv_ids</span><span class="p">,</span>
              <span class="n">G</span><span class="o">.</span><span class="n">c_order_times</span><span class="p">,</span>
              <span class="n">G</span><span class="o">.</span><span class="n">c_MPH</span><span class="p">,</span>
              <span class="n">G</span><span class="o">.</span><span class="n">c_max_delivery_time</span><span class="p">,</span>
              <span class="n">G</span><span class="o">.</span><span class="n">c_max_delivery_per_dg</span><span class="p">,</span>
              <span class="n">G</span><span class="o">.</span><span class="n">c_mttlt</span><span class="p">,</span>
              <span class="n">G</span><span class="o">.</span><span class="n">c_tripPoints</span><span class="p">,</span>
              <span class="n">G</span><span class="o">.</span><span class="n">c_orderSet2</span><span class="p">,</span>
              <span class="n">G</span><span class="o">.</span><span class="n">c_orderSet3</span><span class="p">,</span>
              <span class="n">G</span><span class="o">.</span><span class="n">c_orderSet4</span><span class="p">,</span>
              <span class="n">G</span><span class="o">.</span><span class="n">c_orderSet5</span><span class="p">,</span>
              <span class="n">G</span><span class="o">.</span><span class="n">c_orderSetInd</span><span class="p">,</span>
              <span class="n">G</span><span class="o">.</span><span class="n">c_realCombos</span><span class="p">,</span>
              <span class="n">G</span><span class="o">.</span><span class="n">c_travel_times</span><span class="p">,</span>
              <span class="n">G</span><span class="o">.</span><span class="n">c_start_times</span><span class="p">,</span>
              <span class="n">G</span><span class="o">.</span><span class="n">c_end_times</span><span class="p">,</span>
              <span class="n">G</span><span class="o">.</span><span class="n">c_odtTimes</span><span class="p">,</span>
              <span class="n">G</span><span class="o">.</span><span class="n">c_oMaxTimes</span><span class="p">,</span>
              <span class="n">G</span><span class="o">.</span><span class="n">c_tMaxTimes</span><span class="p">,</span>
              <span class="n">G</span><span class="o">.</span><span class="n">c_tddTimes</span><span class="p">,</span>
              <span class="n">G</span><span class="o">.</span><span class="n">c_ctMarker</span><span class="p">,</span>
              <span class="n">G</span><span class="o">.</span><span class="n">c_rv_comboStartInfo</span><span class="p">,</span>
              <span class="n">G</span><span class="o">.</span><span class="n">c_rv_bestCombo</span><span class="p">,</span>
              <span class="n">G</span><span class="o">.</span><span class="n">c_rv_updatedBestCombo</span><span class="p">,</span>
              <span class="n">G</span><span class="o">.</span><span class="n">c_returnVars</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">a</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># up next</span>



        <span class="c">#----------------------------------------------------</span>
        <span class="c">#comboStartInfoReturn = get_combo_start_info(new,o,aii)</span>
        <span class="n">h</span><span class="o">=</span><span class="mi">0</span>
        <span class="n">k</span><span class="o">=</span><span class="mi">0</span>
        <span class="n">n</span><span class="o">=</span><span class="mi">0</span>
        <span class="n">tripStartTime</span> <span class="o">=</span> <span class="mi">1000</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">r_o</span><span class="p">):</span>
            <span class="n">aj</span><span class="o">=</span><span class="n">o</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">aj</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span>       <span class="c"># start time</span>
            <span class="n">e</span> <span class="o">=</span> <span class="n">aj</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span>      <span class="c"># end time</span>
            <span class="k">if</span> <span class="n">e</span><span class="o">&gt;</span><span class="n">now</span><span class="p">:</span>       <span class="c"># is there at least one order with an endTime less than now? if not, then return for single order.</span>
                <span class="n">n</span><span class="o">=</span><span class="mi">1</span>
            <span class="k">if</span> <span class="n">s</span><span class="o">-</span><span class="n">now</span> <span class="o">&lt;</span> <span class="n">tripStartTime</span><span class="o">-</span><span class="n">now</span> <span class="ow">and</span> <span class="n">s</span><span class="o">-</span><span class="n">now</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
                <span class="n">tripStartTime</span> <span class="o">=</span> <span class="n">s</span>
                <span class="n">h</span><span class="o">=</span><span class="n">j</span>                                         <span class="c"># h == index pt for order_q rows</span>
                <span class="n">k</span><span class="o">=</span><span class="mi">0</span>                                         <span class="c"># k == index pt for order_q cols</span>
            <span class="k">if</span> <span class="n">e</span><span class="o">-</span><span class="n">now</span> <span class="o">&lt;</span> <span class="n">tripStartTime</span><span class="o">-</span><span class="n">now</span> <span class="ow">and</span> <span class="n">e</span><span class="o">-</span><span class="n">now</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>       <span class="c"># if t==endTime, it is too late to change DG&#39;s next destination</span>
                <span class="n">tripStartTime</span> <span class="o">=</span> <span class="n">e</span>
                <span class="n">h</span><span class="o">=</span><span class="n">j</span>
                <span class="n">k</span><span class="o">=</span><span class="mi">4</span>

        <span class="n">aj</span> <span class="o">=</span> <span class="n">aii</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">n</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
            <span class="n">aj</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">now</span>
            <span class="n">aj</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">new</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span>    <span class="c"># tripPtX = start_X</span>
            <span class="n">aj</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">new</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span>    <span class="c"># tripPtY = start_Y</span>
            <span class="n">aj</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>                             <span class="c"># this signals an error</span>
            <span class="c"># return returnVar</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ah</span> <span class="o">=</span> <span class="n">o</span><span class="p">[</span><span class="n">h</span><span class="p">]</span>

            <span class="c"># if i == 1:</span>
            <span class="c">#     returnVars[0] = o[h]</span>
            <span class="c">#     returnVars[1] = o[0:1]#_grp[1]</span>
            <span class="c">#     returnVars[0][0] = h</span>
            <span class="c">#     returnVars[0][1] = r_o</span>
            <span class="c">#     # returnVars[0][2] = o[h][2]</span>
            <span class="c">#     # returnVars[0][3] = o[h][3]</span>
            <span class="c">#     # returnVars[0][4] = o[h][4]</span>
            <span class="c">#     # returnVars[0][5] = o[h][5]</span>
            <span class="c">#     # returnVars[0][6] = o[h][6]</span>
            <span class="c">#     # returnVars[0][7] = o[h][7]</span>
            <span class="c">#     # returnVars[0][8] = o[h][8]</span>
            <span class="c">#     # returnVars[0][9] = o[h][9]</span>
            <span class="c">#     return returnVars</span>

            <span class="n">aj</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">tripStartTime</span>
            <span class="n">n</span> <span class="o">=</span> <span class="mi">7</span><span class="o">+</span><span class="n">k</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">ah</span><span class="p">[</span><span class="n">n</span><span class="p">]</span>
            <span class="n">aj</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">s</span>         <span class="c"># tripPtX = start_X | end_X</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">ah</span><span class="p">[</span><span class="n">n</span><span class="p">]</span>
            <span class="n">aj</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">s</span>         <span class="c"># tripPtY = start_Y | end_Y</span>

            <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">h</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">k</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">r_o</span><span class="p">):</span>

                <span class="n">aj</span> <span class="o">=</span> <span class="n">o</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
                <span class="n">s</span> <span class="o">=</span> <span class="n">aj</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span>
                <span class="n">e</span> <span class="o">=</span> <span class="n">aj</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span>
                <span class="n">g</span> <span class="o">=</span> <span class="mi">1</span>

                <span class="c"># Note (1): When endTime==now, that point is not included in tripPoints.</span>
                <span class="c">#   BUT, that point is the basis for tripStartTime and tripStartPt.</span>

                <span class="c"># START LOCATION</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">now</span> <span class="o">&lt;</span> <span class="n">s</span> <span class="ow">and</span> <span class="n">now</span> <span class="o">&lt;</span> <span class="n">e</span><span class="p">):</span>      <span class="c"># IF not start yet, use start point as start location</span>

                    <span class="n">x1</span> <span class="o">=</span> <span class="n">aj</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span>
                    <span class="n">y1</span> <span class="o">=</span> <span class="n">aj</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span>
                    <span class="n">x2</span> <span class="o">=</span> <span class="n">aj</span><span class="p">[</span><span class="mi">11</span><span class="p">]</span>
                    <span class="n">y2</span> <span class="o">=</span> <span class="n">aj</span><span class="p">[</span><span class="mi">12</span><span class="p">]</span>

                <span class="k">elif</span> <span class="p">(</span><span class="n">s</span> <span class="o">&lt;=</span> <span class="n">now</span> <span class="ow">and</span> <span class="n">now</span> <span class="o">&lt;</span> <span class="n">e</span><span class="p">):</span>   <span class="c"># ELIF, (already started | starting) &amp; (ending now | ending later),</span>
                                                        <span class="c">#   use the end point as start location</span>
                    <span class="n">x1</span> <span class="o">=</span> <span class="n">aj</span><span class="p">[</span><span class="mi">11</span><span class="p">]</span>
                    <span class="n">y1</span> <span class="o">=</span> <span class="n">aj</span><span class="p">[</span><span class="mi">12</span><span class="p">]</span>
                    <span class="n">x2</span> <span class="o">=</span> <span class="n">aj</span><span class="p">[</span><span class="mi">11</span><span class="p">]</span>
                    <span class="n">y2</span> <span class="o">=</span> <span class="n">aj</span><span class="p">[</span><span class="mi">12</span><span class="p">]</span>

                <span class="k">else</span><span class="p">:</span>

                    <span class="n">g</span> <span class="o">=</span> <span class="mi">0</span>

                <span class="k">if</span> <span class="n">g</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>

                    <span class="c">## ----------- ##</span>
                    <span class="c">## ----------- ##</span>
                    <span class="n">ah</span> <span class="o">=</span> <span class="n">aii</span><span class="p">[</span><span class="n">h</span><span class="p">]</span>
                    <span class="n">ah</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="n">aj</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
                    <span class="n">ah</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="n">aj</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span>
                    <span class="n">h</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="c">## ----------- ##</span>
                    <span class="c">## ----------- ##</span>

                    <span class="c"># k keeps track of what row on returnVar</span>
                    <span class="c"># n = 0 or 2 --&gt; tracks whether first col or second col is used</span>
                    <span class="n">ak</span> <span class="o">=</span> <span class="n">aii</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
                    <span class="n">k</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="n">t</span> <span class="o">=</span> <span class="n">n</span><span class="o">+</span><span class="mi">3</span>
                    <span class="n">ak</span><span class="p">[</span><span class="n">t</span><span class="p">]</span> <span class="o">=</span> <span class="n">x1</span>
                    <span class="n">t</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="n">ak</span><span class="p">[</span><span class="n">t</span><span class="p">]</span> <span class="o">=</span> <span class="n">y1</span>
                    <span class="k">if</span> <span class="n">k</span> <span class="o">==</span> <span class="n">deliveryCount</span><span class="p">:</span>
                        <span class="n">k</span> <span class="o">=</span> <span class="mi">0</span>
                        <span class="n">n</span> <span class="o">=</span> <span class="mi">2</span>

                    <span class="n">ak</span> <span class="o">=</span> <span class="n">aii</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
                    <span class="n">k</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="n">t</span> <span class="o">=</span> <span class="n">n</span><span class="o">+</span><span class="mi">3</span>
                    <span class="n">ak</span><span class="p">[</span><span class="n">t</span><span class="p">]</span> <span class="o">=</span> <span class="n">x2</span>
                    <span class="n">t</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="n">ak</span><span class="p">[</span><span class="n">t</span><span class="p">]</span> <span class="o">=</span> <span class="n">y2</span>
                    <span class="k">if</span> <span class="n">k</span> <span class="o">==</span> <span class="n">deliveryCount</span><span class="p">:</span>
                        <span class="n">k</span> <span class="o">=</span> <span class="mi">0</span>
                        <span class="n">n</span> <span class="o">=</span> <span class="mi">2</span>

            <span class="n">ah</span> <span class="o">=</span> <span class="n">aii</span><span class="p">[</span><span class="n">h</span><span class="p">]</span>
            <span class="n">ah</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="n">new</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
            <span class="n">ah</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="n">new</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>

            <span class="n">k</span> <span class="o">=</span> <span class="n">deliveryCount</span><span class="o">-</span><span class="mi">2</span>
            <span class="n">ak</span> <span class="o">=</span> <span class="n">aii</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
            <span class="n">ak</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="n">new</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span>
            <span class="n">ak</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="n">new</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span>
            <span class="n">k</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">ak</span> <span class="o">=</span> <span class="n">aii</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
            <span class="n">ak</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="n">new</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span>
            <span class="n">ak</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="n">new</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span>

        <span class="n">comboStartInfoReturn</span> <span class="o">=</span> <span class="n">aii</span>

        <span class="c"># if i == 1:</span>
        <span class="c">#     return comboStartInfoReturn</span>
        <span class="c"># comboStartInfoReturn = get_combo_start_info(new,o,aii)</span>
        <span class="c">#----------------------------------------------------</span>


        <span class="n">ai</span> <span class="o">=</span> <span class="n">aii</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">tripStartTime</span> <span class="o">=</span> <span class="n">ai</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">tripStartPtX</span> <span class="o">=</span> <span class="n">ai</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">tripStartPtY</span> <span class="o">=</span> <span class="n">ai</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">ai</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>

            <span class="c">#----------------------------------------------------</span>
            <span class="c"># rv_i = eval_single_order(new,o,tripStartPtX,tripStartPtY,tripStartTime,sp,md,aii)</span>

            <span class="n">x1</span> <span class="o">=</span> <span class="n">tripStartPtX</span>
            <span class="n">y1</span> <span class="o">=</span> <span class="n">tripStartPtY</span>
            <span class="n">x2</span> <span class="o">=</span> <span class="n">new</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span>
            <span class="n">y2</span> <span class="o">=</span> <span class="n">new</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">c_abs</span><span class="p">(</span><span class="n">x2</span><span class="o">-</span><span class="n">x1</span><span class="p">)</span>
            <span class="n">y</span> <span class="o">=</span> <span class="n">c_abs</span><span class="p">(</span><span class="n">y2</span><span class="o">-</span><span class="n">y1</span><span class="p">)</span>
            <span class="n">toLoc</span> <span class="o">=</span> <span class="n">sp</span><span class="o">*</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="p">)</span>

            <span class="c"># x2 = new[6]</span>
            <span class="c"># y2 = new[7]</span>
            <span class="n">x1</span> <span class="o">=</span> <span class="n">new</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span>
            <span class="n">y1</span> <span class="o">=</span> <span class="n">new</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">c_abs</span><span class="p">(</span><span class="n">x1</span><span class="o">-</span><span class="n">x2</span><span class="p">)</span>
            <span class="n">y</span> <span class="o">=</span> <span class="n">c_abs</span><span class="p">(</span><span class="n">y1</span><span class="o">-</span><span class="n">y2</span><span class="p">)</span>
            <span class="n">toDel</span> <span class="o">=</span> <span class="n">sp</span><span class="o">*</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">tripStartTime</span> <span class="o">+</span> <span class="n">toLoc</span> <span class="o">+</span> <span class="n">toDel</span> <span class="o">&lt;=</span> <span class="n">md</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">r_o</span><span class="p">):</span>
                    <span class="n">ai</span> <span class="o">=</span> <span class="n">o</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
                    <span class="n">bi</span> <span class="o">=</span> <span class="n">aii</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
                    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">c_o</span><span class="p">):</span>
                        <span class="n">bi</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">ai</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">j</span><span class="o">==</span><span class="n">r_o</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                        <span class="n">ID</span> <span class="o">=</span> <span class="n">ai</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                        <span class="n">dg_X</span> <span class="o">=</span> <span class="n">ai</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                        <span class="n">dg_Y</span> <span class="o">=</span> <span class="n">ai</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
                <span class="n">j</span> <span class="o">=</span> <span class="n">r_o</span><span class="o">+</span><span class="mi">1</span>
                <span class="n">bi</span> <span class="o">=</span> <span class="n">aii</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
                <span class="n">bi</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">ID</span>
                <span class="n">bi</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">dg_X</span>
                <span class="n">bi</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">dg_Y</span>
                <span class="n">bi</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">j</span>           <span class="c"># deliveryNum</span>
                <span class="n">bi</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="n">toLoc</span>
                <span class="n">bi</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="n">new</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>      <span class="c"># deliveryID</span>
                <span class="n">t</span> <span class="o">=</span> <span class="n">new</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
                <span class="n">bi</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="n">t</span>           <span class="c"># orderTime</span>
                <span class="n">bi</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="n">new</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span>      <span class="c"># start_X</span>
                <span class="n">bi</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="n">new</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span>      <span class="c"># start_Y</span>
                <span class="n">s</span> <span class="o">=</span> <span class="n">tripStartTime</span> <span class="o">+</span> <span class="n">toLoc</span>
                <span class="n">bi</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span> <span class="o">=</span> <span class="n">s</span>           <span class="c"># startTime</span>
                <span class="n">e</span> <span class="o">=</span> <span class="n">tripStartTime</span> <span class="o">+</span> <span class="n">toLoc</span> <span class="o">+</span> <span class="n">toDel</span>
                <span class="n">bi</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span> <span class="o">=</span> <span class="n">e</span>          <span class="c"># endTime</span>
                <span class="n">bi</span><span class="p">[</span><span class="mi">11</span><span class="p">]</span> <span class="o">=</span> <span class="n">new</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span>     <span class="c"># end_X</span>
                <span class="n">bi</span><span class="p">[</span><span class="mi">12</span><span class="p">]</span> <span class="o">=</span> <span class="n">new</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span>     <span class="c"># end_Y</span>
                <span class="n">bi</span><span class="p">[</span><span class="mi">13</span><span class="p">]</span> <span class="o">=</span> <span class="n">s</span> <span class="o">-</span> <span class="n">t</span>      <span class="c"># totalOrderTime</span>
                <span class="n">bi</span><span class="p">[</span><span class="mi">14</span><span class="p">]</span> <span class="o">=</span> <span class="n">e</span> <span class="o">-</span> <span class="n">s</span>      <span class="c"># travelTime</span>
                <span class="n">rv_i</span> <span class="o">=</span> <span class="n">aii</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">aii</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">13</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>    <span class="c"># signals no result</span>
                <span class="n">rv_i</span> <span class="o">=</span> <span class="n">aii</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">0</span><span class="p">]</span>

            <span class="c"># rv_i = eval_single_order(new,o,tripStartPtX,tripStartPtY,tripStartTime,sp,md,aii)</span>
            <span class="c">#----------------------------------------------------</span>

            <span class="k">if</span> <span class="n">rv_i</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">13</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">complete</span> <span class="o">=</span> <span class="mi">2</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">complete</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="c"># no result == (rv_i[0][13] == 0) &amp; ( len(returnVar)==1 [ instead of expected 2 ] )</span>

        <span class="c">## ////////////////////////////////</span>
        <span class="c">## --------------------------------</span>
        <span class="c"># if i == 1:</span>
        <span class="c">#     returnVars[0][0] = 505</span>
        <span class="c">#     returnVars[1][0] = 505</span>
        <span class="c">#     returnVars[0][1] = deliveryCount</span>
        <span class="c">#     returnVars[1][1] = complete</span>
        <span class="c">#     returnVars[0][2] = tripStartPtX</span>
        <span class="c">#     returnVars[1][2] = tripStartPtY</span>
        <span class="c">#     return returnVars</span>
        <span class="c">## --------------------------------</span>
        <span class="c">## \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\</span>

        <span class="k">if</span> <span class="n">complete</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>

            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">deliveryCount</span><span class="p">):</span>
                <span class="n">ai</span> <span class="o">=</span> <span class="n">comboStartInfoReturn</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
                <span class="n">deliveryIDs</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">ai</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span>
                <span class="n">orderTimes</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">ai</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span>
                <span class="n">bi</span> <span class="o">=</span> <span class="n">c_tripPoints</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
                <span class="n">bi</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">ai</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
                <span class="n">bi</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">ai</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
                <span class="n">k</span> <span class="o">=</span> <span class="n">j</span> <span class="o">+</span> <span class="n">deliveryCount</span>
                <span class="n">bi</span> <span class="o">=</span> <span class="n">c_tripPoints</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
                <span class="n">bi</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">ai</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
                <span class="n">bi</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">ai</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span>

            <span class="n">tripPoints</span> <span class="o">=</span> <span class="n">c_tripPoints</span><span class="p">[:</span><span class="n">deliveryCount</span><span class="o">*</span><span class="mi">2</span><span class="p">]</span>

            <span class="c">## ////////////////////////////////</span>
            <span class="c">## --------------------------------</span>
            <span class="c">#</span>
            <span class="c"># if i == 1:</span>
            <span class="c">#     return c_tripPoints</span>

            <span class="c">## --------------------------------</span>
            <span class="c">## \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\</span>

            <span class="k">if</span> <span class="n">deliveryCount</span><span class="o">==</span><span class="mi">2</span><span class="p">:</span>
                <span class="n">testSet</span><span class="o">=</span><span class="n">orderSet2</span>
                <span class="n">ai</span> <span class="o">=</span> <span class="n">orderSetInd</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">deliveryCount</span><span class="o">==</span><span class="mi">3</span><span class="p">:</span>
                <span class="n">testSet</span><span class="o">=</span><span class="n">orderSet3</span>
                <span class="n">ai</span> <span class="o">=</span> <span class="n">orderSetInd</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">deliveryCount</span><span class="o">==</span><span class="mi">4</span><span class="p">:</span>
                <span class="n">testSet</span><span class="o">=</span><span class="n">orderSet4</span>
                <span class="n">ai</span> <span class="o">=</span> <span class="n">orderSetInd</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">deliveryCount</span><span class="o">==</span><span class="mi">5</span><span class="p">:</span>
                <span class="n">testSet</span><span class="o">=</span><span class="n">orderSet5</span>
                <span class="n">ai</span> <span class="o">=</span> <span class="n">orderSetInd</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>

            <span class="n">bii</span><span class="o">=</span><span class="n">testSet</span><span class="o">.</span><span class="n">T</span>
            <span class="n">cii</span><span class="o">=</span><span class="n">bii</span><span class="p">[</span><span class="n">ai</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span><span class="n">ai</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>
            <span class="n">mockCombos</span> <span class="o">=</span> <span class="n">cii</span><span class="o">.</span><span class="n">T</span>
            <span class="n">r_mc</span> <span class="o">=</span> <span class="n">mockCombos</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">bii</span><span class="o">=</span><span class="n">testSet</span><span class="o">.</span><span class="n">T</span>
            <span class="n">cii</span><span class="o">=</span><span class="n">bii</span><span class="p">[</span><span class="n">ai</span><span class="p">[</span><span class="mi">2</span><span class="p">]:</span><span class="n">ai</span><span class="p">[</span><span class="mi">3</span><span class="p">]]</span>
            <span class="n">orderSK</span> <span class="o">=</span> <span class="n">cii</span><span class="o">.</span><span class="n">T</span>
            <span class="n">bii</span><span class="o">=</span><span class="n">testSet</span><span class="o">.</span><span class="n">T</span>
            <span class="n">cii</span><span class="o">=</span><span class="n">bii</span><span class="p">[</span><span class="n">ai</span><span class="p">[</span><span class="mi">4</span><span class="p">]:</span><span class="n">ai</span><span class="p">[</span><span class="mi">5</span><span class="p">]]</span>
            <span class="n">pointSK</span> <span class="o">=</span> <span class="n">cii</span><span class="o">.</span><span class="n">T</span>

            <span class="n">tmp_realCombos</span> <span class="o">=</span> <span class="n">realCombos</span><span class="p">[:</span><span class="n">r_mc</span><span class="p">]</span>

            <span class="c">#----------------------------------------------------</span>
            <span class="c"># realCombos = c_mapper(tripPoints, mockCombos,tmp_realCombos)</span>

            <span class="n">pts</span> <span class="o">=</span> <span class="n">mockCombos</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">ajj</span> <span class="o">=</span> <span class="n">tripPoints</span><span class="o">.</span><span class="n">T</span>
            <span class="n">bi</span> <span class="o">=</span> <span class="n">ajj</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">ci</span> <span class="o">=</span> <span class="n">ajj</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

            <span class="n">ptx0</span> <span class="o">=</span>  <span class="n">bi</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">pty0</span> <span class="o">=</span>  <span class="n">ci</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">ptx100</span> <span class="o">=</span>  <span class="n">bi</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">pty100</span> <span class="o">=</span>  <span class="n">ci</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="c"># if deliveryCount == 2:</span>
            <span class="n">ptx1</span> <span class="o">=</span>  <span class="n">bi</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">3</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">pty1</span> <span class="o">=</span>  <span class="n">ci</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">3</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">ptx101</span> <span class="o">=</span>  <span class="n">bi</span><span class="p">[</span><span class="mi">3</span><span class="p">:</span><span class="mi">4</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">pty101</span> <span class="o">=</span>  <span class="n">ci</span><span class="p">[</span><span class="mi">3</span><span class="p">:</span><span class="mi">4</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>

            <span class="k">if</span> <span class="n">deliveryCount</span> <span class="o">&gt;=</span> <span class="mi">3</span><span class="p">:</span>
                <span class="n">ptx2</span> <span class="o">=</span>  <span class="n">bi</span><span class="p">[</span><span class="mi">4</span><span class="p">:</span><span class="mi">5</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">pty2</span> <span class="o">=</span>  <span class="n">ci</span><span class="p">[</span><span class="mi">4</span><span class="p">:</span><span class="mi">5</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">ptx102</span> <span class="o">=</span>  <span class="n">bi</span><span class="p">[</span><span class="mi">5</span><span class="p">:</span><span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">pty102</span> <span class="o">=</span>  <span class="n">ci</span><span class="p">[</span><span class="mi">5</span><span class="p">:</span><span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">deliveryCount</span> <span class="o">&gt;=</span> <span class="mi">4</span><span class="p">:</span>
                <span class="n">ptx3</span> <span class="o">=</span>  <span class="n">bi</span><span class="p">[</span><span class="mi">6</span><span class="p">:</span><span class="mi">7</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">pty3</span> <span class="o">=</span>  <span class="n">ci</span><span class="p">[</span><span class="mi">6</span><span class="p">:</span><span class="mi">7</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">ptx103</span> <span class="o">=</span>  <span class="n">bi</span><span class="p">[</span><span class="mi">7</span><span class="p">:</span><span class="mi">8</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">pty103</span> <span class="o">=</span>  <span class="n">ci</span><span class="p">[</span><span class="mi">7</span><span class="p">:</span><span class="mi">8</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">deliveryCount</span> <span class="o">&gt;=</span> <span class="mi">5</span><span class="p">:</span>
                <span class="n">ptx4</span> <span class="o">=</span>  <span class="n">bi</span><span class="p">[</span><span class="mi">8</span><span class="p">:</span><span class="mi">9</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">pty4</span> <span class="o">=</span>  <span class="n">ci</span><span class="p">[</span><span class="mi">8</span><span class="p">:</span><span class="mi">9</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">ptx104</span> <span class="o">=</span>  <span class="n">bi</span><span class="p">[</span><span class="mi">9</span><span class="p">:</span><span class="mi">10</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">pty104</span> <span class="o">=</span>  <span class="n">ci</span><span class="p">[</span><span class="mi">9</span><span class="p">:</span><span class="mi">10</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">deliveryCount</span> <span class="o">&gt;=</span> <span class="mi">6</span><span class="p">:</span>
                <span class="n">ptx5</span> <span class="o">=</span>  <span class="n">bi</span><span class="p">[</span><span class="mi">10</span><span class="p">:</span><span class="mi">11</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">pty5</span> <span class="o">=</span>  <span class="n">ci</span><span class="p">[</span><span class="mi">10</span><span class="p">:</span><span class="mi">11</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">ptx105</span> <span class="o">=</span>  <span class="n">bi</span><span class="p">[</span><span class="mi">11</span><span class="p">:</span><span class="mi">12</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">pty105</span> <span class="o">=</span>  <span class="n">ci</span><span class="p">[</span><span class="mi">11</span><span class="p">:</span><span class="mi">12</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">deliveryCount</span> <span class="o">&gt;=</span> <span class="mi">7</span><span class="p">:</span>
                <span class="n">ptx6</span> <span class="o">=</span>  <span class="n">bi</span><span class="p">[</span><span class="mi">12</span><span class="p">:</span><span class="mi">13</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">pty6</span> <span class="o">=</span>  <span class="n">ci</span><span class="p">[</span><span class="mi">12</span><span class="p">:</span><span class="mi">13</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">ptx106</span> <span class="o">=</span>  <span class="n">bi</span><span class="p">[</span><span class="mi">13</span><span class="p">:</span><span class="mi">14</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">pty106</span> <span class="o">=</span>  <span class="n">ci</span><span class="p">[</span><span class="mi">13</span><span class="p">:</span><span class="mi">14</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">deliveryCount</span> <span class="o">&gt;=</span> <span class="mi">8</span><span class="p">:</span>
                <span class="n">ptx7</span> <span class="o">=</span>  <span class="n">bi</span><span class="p">[</span><span class="mi">14</span><span class="p">:</span><span class="mi">15</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">pty7</span> <span class="o">=</span>  <span class="n">ci</span><span class="p">[</span><span class="mi">14</span><span class="p">:</span><span class="mi">15</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">ptx107</span> <span class="o">=</span>  <span class="n">bi</span><span class="p">[</span><span class="mi">15</span><span class="p">:</span><span class="mi">16</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">pty107</span> <span class="o">=</span>  <span class="n">ci</span><span class="p">[</span><span class="mi">15</span><span class="p">:</span><span class="mi">16</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>

            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">pts</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">r_mc</span><span class="p">):</span>
                    <span class="n">mpt</span> <span class="o">=</span> <span class="n">mockCombos</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="n">j</span><span class="p">]</span>
                    <span class="n">akk</span> <span class="o">=</span> <span class="n">tmp_realCombos</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
                    <span class="n">aj</span> <span class="o">=</span> <span class="n">akk</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">mpt</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="n">aj</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">ptx0</span>
                        <span class="n">aj</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">pty0</span>
                    <span class="k">elif</span> <span class="n">mpt</span> <span class="o">==</span> <span class="mi">100</span><span class="p">:</span>
                        <span class="n">aj</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">ptx100</span>
                        <span class="n">aj</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">pty100</span>
                    <span class="k">elif</span> <span class="n">mpt</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                        <span class="n">aj</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">ptx1</span>
                        <span class="n">aj</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">pty1</span>
                    <span class="k">elif</span> <span class="n">mpt</span> <span class="o">==</span> <span class="mi">101</span><span class="p">:</span>
                        <span class="n">aj</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">ptx101</span>
                        <span class="n">aj</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">pty101</span>
                    <span class="k">elif</span> <span class="n">mpt</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                        <span class="n">aj</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">ptx2</span>
                        <span class="n">aj</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">pty2</span>
                    <span class="k">elif</span> <span class="n">mpt</span> <span class="o">==</span> <span class="mi">102</span><span class="p">:</span>
                        <span class="n">aj</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">ptx102</span>
                        <span class="n">aj</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">pty102</span>
                    <span class="k">elif</span> <span class="n">mpt</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
                        <span class="n">aj</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">ptx3</span>
                        <span class="n">aj</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">pty3</span>
                    <span class="k">elif</span> <span class="n">mpt</span> <span class="o">==</span> <span class="mi">103</span><span class="p">:</span>
                        <span class="n">aj</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">ptx103</span>
                        <span class="n">aj</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">pty103</span>
                    <span class="k">elif</span> <span class="n">mpt</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
                        <span class="n">aj</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">ptx4</span>
                        <span class="n">aj</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">pty4</span>
                    <span class="k">elif</span> <span class="n">mpt</span> <span class="o">==</span> <span class="mi">104</span><span class="p">:</span>
                        <span class="n">aj</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">ptx104</span>
                        <span class="n">aj</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">pty104</span>
                    <span class="k">elif</span> <span class="n">mpt</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
                        <span class="n">aj</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">ptx5</span>
                        <span class="n">aj</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">pty5</span>
                    <span class="k">elif</span> <span class="n">mpt</span> <span class="o">==</span> <span class="mi">105</span><span class="p">:</span>
                        <span class="n">aj</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">ptx105</span>
                        <span class="n">aj</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">pty105</span>
                    <span class="k">elif</span> <span class="n">mpt</span> <span class="o">==</span> <span class="mi">6</span><span class="p">:</span>
                        <span class="n">aj</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">ptx6</span>
                        <span class="n">aj</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">pty6</span>
                    <span class="k">elif</span> <span class="n">mpt</span> <span class="o">==</span> <span class="mi">106</span><span class="p">:</span>
                        <span class="n">aj</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">ptx106</span>
                        <span class="n">aj</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">pty106</span>
                    <span class="k">elif</span> <span class="n">mpt</span> <span class="o">==</span> <span class="mi">7</span><span class="p">:</span>
                        <span class="n">aj</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">ptx7</span>
                        <span class="n">aj</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">pty7</span>
                    <span class="k">elif</span> <span class="n">mpt</span> <span class="o">==</span> <span class="mi">107</span><span class="p">:</span>
                        <span class="n">aj</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">ptx107</span>
                        <span class="n">aj</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">pty107</span>

            <span class="n">realCombos</span> <span class="o">=</span> <span class="n">tmp_realCombos</span>

            <span class="c">## ////////////////////////////////</span>
            <span class="c">## --------------------------------</span>

            <span class="c"># if i == 1:</span>
            <span class="c">#     return mockCombos</span>
                <span class="c"># return realCombos[0]</span>

            <span class="c">## --------------------------------</span>
            <span class="c">## \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\</span>

            <span class="c"># realCombos = c_mapper(tripPoints, mockCombos,tmp_realCombos)</span>
            <span class="c">#----------------------------------------------------</span>

            <span class="c">#----------------------------------------------------</span>
            <span class="c"># bestComboReturn = get_best_combo(tripStartPtX,  # returns &quot;o_res&quot; format</span>
            <span class="c">#                        tripStartPtY,</span>
            <span class="c">#                        mockCombos,</span>
            <span class="c">#                        realCombos,</span>
            <span class="c">#                        orderSK,</span>
            <span class="c">#                        pointSK,</span>
            <span class="c">#                        orderTimes,</span>
            <span class="c">#                        deliveryIDs,</span>
            <span class="c">#                        deliveryCount,</span>
            <span class="c">#                        tripStartTime,</span>
            <span class="c">#                        sp,</span>
            <span class="c">#                        md,</span>
            <span class="c">#                        mttlt,</span>
            <span class="c">#                        tT,</span>
            <span class="c">#                        sT,</span>
            <span class="c">#                        eT,</span>
            <span class="c">#                        odt,</span>
            <span class="c">#                        oMax,</span>
            <span class="c">#                        tMax,</span>
            <span class="c">#                        tdd,</span>
            <span class="c">#                        ctm,</span>
            <span class="c">#                        returnVar2[:deliveryCount])</span>
            <span class="n">BI</span> <span class="o">=</span> <span class="n">r_mc</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="n">minT</span> <span class="o">=</span>  <span class="p">(</span><span class="mi">8</span> <span class="o">*</span> <span class="n">md</span><span class="p">)</span>     <span class="c"># minimum total route time (assuming 8 routes is max route #)</span>
            <span class="n">bestComboReturn</span> <span class="o">=</span> <span class="n">returnVar2</span><span class="p">[:</span><span class="n">deliveryCount</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">pts</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">r_mc</span><span class="p">):</span>
                    <span class="n">akk</span> <span class="o">=</span> <span class="n">realCombos</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">j</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="n">aj</span> <span class="o">=</span> <span class="n">akk</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
                        <span class="n">xptb</span> <span class="o">=</span> <span class="n">aj</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                        <span class="n">yptb</span> <span class="o">=</span> <span class="n">aj</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                        <span class="n">x</span> <span class="o">=</span> <span class="n">c_abs</span><span class="p">(</span> <span class="n">tripStartPtX</span> <span class="o">-</span> <span class="n">xptb</span> <span class="p">)</span>
                        <span class="n">y</span> <span class="o">=</span> <span class="n">c_abs</span><span class="p">(</span> <span class="n">tripStartPtY</span> <span class="o">-</span> <span class="n">yptb</span> <span class="p">)</span>
                        <span class="n">t</span> <span class="o">=</span> <span class="n">sp</span> <span class="o">*</span> <span class="p">(</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="p">)</span>
                        <span class="n">ctm</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">t</span>
                        <span class="n">tT</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">t</span>
                        <span class="n">tMax</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">t</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">aj</span> <span class="o">=</span> <span class="n">akk</span><span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                        <span class="n">xpta</span> <span class="o">=</span> <span class="n">aj</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                        <span class="n">ypta</span> <span class="o">=</span> <span class="n">aj</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                        <span class="n">aj</span> <span class="o">=</span> <span class="n">akk</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
                        <span class="n">xptb</span> <span class="o">=</span> <span class="n">aj</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                        <span class="n">yptb</span> <span class="o">=</span> <span class="n">aj</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                        <span class="n">x</span> <span class="o">=</span> <span class="n">c_abs</span><span class="p">(</span> <span class="n">xpta</span> <span class="o">-</span> <span class="n">xptb</span> <span class="p">)</span>
                        <span class="n">y</span> <span class="o">=</span> <span class="n">c_abs</span><span class="p">(</span> <span class="n">ypta</span> <span class="o">-</span> <span class="n">yptb</span> <span class="p">)</span>
                        <span class="n">t</span> <span class="o">=</span> <span class="n">sp</span> <span class="o">*</span> <span class="p">(</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="p">)</span>
                        <span class="n">ctm</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">+=</span> <span class="n">t</span>
                        <span class="n">tT</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">t</span>
                        <span class="k">if</span> <span class="n">t</span> <span class="o">&gt;</span> <span class="n">tMax</span><span class="p">[</span><span class="n">k</span><span class="p">]:</span>
                            <span class="n">tMax</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">t</span>

                    <span class="n">mc_pt</span> <span class="o">=</span> <span class="n">mockCombos</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="n">j</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">mc_pt</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="p">:</span> <span class="n">sT</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="n">mc_pt</span><span class="p">]</span> <span class="o">=</span> <span class="n">ctm</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">+</span> <span class="n">tripStartTime</span>
                    <span class="k">else</span><span class="p">:</span> <span class="n">eT</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="n">mc_pt</span><span class="o">-</span><span class="mi">100</span><span class="p">]</span> <span class="o">=</span> <span class="n">ctm</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">+</span> <span class="n">tripStartTime</span>

                    <span class="k">if</span> <span class="n">j</span> <span class="o">==</span> <span class="n">pts</span><span class="o">-</span><span class="mi">1</span> <span class="ow">and</span> <span class="n">tMax</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">mttlt</span><span class="p">:</span> <span class="c"># this is the last part of the 2D iteration</span>
                                                                <span class="c"># if max travelToLoc time is acceptable --&gt; find Best Index</span>
                        <span class="n">oMax</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
                        <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">deliveryCount</span><span class="p">):</span>
                            <span class="n">orderSK_pt</span> <span class="o">=</span> <span class="n">orderSK</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="n">n</span><span class="p">]</span>
                            <span class="n">eT_pt</span> <span class="o">=</span> <span class="n">eT</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="n">orderSK_pt</span><span class="p">]</span>
                            <span class="n">tdd</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="n">orderSK_pt</span><span class="p">]</span> <span class="o">=</span> <span class="n">eT_pt</span> <span class="o">-</span> <span class="n">sT</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="n">orderSK_pt</span><span class="p">]</span>
                            <span class="n">odt_pt</span> <span class="o">=</span> <span class="n">eT_pt</span> <span class="o">-</span> <span class="n">orderTimes</span><span class="p">[</span><span class="n">orderSK_pt</span><span class="p">]</span>
                            <span class="n">odt</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="n">orderSK_pt</span><span class="p">]</span> <span class="o">=</span> <span class="n">odt_pt</span>
                            <span class="k">if</span> <span class="n">odt_pt</span> <span class="o">&gt;</span> <span class="n">oMax</span><span class="p">[</span><span class="n">k</span><span class="p">]:</span>
                                <span class="n">oMax</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">odt_pt</span>              <span class="c"># update max order-to-delivery time [ per row ] -- keeping biggest value</span>

                        <span class="k">if</span> <span class="n">oMax</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">oMax</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">md</span><span class="p">:</span> <span class="c"># if order-to-delivery max is valid and acceptable</span>
                            <span class="k">if</span> <span class="n">ctm</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">minT</span><span class="p">:</span>                 <span class="c"># for all acceptable rows, keep one with lowest cumul. time.</span>
                                <span class="n">minT</span> <span class="o">=</span> <span class="n">ctm</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
                                <span class="n">BI</span> <span class="o">=</span> <span class="n">k</span>                        <span class="c"># setting Best Index</span>
            <span class="c"># if i == 1:</span>
            <span class="c">#     bestComboReturn[0][0] = 99</span>
            <span class="c">#     bestComboReturn[1][0] = 99</span>
            <span class="c">#</span>
            <span class="c">#     BI = 3</span>
            <span class="c">#     bestComboReturn[0][1] = oMax[0]</span>
            <span class="c">#     bestComboReturn[0][2] = oMax[1]</span>
            <span class="c">#     bestComboReturn[0][3] = oMax[2]</span>
            <span class="c">#     bestComboReturn[0][4] = oMax[3]</span>
            <span class="c">#     bestComboReturn[0][5] = oMax[4]</span>
            <span class="c">#     bestComboReturn[0][6] = oMax[5]</span>
            <span class="c">#     bestComboReturn[0][7] = oMax[6]</span>
            <span class="c">#</span>
            <span class="c">#     # bestComboReturn[0][1] = tMax[0]</span>
            <span class="c">#     # bestComboReturn[0][2] = tMax[1]</span>
            <span class="c">#     # bestComboReturn[0][3] = tMax[2]</span>
            <span class="c">#     # bestComboReturn[0][4] = tMax[3]</span>
            <span class="c">#     # bestComboReturn[0][5] = tMax[4]</span>
            <span class="c">#     # bestComboReturn[0][6] = tMax[5]</span>
            <span class="c">#     # bestComboReturn[0][7] = tMax[6]</span>
            <span class="c">#</span>
            <span class="c">#     bestComboReturn[1][1] = ctm[0]</span>
            <span class="c">#     bestComboReturn[1][2] = ctm[1]</span>
            <span class="c">#     bestComboReturn[1][3] = ctm[2]</span>
            <span class="c">#     bestComboReturn[1][4] = ctm[3]</span>
            <span class="c">#     bestComboReturn[1][5] = ctm[4]</span>
            <span class="c">#     bestComboReturn[1][6] = ctm[5]</span>
            <span class="c">#     bestComboReturn[1][7] = ctm[6]</span>
            <span class="c">#</span>
            <span class="c">#     bestComboReturn[0][8] = minT</span>
            <span class="c">#     bestComboReturn[1][8] = 505</span>
            <span class="c">#</span>
            <span class="c">#     bestComboReturn[0][9] = tripStartPtX</span>
            <span class="c">#     bestComboReturn[1][9] = tripStartPtY</span>
            <span class="c">#</span>
            <span class="c">#     return bestComboReturn</span>
                <span class="c"># return realCombos[BI]</span>


            <span class="k">if</span> <span class="n">minT</span> <span class="o">==</span> <span class="mi">8</span> <span class="o">*</span> <span class="n">md</span><span class="p">:</span>
                <span class="n">bestComboReturn</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">13</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>                      <span class="c"># interpretted on return as an error</span>
                <span class="n">bestComboReturn</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">13</span><span class="p">]</span> <span class="o">=</span> <span class="n">BI</span>
            <span class="k">elif</span> <span class="n">BI</span> <span class="o">==</span> <span class="n">r_mc</span> <span class="o">+</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">bestComboReturn</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">13</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>                      <span class="c"># interpretted on return as an error</span>
                <span class="n">bestComboReturn</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">13</span><span class="p">]</span> <span class="o">=</span> <span class="mi">505</span>                    <span class="c"># interpretted on return as &quot;error setting best index&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">aii</span> <span class="o">=</span> <span class="n">realCombos</span><span class="p">[</span><span class="n">BI</span><span class="p">]</span>
                <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">deliveryCount</span><span class="p">):</span>
                    <span class="n">orderSK_pt</span><span class="o">=</span><span class="n">orderSK</span><span class="p">[</span><span class="n">BI</span><span class="p">][</span><span class="n">g</span><span class="p">]</span>
                    <span class="n">ak</span> <span class="o">=</span> <span class="n">bestComboReturn</span><span class="p">[</span><span class="n">g</span><span class="p">]</span>
                    <span class="n">ak</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">tripStartPtX</span>                    <span class="c"># dg_X</span>
                    <span class="n">ak</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">tripStartPtY</span>                    <span class="c"># dg_Y</span>
                    <span class="n">ak</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">orderSK_pt</span> <span class="o">+</span> <span class="mi">1</span>                  <span class="c"># deliveryNum (starts at zero)</span>
                    <span class="n">ak</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">deliveryIDs</span><span class="p">[</span><span class="n">orderSK_pt</span><span class="p">]</span>         <span class="c"># deliveryID (already sorted by key)</span>
                    <span class="n">ak</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="n">orderTimes</span><span class="p">[</span><span class="n">orderSK_pt</span><span class="p">]</span>          <span class="c"># orderTime</span>
                    <span class="n">mc_pt</span> <span class="o">=</span> <span class="n">pointSK</span><span class="p">[</span><span class="n">BI</span><span class="p">][</span><span class="n">orderSK_pt</span><span class="o">*</span><span class="mi">2</span><span class="p">]</span>
                    <span class="n">ak</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="n">tT</span><span class="p">[</span><span class="n">BI</span><span class="p">][</span><span class="n">mc_pt</span><span class="p">]</span>                   <span class="c"># travelTimeToLoc</span>
                    <span class="n">aj</span> <span class="o">=</span> <span class="n">aii</span><span class="p">[</span><span class="n">mc_pt</span><span class="p">]</span>
                    <span class="n">ak</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="n">aj</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>   <span class="c"># startX // see below for explanation</span>
                    <span class="n">ak</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="n">aj</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>   <span class="c"># startY</span>
                    <span class="n">ak</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="n">sT</span><span class="p">[</span><span class="n">BI</span><span class="p">][</span><span class="n">orderSK_pt</span><span class="p">]</span>              <span class="c"># startTime</span>
                    <span class="n">ak</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span> <span class="o">=</span> <span class="n">tdd</span><span class="p">[</span><span class="n">BI</span><span class="p">][</span><span class="n">orderSK_pt</span><span class="p">]</span>             <span class="c"># travelTime</span>
                    <span class="n">ak</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span><span class="o">=</span> <span class="n">eT</span><span class="p">[</span><span class="n">BI</span><span class="p">][</span><span class="n">orderSK_pt</span><span class="p">]</span>              <span class="c"># endTime</span>
                    <span class="n">mc_pt</span><span class="o">=</span><span class="n">pointSK</span><span class="p">[</span><span class="n">BI</span><span class="p">][(</span><span class="n">orderSK_pt</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
                    <span class="n">aj</span> <span class="o">=</span> <span class="n">aii</span><span class="p">[</span><span class="n">mc_pt</span><span class="p">]</span>
                    <span class="n">ak</span><span class="p">[</span><span class="mi">11</span><span class="p">]</span><span class="o">=</span> <span class="n">aj</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>                           <span class="c"># endX</span>
                    <span class="n">ak</span><span class="p">[</span><span class="mi">12</span><span class="p">]</span><span class="o">=</span> <span class="n">aj</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>                           <span class="c"># endY</span>
                    <span class="n">ak</span><span class="p">[</span><span class="mi">13</span><span class="p">]</span><span class="o">=</span> <span class="n">odt</span><span class="p">[</span><span class="n">BI</span><span class="p">][</span><span class="n">orderSK_pt</span><span class="p">]</span>             <span class="c"># totalOrderTime</span>
                    <span class="n">ak</span><span class="p">[</span><span class="mi">14</span><span class="p">]</span><span class="o">=</span> <span class="n">BI</span>

            <span class="c">## ////////////////////////////////</span>
            <span class="c">## --------------------------------</span>

            <span class="c"># if i == 2:</span>
            <span class="c">#     return bestComboReturn</span>
                <span class="c"># return realCombos[0]</span>

            <span class="c">## --------------------------------</span>
            <span class="c">## \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\</span>

            <span class="c"># bestComboReturn = get_best_combo(tripStartPtX,...  # returns &quot;o_res&quot; format</span>
            <span class="c">#----------------------------------------------------</span>

            <span class="k">if</span> <span class="n">bestComboReturn</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">13</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>                 <span class="c"># (general error | error setting best index)</span>

                <span class="c">#----------------------------------------------------</span>
                <span class="c"># updateResReturn = update_order_results(o,bestComboReturn,now) # expects &quot;o_res&quot; input // returns &quot;o_res&quot; format</span>

                <span class="n">aii</span> <span class="o">=</span> <span class="n">bestComboReturn</span>
                <span class="n">r_res</span> <span class="o">=</span> <span class="n">aii</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="c"># iterate through o_res to replace info for static orders</span>
                <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">r_o</span><span class="p">):</span>
                    <span class="n">aj</span> <span class="o">=</span> <span class="n">o</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">aj</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">now</span> <span class="ow">and</span> <span class="n">aj</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">now</span><span class="p">:</span>  <span class="c"># if then they are static orders...</span>
                        <span class="c"># use deliveryID to temp. use deliveryNum column in &quot;o_res&quot; as an index to &quot;o&quot;</span>
                        <span class="n">d</span> <span class="o">=</span> <span class="n">aj</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>               <span class="c"># order deliveryID</span>
                        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">r_res</span><span class="p">):</span>
                            <span class="n">ak</span> <span class="o">=</span> <span class="n">aii</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
                            <span class="n">c</span> <span class="o">=</span> <span class="n">ak</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>           <span class="c"># order result deliveryID</span>
                            <span class="k">if</span> <span class="n">c</span> <span class="o">==</span> <span class="n">d</span><span class="p">:</span>          <span class="c"># if order deliveryID matches order results deliveryID ...</span>
                                <span class="n">ak</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="n">aj</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>   <span class="c"># travelTimeToLoc</span>
                                <span class="n">ak</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="n">aj</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span>   <span class="c"># orderTime</span>
                                <span class="n">ak</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="n">aj</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span>   <span class="c"># start_X</span>
                                <span class="n">ak</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="n">aj</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span>   <span class="c"># start_Y</span>
                                <span class="n">ak</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="n">aj</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span>   <span class="c"># startTime</span>
                                <span class="k">break</span>
                <span class="n">updateResReturn</span> <span class="o">=</span> <span class="n">aii</span>

                <span class="c"># updateResReturn = update_order_results(o,bestComboReturn,now) # expects &quot;o_res&quot; input // returns &quot;o_res&quot; format</span>
                <span class="c">#----------------------------------------------------</span>

                <span class="n">rv_i</span> <span class="o">=</span> <span class="n">returnVar_i</span><span class="p">[:</span><span class="n">deliveryCount</span><span class="p">]</span>
                <span class="n">aii</span> <span class="o">=</span> <span class="n">rv_i</span><span class="o">.</span><span class="n">T</span>
                <span class="n">k</span> <span class="o">=</span> <span class="n">deliveryCount</span><span class="o">-</span><span class="mi">1</span>
                <span class="n">bi</span> <span class="o">=</span> <span class="n">rv_i</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
                <span class="n">bii</span> <span class="o">=</span> <span class="n">updateResReturn</span><span class="o">.</span><span class="n">T</span>
                <span class="n">cii</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">T</span>
                <span class="n">aii</span><span class="p">[</span><span class="mi">0</span><span class="p">][:</span><span class="n">r_o</span><span class="p">]</span> <span class="o">=</span> <span class="n">cii</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>     <span class="c"># id</span>
                <span class="n">bi</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">cii</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">aii</span><span class="p">[</span><span class="mi">1</span><span class="p">][:</span><span class="n">r_o</span><span class="p">]</span> <span class="o">=</span> <span class="n">cii</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>     <span class="c"># dg_X</span>
                <span class="n">bi</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">cii</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">aii</span><span class="p">[</span><span class="mi">2</span><span class="p">][:</span><span class="n">r_o</span><span class="p">]</span> <span class="o">=</span> <span class="n">cii</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>     <span class="c"># dg_y</span>
                <span class="n">bi</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">cii</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">aii</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">bii</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>            <span class="c"># deliveryNum</span>
                <span class="n">aii</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="n">bii</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>            <span class="c"># travelTimeToLocation</span>
                <span class="n">aii</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="n">bii</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>            <span class="c"># deliveryID</span>
                <span class="n">aii</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="n">bii</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>            <span class="c"># orderTime</span>
                <span class="n">aii</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="n">bii</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span>            <span class="c"># start_X</span>
                <span class="n">aii</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="n">bii</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span>            <span class="c"># start_Y</span>
                <span class="n">aii</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span> <span class="o">=</span> <span class="n">bii</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span>            <span class="c"># startTime</span>
                <span class="n">aii</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span> <span class="o">=</span> <span class="n">bii</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span>          <span class="c"># endTime</span>
                <span class="n">aii</span><span class="p">[</span><span class="mi">11</span><span class="p">]</span> <span class="o">=</span> <span class="n">bii</span><span class="p">[</span><span class="mi">11</span><span class="p">]</span>          <span class="c"># end_X</span>
                <span class="n">aii</span><span class="p">[</span><span class="mi">12</span><span class="p">]</span> <span class="o">=</span> <span class="n">bii</span><span class="p">[</span><span class="mi">12</span><span class="p">]</span>          <span class="c"># end_Y</span>
                <span class="n">aii</span><span class="p">[</span><span class="mi">13</span><span class="p">]</span> <span class="o">=</span> <span class="n">bii</span><span class="p">[</span><span class="mi">13</span><span class="p">]</span>          <span class="c"># totalOrderTime</span>
                <span class="n">aii</span><span class="p">[</span><span class="mi">14</span><span class="p">]</span> <span class="o">=</span> <span class="n">bii</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span>           <span class="c"># travelTime</span>
                <span class="n">complete</span> <span class="o">=</span> <span class="mi">1</span>

        <span class="k">if</span> <span class="n">complete</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="c"># checkVar = (order_result.endTime.max() - order_result.startTime.min()) - (order_q_i.endTime.max() - order_q_i.startTime.min())</span>
            <span class="c"># checkVar = ( e2 - s2 ) - ( e1 - s1 )</span>
            <span class="n">aj</span> <span class="o">=</span> <span class="n">rv_i</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">e2</span> <span class="o">=</span> <span class="n">aj</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span>
            <span class="n">s2</span> <span class="o">=</span> <span class="n">aj</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span>
            <span class="n">bj</span> <span class="o">=</span> <span class="n">o</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">e1</span> <span class="o">=</span> <span class="n">bj</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span>
            <span class="n">s1</span> <span class="o">=</span> <span class="n">bj</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">deliveryCount</span><span class="p">):</span>
                <span class="n">aj</span> <span class="o">=</span> <span class="n">rv_i</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
                <span class="n">s</span> <span class="o">=</span> <span class="n">aj</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span>
                <span class="n">e</span> <span class="o">=</span> <span class="n">aj</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">e</span> <span class="o">&gt;</span> <span class="n">e2</span><span class="p">:</span>
                    <span class="n">e2</span> <span class="o">=</span> <span class="n">e</span>
                <span class="k">if</span> <span class="n">s</span> <span class="o">&lt;</span> <span class="n">s2</span><span class="p">:</span>
                    <span class="n">s2</span> <span class="o">=</span> <span class="n">s</span>
                <span class="c">## -------------</span>
                <span class="k">if</span> <span class="n">j</span> <span class="o">!=</span> <span class="n">deliveryCount</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                    <span class="n">bj</span> <span class="o">=</span> <span class="n">o</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
                    <span class="n">s</span> <span class="o">=</span> <span class="n">bj</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span>
                    <span class="n">e</span> <span class="o">=</span> <span class="n">bj</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">e</span> <span class="o">&gt;</span> <span class="n">e1</span><span class="p">:</span>
                        <span class="n">e1</span> <span class="o">=</span> <span class="n">e</span>
                    <span class="k">if</span> <span class="n">s</span> <span class="o">&lt;</span> <span class="n">s1</span><span class="p">:</span>
                        <span class="n">s1</span> <span class="o">=</span> <span class="n">s</span>
                <span class="c">## -------------</span>
            <span class="n">checkVar</span> <span class="o">=</span> <span class="p">(</span><span class="n">e2</span><span class="o">-</span><span class="n">s2</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="n">e1</span><span class="o">-</span><span class="n">s1</span><span class="p">)</span>
            <span class="c"># if i == 0:</span>
            <span class="c">#     returnVars[0][0] = rv_i[0][9]</span>
            <span class="c">#     returnVars[0][1] = rv_i[1][9]</span>
            <span class="c">#     returnVars[0][2] = rv_i[0][10]</span>
            <span class="c">#     returnVars[0][3] = rv_i[1][10]</span>
            <span class="c">#     returnVars[1][0] = o[0][9]</span>
            <span class="c">#     returnVars[1][1] = o[1][9]</span>
            <span class="c">#     returnVars[1][2] = o[0][10]</span>
            <span class="c">#     returnVars[1][3] = o[1][10]</span>
            <span class="c">#     return returnVars</span>
            <span class="k">if</span> <span class="n">checkVar</span> <span class="o">&lt;</span> <span class="n">minVar</span><span class="p">:</span>
                <span class="n">minVar</span> <span class="o">=</span> <span class="n">checkVar</span>
                <span class="n">returnVars</span><span class="p">[:</span><span class="n">deliveryCount</span><span class="p">]</span> <span class="o">=</span> <span class="n">returnVar_i</span><span class="p">[:</span><span class="n">deliveryCount</span><span class="p">]</span>
                <span class="n">returnVars</span><span class="p">[</span><span class="n">deliveryCount</span><span class="p">:]</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="n">ept</span> <span class="o">=</span> <span class="n">deliveryCount</span>
    <span class="n">aii</span> <span class="o">=</span> <span class="n">returnVars</span><span class="p">[:</span><span class="n">ept</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">aii</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">RUN_CHAOS_SIMULATION</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># %pdb</span>
<span class="c"># !ipython nbconvert --to markdown notebook.ipynb --stdout</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="o">%%</span><span class="nx">javascript</span>
<span class="kd">var</span> <span class="nx">kernel</span> <span class="o">=</span> <span class="nx">IPython</span><span class="p">.</span><span class="nx">notebook</span><span class="p">.</span><span class="nx">kernel</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">thename</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;notebook_name&quot;</span><span class="p">).</span><span class="nx">innerHTML</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">command</span> <span class="o">=</span> <span class="s2">&quot;theNotebook = &quot;</span> <span class="o">+</span> <span class="s2">&quot;&#39;&quot;</span><span class="o">+</span><span class="nx">thename</span><span class="o">+</span><span class="s2">&quot;.ipynb&#39;&quot;</span><span class="p">;</span>
<span class="nx">kernel</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="nx">command</span><span class="p">);</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">nb_name</span> <span class="o">=</span> <span class="err">!</span><span class="n">echo</span> <span class="s">&#39;$theNotebook&#39;</span>
<span class="n">this_notebook_text</span> <span class="o">=</span> <span class="err">!</span><span class="n">ipython</span> <span class="n">nbconvert</span> <span class="o">--</span><span class="n">to</span> <span class="n">python</span> <span class="s">&#39;$theNotebook&#39;</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="o">%</span><span class="k">less</span> <span class="p">{</span><span class="n">nb_name</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;ipynb&#39;</span><span class="p">,</span><span class="s">&#39;py&#39;</span><span class="p">)}</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># c_get_best_combo</span>




<span class="o">%%</span><span class="k">cython</span>
<span class="n">cimport</span> <span class="n">cython</span>
<span class="nd">@cython.nonecheck</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
<span class="nd">@cython.boundscheck</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
<span class="nd">@cython.wraparound</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
<span class="n">cpdef</span> <span class="nb">long</span><span class="p">[:,::</span><span class="mi">1</span><span class="p">]</span> <span class="n">c_get_best_combo</span><span class="p">(</span> <span class="nb">long</span><span class="p">[::</span><span class="mi">1</span><span class="p">]</span> <span class="n">p1</span><span class="p">,</span>                   <span class="c"># p1/p2 are pairs for all unique node combos</span>
                                    <span class="nb">long</span><span class="p">[::</span><span class="mi">1</span><span class="p">]</span> <span class="n">p2</span><span class="p">,</span>   <span class="c">#long[:,::1] node_list,          # matrix of nodes for all realCombos</span>
                                    <span class="nb">long</span><span class="p">[::</span><span class="mi">1</span><span class="p">]</span> <span class="n">minutes</span><span class="p">,</span>               <span class="c"># the calculated distance in miles for each pair</span>
                                    <span class="nb">long</span><span class="p">[::</span><span class="mi">1</span><span class="p">]</span> <span class="n">total_time</span><span class="p">,</span>         <span class="c"># an empty array for inserting total distance</span>
                                    <span class="n">double</span> <span class="n">MPH</span><span class="p">,</span>                     <span class="c"># speed to use in finding time from distance</span>
                                    <span class="nb">long</span> <span class="n">tripStartPt</span><span class="p">,</span>
                                    <span class="nb">long</span><span class="p">[:,</span> <span class="p">:]</span> <span class="n">mockCombos</span><span class="p">,</span>
                                    <span class="nb">long</span><span class="p">[:,</span> <span class="p">::</span><span class="mi">1</span><span class="p">]</span> <span class="n">realCombos</span><span class="p">,</span>
                                    <span class="nb">long</span><span class="p">[:,</span> <span class="p">:]</span> <span class="n">orderSK</span><span class="p">,</span>
                                    <span class="nb">long</span><span class="p">[:,</span> <span class="p">:]</span> <span class="n">pointSK</span><span class="p">,</span>
                                    <span class="nb">long</span><span class="p">[::</span><span class="mi">1</span><span class="p">]</span> <span class="n">orderTimes</span><span class="p">,</span>
                                    <span class="nb">long</span><span class="p">[::</span><span class="mi">1</span><span class="p">]</span> <span class="n">deliveryIDs</span><span class="p">,</span>
                                    <span class="nb">long</span> <span class="n">deliv_cnt</span><span class="p">,</span>
                                    <span class="nb">long</span> <span class="n">tripStartTime</span><span class="p">,</span>
                                    <span class="nb">long</span> <span class="n">sp</span><span class="p">,</span>
                                    <span class="nb">long</span> <span class="n">maxOrderTime</span><span class="p">,</span>
                                    <span class="nb">long</span> <span class="n">maxTravelTime</span><span class="p">,</span>
                                    <span class="nb">long</span><span class="p">[:,::</span><span class="mi">1</span><span class="p">]</span> <span class="n">tT</span><span class="p">,</span>                 <span class="c"># c_travelTimes</span>
                                    <span class="nb">long</span><span class="p">[:,::</span><span class="mi">1</span><span class="p">]</span> <span class="n">sT</span><span class="p">,</span>                 <span class="c"># c_startTimes</span>
                                    <span class="nb">long</span><span class="p">[:,::</span><span class="mi">1</span><span class="p">]</span> <span class="n">eT</span><span class="p">,</span>                 <span class="c"># c_endTimes</span>
                                    <span class="nb">long</span><span class="p">[:,::</span><span class="mi">1</span><span class="p">]</span> <span class="n">odt</span><span class="p">,</span>                <span class="c"># c_odtTimes</span>
                                    <span class="nb">long</span><span class="p">[::</span><span class="mi">1</span><span class="p">]</span> <span class="n">oMax</span><span class="p">,</span>                 <span class="c"># c_MaxOrderToDeliveryTimes</span>
                                    <span class="nb">long</span><span class="p">[::</span><span class="mi">1</span><span class="p">]</span> <span class="n">tMax</span><span class="p">,</span>                 <span class="c"># c_MaxTravelToLocTimes</span>
                                    <span class="nb">long</span><span class="p">[:,::</span><span class="mi">1</span><span class="p">]</span> <span class="n">tdd</span><span class="p">,</span>                <span class="c"># c_tddTimes</span>
                                    <span class="nb">long</span><span class="p">[::</span><span class="mi">1</span><span class="p">]</span> <span class="n">ctm</span><span class="p">,</span>                  <span class="c"># c_ctMarker</span>
                                    <span class="nb">long</span><span class="p">[:,::</span><span class="mi">1</span><span class="p">]</span> <span class="n">return_orders</span><span class="p">):</span>     <span class="c"># c_returnVars</span>


    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    </span>
<span class="sd">    Assume [1,0] = orderSK, a.k.a. Order Sort Key.</span>
<span class="sd">     the &#39;1&#39; being first means the second order, i.e., order B, is picked up first.</span>
<span class="sd">     thus, orderSK[0] = 1.</span>

<span class="sd">    Assume [1,3,0,2] = pointSK, a.k.a. Point Sort Key, which corresponds to points [A1,A2,B1,B2].</span>
<span class="sd">     the &#39;1&#39; at the beginning means the pickup of the first order, i.e., A1, occurs at index 1 in the route.</span>
<span class="sd">     the &#39;0&#39; in the third position means that pickup of B1 occurs at index 0 in the route.</span>

<span class="sd">    In order to identify the X-axis location of a point on a particular order,</span>
<span class="sd">     Start with the order key, which shows that the second order pickup precedes the first order pickup.</span>
<span class="sd">         deliveryNum = 1 and the second order is the subject of the first iteration of return_orders.</span>
<span class="sd">     Now, orderSK[e]=1 can be used as an index in pointSK to identify the index of B1 in the permutated array of locations.</span>
<span class="sd">         (The &#39;*2&#39; keeps the index consistent with an order pickup being every other point in [A1,A2,B1,B2,...n1,n2].)</span>
<span class="sd">    </span>
<span class="sd">    # RETURNS</span>

<span class="sd">            [&#39;dg_node&#39;,&#39;deliv_num&#39;,&#39;deliv_id&#39;,&#39;order_time&#39;,</span>
<span class="sd">             &#39;travel_time_to_loc&#39;,&#39;start_node&#39;,&#39;start_time&#39;,</span>
<span class="sd">             &#39;travel_time&#39;,&#39;end_time&#39;,&#39;end_node&#39;,&#39;total_order_time&#39;,&#39;bestIndex&#39;]</span>
<span class="sd">             </span>
<span class="sd">             </span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">cdef</span> <span class="nb">long</span> <span class="n">r</span> <span class="o">=</span> <span class="n">mockCombos</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>                <span class="c"># number of rows</span>
    <span class="n">cdef</span> <span class="nb">long</span> <span class="n">pts</span> <span class="o">=</span> <span class="n">mockCombos</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>              <span class="c"># number of pts</span>
    <span class="n">cdef</span> <span class="nb">long</span> <span class="n">BI</span> <span class="o">=</span> <span class="n">r</span><span class="o">+</span><span class="mi">1</span>                              <span class="c"># time in between each pt, best index.</span>
    <span class="n">cdef</span> <span class="nb">long</span> <span class="n">minT</span> <span class="o">=</span> <span class="p">(</span><span class="mi">8</span><span class="o">*</span><span class="n">maxOrderTime</span><span class="p">)</span>               <span class="c"># minimum total route time (assuming 8 routes is max route #)</span>
    <span class="n">cdef</span> <span class="nb">long</span> <span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">,</span><span class="n">e</span><span class="p">,</span><span class="n">t</span>
    <span class="n">cdef</span> <span class="nb">long</span> <span class="n">mc_pt</span><span class="p">,</span><span class="n">orderSK_pt</span><span class="p">,</span><span class="n">odt_pt</span><span class="p">,</span><span class="n">ttl_pt</span><span class="p">,</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">sT_pt</span><span class="p">,</span><span class="n">eT_pt</span><span class="p">,</span><span class="n">xpta</span><span class="p">,</span><span class="n">ypta</span><span class="p">,</span><span class="n">xptb</span><span class="p">,</span><span class="n">yptb</span>

    <span class="n">cdef</span> <span class="nb">int</span> <span class="n">m_len</span> <span class="o">=</span> <span class="n">minutes</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">cdef</span> <span class="nb">long</span> <span class="n">_min</span>
    <span class="n">cdef</span> <span class="nb">long</span><span class="p">[:]</span> <span class="n">row</span>
    <span class="n">cdef</span> <span class="nb">long</span> <span class="n">ptA</span>
    <span class="n">cdef</span> <span class="nb">long</span> <span class="n">ptB</span>
    <span class="n">cdef</span> <span class="nb">long</span> <span class="n">p1_p</span>
    <span class="n">cdef</span> <span class="nb">long</span> <span class="n">p2_p</span>
    <span class="n">cdef</span> <span class="nb">int</span> <span class="n">p</span>

    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">pts</span><span class="p">):</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">r</span><span class="p">):</span>

            <span class="k">if</span> <span class="n">j</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">ctm</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">tripStartTime</span>
                <span class="n">tT</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">tripStartTime</span>
                <span class="n">tMax</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">tripStartTime</span>
                <span class="k">pass</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">ptA</span><span class="o">=</span><span class="n">realCombos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">ptB</span><span class="o">=</span><span class="n">realCombos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span>
                <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">m_len</span><span class="p">):</span>
                    <span class="n">p1_p</span> <span class="o">=</span> <span class="n">p1</span><span class="p">[</span><span class="n">p</span><span class="p">]</span>
                    <span class="n">p2_p</span> <span class="o">=</span> <span class="n">p2</span><span class="p">[</span><span class="n">p</span><span class="p">]</span>
                    <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="n">ptA</span><span class="o">==</span><span class="n">p1_p</span> <span class="ow">and</span> <span class="n">ptB</span><span class="o">==</span><span class="n">p2_p</span><span class="p">)</span> <span class="ow">or</span>
                         <span class="p">(</span><span class="n">ptA</span><span class="o">==</span><span class="n">p2_p</span> <span class="ow">and</span> <span class="n">ptB</span><span class="o">==</span><span class="n">p1_p</span><span class="p">)</span> <span class="p">):</span>
                            <span class="n">t</span> <span class="o">=</span> <span class="n">minutes</span><span class="p">[</span><span class="n">p</span><span class="p">]</span>
                            <span class="n">ctm</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+=</span> <span class="n">t</span>
                            <span class="n">tT</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">t</span>
                            <span class="k">if</span> <span class="n">t</span> <span class="o">&gt;</span> <span class="n">tMax</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span>
                                <span class="n">tMax</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">t</span>
                            <span class="k">break</span>

            <span class="n">mc_pt</span> <span class="o">=</span> <span class="n">mockCombos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">mc_pt</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="p">:</span>         <span class="n">sT</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">mc_pt</span><span class="p">]</span> <span class="o">=</span> <span class="n">ctm</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">+</span><span class="n">tripStartTime</span>
            <span class="k">else</span><span class="p">:</span>                   <span class="n">eT</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">mc_pt</span><span class="o">-</span><span class="mi">100</span><span class="p">]</span> <span class="o">=</span> <span class="n">ctm</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">+</span><span class="n">tripStartTime</span>

            <span class="k">if</span> <span class="n">j</span> <span class="o">==</span> <span class="n">pts</span><span class="o">-</span><span class="mi">1</span> <span class="ow">and</span> <span class="n">tMax</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">maxTravelTime</span><span class="p">:</span> <span class="c"># this is the last part of the 2D iteration</span>
                                                        <span class="c"># if max travelToLoc time is acceptable --&gt; find Best Index</span>
                <span class="n">oMax</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">deliv_cnt</span><span class="p">):</span>
                    <span class="n">orderSK_pt</span>          <span class="o">=</span> <span class="n">orderSK</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">k</span><span class="p">]</span>
                    <span class="n">eT_pt</span>               <span class="o">=</span> <span class="n">eT</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">orderSK_pt</span><span class="p">]</span>
                    <span class="n">tdd</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">orderSK_pt</span><span class="p">]</span>  <span class="o">=</span> <span class="n">eT_pt</span><span class="o">-</span><span class="n">sT</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">orderSK_pt</span><span class="p">]</span>
                    <span class="n">odt_pt</span>              <span class="o">=</span> <span class="n">eT_pt</span><span class="o">-</span><span class="n">orderTimes</span><span class="p">[</span><span class="n">orderSK_pt</span><span class="p">]</span>
                    <span class="n">odt</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">orderSK_pt</span><span class="p">]</span>  <span class="o">=</span> <span class="n">odt_pt</span>
                    <span class="k">if</span> <span class="n">odt_pt</span> <span class="o">&gt;</span> <span class="n">oMax</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span>
                        <span class="n">oMax</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">odt_pt</span>            <span class="c"># update max order-to-delivery time [ per row ] -- keeping biggest value</span>

                <span class="k">if</span> <span class="n">oMax</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">!=</span><span class="mi">0</span> <span class="ow">and</span> <span class="n">oMax</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">&lt;=</span><span class="n">maxOrderTime</span><span class="p">:</span> <span class="c"># if order-to-delivery max is valid and acceptable</span>
                    <span class="k">if</span> <span class="n">ctm</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">&lt;</span><span class="n">minT</span><span class="p">:</span>                 <span class="c"># for all acceptable rows, keep one with lowest cumul. time.</span>
                        <span class="n">minT</span><span class="o">=</span><span class="n">ctm</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                        <span class="n">BI</span><span class="o">=</span><span class="n">i</span>                        <span class="c"># setting Best Index</span>

    <span class="k">if</span> <span class="n">minT</span><span class="o">==</span><span class="mi">8</span><span class="o">*</span><span class="n">maxOrderTime</span><span class="p">:</span>
        <span class="n">return_orders</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">13</span><span class="p">]</span><span class="o">=</span><span class="mi">999</span>                      <span class="c"># interpretted on return as an error</span>
        <span class="n">return_orders</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">12</span><span class="p">]</span><span class="o">=</span><span class="n">BI</span>
        <span class="n">return_orders</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">13</span><span class="p">]</span><span class="o">=</span><span class="mi">999</span>
        <span class="k">return</span> <span class="n">return_orders</span>
    <span class="k">elif</span> <span class="n">BI</span> <span class="o">==</span> <span class="n">r</span><span class="o">+</span><span class="mi">1</span><span class="p">:</span>
        <span class="n">return_orders</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">13</span><span class="p">]</span><span class="o">=</span><span class="mi">505</span>                      <span class="c"># interpretted on return as an error</span>
        <span class="n">return_orders</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">13</span><span class="p">]</span><span class="o">=</span><span class="mi">505</span>                    <span class="c"># interpretted on return as &quot;error setting best index&quot;</span>
        <span class="k">return</span> <span class="n">return_orders</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">deliv_cnt</span><span class="p">):</span>
            <span class="n">orderSK_pt</span><span class="o">=</span><span class="n">orderSK</span><span class="p">[</span><span class="n">BI</span><span class="p">][</span><span class="n">e</span><span class="p">]</span>
            <span class="n">return_orders</span><span class="p">[</span><span class="n">e</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">tripStartPt</span>           <span class="c"># dg_X</span>
            <span class="n">return_orders</span><span class="p">[</span><span class="n">e</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">orderSK_pt</span><span class="o">+</span><span class="mi">1</span>              <span class="c"># deliveryNum (starts at zero)</span>
            <span class="n">return_orders</span><span class="p">[</span><span class="n">e</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">deliveryIDs</span><span class="p">[</span><span class="n">orderSK_pt</span><span class="p">]</span>   <span class="c"># deliveryID (already sorted by key)</span>
            <span class="n">return_orders</span><span class="p">[</span><span class="n">e</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">orderTimes</span><span class="p">[</span><span class="n">orderSK_pt</span><span class="p">]</span>    <span class="c"># orderTime</span>
            <span class="n">mc_pt</span><span class="o">=</span><span class="n">pointSK</span><span class="p">[</span><span class="n">BI</span><span class="p">][</span><span class="n">orderSK_pt</span><span class="o">*</span><span class="mi">2</span><span class="p">]</span>
            <span class="n">return_orders</span><span class="p">[</span><span class="n">e</span><span class="p">][</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="n">tT</span><span class="p">[</span><span class="n">BI</span><span class="p">][</span><span class="n">mc_pt</span><span class="p">]</span>             <span class="c"># travelTimeToLoc</span>
            <span class="n">return_orders</span><span class="p">[</span><span class="n">e</span><span class="p">][</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="n">realCombos</span><span class="p">[</span><span class="n">BI</span><span class="p">][</span><span class="n">mc_pt</span><span class="p">]</span>   <span class="c"># startX // see below for explanation</span>
            <span class="n">return_orders</span><span class="p">[</span><span class="n">e</span><span class="p">][</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="n">sT</span><span class="p">[</span><span class="n">BI</span><span class="p">][</span><span class="n">orderSK_pt</span><span class="p">]</span>        <span class="c"># startTime</span>
            <span class="n">return_orders</span><span class="p">[</span><span class="n">e</span><span class="p">][</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="n">tdd</span><span class="p">[</span><span class="n">BI</span><span class="p">][</span><span class="n">orderSK_pt</span><span class="p">]</span>       <span class="c"># travelTime</span>
            <span class="n">return_orders</span><span class="p">[</span><span class="n">e</span><span class="p">][</span><span class="mi">8</span><span class="p">]</span><span class="o">=</span> <span class="n">eT</span><span class="p">[</span><span class="n">BI</span><span class="p">][</span><span class="n">orderSK_pt</span><span class="p">]</span>        <span class="c"># endTime</span>
            <span class="n">mc_pt</span><span class="o">=</span><span class="n">pointSK</span><span class="p">[</span><span class="n">BI</span><span class="p">][(</span><span class="n">orderSK_pt</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">return_orders</span><span class="p">[</span><span class="n">e</span><span class="p">][</span><span class="mi">9</span><span class="p">]</span><span class="o">=</span> <span class="n">realCombos</span><span class="p">[</span><span class="n">BI</span><span class="p">][</span><span class="n">mc_pt</span><span class="p">]</span>      <span class="c"># endX</span>
            <span class="n">return_orders</span><span class="p">[</span><span class="n">e</span><span class="p">][</span><span class="mi">10</span><span class="p">]</span><span class="o">=</span> <span class="n">odt</span><span class="p">[</span><span class="n">BI</span><span class="p">][</span><span class="n">orderSK_pt</span><span class="p">]</span>       <span class="c"># totalOrderTime</span>
            <span class="n">return_orders</span><span class="p">[</span><span class="n">e</span><span class="p">][</span><span class="mi">11</span><span class="p">]</span><span class="o">=</span> <span class="n">BI</span>
        <span class="k">return</span> <span class="n">return_orders</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># c_get_best_combo -- DRAFT </span>
<span class="n">realCombos</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span>
                       <span class="p">[</span><span class="mi">4417</span><span class="p">,</span> <span class="mi">4417</span><span class="p">,</span>  <span class="mi">430</span><span class="p">,</span> <span class="mi">2581</span><span class="p">],</span>
                       <span class="p">[</span><span class="mi">4417</span><span class="p">,</span>  <span class="mi">430</span><span class="p">,</span> <span class="mi">4417</span><span class="p">,</span> <span class="mi">2581</span><span class="p">],</span>
                       <span class="p">[</span> <span class="mi">430</span><span class="p">,</span> <span class="mi">4417</span><span class="p">,</span> <span class="mi">4417</span><span class="p">,</span> <span class="mi">2581</span><span class="p">],</span>
                       <span class="p">[</span><span class="mi">4417</span><span class="p">,</span>  <span class="mi">430</span><span class="p">,</span> <span class="mi">2581</span><span class="p">,</span> <span class="mi">4417</span><span class="p">],</span>
                       <span class="p">[</span> <span class="mi">430</span><span class="p">,</span> <span class="mi">4417</span><span class="p">,</span> <span class="mi">2581</span><span class="p">,</span> <span class="mi">4417</span><span class="p">],</span>
                       <span class="p">[</span> <span class="mi">430</span><span class="p">,</span> <span class="mi">2581</span><span class="p">,</span> <span class="mi">4417</span><span class="p">,</span> <span class="mi">4417</span><span class="p">]]),</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">)</span>

<span class="n">p1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>      <span class="p">[</span><span class="mi">4417</span><span class="p">,</span> <span class="mi">4417</span><span class="p">,</span> <span class="mi">2581</span><span class="p">]</span> <span class="p">),</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">)</span>
<span class="n">p2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>      <span class="p">[</span><span class="mi">2581</span><span class="p">,</span> <span class="mi">430</span> <span class="p">,</span> <span class="mi">430</span> <span class="p">]</span> <span class="p">),</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">)</span>
<span class="n">minutes</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span> <span class="p">[</span><span class="mi">46</span>  <span class="p">,</span> <span class="mi">12</span>  <span class="p">,</span> <span class="mi">41</span>  <span class="p">]</span> <span class="p">),</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">)</span>

<span class="n">mockCombos</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span> 
                        <span class="p">[</span>  <span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span>   <span class="mi">1</span><span class="p">,</span> <span class="mi">101</span><span class="p">],</span>
                        <span class="p">[</span>  <span class="mi">0</span><span class="p">,</span>   <span class="mi">1</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">101</span><span class="p">],</span>
                        <span class="p">[</span>  <span class="mi">1</span><span class="p">,</span>   <span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">101</span><span class="p">],</span>
                        <span class="p">[</span>  <span class="mi">0</span><span class="p">,</span>   <span class="mi">1</span><span class="p">,</span> <span class="mi">101</span><span class="p">,</span> <span class="mi">100</span><span class="p">],</span>
                        <span class="p">[</span>  <span class="mi">1</span><span class="p">,</span>   <span class="mi">0</span><span class="p">,</span> <span class="mi">101</span><span class="p">,</span> <span class="mi">100</span><span class="p">],</span>
                        <span class="p">[</span>  <span class="mi">1</span><span class="p">,</span> <span class="mi">101</span><span class="p">,</span>   <span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">]]),</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">)</span>

<span class="n">sT</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span>
                           <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                           <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                           <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                           <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                           <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                           <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]]),</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">)</span>

<span class="n">eT</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span>
                           <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                           <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                           <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                           <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                           <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                           <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]]),</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">)</span>

<span class="n">c_odtTimes_r</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span>  
                           <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                           <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                           <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                           <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                           <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                           <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]]),</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">)</span>

<span class="n">c_oMaxTimes_r</span><span class="p">,</span> <span class="n">c_tMaxTimes_r</span><span class="p">,</span> <span class="n">c_tddTimes_r</span> <span class="o">=</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]),</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">),</span> 
                                              <span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]),</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">),</span> 
                                              <span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span>   
                                                            <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                                                            <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                                                            <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                                                            <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                                                            <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                                                            <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]]),</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">))</span>

<span class="n">c_ctMarker_r</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]),</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">)</span>
<span class="n">return_orders</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span>
                    <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                    <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]],</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">))</span>

<span class="n">maxTravelTime</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span>

<span class="n">pts</span><span class="p">,</span><span class="n">r</span><span class="p">,</span><span class="n">tripStartTime</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">13</span>
<span class="n">m_len</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">tT</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span>  
                               <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                               <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                               <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                               <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                               <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                               <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]]),</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">)</span>
<span class="n">ctm</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]),</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">)</span>
<span class="n">tMax</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]),</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">)</span>
<span class="n">maxOrderTime</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">(</span><span class="mi">40</span><span class="p">)</span>
<span class="n">minT</span> <span class="o">=</span> <span class="p">(</span><span class="mi">8</span><span class="o">*</span><span class="n">maxOrderTime</span><span class="p">)</span>
<span class="n">BI</span> <span class="o">=</span> <span class="n">r</span><span class="o">+</span><span class="mi">1</span>
<span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">pts</span><span class="p">):</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">r</span><span class="p">):</span>

        <span class="k">if</span> <span class="n">j</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">ctm</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">tripStartTime</span>
            <span class="n">tT</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">tripStartTime</span>
            <span class="n">tMax</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">tripStartTime</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ptA</span><span class="o">=</span><span class="n">realCombos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">ptB</span><span class="o">=</span><span class="n">realCombos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">m_len</span><span class="p">):</span>
                <span class="n">p1_p</span> <span class="o">=</span> <span class="n">p1</span><span class="p">[</span><span class="n">p</span><span class="p">]</span>
                <span class="n">p2_p</span> <span class="o">=</span> <span class="n">p2</span><span class="p">[</span><span class="n">p</span><span class="p">]</span>
                <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="n">ptA</span><span class="o">==</span><span class="n">p1_p</span> <span class="ow">and</span> <span class="n">ptB</span><span class="o">==</span><span class="n">p2_p</span><span class="p">)</span> <span class="ow">or</span>
                     <span class="p">(</span><span class="n">ptA</span><span class="o">==</span><span class="n">p2_p</span> <span class="ow">and</span> <span class="n">ptB</span><span class="o">==</span><span class="n">p1_p</span><span class="p">)</span> <span class="p">):</span>
                        <span class="n">t</span> <span class="o">=</span> <span class="n">minutes</span><span class="p">[</span><span class="n">p</span><span class="p">]</span>
                        <span class="n">ctm</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+=</span> <span class="n">t</span>
                        <span class="n">tT</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">t</span>
                        <span class="k">if</span> <span class="n">t</span> <span class="o">&gt;</span> <span class="n">tMax</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span>
                            <span class="n">tMax</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">t</span>
                        <span class="k">break</span>
                        
        <span class="n">mc_pt</span> <span class="o">=</span> <span class="n">mockCombos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">mc_pt</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="p">:</span>         <span class="n">sT</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">mc_pt</span><span class="p">]</span> <span class="o">=</span> <span class="n">ctm</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">+</span><span class="n">tripStartTime</span>
        <span class="k">else</span><span class="p">:</span>                   <span class="n">eT</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">mc_pt</span><span class="o">-</span><span class="mi">100</span><span class="p">]</span> <span class="o">=</span> <span class="n">ctm</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">+</span><span class="n">tripStartTime</span>

        <span class="k">if</span> <span class="n">j</span> <span class="o">==</span> <span class="n">pts</span><span class="o">-</span><span class="mi">1</span> <span class="ow">and</span> <span class="n">tMax</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">maxTravelTime</span><span class="p">:</span> <span class="c"># this is the last part of the 2D iteration</span>
                                                    <span class="c"># if max travelToLoc time is acceptable --&gt; find Best Index</span>
            <span class="n">oMax</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">deliv_cnt</span><span class="p">):</span>
                <span class="n">orderSK_pt</span>          <span class="o">=</span> <span class="n">orderSK</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">k</span><span class="p">]</span>
                <span class="n">eT_pt</span>               <span class="o">=</span> <span class="n">eT</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">orderSK_pt</span><span class="p">]</span>
                <span class="n">tdd</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">orderSK_pt</span><span class="p">]</span>  <span class="o">=</span> <span class="n">eT_pt</span><span class="o">-</span><span class="n">sT</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">orderSK_pt</span><span class="p">]</span>
                <span class="n">odt_pt</span>              <span class="o">=</span> <span class="n">eT_pt</span><span class="o">-</span><span class="n">orderTimes</span><span class="p">[</span><span class="n">orderSK_pt</span><span class="p">]</span>
                <span class="n">odt</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">orderSK_pt</span><span class="p">]</span>  <span class="o">=</span> <span class="n">odt_pt</span>
                <span class="k">if</span> <span class="n">odt_pt</span> <span class="o">&gt;</span> <span class="n">oMax</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span>
                    <span class="n">oMax</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">odt_pt</span>            <span class="c"># update max order-to-delivery time [ per row ] -- keeping biggest value</span>

            <span class="k">if</span> <span class="n">oMax</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">!=</span><span class="mi">0</span> <span class="ow">and</span> <span class="n">oMax</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">&lt;=</span><span class="n">maxOrderTime</span><span class="p">:</span> <span class="c"># if order-to-delivery max is valid and acceptable</span>
                <span class="k">if</span> <span class="n">ctm</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">&lt;</span><span class="n">minT</span><span class="p">:</span>                 <span class="c"># for all acceptable rows, keep one with lowest cumul. time.</span>
                    <span class="n">minT</span><span class="o">=</span><span class="n">ctm</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                    <span class="n">BI</span><span class="o">=</span><span class="n">i</span>                        <span class="c"># setting Best Index</span>
    
<span class="k">if</span> <span class="n">minT</span><span class="o">==</span><span class="mi">8</span><span class="o">*</span><span class="n">maxOrderTime</span><span class="p">:</span>
    <span class="n">return_orders</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">13</span><span class="p">]</span><span class="o">=</span><span class="mi">999</span>                      <span class="c"># interpretted on return as an error</span>
    <span class="n">return_orders</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">12</span><span class="p">]</span><span class="o">=</span><span class="n">BI</span>
    <span class="n">return_orders</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">13</span><span class="p">]</span><span class="o">=</span><span class="mi">999</span>
    <span class="k">print</span> <span class="s">&#39;1&#39;</span><span class="p">,</span> <span class="n">return_orders</span>
<span class="k">elif</span> <span class="n">BI</span> <span class="o">==</span> <span class="n">r</span><span class="o">+</span><span class="mi">1</span><span class="p">:</span>
    <span class="n">return_orders</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">13</span><span class="p">]</span><span class="o">=</span><span class="mi">505</span>                      <span class="c"># interpretted on return as an error</span>
    <span class="n">return_orders</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">13</span><span class="p">]</span><span class="o">=</span><span class="mi">505</span>                    <span class="c"># interpretted on return as &quot;error setting best index&quot;</span>
    <span class="k">print</span> <span class="s">&#39;2&#39;</span><span class="p">,</span><span class="n">return_orders</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">deliv_cnt</span><span class="p">):</span>
        <span class="n">orderSK_pt</span><span class="o">=</span><span class="n">orderSK</span><span class="p">[</span><span class="n">BI</span><span class="p">][</span><span class="n">e</span><span class="p">]</span>
        <span class="n">return_orders</span><span class="p">[</span><span class="n">e</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">tripStartPt</span>           <span class="c"># dg_X</span>
        <span class="n">return_orders</span><span class="p">[</span><span class="n">e</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">orderSK_pt</span><span class="o">+</span><span class="mi">1</span>              <span class="c"># deliveryNum (starts at zero)</span>
        <span class="n">return_orders</span><span class="p">[</span><span class="n">e</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">deliveryIDs</span><span class="p">[</span><span class="n">orderSK_pt</span><span class="p">]</span>   <span class="c"># deliveryID (already sorted by key)</span>
        <span class="n">return_orders</span><span class="p">[</span><span class="n">e</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">orderTimes</span><span class="p">[</span><span class="n">orderSK_pt</span><span class="p">]</span>    <span class="c"># orderTime</span>
        <span class="n">mc_pt</span><span class="o">=</span><span class="n">pointSK</span><span class="p">[</span><span class="n">BI</span><span class="p">][</span><span class="n">orderSK_pt</span><span class="o">*</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">return_orders</span><span class="p">[</span><span class="n">e</span><span class="p">][</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="n">tT</span><span class="p">[</span><span class="n">BI</span><span class="p">][</span><span class="n">mc_pt</span><span class="p">]</span>             <span class="c"># travelTimeToLoc</span>
        <span class="n">return_orders</span><span class="p">[</span><span class="n">e</span><span class="p">][</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="n">realCombo</span><span class="p">[</span><span class="n">BI</span><span class="p">][</span><span class="n">mc_pt</span><span class="p">]</span>   <span class="c"># startX // see below for explanation</span>
        <span class="n">return_orders</span><span class="p">[</span><span class="n">e</span><span class="p">][</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="n">sT</span><span class="p">[</span><span class="n">BI</span><span class="p">][</span><span class="n">orderSK_pt</span><span class="p">]</span>        <span class="c"># startTime</span>
        <span class="n">return_orders</span><span class="p">[</span><span class="n">e</span><span class="p">][</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="n">tdd</span><span class="p">[</span><span class="n">BI</span><span class="p">][</span><span class="n">orderSK_pt</span><span class="p">]</span>       <span class="c"># travelTime</span>
        <span class="n">return_orders</span><span class="p">[</span><span class="n">e</span><span class="p">][</span><span class="mi">8</span><span class="p">]</span><span class="o">=</span> <span class="n">eT</span><span class="p">[</span><span class="n">BI</span><span class="p">][</span><span class="n">orderSK_pt</span><span class="p">]</span>        <span class="c"># endTime</span>
        <span class="n">mc_pt</span><span class="o">=</span><span class="n">pointSK</span><span class="p">[</span><span class="n">BI</span><span class="p">][(</span><span class="n">orderSK_pt</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">return_orders</span><span class="p">[</span><span class="n">e</span><span class="p">][</span><span class="mi">9</span><span class="p">]</span><span class="o">=</span> <span class="n">realCombo</span><span class="p">[</span><span class="n">BI</span><span class="p">][</span><span class="n">mc_pt</span><span class="p">]</span>      <span class="c"># endX</span>
        <span class="n">return_orders</span><span class="p">[</span><span class="n">e</span><span class="p">][</span><span class="mi">10</span><span class="p">]</span><span class="o">=</span> <span class="n">odt</span><span class="p">[</span><span class="n">BI</span><span class="p">][</span><span class="n">orderSK_pt</span><span class="p">]</span>       <span class="c"># totalOrderTime</span>
        <span class="n">return_orders</span><span class="p">[</span><span class="n">e</span><span class="p">][</span><span class="mi">11</span><span class="p">]</span><span class="o">=</span> <span class="n">BI</span>
    <span class="k">print</span> <span class="s">&#39;3&#39;</span><span class="p">,</span><span class="n">return_orders</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># c_get_best_combo -- Sample Vars</span>
<span class="n">p1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>      <span class="p">[</span><span class="mi">4417</span><span class="p">,</span> <span class="mi">4417</span><span class="p">,</span> <span class="mi">2581</span><span class="p">]</span> <span class="p">),</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">)</span>
<span class="n">p2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>      <span class="p">[</span><span class="mi">2581</span><span class="p">,</span> <span class="mi">430</span> <span class="p">,</span> <span class="mi">430</span> <span class="p">]</span> <span class="p">),</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">)</span>
<span class="n">minutes</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span> <span class="p">[</span><span class="mi">46</span>  <span class="p">,</span> <span class="mi">12</span>  <span class="p">,</span> <span class="mi">41</span>  <span class="p">]</span> <span class="p">),</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">)</span>
<span class="n">total_time</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]),</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">)</span>
<span class="n">MPH</span> <span class="o">=</span> <span class="mf">3.25</span>
<span class="n">tripStartPt</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">(</span><span class="mi">4417</span><span class="p">)</span>

<span class="n">mockCombos</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span> 
                        <span class="p">[</span>  <span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span>   <span class="mi">1</span><span class="p">,</span> <span class="mi">101</span><span class="p">],</span>
                        <span class="p">[</span>  <span class="mi">0</span><span class="p">,</span>   <span class="mi">1</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">101</span><span class="p">],</span>
                        <span class="p">[</span>  <span class="mi">1</span><span class="p">,</span>   <span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">101</span><span class="p">],</span>
                        <span class="p">[</span>  <span class="mi">0</span><span class="p">,</span>   <span class="mi">1</span><span class="p">,</span> <span class="mi">101</span><span class="p">,</span> <span class="mi">100</span><span class="p">],</span>
                        <span class="p">[</span>  <span class="mi">1</span><span class="p">,</span>   <span class="mi">0</span><span class="p">,</span> <span class="mi">101</span><span class="p">,</span> <span class="mi">100</span><span class="p">],</span>
                        <span class="p">[</span>  <span class="mi">1</span><span class="p">,</span> <span class="mi">101</span><span class="p">,</span>   <span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">]]),</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">)</span>

<span class="n">realCombos</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span>
                       <span class="p">[</span><span class="mi">4417</span><span class="p">,</span> <span class="mi">4417</span><span class="p">,</span>  <span class="mi">430</span><span class="p">,</span> <span class="mi">2581</span><span class="p">],</span>
                       <span class="p">[</span><span class="mi">4417</span><span class="p">,</span>  <span class="mi">430</span><span class="p">,</span> <span class="mi">4417</span><span class="p">,</span> <span class="mi">2581</span><span class="p">],</span>
                       <span class="p">[</span> <span class="mi">430</span><span class="p">,</span> <span class="mi">4417</span><span class="p">,</span> <span class="mi">4417</span><span class="p">,</span> <span class="mi">2581</span><span class="p">],</span>
                       <span class="p">[</span><span class="mi">4417</span><span class="p">,</span>  <span class="mi">430</span><span class="p">,</span> <span class="mi">2581</span><span class="p">,</span> <span class="mi">4417</span><span class="p">],</span>
                       <span class="p">[</span> <span class="mi">430</span><span class="p">,</span> <span class="mi">4417</span><span class="p">,</span> <span class="mi">2581</span><span class="p">,</span> <span class="mi">4417</span><span class="p">],</span>
                       <span class="p">[</span> <span class="mi">430</span><span class="p">,</span> <span class="mi">2581</span><span class="p">,</span> <span class="mi">4417</span><span class="p">,</span> <span class="mi">4417</span><span class="p">]]),</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">)</span>


<span class="n">orderSortKey</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span>   
                            <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
                            <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
                            <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                            <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
                            <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                            <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]]),</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">)</span>

<span class="n">ptsSortKey</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span> 
                        <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
                        <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
                        <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
                        <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
                        <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
                        <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]]),</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">)</span>


<span class="n">order_times</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">11</span><span class="p">]),</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">)</span>

<span class="n">deliv_ids</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">16</span><span class="p">,</span> <span class="mi">13</span><span class="p">]),</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">)</span>
                                 
<span class="n">c_delivery_count</span><span class="p">,</span> <span class="n">c_tripStartTime</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">(</span><span class="mi">13</span><span class="p">)</span>
<span class="n">c_travel_speed</span><span class="p">,</span> <span class="n">c_max_delivery_time</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">(</span><span class="mi">40</span><span class="p">)</span>
<span class="n">c_max_travelToLocTime</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span>

<span class="n">c_travel_times_r</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span>  
                               <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                               <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                               <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                               <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                               <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                               <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]]),</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">)</span>

<span class="n">c_start_times_r</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span>
                           <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                           <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                           <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                           <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                           <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                           <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]]),</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">)</span>

<span class="n">c_end_times_r</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span>
                           <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                           <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                           <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                           <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                           <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                           <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]]),</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">)</span>

<span class="n">c_odtTimes_r</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span>  
                           <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                           <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                           <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                           <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                           <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                           <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]]),</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">)</span>

<span class="n">c_oMaxTimes_r</span><span class="p">,</span> <span class="n">c_tMaxTimes_r</span><span class="p">,</span> <span class="n">c_tddTimes_r</span> <span class="o">=</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]),</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">),</span> 
                                              <span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]),</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">),</span> 
                                              <span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span>   
                                                            <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                                                            <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                                                            <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                                                            <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                                                            <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                                                            <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]]),</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">))</span>

<span class="n">c_ctMarker_r</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]),</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">)</span>
<span class="n">c_returnVars_r</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span>
                    <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                    <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]],</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">long</span><span class="p">))</span>



<span class="c"># c_get_best_combo(stPtx, stPty, mockCombos, realCombos</span>
<span class="c"># orderSortKey, ptsSortKey, order_times</span>
<span class="c"># deliv_ids, c_delivery_count, c_tripStartTime, c_travel_speed, c_max_delivery_time</span>
<span class="c"># c_max_travelToLocTime, c_travel_times_r, c_start_times_r, c_end_times_r</span>
<span class="c"># c_odtTimes_r, c_oMaxTimes_r, c_tMaxTimes_r, c_tddTimes_r</span>
<span class="c"># c_ctMarker_r, c_returnVars_r)</span>

<span class="n">c_vars</span> <span class="o">=</span> <span class="n">c_get_best_combo</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span><span class="n">p2</span><span class="p">,</span><span class="n">minutes</span><span class="p">,</span><span class="n">total_time</span><span class="p">,</span><span class="n">MPH</span><span class="p">,</span><span class="n">tripStartPt</span><span class="p">,</span> <span class="n">mockCombos</span><span class="p">,</span> <span class="n">realCombos</span><span class="p">,</span>
                                  <span class="n">orderSortKey</span><span class="p">,</span> <span class="n">ptsSortKey</span><span class="p">,</span> <span class="n">order_times</span><span class="p">,</span>
                                  <span class="n">deliv_ids</span><span class="p">,</span> <span class="n">c_delivery_count</span><span class="p">,</span> <span class="n">c_tripStartTime</span><span class="p">,</span> <span class="n">c_travel_speed</span><span class="p">,</span> <span class="n">c_max_delivery_time</span><span class="p">,</span>
                                  <span class="n">c_max_travelToLocTime</span><span class="p">,</span> <span class="n">c_travel_times_r</span><span class="p">,</span> <span class="n">c_start_times_r</span><span class="p">,</span> <span class="n">c_end_times_r</span><span class="p">,</span>
                                  <span class="n">c_odtTimes_r</span><span class="p">,</span> <span class="n">c_oMaxTimes_r</span><span class="p">,</span> <span class="n">c_tMaxTimes_r</span><span class="p">,</span> <span class="n">c_tddTimes_r</span><span class="p">,</span>
                                  <span class="n">c_ctMarker_r</span><span class="p">,</span> <span class="n">c_returnVars_r</span><span class="p">)</span>

<span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([[</span><span class="n">col</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">row</span><span class="p">]</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">c_vars</span><span class="p">],</span>
             <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;tripStart&#39;</span><span class="p">,</span><span class="s">&#39;a&#39;</span><span class="p">,</span><span class="s">&#39;deliv_num&#39;</span><span class="p">,</span><span class="s">&#39;deliv_id&#39;</span><span class="p">,</span><span class="s">&#39;order_times&#39;</span><span class="p">,</span>
                      <span class="s">&#39;travel_time_to_loc&#39;</span><span class="p">,</span><span class="s">&#39;start_node&#39;</span><span class="p">,</span><span class="s">&#39;b&#39;</span><span class="p">,</span><span class="s">&#39;start_time&#39;</span><span class="p">,</span>
                      <span class="s">&#39;travel_time&#39;</span><span class="p">,</span><span class="s">&#39;end_time&#39;</span><span class="p">,</span><span class="s">&#39;end_node&#39;</span><span class="p">,</span><span class="s">&#39;c&#39;</span><span class="p">,</span>
                      <span class="s">&#39;total_order_time&#39;</span><span class="p">,</span><span class="s">&#39;bestIndex&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s">&#39;a&#39;</span><span class="p">,</span><span class="s">&#39;b&#39;</span><span class="p">,</span><span class="s">&#39;c&#39;</span><span class="p">],</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s">&#39;deliv_num&#39;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># CYTHON - get distances for route combos</span>

<span class="o">%%</span><span class="k">cython</span> <span class="o">-</span><span class="n">a</span> <span class="o">-</span><span class="n">f</span>
<span class="n">cimport</span> <span class="n">cython</span>

<span class="nd">@cython.boundscheck</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
<span class="nd">@cython.wraparound</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
<span class="n">cpdef</span> <span class="n">double</span><span class="p">[::</span><span class="mi">1</span><span class="p">]</span> <span class="n">get_d_cython</span><span class="p">(</span> <span class="nb">long</span><span class="p">[:,::</span><span class="mi">1</span><span class="p">]</span> <span class="n">a</span><span class="p">,</span> <span class="nb">long</span><span class="p">[::</span><span class="mi">1</span><span class="p">]</span> <span class="n">p1</span><span class="p">,</span> <span class="nb">long</span><span class="p">[::</span><span class="mi">1</span><span class="p">]</span> <span class="n">p2</span><span class="p">,</span> <span class="n">double</span><span class="p">[::</span><span class="mi">1</span><span class="p">]</span> <span class="n">d</span><span class="p">,</span> <span class="n">double</span><span class="p">[::</span><span class="mi">1</span><span class="p">]</span> <span class="n">total_dist</span><span class="p">)</span> <span class="n">nogil</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    ###     USAGE     ###</span>

<span class="sd">    a = np.array([  [4417, 4417,  430, 4417,  430,  430],</span>
<span class="sd">                    [ 430,  430, 4417,  430, 4417, 2581],</span>
<span class="sd">                    [ 430,  430,  430, 2581, 2581, 4417],</span>
<span class="sd">                    [2581, 2581, 2581,  430,  430,  430]])</span>
<span class="sd">    a  = np.ascontiguousarray(a.T, dtype=np.long)</span>
<span class="sd">    p1 = np.ascontiguousarray(np.array([4417, 4417, 4417, 430, 430]), dtype=np.long)</span>
<span class="sd">    p2 = np.ascontiguousarray(np.array([430, 430, 2581, 2581, 2581]), dtype=np.long)</span>
<span class="sd">    d  = np.ascontiguousarray(np.array([ 0.642920708663,</span>
<span class="sd">                                      0.642920708663,</span>
<span class="sd">                                      2.51707230403,</span>
<span class="sd">                                      2.2372869386200001,</span>
<span class="sd">                                      2.2372869386200001]), dtype=np.float)</span>
<span class="sd">    total_dist = np.ascontiguousarray(np.zeros((c,), dtype=np.float,order=&#39;C&#39;), dtype=np.float)</span>

<span class="sd">    get_d_cython(a,p1,p2,d,total_dist)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">cdef</span> <span class="nb">int</span> <span class="n">r</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">cdef</span> <span class="nb">int</span> <span class="n">c</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">cdef</span> <span class="nb">int</span> <span class="n">d_len</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">cdef</span> <span class="n">double</span> <span class="n">TD</span>
    <span class="n">cdef</span> <span class="nb">long</span><span class="p">[:]</span> <span class="n">row</span>
    <span class="n">cdef</span> <span class="nb">long</span> <span class="n">ptA</span>
    <span class="n">cdef</span> <span class="nb">long</span> <span class="n">ptB</span>
    <span class="n">cdef</span> <span class="nb">int</span> <span class="n">j</span><span class="p">,</span><span class="n">i</span><span class="p">,</span><span class="n">p</span>
    
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">c</span><span class="p">):</span>
        <span class="n">TD</span><span class="o">=</span><span class="n">total_dist</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
        <span class="n">row</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">r</span><span class="p">):</span>
            <span class="n">ptA</span><span class="o">=</span><span class="n">row</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">ptB</span><span class="o">=</span><span class="n">row</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">d_len</span><span class="p">):</span>
                <span class="k">if</span> <span class="p">((</span><span class="n">ptA</span><span class="o">==</span><span class="n">p1</span><span class="p">[</span><span class="n">p</span><span class="p">]</span> <span class="ow">and</span> <span class="n">ptB</span><span class="o">==</span><span class="n">p2</span><span class="p">[</span><span class="n">p</span><span class="p">])</span> <span class="ow">or</span>
                   <span class="p">(</span><span class="n">ptA</span><span class="o">==</span><span class="n">p2</span><span class="p">[</span><span class="n">p</span><span class="p">]</span> <span class="ow">and</span> <span class="n">ptB</span><span class="o">==</span><span class="n">p1</span><span class="p">[</span><span class="n">p</span><span class="p">])):</span>
                        <span class="n">TD</span><span class="o">+=</span><span class="n">d</span><span class="p">[</span><span class="n">p</span><span class="p">]</span>
                        <span class="k">break</span>
    <span class="k">return</span> <span class="n">total_dist</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[9]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### Libraries</span>

<span class="c"># LOCAL</span>
<span class="c"># from os import getcwd</span>
<span class="c"># workDir = getcwd()+&#39;/&#39;</span>
<span class="c"># from os.path import abspath</span>
<span class="c"># from sys import path as py_path</span>
<span class="c"># py_path.append(abspath(workDir+&#39;../../geolocation&#39;))</span>

<span class="c"># PYTHON, DATA &amp; DATABASES</span>
<span class="kn">from</span> <span class="nn">types</span> <span class="kn">import</span> <span class="n">NoneType</span>
<span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">sleep</span> <span class="k">as</span> <span class="n">delay</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s">&#39;expand_frame_repr&#39;</span><span class="p">,</span><span class="bp">False</span><span class="p">)</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s">&#39;display.max_columns&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s">&#39;display.max_rows&#39;</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s">&#39;display.width&#39;</span><span class="p">,</span><span class="mi">180</span><span class="p">)</span>
<span class="n">np</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">np</span>
<span class="n">np</span><span class="o">.</span><span class="n">set_printoptions</span><span class="p">(</span><span class="n">linewidth</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span><span class="n">threshold</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span>
<span class="c"># from logging import getLogger</span>
<span class="c"># from logging import INFO as logging_info</span>
<span class="c"># getLogger(&#39;sqlalchemy.dialects.postgresql&#39;).setLevel(logging_info)</span>
<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s">r&#39;postgresql://postgres:postgres@192.168.3.52:8800/routing&#39;</span><span class="p">,</span>
                       <span class="n">encoding</span><span class="o">=</span><span class="s">&#39;utf-8&#39;</span><span class="p">,</span>
                       <span class="n">echo</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="kn">import</span> <span class="nn">psycopg2</span>
<span class="n">conn</span> <span class="o">=</span> <span class="n">psycopg2</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&quot;dbname=&#39;routing&#39; user=&#39;postgres&#39; host=&#39;192.168.3.52&#39; password=&#39;&#39; port=8800&quot;</span><span class="p">);</span>
<span class="n">cur</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
<span class="c"># conn.set_isolation_level(0)</span>
<span class="c"># cur.execute ...</span>

<span class="c"># IPYTHON</span>
<span class="o">%</span><span class="k">reload_ext</span> <span class="n">sql</span>
<span class="o">%</span><span class="k">sql</span> <span class="n">postgresql</span><span class="p">:</span><span class="o">//</span><span class="n">postgres</span><span class="p">:</span><span class="n">postgres</span><span class="nd">@192.168.3.52</span><span class="p">:</span><span class="mi">8800</span><span class="o">/</span><span class="n">routing</span>
<span class="o">%</span><span class="k">matplotlib</span> <span class="n">inline</span>         

<span class="c"># GEOMETRY</span>
<span class="kn">import</span> <span class="nn">fiona</span>
<span class="kn">from</span> <span class="nn">shapely.ops</span> <span class="kn">import</span> <span class="n">polygonize_full</span><span class="p">,</span><span class="n">polygonize</span>
<span class="kn">from</span> <span class="nn">shapely.geometry</span> <span class="kn">import</span> <span class="n">Point</span><span class="p">,</span><span class="n">LineString</span><span class="p">,</span><span class="n">Polygon</span>
<span class="kn">from</span> <span class="nn">shapely.geometry</span> <span class="kn">import</span> <span class="n">MultiLineString</span><span class="p">,</span><span class="n">mapping</span><span class="p">,</span><span class="n">MultiPoint</span><span class="p">,</span><span class="n">MultiPolygon</span>
<span class="kn">import</span> <span class="nn">geopandas</span> <span class="kn">as</span> <span class="nn">gd</span>


<span class="c"># LOCAL FUNCTIONS</span>

<span class="k">def</span> <span class="nf">save_point_shape</span><span class="p">(</span><span class="n">fPath</span><span class="p">,</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">):</span>

    <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">&#39;geometry&#39;</span><span class="p">:</span> <span class="s">&#39;Point&#39;</span><span class="p">,</span>
        <span class="s">&#39;properties&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="s">&#39;int&#39;</span><span class="p">},</span>
    <span class="p">}</span>

    <span class="n">pt_len</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="k">with</span> <span class="n">fiona</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">fPath</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">,</span> <span class="s">&#39;ESRI Shapefile&#39;</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span> <span class="k">as</span> <span class="n">c</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">pt_len</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
            <span class="n">c</span><span class="o">.</span><span class="n">write</span><span class="p">({</span>
                <span class="s">&#39;geometry&#39;</span><span class="p">:</span> <span class="n">mapping</span><span class="p">(</span><span class="n">Point</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span><span class="n">y</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">])),</span>
                <span class="s">&#39;properties&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="n">i</span><span class="p">},</span>
            <span class="p">})</span>

<span class="k">def</span> <span class="nf">save_polygon_shape</span><span class="p">(</span><span class="n">fPath</span><span class="p">,</span><span class="n">poly_set</span><span class="p">):</span>
    <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">&#39;geometry&#39;</span><span class="p">:</span> <span class="s">&#39;Polygon&#39;</span><span class="p">,</span>
        <span class="s">&#39;properties&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="s">&#39;int&#39;</span><span class="p">},</span>
    <span class="p">}</span>

    <span class="n">cnt</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">poly_set</span><span class="p">)</span>
    <span class="k">with</span> <span class="n">fiona</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">fPath</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">,</span> <span class="s">&#39;ESRI Shapefile&#39;</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span> <span class="k">as</span> <span class="n">c</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">cnt</span><span class="p">):</span>
            <span class="n">c</span><span class="o">.</span><span class="n">write</span><span class="p">({</span>
                <span class="s">&#39;geometry&#39;</span><span class="p">:</span> <span class="n">mapping</span><span class="p">(</span><span class="n">poly_set</span><span class="p">[</span><span class="n">i</span><span class="p">]),</span>
                <span class="s">&#39;properties&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">},</span>
            <span class="p">})</span>

<span class="k">def</span> <span class="nf">save_polygon_shapefile</span><span class="p">():</span>
    <span class="kn">from</span> <span class="nn">osgeo</span> <span class="kn">import</span> <span class="n">ogr</span>

    <span class="c"># Here&#39;s an example Shapely geometry</span>
    <span class="c"># poly = Polygon(zip(x_outer,y_outer))</span>
    <span class="n">poly</span> <span class="o">=</span> <span class="n">poly_all</span><span class="o">.</span><span class="n">convex_hull</span>

    <span class="c"># Now convert it to a shapefile with OGR    </span>
    <span class="n">driver</span> <span class="o">=</span> <span class="n">ogr</span><span class="o">.</span><span class="n">GetDriverByName</span><span class="p">(</span><span class="s">&#39;Esri Shapefile&#39;</span><span class="p">)</span>
    <span class="n">ds</span> <span class="o">=</span> <span class="n">driver</span><span class="o">.</span><span class="n">CreateDataSource</span><span class="p">(</span><span class="s">&#39;/Users/admin/Projects/GIS/outer_MN.shp&#39;</span><span class="p">)</span>
    <span class="n">layer</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">CreateLayer</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="n">ogr</span><span class="o">.</span><span class="n">wkbPolygon</span><span class="p">)</span>
    <span class="c"># Add one attribute</span>
    <span class="n">layer</span><span class="o">.</span><span class="n">CreateField</span><span class="p">(</span><span class="n">ogr</span><span class="o">.</span><span class="n">FieldDefn</span><span class="p">(</span><span class="s">&#39;id&#39;</span><span class="p">,</span> <span class="n">ogr</span><span class="o">.</span><span class="n">OFTInteger</span><span class="p">))</span>
    <span class="n">defn</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">GetLayerDefn</span><span class="p">()</span>

    <span class="c">## If there are multiple geometries, put the &quot;for&quot; loop here</span>

    <span class="c"># Create a new feature (attribute and geometry)</span>
    <span class="n">feat</span> <span class="o">=</span> <span class="n">ogr</span><span class="o">.</span><span class="n">Feature</span><span class="p">(</span><span class="n">defn</span><span class="p">)</span>
    <span class="n">feat</span><span class="o">.</span><span class="n">SetField</span><span class="p">(</span><span class="s">&#39;id&#39;</span><span class="p">,</span> <span class="mi">123</span><span class="p">)</span>

    <span class="c"># Make a geometry, from Shapely object</span>
    <span class="n">geom</span> <span class="o">=</span> <span class="n">ogr</span><span class="o">.</span><span class="n">CreateGeometryFromWkb</span><span class="p">(</span><span class="n">poly</span><span class="o">.</span><span class="n">wkb</span><span class="p">)</span>
    <span class="n">feat</span><span class="o">.</span><span class="n">SetGeometry</span><span class="p">(</span><span class="n">geom</span><span class="p">)</span>

    <span class="n">layer</span><span class="o">.</span><span class="n">CreateFeature</span><span class="p">(</span><span class="n">feat</span><span class="p">)</span>
    <span class="n">feat</span> <span class="o">=</span> <span class="n">geom</span> <span class="o">=</span> <span class="bp">None</span>  <span class="c"># destroy these</span>

    <span class="c"># Save and close everything</span>
    <span class="n">ds</span> <span class="o">=</span> <span class="n">layer</span> <span class="o">=</span> <span class="n">feat</span> <span class="o">=</span> <span class="n">geom</span> <span class="o">=</span> <span class="bp">None</span>

<span class="k">def</span> <span class="nf">polygon_from_points</span><span class="p">():</span>
    <span class="c">#Create polygon from lists of points</span>
    <span class="n">from_nodes</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql_query</span><span class="p">(</span><span class="s">&quot;SELECT lat,lon FROM lion_nodes&quot;</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">from_nodes</span><span class="o">.</span><span class="n">lon</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">from_nodes</span><span class="o">.</span><span class="n">lat</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
    <span class="n">poly_all</span> <span class="o">=</span> <span class="n">Polygon</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">))</span>

    <span class="c"># Extract the point values that define the perimeter of the polygon</span>
    <span class="c"># x_outer,y_outer = poly_all.exterior.coords.xy</span>

<span class="k">def</span> <span class="nf">plot_pluto_block</span><span class="p">(</span><span class="n">block</span><span class="p">):</span>
    <span class="c"># 121 madison is on block 860</span>
    <span class="n">m</span> <span class="o">=</span> <span class="n">gd</span><span class="o">.</span><span class="n">read_postgis</span><span class="p">(</span><span class="s">&quot;SELECT * FROM pluto where block = &quot;</span><span class="o">+</span><span class="n">block</span><span class="o">+</span><span class="s">&#39;&quot;&#39;</span><span class="p">,</span><span class="n">conn</span><span class="p">)</span>
    <span class="n">m</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[20]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># Manhattan Shell</span>

<span class="n">geoms</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">MN</span> <span class="o">=</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">    SELECT ST_Buffer(  ST_ConcaveHull(  (ST_Collect(f.the_geom)), 100, false  ), </span>
<span class="s">                       .0005) as geom </span>
<span class="s">    FROM ( SELECT *, (ST_Dump(geom)).geom As the_geom </span>
<span class="s">    FROM pluto) As f</span>
<span class="s">    &quot;&quot;&quot;</span>
<span class="n">geoms</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">gd</span><span class="o">.</span><span class="n">read_postgis</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span><span class="n">conn</span><span class="p">,</span><span class="s">&#39;this_geom&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">this_geom</span><span class="p">)</span>


<span class="n">gd</span><span class="o">.</span><span class="n">GeoSeries</span><span class="p">(</span><span class="n">geoms</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="c"># plotting path:  /Users/admin/SERVER2/BD_Scripts/ipython/ENV/lib/python2.7/site-packages/geopandas/plotting.py</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">
    Out[20]:</div>


<div class="output_text output_subarea output_pyout">
<pre>&lt;matplotlib.axes.AxesSubplot at 0x11af38b90&gt;</pre>
</div>

</div>

<div class="output_area"><div class="prompt"></div>


<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
"
>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[5]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">#</span>
<span class="n">cmd</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;SELECT clipped.gid, clipped.street, clipped_geom geom</span>
<span class="s">    FROM (</span>


<span class="s">        SELECT lion_ways.gid, lion_ways.street, (ST_Dump(ST_Intersection(pluto_block.geom, lion_ways.geom))).geom </span>
<span class="s">        As clipped_geom</span>

<span class="s">            FROM (</span>

<span class="s">                SELECT ST_Buffer(ST_ConvexHull((ST_Collect(f.the_geom))), .00005) as geom </span>
<span class="s">                FROM ( SELECT *, (ST_Dump(geom)).geom As the_geom </span>
<span class="s">                FROM pluto where block = 860 ) As f)</span>
<span class="s">            as pluto_block</span>

<span class="s">            INNER JOIN lion_ways</span>
<span class="s">            ON ST_Intersects(pluto_block.geom, lion_ways.geom))</span>
<span class="s">  </span>
<span class="s">        As clipped</span>
<span class="s">WHERE ST_Dimension(clipped.clipped_geom) = 1</span>
<span class="s">limit 10&quot;&quot;&quot;</span>

<span class="n">line_in_block</span> <span class="o">=</span> <span class="n">gd</span><span class="o">.</span><span class="n">read_postgis</span><span class="p">(</span><span class="n">cmd</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span><span class="s">&#39; &#39;</span><span class="p">),</span><span class="n">conn</span><span class="p">)</span>
<span class="n">line_in_block</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">
    Out[5]:</div>


<div class="output_text output_subarea output_pyout">
<pre>&lt;matplotlib.axes.AxesSubplot at 0x10e6134d0&gt;</pre>
</div>

</div>

<div class="output_area"><div class="prompt"></div>


<div class="output_png output_subarea ">
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAAETCAYAAABz1knGAAAABHNCSVQICAgIfAhkiAAAAAlwSFlz
AAALEgAACxIB0t1+/AAAGlhJREFUeJzt3XecVNXdx/GPsogIMYgIilSfJOaxIViTSDGWqFiiWBYE
WaoGCcYOigKJigKCFFExSAApAguIUXoJSq9Lr/oIAtKkLIRdYXeeP84dZnaYtmVumfm+X6957czd
uXPPwPzmnnPub88PRERERERERERERERc6XkgH6gY4fd3AZuArcDLQdvHAqus23fWz2A1gGPW6/vN
s17Lv18la3sDYCVwEmgSZ7s/AfYCa+N8vkhEjYBhYbZXB6ZhPuDhAqQUsA2oBZQGVgP/G+Z5fYCu
IdsmAJ9RMEDmAvXC7F8TuBoYTvwBUh+oiwLEFc52ugHF5IuwvS/wUpT9bsQEyP9hvt3HAg+EPOcs
4FFgTNC2PwPfAhvCvOZZYbZ9j/mg54f53YvAUiAL6B60/WvgUJS2i428HiDhPpQPAD8Aa6Lsdymw
M+jxD9a2YPUxXZ3t1uPymKDrHuE1h2O6V6FnnHDuBH6FCdS6wHXW8cRl0pxuQBEtBspgPrQVCYwT
ugFdMB9Av3BBFOnME6wpMDrocXegH/DfMK/5OLDbak8m0AIYGeW177Ru/naXwwTM13G0SyRuDSk4
BrkK863/nXU7ielGVQ7Z72bMGMWvCwUH6mnAj0DVoG3zg173EHAQ6BCmTS2BgSHbhgEPBT3uA7QP
/5YAMzbSGMQjIs32BBtg/T4L02WItW9FYCawBZgBVLC2n4vp86/B9PM7x2hbI8IP0v0iDdLTMF2n
WsA5nDlIvwsz8I6kG/Ccdb8UgVmr0phBfOiH/18UHKTfgTkLlrMeXwpcFPT7WihAPCGe2Z57gK+s
+zdh/uNj7duLwCD6ZeBt634GgUFxWcwHvEaU9jXETItG8i2BAKkKfBn0u7uBzVYbu4TsN4zo3/DB
AVIOWI75cliH6Yb5u2A3YMY6x4ADFPzQd8J8EawBFgK1re1jMN21XGvfVlHaIQ77HQW7Ip0581v9
Q+CxoMebgItj7LsJqGLdv9h6DPAnYAqBb+XNBM4uIraLNYsVz2xPpOdUjbJvFcxYAeunP1imA0eB
PZixQ2/gcIw2iiRMrFmseGZ7IPxMUbjnhHs9X9D25piu1SWYrtHXwGxMV0vEdrHOILswV6X9qmPO
BNGeU816Trjtu6z7ezFdKzDBsM+6/3tgEpAH7AcWANeHNqpOnTr+oNJNt6Lc5lFCYs32QMFB+s0E
BunR9u1FYFarM4FBeicCg+5ywHrM1G0on5O6deum43v4+JggiTsAojkFdMSMDUoBQ4GNwJPW7z/C
BMc9mNmg4wRmXSLtCyYgxgFtMGONR4NebyhmtudsTLCsi/fNiJS0eK6kT7VuwT4KedyxEPsC/ATc
HmZ7LmYcIuIKXs/FckSjRo10/BQ5fjyzT25kdSVFCu+ss86COD/7OoOIRKEAEYlCASIShQJEJAoF
iEgUChCRKBQgIlEoQESiUICIRKEAEYlCASIShQJEJAoFiCS1o7t2kTViRJH3V4BI0srPy2NS8+Yc
2bGjyK+hAJGk9U3PngDc0iV02bP4eXVtXpGodixYwNJBg2i/YgVnlypV5NfRGUSSTs7hw0x8/HHu
GzKE8y8NXcatcPQXhZJUfD4fEx57jHJVqnDPwNA1xI3C/EWhuliSVFYNHcqBTZt4sBgzV8EUIJI0
9m/cyKzOnWk1fz5p555bIq+pMYgkhVM5OWSmp3Nbz55cdMUVJfa68QSInfVBHidQKXYVZgnSa+Jo
o6S4mS+9xIWXX069tm1tPa7d9UGCXYUJrHCKvXylJI9NU6b4+tWs6Ttx6FBcz6cQS4/GOoPEUw32
fkwBS4AlmLPBxTH2Dd5nOKZ6bKhm1j4iER3dtYsv2rWjyejRnFuh5EvJuK0+SLDQEswiBfhTSW7s
2JHqv/99Qo7htvogfjdhqsmGq0cOQPfu3U/fb9SokePLYYr9vnn7bXw+X8xUknnz5jFv3ryEtCFW
NVgwJdjSgx77y6tF29dfpg1MfZBNFNSP6AU8E9upFdfbsWCBr3flyr4jO3cWel9KcAyyHPg1gRof
j2FqCAabAjxh3b8ZUzJtb4x9p2DKJWP9nBzSpkfQ+EMi8KeS3DtkCOdXq5bQY7mtPghAA2CHtV2k
AJ/Pxxft2/Prxo357QOh80UlT7lY4ikrhw5lSf/+tF2yhNJlyxbpNZSLJUlp/8aNzO7cmYz//KfI
wVFYSjURTziVk0Nm06b88a23SjSVJBZ1scQTpnbqxLE9e3h43Dh/F6nI1MWSpLL5iy/YPGUKT65a
VezgKCwFiLiaP5Xk0cxMyl5wge3H1xhEXCs/L49JLVpww9NPU+MPf3CkDQoQca0F77yDLy+P+q+8
4lgb1MUSV9q5aBFL+vcv9qokxaUziLhOzuHDTGzWzJZUklg0zSuu4vP5yGzalPMqVeKeQYMScgxN
84pnrfrkE/Zv2EDbJUucbgqgABEXcSKVJBaNQcQVTqeSvPmmrakksWgMIq4w9ZlnyN61i0fGj0/4
1XKNQcRTNn/xBZsnT+bJ1attTyWJRQEijsrevdukkkyY4EgqSSwag4hj8vPymNi8OTd06ECNW25x
ujlhKUDEMQt69TKpJK++6nRTIlIXSxzxw+LFLHnvPcdTSWLRGURsl3P4MJnNmnHvRx85nkoSi7um
DOKnaV6P8qeSlL3wQhq//74jbdA0r7jW6mHD2L9+PW2XLnW6KXFRgIhtDmzaxKyXX6blvHmuSSWJ
xW31QcDUA1kErAPWAGXiaKO43KmcHCakp3PrG29Q+cornW5OibG7PkgaJsiuth5fQPggLpkFXsU2
U595xvfZQw/58vPznW6Kp+uD3Ik5a6y1Hh8C8uN9M+JOW/79bzZNmsR9H3/sulSSWNxWH+Q3mOie
BqwAXoz5DsTVsnfvZkrbtjz46aeUrVjR6eYUmtvqg6QBtwDXAyeA2ZhAmRO6k+qDuN/pVUk6dKBm
/fqOtaM49UFiBcguoHrQ4+qYM0G051SznlM6zPZd1v29mG7Yj5j6IPus7TuB+cBP1uOvgHrECBBx
pwW9epF/6pTjqSShX6A9evSIe1+31QeZgRmgl8UEb0NgfdzvRlzDn0ry4KefujqVpCTcDWzGDLj9
ta6eJFAjBGCQ9fsszDd+tH3BTPPOIvw07+OYKd61hK9+C5rFcrUThw/73qtd27dh4kSnmxIWhZjF
8taUQoD1PsVtfP5UkooVaTx4sNPNCUupJuKY1f/6F/vWraPdsmVON6VEKECkxBzYvJlZL71Ey7lz
PZNKEovS3aVEnMrNJTM9nVv/8Q8qX3WV080pMRqDSImY9uyzHN2xg0cmTHD91XKNQcRWW778kk0T
JzpS4CbRFCBSLNm7dzOlTRseGT/ek6kksWgMIkXmTyW5/i9/cTSVJJEUIFJkC3v3Ju/kSRq4eFWS
4lIXS4rkh8WLWdyvH+2WLePstOT9GOkMIoWWc+QImc2a0fiDD/hljRpONyehvDrloGleh/h8PiY2
a0aZChW494MPnG5OkWiaVxIma/hw9q5dmzSpJLEoQCRuBzZvZuaLLyZVKkksGoNIXE7l5pLZtGnS
pZLEojGIxGXas89y5PvveTQz0/NXyzUGkRK15csv2ZiZyVMuLHCTaAoQiSp7zx6TSjJuXFKmksSi
MYhE5MvPN6kkTz1FzQYNnG6OIxQgEtGC3r3Jy82lQdeuTjfFMepiSVg/LFnConffpf3y5UmdShKL
ziByhpwjR5jYrBn3fvhh0qeSxOLVKQlN8yaIz+dj4uOPU+aXv/RsKkksmuaVIssaPpy9a9akTCpJ
LG6rD1ILsybvKuvmzoWVkpQ/leThsWNTJpWkuOyuD1KLQOmDaBxZkS+ZnczJ8X1Yt65v6eDBTjcl
4fBwfRBxyOwuXahQsybXP/WU001xFbfVBwGojelezcOUQpAE2/rVV2yYMIH7hw5NuVSSWNxWH2Q3
pmTCIcwi2JOBK4Hs0J1UH6Rk+FNJmowdm7SpJMWpDxLLzZhqT35dOHOg/iGQHvR4E+aMEG3fTZhu
GJj6IJsiHH8uBVeL93O6G5sU8vPyfCNuv9035/XXnW6KrSjBMYjd9UEqYQb3AJdZ+38b75uRwlnY
pw+ncnJo+NprTjfF0+ysD/IQpjbIKkzptcYR2uT0l5Dn7Vy82Ne7cmXf4e+/d7optkP1QSSanCNH
GFKvHrf36sUVTZo43RzbFeZKugIkxfj8qSTnn8+9H37odHMcoVQTiShrxAj2ZmUplSROCpAUcnDL
Fma+8AJPzJlD6fPOc7o5nqB09xRxKjeXCenpNOrRgypXX+10czxDY5AUMf355zm0fTuPTZqU8lfL
NQaRArZOncqG8eOTssBNoilAktyxH39kSuvWNBk7lvMuvNDp5niOxiBJzL8qSb327anVsKHTzfEk
BUgSW9inDydPnFAqSTGoi5Wkdi1dysI+fZK+wE2i6QyShHKPHiWzaVMaDx5MhZo1nW6Op3l1SkPT
vBH4fD4mNW9O6fLlue+jj5xujitpmjeFrRk5kj2rVtF++XKnm5IUFCBJ5OCWLcx4/nmemD1bqSQl
RGOQJJH3889kNm1Kw+7dqXLNNU43J2koQJLErC5dOL96dW7o0MHppiQVdbGSwNapU9kwbhxPpmCB
m0RTgHicUkkSS10sD/Pl5zPpiSeo166dUkkSRAHiYQvffZeTx4/T8PXXnW5K0lIXy6N2LVvGwt69
lUqSYDqDeJA/leSe999XKkmCeXXKI6VTTSa1aEFa2bLcN2SI003xpMKkmritPohfDeAY8Hwc7Usp
WSNHsnvFCu567z2nmyLYXx/EbwLwGZEDxJkl+Rx2YMsWX69KlXw/ZmU53RRPw+P1Qf6MWY93Q7xv
IhXk/fwzmenpSiWxmdvqg5THnFm6x256apn9yiucX62aUkls5rb6IN2BfsB/Y71mKtUH2TZtGus/
+0ypJEWUTPVB5gPfWbdDwEEg3Fem091Y22Tv2ePrc8klvu/mznW6KUkDD9cHaYApwVYbeA94kxSu
dOvLz2dyy5bUbdOGWkl8hnSzWF2sU0BHYDpmVmoosJFAbZCPMDNY92AG5MeBVjH2BTNrNQ5ogxnE
P1rsd5KEFvXtS252No26dXO6KSnLqx1a60yZvHYtW8boxo1pt3QpFWrVcro5SaWkLxSKzXKzs5nY
rJlJJVFwOEpnEBdSKkliaVUTD/OnkmhVEndQgLjIwa1bmfHcc7SYNUurkriExiAucXpVkm7duLhO
HaebIxYFiEvMfvVVflG1Kjc8/bTTTZEg6mK5wLbp01k/dqwK3LiQAsRhx/bu5fNWrXho1CjOq1TJ
6eZICHWxHBScSlL71ludbo6EoQBx0KK+fck9elSpJC6mLpZDdi1bxoJevWi3dKlWJXExnUEckJud
HViVRKkkrubVKRNPp5pMeuIJSpUpw/0ff+x0U1KSUk1cLGvkSHYvW0Y7pZJ4ggLERj9t23Y6leSc
cuWcbo7EQWMQm/hTSRq8/rpSSTxEAWKTOV27Uv6SS7ixY0enmyKFoC6WDbbPmMG6MWOUSuJBCpAE
O7Z3L5MzMpRK4lHqYiXQ6VSS1q2VSuJRCpAEWtSvH7lHj9JQqSSepS5WguxevpwF77xDu6VLKVW6
tNPNkSLSGSQB/Kkkdw8cqFQSj3NbfZAbgVXWbQ1mNUbPmdqxIzUbNuSqxzzZfCkEu+uDlCUQtBcD
B6zXCeXk0q5RZY0c6Rt4+eW+3GPHnG6KRICH64OcAPKt+2WBI0BevG/GaT9t3870Z5/l4bFjlUqS
JNxWHwRMYK23bs/FaJ9rFEglufZap5sjJcRt9UEAlgJXAr/FlE+YhzmTFOC2+iBzunalfJUqSiVx
oWSqDxJqNnBdmO1Od2ML2DZ9uu/dSy/1Hd+/3+mmSBzwcH2QWgTOajWt/bfG+2ac4E8leXDECKWS
JCG31Qe5BeiMGdSfBNoDR4v43hLOl5/P5xkZXNuqFbX/+EenmyMJ4NXUUutM6axFffuyYfx4MubP
19VyD9Gf3Npg94oVfNOzJ22VSpLUlGpSBKdTSQYN4oLatZ1ujiSQulhFMDkjg7PT0rj/n/90rA1S
dOpiJdCaUaP4YfFi2q9Y4XRTxAYKkEL4aft2pv/tb7SYOVOpJClCY5A4nU4lee01pZKkEAVInOa8
9hrlKlfmxr/+1emmiI3UxYrD9hkzWDtqlFYlSUEKkBiO79vH561a8ecRIyh30UVON0dspi5WFP5V
Seq0bMllt93mdHPEAQqQKBb370/O4cM06tHD6aaIQ9TFimDPypUmlWTJEqWSpDCdQcLIzc5mQno6
dw8cqFSSFOfVKZmEpppMzsjgrFKleGDo0IQdQ5yjVJNiUCqJBFOABPGnkjSfMUOpJAJoDHKaP5Wk
fteuXFK3buwdJCUoQCxzX3+dcpUrc1OnTk43RVxEXSxg+8yZrBk5kidXr1YqiRSQ8meQ4/v28XlG
hlJJJKyUDhBffj6TMzKUSiIRpXSALO7fnxM//aRUEokoZccge1au5Ju33tKqJBJVvGcQO2uE3IFZ
lXGN9bPEi/v9fOwYE9LTuWvAAKWSSLHZXSPkWgLr9l6JWRU+VLHWZp2ckeGb3KpVsdd4FW+iBNfm
BftrhKwGfrTub8DUCSmxPtDa0aPZuXAhdw8YUFIvKUksngBxokaIXxNgBSa4iu3Qt98y7ZlnaDJ2
LOeUL18SLylJLp5BuhM1QsB0r97GjEnOUNj6IHknT5pUkldfVSpJiklkfRBwpkZINWAz8LsIbSp0
v3Nm586+UY0b+/Lz8xPQqxUvoYTHIHbXCKkAfIkJpEXxvpFovp01izUjRvDAsGFKJZGEuBvzjb4N
cxYAUyPkyaDnDLJ+nwXUi7EvmGneWZw5zdsVOEagHPQqILQyTdzfFsf27vW9W7Wqb/usWQn8ThIv
oRBnEK9+nVrvM8aT8vMZfe+9VKlTh9t79rShWeIFhfmLwqRONVkyYAAnDh7k1r//3emmiEclbarJ
npUr+frNN7UqiRRLUp5Bfj52jMymTU0qyWWXOd0c8bCkHIN83ro1+Hw8MGyYjU0Sr0jpVU3WjhnD
zgULtCqJlIikOoPknzrFB9dcw0OjRulquURUmDNIUgUIwKncXNLKlLG5OeIlKR0gIrHoOohICVGA
iEShABGJQgEiEoUCRCQKBYhIFAoQkSgUICJRKEBEolCAiEShABGJQgEiEoUCRCQKBYhIFG4sf1AR
mAtkAwPjbJ9IQsQTIKUwi8LdBVwBNCV8+YNfYVZRbA98EMe+nTEB8htgtvUYIAezeNwLhX43Nknk
Oq86vruO78byB/8FFgC5hXkjdkqlD0iqH9/N5Q/0J4PiuHgCxKnyByKe4ET5AzArvkcapG8jEFS6
6VbY22pKUBqwnUAJg1g1Cm8mUKMw2r69CARLZwI1Cv0y0CyWeISd5Q/ADOoPYqZ6dwC/LZm3ISIi
SSPSxcJQhb3YCOZstdXa786g7ecAQzBntc2YM56dx59nbVuFqQU/z+bj+03BVBG2+99/GqarvR4Y
SeReRCKOXxZTvWwjsA5wfdGYSLXSgxWl1voV1vNKW/ttIzDL1gP4e9D+3W0+/lwCXVA733/wjOVD
wChgn43H97//4PLCm4ExNh6/LNDQek5pYD4m+FzLP9sFZkYrdCYLTCHP4JmwzgSuukfaP3SmbRpw
k3V/B+Yfyu7j32zdnwtc5+DxywNfYz5kOQ4c3680Zozpn/20+/gA7wFtwmw/zelkxXhqpUe7UBlp
/6rW80L38Z+C38DUX78MM+1nx/GrBj0ejuli1YywfyKP/w+gDyZjobSNxw++uDzden4ZTHaF3ccH
81m4D5PmFJEdATITWBvmdn/I8/xz1KFCtxX2YuNMTJeiH7AQqA48jOlqncJ8WOw6/lrMN50P0/9N
A1rYePytmG/MNziz/nyij9+XwP99VaCt9fuWCT5+uNdJw3Tt+mNmTCOyI0DuAK4Oc5uCifrgi4X7
wuy/C/Oh9qtmbSPK/sH73AEsBR4FrgSOY765pwC7Mflidh3/akzX5mpgHLAfaGTj8d/FdGvKA90w
H7ZvbDx+8P//ROAAgTFBoo4fug8EJmkGhDmeq8S6WAhFu9joH6SdA9S29vcPEscAt1r3v8LMYtl1
/FIESlqXxvwnZdr8/v1qYgLUzn//cpgPsv91NwLjbX7/bwAT8Ehlg0gXC6tipuP8inKx8RXr+ZuA
PwVtrwH8BxMYczEDVruOXw5Ybh17HTDYgffvVwsz1Wrn8StjziZZmCnugTYfvxqQb73vVdatNSIi
IiIiIiIi4m1jCcz2fGf9DHUuZh2C1Zjkx+AEwDrAIsyM1RTgF0H7jLG2byCQOhJsCuaiot9zmNmn
LMzMVY042v8J5lrJ2lhPFCmuPpjVZsI5z/qZhvljuT9Yj5cB9a37rQgkiWYQSFIsiwm+4A+8P5ly
TdC2RpjAAniKQIpKNPUxS1ApQCShzsIkef5PjOedhwmKK6zHh4N+Vx1zBgBzXWIKgQunmwlcwwhO
poz0wa5LIAMA4EUC11e6hzy3VpTXicnpZEXxhvqYrsr2CL8/G9PF2ou5+LrB2r6ewDJPjxBI/5gO
HAX2YHKhehMIpuBkykjaEPgT7zsxa7LdiAmc6wictYpNASKRkknvC3pOU2B0lNfIB67FXKluQCC/
rDXQAZM9UB742dreHNO1ugSTCvKC9fNaTIb150ROBWmO+Xua3tbjO63bKkyG9uWYgBGxRRrwIwXT
9aN5jfCrYv6GwGIegzEfdL+hmDPMU5ikwu8wKe65wJyg592OOTtVCtrWB7OaZyS10BhEEuguTLcp
kkoExg9lMX+ld5v1+CLr59nACMzgHKATZoYJTH7aeuCqkNetScEPdl1MblXoOOgOTOCVsx5fGnRc
UIBIgg3jzG/o4GTCa4CVmDHIGsyA2a8Tgb/9fytoexngU8wHdz3wfJjj1qLgLNZMzJjFP+08OeQ4
a6zbQkx3DcxM2W7MmWgnZiZNRERERERERERERERERCS6/wdwqFbVD/UNdQAAAABJRU5ErkJggg==
"
>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[6]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># Lots, way, points on way</span>
<span class="k">def</span> <span class="nf">geoms_to_collection</span><span class="p">(</span><span class="n">geoms</span><span class="p">):</span>
    <span class="n">s</span><span class="o">=</span><span class="s">&#39;GEOMETRYCOLLECTION(&#39;</span>
    <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">geoms</span><span class="p">:</span>
        <span class="n">s</span><span class="o">+=</span><span class="n">it</span><span class="o">.</span><span class="n">to_wkt</span><span class="p">()</span><span class="o">+</span><span class="s">&#39;,&#39;</span>
    <span class="k">return</span> <span class="n">s</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s">&#39;,&#39;</span><span class="p">)</span><span class="o">+</span><span class="s">&#39;)&#39;</span>

<span class="k">def</span> <span class="nf">geoms_to_text</span><span class="p">(</span><span class="n">geoms</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">geoms_to_text</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">list</span><span class="p">:</span> <span class="n">geoms</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="n">geoms</span><span class="p">)</span>
    <span class="n">s</span><span class="o">=</span><span class="s">&#39;&#39;</span>
    <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">geoms</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">s</span><span class="o">+=</span><span class="s">&quot;ST_GeomFromText(&#39;&quot;</span><span class="o">+</span><span class="n">it</span><span class="o">.</span><span class="n">to_wkt</span><span class="p">()</span><span class="o">+</span><span class="s">&quot;&#39;),&quot;</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">s</span><span class="o">+=</span><span class="s">&quot;ST_GeomFromText(&#39;&quot;</span><span class="o">+</span><span class="n">it</span><span class="o">+</span><span class="s">&quot;&#39;),&quot;</span>
    <span class="k">return</span> <span class="n">s</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s">&#39;,&#39;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">geom_txts_to_collection</span><span class="p">(</span><span class="n">geom_txts</span><span class="p">):</span>
    <span class="k">return</span> <span class="s">&quot;ST_Collect(ARRAY[&quot;</span><span class="o">+</span><span class="n">geoms_to_text</span><span class="p">(</span><span class="n">geom_txts</span><span class="p">)</span><span class="o">+</span><span class="s">&#39;])&#39;</span>


<span class="n">real_block</span> <span class="o">=</span> <span class="n">gd</span><span class="o">.</span><span class="n">read_postgis</span><span class="p">(</span><span class="s">&quot;select geom from pluto where block = 860 and bldg_street ~* &#39;madison&#39;&quot;</span><span class="p">,</span><span class="n">conn</span><span class="p">)</span>
<span class="n">geoms</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">real_block</span><span class="o">.</span><span class="n">geom</span><span class="p">:</span>
    <span class="n">cmd</span><span class="o">=</span><span class="s">&quot; ST_ClosestPoint(&quot;</span><span class="o">+</span><span class="n">geoms_to_text</span><span class="p">(</span><span class="n">line_in_block</span><span class="o">.</span><span class="n">geom</span><span class="p">)</span><span class="o">+</span><span class="s">&#39;,&#39;</span><span class="o">+</span><span class="n">geoms_to_text</span><span class="p">(</span><span class="n">it</span><span class="p">)</span><span class="o">+</span><span class="s">&#39;) &#39;</span>
    <span class="n">geoms</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">gd</span><span class="o">.</span><span class="n">read_postgis</span><span class="p">(</span><span class="s">&quot;select &quot;</span><span class="o">+</span><span class="n">cmd</span><span class="o">+</span><span class="s">&#39; geom&#39;</span><span class="p">,</span><span class="n">conn</span><span class="p">)</span><span class="o">.</span><span class="n">geom</span><span class="p">)</span>

<span class="n">geoms</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">line_in_block</span><span class="o">.</span><span class="n">geom</span><span class="p">)</span>
<span class="n">geoms</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">real_block</span><span class="o">.</span><span class="n">geom</span><span class="p">)</span>
<span class="n">gd</span><span class="o">.</span><span class="n">GeoSeries</span><span class="p">(</span><span class="n">geoms</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">
    Out[6]:</div>


<div class="output_text output_subarea output_pyout">
<pre>&lt;matplotlib.axes.AxesSubplot at 0x10e73f8d0&gt;</pre>
</div>

</div>

<div class="output_area"><div class="prompt"></div>


<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
"
>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[9]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="k">print</span> <span class="n">line_in_block</span><span class="o">.</span><span class="n">geom</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>LINESTRING (-73.98477647709414 40.74526692229129, -73.98436050455631 40.7458390865499)
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[352]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">## Not Sure (2014.11.20)</span>
<span class="n">geoms</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">geoms</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">line_in_block</span><span class="o">.</span><span class="n">geom</span><span class="p">)</span>
<span class="c"># geoms.extend(real_block.geom)</span>


<span class="c"># for it in real_block.geom:</span>
<span class="n">it</span> <span class="o">=</span> <span class="n">real_block</span><span class="o">.</span><span class="n">geom</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">geoms</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">it</span><span class="p">)</span>


<span class="n">cmd</span><span class="o">=</span><span class="s">&quot; ST_ClosestPoint(&quot;</span><span class="o">+</span><span class="n">geoms_to_text</span><span class="p">(</span><span class="n">it</span><span class="p">)</span><span class="o">+</span><span class="s">&#39;,&#39;</span><span class="o">+</span><span class="n">geoms_to_text</span><span class="p">(</span><span class="n">line_in_block</span><span class="o">.</span><span class="n">geom</span><span class="p">)</span><span class="o">+</span><span class="s">&#39;) &#39;</span>
<span class="n">point_on_block_edge</span> <span class="o">=</span> <span class="n">gd</span><span class="o">.</span><span class="n">read_postgis</span><span class="p">(</span><span class="s">&quot;select &quot;</span><span class="o">+</span><span class="n">cmd</span><span class="o">+</span><span class="s">&#39; geom&#39;</span><span class="p">,</span><span class="n">conn</span><span class="p">)</span><span class="o">.</span><span class="n">geom</span>
<span class="n">geoms</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">point_on_block_edge</span><span class="p">)</span>

<span class="n">gd</span><span class="o">.</span><span class="n">GeoSeries</span><span class="p">(</span><span class="n">geoms</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>

<span class="c"># get linestrings for each lot</span>
<span class="n">cmd</span> <span class="o">=</span> <span class="p">(</span><span class="s">&quot;select ST_ExteriorRing(&quot;</span><span class="o">+</span><span class="n">geoms_to_text</span><span class="p">(</span><span class="n">it</span><span class="p">)</span><span class="o">+</span><span class="s">&#39;) geom&#39;</span><span class="p">)</span>
<span class="n">block_edges</span> <span class="o">=</span> <span class="n">gd</span><span class="o">.</span><span class="n">read_postgis</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span><span class="n">conn</span><span class="p">)</span><span class="o">.</span><span class="n">geom</span>
<span class="n">segs</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">block_edges</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;LINESTRING (&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;)&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;,&#39;</span><span class="p">)</span>
<span class="n">lines</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;LINESTRING(&#39;</span><span class="o">+</span><span class="n">segs</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="s">&#39;,&#39;</span><span class="o">+</span><span class="n">segs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">+</span><span class="s">&#39;)&#39;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">segs</span><span class="p">[</span><span class="mi">1</span><span class="p">:]))]</span>

<span class="c"># find which line</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s">&#39;lines&#39;</span><span class="p">:</span><span class="n">lines</span><span class="p">})</span>
<span class="n">df</span><span class="p">[</span><span class="s">&#39;cmds&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">lines</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">l</span><span class="p">:</span> <span class="s">&quot;ST_Intersects(&quot;</span><span class="o">+</span><span class="n">geoms_to_text</span><span class="p">(</span><span class="n">point_on_block_edge</span><span class="p">)</span><span class="o">+</span><span class="s">&#39;,&#39;</span><span class="o">+</span><span class="s">&quot;ST_GeomFromText(&#39;&quot;</span><span class="o">+</span><span class="n">l</span><span class="o">+</span><span class="s">&quot;&#39;)&quot;</span><span class="o">+</span><span class="s">&#39;)&#39;</span><span class="p">)</span>

<span class="n">cmd</span> <span class="o">=</span> <span class="s">&quot;select ARRAY&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">cmds</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;&quot;&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span><span class="o">+</span><span class="s">&#39; test&#39;</span>
<span class="n">df</span><span class="p">[</span><span class="s">&#39;results&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql_query</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span><span class="o">.</span><span class="n">test</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">results</span><span class="o">==</span><span class="bp">False</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">inplace</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s">&#39;cmds&#39;</span><span class="p">,</span><span class="s">&#39;results&#39;</span><span class="p">],</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">inplace</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="c"># for start and end points, find distance to closest point on line_in_block</span>
<span class="n">df</span><span class="p">[</span><span class="s">&#39;start_len&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">lines</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">l</span><span class="p">:</span> <span class="s">&quot;ST_Distance(&quot;</span><span class="o">+</span>
                               <span class="n">geoms_to_text</span><span class="p">(</span><span class="n">line_in_block</span><span class="o">.</span><span class="n">geom</span><span class="p">)</span><span class="o">+</span><span class="s">&#39;,&#39;</span><span class="o">+</span>
                               <span class="s">&quot;ST_StartPoint(ST_GeomFromText(&#39;&quot;</span><span class="o">+</span><span class="n">l</span><span class="o">+</span><span class="s">&quot;&#39;))&quot;</span><span class="o">+</span><span class="s">&#39;)&#39;</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="s">&#39;end_len&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">lines</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">l</span><span class="p">:</span> <span class="s">&quot;ST_Distance(&quot;</span><span class="o">+</span>
                               <span class="n">geoms_to_text</span><span class="p">(</span><span class="n">line_in_block</span><span class="o">.</span><span class="n">geom</span><span class="p">)</span><span class="o">+</span><span class="s">&#39;,&#39;</span><span class="o">+</span>
                               <span class="s">&quot;ST_EndPoint(ST_GeomFromText(&#39;&quot;</span><span class="o">+</span><span class="n">l</span><span class="o">+</span><span class="s">&quot;&#39;))&quot;</span><span class="o">+</span><span class="s">&#39;)&#39;</span><span class="p">)</span>
<span class="n">cmd</span> <span class="o">=</span> <span class="s">&quot;select ARRAY&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">start_len</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;&quot;&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span><span class="o">+</span><span class="s">&#39; start_lens&#39;</span>
<span class="n">df</span><span class="p">[</span><span class="s">&#39;start_results&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql_query</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span><span class="o">.</span><span class="n">start_lens</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">cmd</span> <span class="o">=</span> <span class="s">&quot;select ARRAY&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">end_len</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;&quot;&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span><span class="o">+</span><span class="s">&#39; end_lens&#39;</span>
<span class="n">df</span><span class="p">[</span><span class="s">&#39;end_results&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql_query</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span><span class="o">.</span><span class="n">end_lens</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">df</span><span class="p">[</span><span class="s">&#39;sum_results&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s">&#39;start_results&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">df</span><span class="p">[</span><span class="s">&#39;end_results&#39;</span><span class="p">]</span>
<span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">sum_results</span><span class="o">==</span><span class="n">df</span><span class="o">.</span><span class="n">sum_results</span><span class="o">.</span><span class="n">max</span><span class="p">()]</span><span class="o">.</span><span class="n">index</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">inplace</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">cmd</span> <span class="o">=</span> <span class="s">&#39;select &#39;</span><span class="o">+</span><span class="s">&quot;ST_GeomFromText(&#39;&quot;</span><span class="o">+</span><span class="n">df</span><span class="o">.</span><span class="n">lines</span><span class="o">.</span><span class="n">tolist</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="s">&quot;&#39;)&quot;</span><span class="o">+</span><span class="s">&#39; geom&#39;</span>
<span class="n">geoms</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">gd</span><span class="o">.</span><span class="n">read_postgis</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span><span class="n">conn</span><span class="p">)</span><span class="o">.</span><span class="n">geom</span><span class="p">)</span>

<span class="c"># find center of line and add point</span>
<span class="n">cmd</span> <span class="o">=</span> <span class="s">&#39;select &#39;</span><span class="o">+</span><span class="s">&quot;ST_Line_Interpolate_Point(ST_GeomFromText(&#39;&quot;</span><span class="o">+</span><span class="n">df</span><span class="o">.</span><span class="n">lines</span><span class="o">.</span><span class="n">tolist</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="s">&quot;&#39;), 0.5)&quot;</span><span class="o">+</span><span class="s">&#39; geom&#39;</span>
<span class="n">geoms</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">gd</span><span class="o">.</span><span class="n">read_postgis</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span><span class="n">conn</span><span class="p">)</span><span class="o">.</span><span class="n">geom</span><span class="p">)</span>

<span class="n">gd</span><span class="o">.</span><span class="n">GeoSeries</span><span class="p">(</span><span class="n">geoms</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">
    Out[352]:</div>


<div class="output_text output_subarea output_pyout">
<pre>&lt;matplotlib.axes.AxesSubplot at 0x113d3b350&gt;</pre>
</div>

</div>

<div class="output_area"><div class="prompt"></div>


<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
"
>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[423]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### Auto-Points for Lot</span>
<span class="k">def</span> <span class="nf">geom_txt_to_geom</span><span class="p">(</span><span class="n">txt</span><span class="p">):</span>
    <span class="k">return</span> <span class="s">&quot;ST_GeomFromText(&#39;&quot;</span><span class="o">+</span><span class="n">txt</span><span class="o">+</span><span class="s">&quot;&#39;)&quot;</span>

<span class="k">def</span> <span class="nf">geoms_to_array</span><span class="p">(</span><span class="n">geoms</span><span class="p">):</span>
    <span class="n">s</span><span class="o">=</span><span class="s">&#39;ARRAY[&#39;</span>
    <span class="n">s</span><span class="o">+=</span><span class="s">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">geoms</span><span class="p">)</span>
    <span class="n">s</span><span class="o">+=</span><span class="s">&#39;]&#39;</span>
    <span class="k">return</span> <span class="n">s</span>

<span class="n">geoms</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">geoms</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">line_in_block</span><span class="o">.</span><span class="n">geom</span><span class="p">)</span>
<span class="n">geoms</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">real_block</span><span class="o">.</span><span class="n">geom</span><span class="p">)</span>

<span class="n">cmd</span><span class="o">=</span><span class="s">&quot;&quot;&quot;DROP TABLE IF EXISTS mylines;</span>
<span class="s">CREATE TEMP TABLE mylines AS</span>
<span class="s">SELECT ST_ExteriorRing((ST_Dump(pluto.geom)).geom) geom from pluto where block=860 and lot=7503;</span>
<span class="s">Select ST_Line_Interpolate_Point( ST_MakeLine(sp,ep) , 0.5) this_geom</span>
<span class="s">FROM (</span>
<span class="s">SELECT ST_PointN(geom, generate_series(1, ST_NPoints(geom)-1)) as sp,</span>
<span class="s">ST_PointN(geom, generate_series(2, ST_NPoints(geom)  )) as ep</span>
<span class="s">FROM mylines ) AS foo;&quot;&quot;&quot;</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span><span class="s">&#39; &#39;</span><span class="p">)</span>

<span class="n">geoms</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">gd</span><span class="o">.</span><span class="n">read_postgis</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span><span class="n">conn</span><span class="p">,</span><span class="s">&#39;this_geom&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">this_geom</span><span class="p">)</span>
<span class="n">gd</span><span class="o">.</span><span class="n">GeoSeries</span><span class="p">(</span><span class="n">geoms</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">
    Out[423]:</div>


<div class="output_text output_subarea output_pyout">
<pre>&lt;matplotlib.axes.AxesSubplot at 0x114fc5590&gt;</pre>
</div>

</div>

<div class="output_area"><div class="prompt"></div>


<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
RU5ErkJggg==
"
>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">z</span><span class="p">[</span><span class="s">&#39;cmds&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">z</span><span class="p">[</span><span class="s">&#39;st_astext&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">()</span>
<span class="n">gd</span><span class="o">.</span><span class="n">GeoSeries</span><span class="p">({</span><span class="s">&#39;geometry&#39;</span><span class="p">:</span><span class="n">z</span><span class="p">[</span><span class="s">&#39;st_astext&#39;</span><span class="p">]})</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[288]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">cmd</span> <span class="o">=</span> <span class="s">&quot;select ARRAY[&quot;</span>
<span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">:</span>
    <span class="n">cmd</span><span class="o">+=</span><span class="s">&quot; ST_Intersects(&quot;</span><span class="o">+</span><span class="n">geoms_to_text</span><span class="p">(</span><span class="n">point_on_block_edge</span><span class="p">)</span><span class="o">+</span><span class="s">&#39;,&#39;</span><span class="o">+</span><span class="s">&quot;ST_GeomFromText(&#39;&quot;</span><span class="o">+</span><span class="n">l</span><span class="o">+</span><span class="s">&quot;&#39;)&quot;</span><span class="o">+</span><span class="s">&#39;),&#39;</span>
<span class="n">cmd</span><span class="o">=</span><span class="n">cmd</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s">&#39;,&#39;</span><span class="p">)</span>
<span class="n">cmd</span><span class="o">+=</span><span class="s">&#39;] test&#39;</span>

<span class="n">q</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql_query</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span><span class="n">engine</span><span class="p">)</span>
<span class="k">for</span> <span class="n">test</span> <span class="ow">in</span> <span class="n">q</span><span class="p">[</span><span class="s">&#39;test&#39;</span><span class="p">]:</span>
    <span class="k">print</span> <span class="n">test</span>

<span class="n">cmd</span> <span class="o">=</span> <span class="s">&#39;select &#39;</span><span class="o">+</span><span class="s">&quot;ST_GeomFromText(&#39;&quot;</span><span class="o">+</span><span class="n">lines</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span><span class="o">+</span><span class="s">&quot;&#39;)&quot;</span><span class="o">+</span><span class="s">&#39; geom&#39;</span>
<span class="n">geoms</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">gd</span><span class="o">.</span><span class="n">read_postgis</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span><span class="n">conn</span><span class="p">)</span><span class="o">.</span><span class="n">geom</span><span class="p">)</span>

<span class="n">cmd</span> <span class="o">=</span> <span class="s">&#39;select &#39;</span><span class="o">+</span><span class="s">&quot;ST_Line_Interpolate_Point(ST_GeomFromText(&#39;&quot;</span><span class="o">+</span><span class="n">lines</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span><span class="o">+</span><span class="s">&quot;&#39;), 0.5)&quot;</span><span class="o">+</span><span class="s">&#39; geom&#39;</span>
<span class="n">geoms</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">gd</span><span class="o">.</span><span class="n">read_postgis</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span><span class="n">conn</span><span class="p">)</span><span class="o">.</span><span class="n">geom</span><span class="p">)</span>

<span class="n">gd</span><span class="o">.</span><span class="n">GeoSeries</span><span class="p">(</span><span class="n">geoms</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>[False, False, False, False, False, False, False, True, True]
</pre>
</div>
</div>

<div class="output_area"><div class="prompt output_prompt">
    Out[288]:</div>


<div class="output_text output_subarea output_pyout">
<pre>&lt;matplotlib.axes.AxesSubplot at 0x1131e3c50&gt;</pre>
</div>

</div>

<div class="output_area"><div class="prompt"></div>


<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
xFy6mc4AAAAASUVORK5CYII=
"
>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>take a block 
    gd.read_postgis("SELECT ST_UnaryUnion(geom) FROM pluto where block = 860",conn)</p>
<p>get ways within buffer around block</p>
<p>lw = gd.read_postgis("SELECT * FROM pluto,lion_ways where pluto.block=860 limit 100",conn)</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">lw</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
    <span class="k">print</span> <span class="n">it</span><span class="p">,</span><span class="n">lw</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="n">it</span><span class="p">]</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">###Get Points and LineStrings of Lots in Block</span>
<span class="n">pluto</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql_query</span><span class="p">(</span><span class="s">&quot;SELECT gid,lot,ST_AsText(geom) geom,bldg_num,bldg_street FROM pluto where block = 860&quot;</span><span class="p">,</span><span class="n">conn</span><span class="p">)</span>
<span class="k">print</span> <span class="n">pluto</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>

<span class="n">pluto</span><span class="p">[</span><span class="s">&#39;points&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pluto</span><span class="o">.</span><span class="n">geom</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;MULTIPOLYGON(((&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;)))&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">))</span>

<span class="n">ids</span> <span class="o">=</span> <span class="n">pluto</span><span class="o">.</span><span class="n">gid</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="n">p_id</span><span class="p">,</span><span class="n">l_id</span><span class="o">=</span><span class="p">[],[]</span>
<span class="n">z</span> <span class="o">=</span> <span class="n">pluto</span><span class="o">.</span><span class="n">points</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="p">[],[]</span>
<span class="n">lines</span><span class="o">=</span><span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">z</span><span class="p">)):</span>
    <span class="n">pts</span> <span class="o">=</span> <span class="n">z</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;,&#39;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">pts</span><span class="p">)):</span>
        <span class="n">pt</span> <span class="o">=</span> <span class="n">pts</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
        <span class="n">xi</span><span class="p">,</span><span class="n">yi</span> <span class="o">=</span> <span class="n">pt</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39; &#39;</span><span class="p">)</span>
        <span class="n">x</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">eval</span><span class="p">(</span><span class="n">xi</span><span class="p">))</span>
        <span class="n">y</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">eval</span><span class="p">(</span><span class="n">yi</span><span class="p">))</span>
        <span class="n">p_id</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ids</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">pt</span><span class="p">,</span><span class="n">pts</span><span class="p">[</span><span class="n">k</span><span class="o">+</span><span class="mi">1</span><span class="p">]))</span>
            <span class="n">l_id</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ids</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
            <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">pts</span><span class="p">[</span><span class="n">k</span><span class="o">+</span><span class="mi">1</span><span class="p">],</span><span class="n">pt</span><span class="p">))</span>
            <span class="n">l_id</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ids</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>

<span class="n">pts</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s">&#39;gid&#39;</span><span class="p">:</span><span class="n">p_id</span><span class="p">,</span><span class="s">&#39;x&#39;</span><span class="p">:</span><span class="n">x</span><span class="p">,</span><span class="s">&#39;y&#39;</span><span class="p">:</span><span class="n">y</span><span class="p">,</span><span class="s">&#39;xy&#39;</span><span class="p">:</span><span class="nb">zip</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)})</span>
<span class="n">xys</span> <span class="o">=</span> <span class="n">pts</span><span class="o">.</span><span class="n">xy</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="n">pts</span><span class="p">[</span><span class="s">&#39;cnt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pts</span><span class="o">.</span><span class="n">xy</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">xys</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
<span class="k">print</span> <span class="nb">len</span><span class="p">(</span><span class="n">pts</span><span class="o">.</span><span class="n">index</span><span class="p">),</span><span class="s">&#39;pts&#39;</span>
<span class="k">print</span> <span class="nb">len</span><span class="p">(</span><span class="n">lines</span><span class="p">),</span><span class="s">&#39;lines&#39;</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[6]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">###Get All Lines to Block</span>
<span class="n">ldf</span> <span class="o">=</span> <span class="n">gd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">({</span><span class="s">&#39;gid&#39;</span><span class="p">:</span><span class="n">l_id</span><span class="p">,</span>
                       <span class="s">&#39;ptA&#39;</span><span class="p">:</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">Point</span><span class="p">(</span><span class="nb">eval</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39; &#39;</span><span class="p">,</span><span class="s">&#39;,&#39;</span><span class="p">))),</span><span class="n">lines</span><span class="p">),</span>
                       <span class="s">&#39;ptB&#39;</span><span class="p">:</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">Point</span><span class="p">(</span><span class="nb">eval</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39; &#39;</span><span class="p">,</span><span class="s">&#39;,&#39;</span><span class="p">))),</span><span class="n">lines</span><span class="p">),</span>
                       <span class="p">})</span>
<span class="n">l</span> <span class="o">=</span> <span class="n">gd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">({</span><span class="s">&#39;gid&#39;</span><span class="p">:</span><span class="n">ldf</span><span class="o">.</span><span class="n">gid</span><span class="p">,</span><span class="s">&#39;geometry&#39;</span><span class="p">:</span><span class="nb">map</span><span class="p">(</span><span class="n">LineString</span><span class="p">,</span><span class="nb">zip</span><span class="p">(</span><span class="n">ldf</span><span class="o">.</span><span class="n">ptA</span><span class="p">,</span><span class="n">ldf</span><span class="o">.</span><span class="n">ptB</span><span class="p">))})</span>
<span class="n">l</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[12]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### Get Corners of Block</span>
<span class="n">corner_pts</span> <span class="o">=</span> <span class="n">pts</span><span class="p">[</span><span class="n">pts</span><span class="o">.</span><span class="n">cnt</span><span class="o">==</span><span class="mi">1</span><span class="p">]</span>
<span class="n">mapper</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">pluto</span><span class="o">.</span><span class="n">gid</span><span class="p">,</span><span class="n">pluto</span><span class="o">.</span><span class="n">index</span><span class="p">))</span>
<span class="n">corner_pts</span><span class="p">[</span><span class="s">&#39;bldg_num&#39;</span><span class="p">],</span><span class="n">corner_pts</span><span class="p">[</span><span class="s">&#39;bldg_street&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">corner_pts</span><span class="o">.</span><span class="n">gid</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">pluto</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">mapper</span><span class="p">[</span><span class="n">s</span><span class="p">],[</span><span class="s">&#39;bldg_num&#39;</span><span class="p">,</span><span class="s">&#39;bldg_street&#39;</span><span class="p">]]))</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">gd</span><span class="o">.</span><span class="n">GeoSeries</span><span class="p">([</span><span class="n">Point</span><span class="p">(</span><span class="n">it</span><span class="p">)</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">corner_pts</span><span class="o">.</span><span class="n">xy</span><span class="p">])</span>
<span class="c"># c.plot()</span>

<span class="c">###Push Corner Points to Postgre</span>
<span class="c"># corner_pts.to_sql(&#39;corner_pts&#39;,engine,if_exists=&#39;append&#39;,index=False,index_label=&#39;gid&#39;)</span>

<span class="c">###Push Corner Points to Shape</span>
<span class="c"># fPath = BASE_MAP_PATH+&#39;block_corner_pts.shp&#39;</span>
<span class="c"># z=corner_pts</span>
<span class="c"># x=z.x.tolist()</span>
<span class="c"># y=z.y.tolist()</span>
<span class="c"># save_point_shape(fPath,x,y)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3>How to connect the <code>right</code> dots?</h3>

<pre><code>. start with any point: ptA
. iterate over remaining points, and
    . create lines b/t ptA and ptB
    . if a line crosses a street, save it for later (save_bag).
    . else, </code></pre>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="kn">from</span> <span class="nn">shapely.ops</span> <span class="kn">import</span> <span class="n">linemerge</span>
<span class="kn">import</span> <span class="nn">pdb</span><span class="p">;</span>
<span class="c"># start at one corner, find all points without crossing</span>
<span class="c"># figure out street based on odds/evens</span>
<span class="n">lion</span> <span class="o">=</span> <span class="n">gd</span><span class="o">.</span><span class="n">read_postgis</span><span class="p">(</span><span class="s">&quot;SELECT * from lion_ways where lion_ways.street ~* &#39;madison&#39;&quot;</span><span class="p">,</span><span class="n">conn</span><span class="p">)</span>
<span class="n">L</span><span class="o">=</span><span class="n">lion</span><span class="o">.</span><span class="n">geom</span><span class="o">.</span><span class="n">unary_union</span>
<span class="n">c_pts</span> <span class="o">=</span> <span class="n">corner_pts</span><span class="o">.</span><span class="n">xy</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="n">poly_bag</span><span class="p">,</span><span class="n">seg_bag</span><span class="p">,</span><span class="n">out_bag</span><span class="o">=</span><span class="p">[],[],[]</span>

<span class="c"># ////////////////////////</span>
<span class="c"># THIS WORKS </span>

<span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">c_pts</span><span class="p">)</span><span class="o">!=</span><span class="mi">0</span><span class="p">:</span>

    <span class="n">ptA</span> <span class="o">=</span> <span class="n">start_pt</span> <span class="o">=</span> <span class="n">c_pts</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">c_pts</span><span class="p">)</span><span class="o">!=</span><span class="mi">0</span><span class="p">:</span>
        <span class="n">ptB</span> <span class="o">=</span> <span class="n">c_pts</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">seg</span> <span class="o">=</span> <span class="n">gd</span><span class="o">.</span><span class="n">GeoSeries</span><span class="p">({</span><span class="s">&#39;geom&#39;</span><span class="p">:</span><span class="n">LineString</span><span class="p">([</span><span class="n">ptA</span><span class="p">,</span><span class="n">ptB</span><span class="p">])})</span>

        <span class="k">if</span> <span class="n">seg</span><span class="o">.</span><span class="n">intersects</span><span class="p">(</span><span class="n">L</span><span class="p">)</span><span class="o">.</span><span class="n">any</span><span class="p">()</span><span class="o">==</span><span class="bp">True</span><span class="p">:</span>
            <span class="n">out_bag</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ptB</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">seg_bag</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">seg</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

    <span class="n">loop_closer</span> <span class="o">=</span> <span class="n">gd</span><span class="o">.</span><span class="n">GeoSeries</span><span class="p">(</span><span class="n">LineString</span><span class="p">([</span><span class="n">ptB</span><span class="p">,</span><span class="n">start_pt</span><span class="p">]))</span>
    <span class="n">seg_bag</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">loop_closer</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">poly_bag</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">seg_bag</span><span class="p">)</span>

    <span class="n">c_pts</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">out_bag</span><span class="p">)</span>
    <span class="n">out_bag</span><span class="p">,</span><span class="n">seg_bag</span> <span class="o">=</span> <span class="p">[],[]</span>

<span class="k">print</span> <span class="nb">len</span><span class="p">(</span><span class="n">poly_bag</span><span class="p">)</span>    
<span class="k">print</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span>
<span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">poly_bag</span><span class="p">:</span> <span class="k">print</span> <span class="nb">len</span><span class="p">(</span><span class="n">it</span><span class="p">)</span>
    
<span class="n">i</span><span class="p">,</span><span class="n">z</span><span class="p">,</span><span class="n">pt_bag</span><span class="o">=</span><span class="mi">1</span><span class="p">,[],[]</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">gd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">()</span>
<span class="k">for</span> <span class="n">bag</span> <span class="ow">in</span> <span class="n">poly_bag</span><span class="p">[:</span><span class="mi">1</span><span class="p">]:</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">bag</span><span class="p">:</span>
        <span class="n">z</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span>

    <span class="n">T</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">z</span><span class="p">:</span> <span class="n">T</span><span class="o">.</span><span class="n">update</span><span class="p">({</span> <span class="nb">str</span><span class="p">(</span><span class="n">it</span><span class="p">)</span> <span class="p">:</span> <span class="s">&#39;rock&#39;</span> <span class="p">})</span>
    <span class="n">pts</span> <span class="o">=</span> <span class="p">[</span><span class="nb">eval</span><span class="p">(</span><span class="n">it</span><span class="p">)</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">T</span><span class="o">.</span><span class="n">keys</span><span class="p">()]</span>
    <span class="n">pt_bag</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">pts</span><span class="p">)</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">gd</span><span class="o">.</span><span class="n">GeoSeries</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">LineString</span><span class="p">,</span><span class="n">pts</span><span class="p">))</span>
    
<span class="c">#     a=df.geometry</span>
<span class="c">#     break</span>
<span class="c">#     polys.append(A.unary_union)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[24]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">l_ids</span><span class="p">,</span><span class="n">lines</span><span class="o">=</span><span class="p">[],[]</span>

<span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">ids</span><span class="p">,</span><span class="n">lines</span><span class="p">,</span><span class="o">*</span><span class="n">s</span><span class="p">):</span>
    <span class="n">this_id</span><span class="o">=</span><span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">p</span><span class="o">=</span><span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;,&#39;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">this_id</span><span class="p">)</span>
        <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">p</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">p</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]))</span>
    <span class="k">return</span> <span class="mi">0</span>

<span class="n">n</span><span class="p">[</span><span class="s">&#39;test&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">n</span><span class="p">[[</span><span class="s">&#39;gid&#39;</span><span class="p">,</span><span class="s">&#39;points&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">f</span><span class="p">(</span><span class="n">l_ids</span><span class="p">,</span><span class="n">lines</span><span class="p">,</span><span class="o">*</span><span class="n">s</span><span class="p">),</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">n</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s">&#39;test&#39;</span><span class="p">],</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">inplace</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="n">l</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s">&#39;gid&#39;</span><span class="p">:</span><span class="n">l_ids</span><span class="p">,</span><span class="s">&#39;lines&#39;</span><span class="p">:</span><span class="n">lines</span><span class="p">})</span>
<span class="n">l</span><span class="p">[</span><span class="s">&#39;cnt&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">l</span><span class="o">.</span><span class="n">lines</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">lines</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
<span class="n">block_perimeter_index</span> <span class="o">=</span> <span class="n">l</span><span class="p">[</span><span class="n">l</span><span class="o">.</span><span class="n">cnt</span><span class="o">==</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">gid</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

<span class="n">idx</span> <span class="o">=</span> <span class="n">n</span><span class="p">[</span><span class="n">n</span><span class="o">.</span><span class="n">gid</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">block_perimeter_index</span><span class="p">)]</span><span class="o">.</span><span class="n">index</span>
<span class="n">block_perimeter</span> <span class="o">=</span> <span class="n">n</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">idx</span><span class="p">,:]</span>
<span class="n">block_perimeter</span><span class="p">[</span><span class="s">&#39;lines&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">block_perimeter</span><span class="o">.</span><span class="n">gid</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">lines</span><span class="p">[</span><span class="n">l_ids</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">s</span><span class="p">)])</span>
<span class="n">block_perimeter</span><span class="p">[</span><span class="s">&#39;ptA&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">block_perimeter</span><span class="o">.</span><span class="n">lines</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">block_perimeter</span><span class="p">[</span><span class="s">&#39;ax&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">block_perimeter</span><span class="o">.</span><span class="n">ptA</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="nb">eval</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39; &#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]))</span>
<span class="n">block_perimeter</span><span class="p">[</span><span class="s">&#39;ay&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">block_perimeter</span><span class="o">.</span><span class="n">ptA</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="nb">eval</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39; &#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]))</span>
<span class="n">block_perimeter</span><span class="p">[</span><span class="s">&#39;ptB&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">block_perimeter</span><span class="o">.</span><span class="n">lines</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="n">block_perimeter</span><span class="p">[</span><span class="s">&#39;bx&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">block_perimeter</span><span class="o">.</span><span class="n">ptB</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="nb">eval</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39; &#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]))</span>
<span class="n">block_perimeter</span><span class="p">[</span><span class="s">&#39;by&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">block_perimeter</span><span class="o">.</span><span class="n">ptB</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="nb">eval</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39; &#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]))</span>
<span class="n">block_perimeter</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s">&#39;points&#39;</span><span class="p">,</span><span class="s">&#39;lines&#39;</span><span class="p">,</span><span class="s">&#39;ptA&#39;</span><span class="p">,</span><span class="s">&#39;ptB&#39;</span><span class="p">,</span><span class="s">&#39;lot&#39;</span><span class="p">],</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">inplace</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">block_perimeter</span><span class="o">.</span><span class="n">sort</span><span class="p">([</span><span class="s">&#39;bldg_street&#39;</span><span class="p">,</span><span class="s">&#39;bldg_num&#39;</span><span class="p">])</span>

<span class="n">fPath</span> <span class="o">=</span> <span class="n">BASE_MAP_PATH</span><span class="o">+</span><span class="s">&#39;block_lines.shp&#39;</span>

<span class="n">schema</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">&#39;geometry&#39;</span><span class="p">:</span> <span class="s">&#39;LineString&#39;</span><span class="p">,</span>
    <span class="s">&#39;properties&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="s">&#39;int&#39;</span><span class="p">},</span>
<span class="p">}</span>

<span class="n">ax</span><span class="p">,</span><span class="n">ay</span> <span class="o">=</span> <span class="n">block_perimeter</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span><span class="n">block_perimeter</span><span class="o">.</span><span class="n">ay</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="n">bx</span><span class="p">,</span><span class="n">by</span> <span class="o">=</span> <span class="n">block_perimeter</span><span class="o">.</span><span class="n">bx</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span><span class="n">block_perimeter</span><span class="o">.</span><span class="n">by</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>


<span class="n">line_cnt</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
<span class="k">with</span> <span class="n">fiona</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">fPath</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">,</span> <span class="s">&#39;ESRI Shapefile&#39;</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span> <span class="k">as</span> <span class="n">c</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">line_cnt</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">line</span> <span class="o">=</span> <span class="p">(</span> <span class="p">(</span><span class="n">ax</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span><span class="n">ay</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]),(</span><span class="n">bx</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span><span class="n">by</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="p">)</span>
        <span class="n">c</span><span class="o">.</span><span class="n">write</span><span class="p">({</span>
            <span class="s">&#39;geometry&#39;</span><span class="p">:</span> <span class="n">mapping</span><span class="p">(</span><span class="n">LineString</span><span class="p">(</span><span class="n">line</span><span class="p">)),</span>
            <span class="s">&#39;properties&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="n">i</span><span class="p">},</span>
        <span class="p">})</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[112]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># block_corners , block_perimeter</span>

<span class="n">corners</span> <span class="o">=</span> <span class="n">block_corners</span><span class="o">.</span><span class="n">points</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="n">A</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">ptA</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="n">B</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">ptB</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

<span class="k">for</span> <span class="n">c_pt</span> <span class="ow">in</span> <span class="n">corners</span><span class="p">:</span>
    <span class="n">pt_a</span><span class="p">,</span><span class="n">pt_b</span> <span class="o">=</span> <span class="n">start</span><span class="p">,</span><span class="n">end</span> <span class="o">=</span> <span class="n">c_pt</span><span class="p">,</span><span class="mi">0</span>
    <span class="n">poly</span> <span class="o">=</span> <span class="p">[</span><span class="n">start</span><span class="p">]</span>
    <span class="k">while</span> <span class="n">start</span> <span class="o">!=</span> <span class="n">pt_b</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">pt_b</span> <span class="o">=</span> <span class="n">B</span><span class="p">[</span><span class="n">A</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">pt_a</span><span class="p">)]</span>
            <span class="n">poly</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pt_b</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">corners</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">pt_b</span><span class="p">)</span><span class="o">!=</span><span class="mi">0</span><span class="p">:</span> <span class="n">corners</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">corners</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">pt_b</span><span class="p">))</span>
            <span class="n">pt_a</span> <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="n">A</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">pt_b</span><span class="p">)]</span>
            <span class="n">poly</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pt_a</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">corners</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">pt_a</span><span class="p">)</span><span class="o">!=</span><span class="mi">0</span><span class="p">:</span> <span class="n">corners</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">corners</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">pt_a</span><span class="p">))</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">break</span>
<span class="k">print</span> <span class="n">block_corners</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
<span class="n">poly</span>
        
<span class="c"># &quot;&quot;&quot;</span>
<span class="c"># . start with corner</span>
<span class="c"># . find gid with ptA the same as first corner</span>
<span class="c"># . find gid with ptA the same as ptB for first ptA</span>
<span class="c"># . find gid with ptA the same as ptB for second ptA</span>
<span class="c"># &quot;&quot;&quot;</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>      gid  bldg_num        bldg_street                              points
3   20772       129     madison avenue  -73.9839658135193 40.7456190490548
6   26987       450  park avenue south  -73.9831532173491 40.7448762828733
14  40921       442  park avenue south  -73.9834106877499 40.7449842811331
19   2950       118     madison avenue  -73.9848083712026 40.7454192543811
22   6471       285           5 avenue     -73.98520652452 40.746139791391
</pre>
</div>
</div>

<div class="output_area"><div class="prompt output_prompt">
    Out[112]:</div>


<div class="output_text output_subarea output_pyout">
<pre>[&apos;-73.9845578017425 40.7457644721128&apos;,
 &apos;-73.9846107673676 40.7456915012561&apos;,
 &apos;-73.9846107673676 40.7456915012561&apos;,
 &apos;-73.9846441403164 40.7456455218254&apos;,
 &apos;-73.9846441403164 40.7456455218254&apos;,
 &apos;-73.9846795724 40.7455967051368&apos;,
 &apos;-73.9846795724 40.7455967051368&apos;,
 &apos;-73.9848083712026 40.7454192543811&apos;,
 &apos;-73.9848083712026 40.7454192543811&apos;,
 &apos;-73.9848556396397 40.7453541320913&apos;]</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[36]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">###Create Polygons from NYC Data and Save as Shapefile</span>

<span class="c"># from_ways = pd.read_sql_query(&quot;SELECT ST_AsText(geom) FROM lion_ways&quot;,engine)</span>
<span class="c"># from_ways = gd.read_postgis(&quot;SELECT ST_LineMerge(ST_GeomFromText(ST_AsText(geom))) FROM lion_ways&quot;,conn)</span>

<span class="n">ways</span> <span class="o">=</span> <span class="n">gd</span><span class="o">.</span><span class="n">read_postgis</span><span class="p">(</span><span class="s">&quot;SELECT * FROM lion_ways&quot;</span><span class="p">,</span><span class="n">conn</span><span class="p">)</span>
<span class="c"># ways.plot()</span>
<span class="n">poly</span> <span class="o">=</span> <span class="n">ways</span><span class="o">.</span><span class="n">geom</span>

<span class="c"># Make polygon groups</span>
<span class="n">result</span><span class="p">,</span> <span class="n">dangles</span><span class="p">,</span> <span class="n">cuts</span><span class="p">,</span> <span class="n">invalids</span> <span class="o">=</span> <span class="n">polygonize_full</span><span class="p">(</span><span class="n">poly</span><span class="p">)</span>
<span class="n">poly_sets</span> <span class="o">=</span> <span class="p">[</span><span class="n">result</span><span class="p">,</span> <span class="n">dangles</span><span class="p">,</span> <span class="n">cuts</span><span class="p">]</span>
<span class="n">poly_set_names</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;result&#39;</span><span class="p">,</span> <span class="s">&#39;dangles&#39;</span><span class="p">,</span> <span class="s">&#39;cuts&#39;</span><span class="p">]</span> <span class="c">#, &#39;invalids&#39;]</span>

<span class="n">fPath_base</span> <span class="o">=</span> <span class="s">&#39;/Users/admin/Projects/GIS/MN_poly_many_&#39;</span>

<span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">poly_set_names</span><span class="p">:</span>
    <span class="n">fPath</span> <span class="o">=</span> <span class="n">fPath_base</span><span class="o">+</span><span class="n">it</span><span class="o">+</span><span class="s">&#39;.shp&#39;</span>
    <span class="n">this_poly_set</span> <span class="o">=</span> <span class="n">poly_sets</span><span class="p">[</span><span class="n">poly_set_names</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">it</span><span class="p">)]</span>
    <span class="n">poly_cnt</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">this_poly_set</span><span class="p">)</span>
    
    <span class="c"># Set schema for geo-object</span>
    <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">&#39;geometry&#39;</span><span class="p">:</span> <span class="n">this_poly_set</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">geom_type</span><span class="p">,</span>
        <span class="s">&#39;properties&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="s">&#39;int&#39;</span><span class="p">},</span>
    <span class="p">}</span>
    
    <span class="k">with</span> <span class="n">fiona</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">fPath</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">,</span> <span class="s">&#39;ESRI Shapefile&#39;</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span> <span class="k">as</span> <span class="n">c</span><span class="p">:</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">poly_cnt</span><span class="p">):</span>
            <span class="n">i</span><span class="o">+=</span><span class="mi">1</span>
            <span class="n">c</span><span class="o">.</span><span class="n">write</span><span class="p">({</span>
                <span class="s">&#39;geometry&#39;</span><span class="p">:</span> <span class="n">mapping</span><span class="p">(</span><span class="n">this_poly_set</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]),</span>
                <span class="s">&#39;properties&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="n">i</span><span class="p">},</span>
            <span class="p">})</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[14]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c"># Using pluto shapefile as basis for single polygon</span>
<span class="c"># f = &#39;/Users/admin/Projects/GIS/NYC_gov_data/pluto/MNMapPLUTO_WGS84.shp&#39;</span>
<span class="c"># a = gd.GeoDataFrame.from_file(f)</span>
<span class="n">pluto</span> <span class="o">=</span> <span class="n">gd</span><span class="o">.</span><span class="n">read_postgis</span><span class="p">(</span><span class="s">&quot;SELECT gid,block,lot,geom FROM pluto where block = 1&quot;</span><span class="p">,</span><span class="n">conn</span><span class="p">)</span>
<span class="n">pluto</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
<span class="n">a</span><span class="o">=</span><span class="n">pluto</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="s">&#39;geom&#39;</span><span class="p">]</span>
<span class="n">b</span><span class="o">=</span><span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">gd</span><span class="o">.</span><span class="n">GeoSeries</span><span class="p">(</span><span class="n">Polygon</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">exterior</span><span class="p">))</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[37]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### Make Polygons out of Lion Ways</span>
<span class="n">lion</span> <span class="o">=</span> <span class="n">gd</span><span class="o">.</span><span class="n">read_postgis</span><span class="p">(</span><span class="s">&quot;SELECT gid,geom FROM lion_ways&quot;</span><span class="p">,</span><span class="n">conn</span><span class="p">)</span>
<span class="n">lion</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
<span class="nb">type</span><span class="p">(</span><span class="n">lion</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="s">&#39;geom&#39;</span><span class="p">])</span>
<span class="n">polys</span> <span class="o">=</span> <span class="n">polygonize</span><span class="p">(</span><span class="n">lion</span><span class="o">.</span><span class="n">geom</span><span class="p">)</span>
<span class="k">print</span> <span class="nb">type</span><span class="p">(</span><span class="n">polys</span><span class="p">)</span>


<span class="n">fPath</span> <span class="o">=</span> <span class="s">&#39;/Users/admin/Projects/GIS/map_data/MN_lion_poly_many.shp&#39;</span>

<span class="n">schema</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">&#39;geometry&#39;</span><span class="p">:</span> <span class="s">&#39;Polygon&#39;</span><span class="p">,</span>
    <span class="s">&#39;properties&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="s">&#39;int&#39;</span><span class="p">},</span>
<span class="p">}</span>
<span class="k">with</span> <span class="n">fiona</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">fPath</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">,</span> <span class="s">&#39;ESRI Shapefile&#39;</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span> <span class="k">as</span> <span class="n">c</span><span class="p">:</span>
    <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span> 
    <span class="k">for</span> <span class="n">T</span> <span class="ow">in</span> <span class="n">polys</span><span class="p">:</span>
        <span class="n">i</span><span class="o">+=</span><span class="mi">1</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">T</span><span class="o">.</span><span class="n">geom_type</span> <span class="o">==</span> <span class="s">&#39;LineString&#39;</span> <span class="ow">or</span> 
            <span class="n">T</span><span class="o">.</span><span class="n">geom_type</span> <span class="o">==</span> <span class="s">&#39;LinearRing&#39;</span> <span class="ow">or</span>
            <span class="n">T</span><span class="o">.</span><span class="n">geom_type</span> <span class="o">==</span> <span class="s">&#39;Polygon&#39;</span><span class="p">):</span>

            <span class="n">c</span><span class="o">.</span><span class="n">write</span><span class="p">({</span>
                <span class="s">&#39;geometry&#39;</span><span class="p">:</span> <span class="n">mapping</span><span class="p">(</span><span class="n">T</span><span class="p">),</span>
                <span class="s">&#39;properties&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="n">i</span><span class="p">},</span>
            <span class="p">})</span>

        <span class="k">elif</span> <span class="n">T</span><span class="o">.</span><span class="n">geom_type</span> <span class="o">==</span> <span class="s">&#39;MultiLineString&#39;</span><span class="p">:</span>
            <span class="n">_iter</span> <span class="o">=</span> <span class="n">polygonize</span><span class="p">(</span><span class="n">T</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">poly</span> <span class="ow">in</span> <span class="n">_iter</span><span class="p">:</span>
                <span class="n">c</span><span class="o">.</span><span class="n">write</span><span class="p">({</span>
                    <span class="s">&#39;geometry&#39;</span><span class="p">:</span> <span class="n">mapping</span><span class="p">(</span><span class="n">poly</span><span class="p">),</span>
                    <span class="s">&#39;properties&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="n">i</span><span class="p">},</span>
                <span class="p">})</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">print</span> <span class="s">&#39;Wrong shape type&#39;</span>
            <span class="k">print</span> <span class="n">i</span><span class="p">,</span><span class="n">T</span><span class="o">.</span><span class="n">geom_type</span>
            <span class="k">raise</span> <span class="ne">SystemError</span>
<span class="n">z</span> <span class="o">=</span> <span class="n">gd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="n">fPath</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[132]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="c">### Read Shapefile into GeoPandas</span>
<span class="n">f</span> <span class="o">=</span> <span class="s">&#39;/Users/admin/Projects/GIS/map_data/MN_pluto_poly_single.shp&#39;</span>
<span class="n">pluto_r2</span> <span class="o">=</span> <span class="n">gd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="n">b</span><span class="o">=</span><span class="n">pluto_r2</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">exterior</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4>ITEM LIST:</h4>
<ol>
<li>push polygons to file --&gt; looks like original</li>
<li>push single polygon of perimeter --&gt; harder than expected b/c due to geometry<ul>
<li>make map with all blocks </li>
</ul>
</li>
</ol>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[3]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="kn">from</span> <span class="nn">shapely.ops</span> <span class="kn">import</span> <span class="n">cascaded_union</span> <span class="k">as</span> <span class="n">cas_union</span>

<span class="n">samples</span><span class="p">,</span><span class="n">hulls</span><span class="o">=</span><span class="p">{},[]</span>
<span class="n">grouped</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s">&#39;Block&#39;</span><span class="p">)</span>

<span class="c"># for name,group in grouped:</span>
<span class="c">#     for i in range(0,len(group.columns)/5+1):</span>
<span class="c">#         print group.ix[:,i*5:5*(i+1)]</span>
<span class="c">#     break</span>
<span class="n">group</span> <span class="o">=</span> <span class="n">grouped</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
<span class="n">poly</span> <span class="o">=</span> <span class="n">cas_union</span><span class="p">(</span><span class="n">group</span><span class="o">.</span><span class="n">geometry</span><span class="p">)</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">gd</span><span class="o">.</span><span class="n">GeoSeries</span><span class="p">(</span><span class="n">poly</span><span class="p">)</span>
<span class="c"># for it in group.ix[1:,:].iteritems():</span>
<span class="c">#     hulls.union = group.geometry</span>
<span class="c"># print hulls</span>
<span class="c"># b=a.geometry.exterior</span>
<span class="c"># boundaries = cascaded_union([hull.boundary for hull in sample_hulls.values()])</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[7]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">uniq_blocks</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">Block</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
<span class="k">print</span> <span class="nb">len</span><span class="p">(</span><span class="n">uniq_blocks</span><span class="p">),</span><span class="nb">len</span><span class="p">(</span><span class="n">grouped</span><span class="p">)</span>
<span class="c"># from itertools import chain</span>
<span class="c"># _iter = chain(uniq_blocks)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>1961 1961
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[134]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">fPath</span> <span class="o">=</span> <span class="s">&#39;/Users/admin/Projects/GIS/map_data/MN_pluto_poly_single2.shp&#39;</span>

<span class="n">schema</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">&#39;geometry&#39;</span><span class="p">:</span> <span class="s">&#39;Polygon&#39;</span><span class="p">,</span>
    <span class="s">&#39;properties&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="s">&#39;int&#39;</span><span class="p">},</span>
<span class="p">}</span>
<span class="k">with</span> <span class="n">fiona</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">fPath</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">,</span> <span class="s">&#39;ESRI Shapefile&#39;</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span> <span class="k">as</span> <span class="n">c</span><span class="p">:</span>
    <span class="n">i</span> <span class="p">,</span> <span class="n">poly_cnt</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">poly_cnt</span><span class="p">):</span>
        <span class="n">i</span><span class="o">+=</span><span class="mi">1</span>
        <span class="n">T</span> <span class="o">=</span> <span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        
        <span class="k">if</span> <span class="n">T</span><span class="o">.</span><span class="n">geom_type</span> <span class="o">==</span> <span class="s">&#39;LineString&#39;</span> <span class="ow">or</span> <span class="n">T</span><span class="o">.</span><span class="n">geom_type</span> <span class="o">==</span> <span class="s">&#39;LinearRing&#39;</span><span class="p">:</span>
            <span class="n">x</span><span class="p">,</span><span class="n">y</span> <span class="o">=</span> <span class="n">T</span><span class="o">.</span><span class="n">coords</span><span class="o">.</span><span class="n">xy</span>
            <span class="n">c</span><span class="o">.</span><span class="n">write</span><span class="p">({</span>
                <span class="s">&#39;geometry&#39;</span><span class="p">:</span> <span class="n">mapping</span><span class="p">(</span><span class="n">Polygon</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">))),</span>
                <span class="s">&#39;properties&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="n">i</span><span class="p">},</span>
            <span class="p">})</span>
        
        <span class="k">elif</span> <span class="n">T</span><span class="o">.</span><span class="n">geom_type</span> <span class="o">==</span> <span class="s">&#39;MultiLineString&#39;</span><span class="p">:</span>
            <span class="n">_iter</span> <span class="o">=</span> <span class="n">polygonize</span><span class="p">(</span><span class="n">T</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">poly</span> <span class="ow">in</span> <span class="n">_iter</span><span class="p">:</span>
                <span class="n">c</span><span class="o">.</span><span class="n">write</span><span class="p">({</span>
                    <span class="s">&#39;geometry&#39;</span><span class="p">:</span> <span class="n">mapping</span><span class="p">(</span><span class="n">poly</span><span class="p">),</span>
                    <span class="s">&#39;properties&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="n">i</span><span class="p">},</span>
                <span class="p">})</span>
            
        <span class="k">else</span><span class="p">:</span>
            <span class="k">print</span> <span class="s">&#39;Wrong shape type&#39;</span>
            <span class="k">print</span> <span class="n">i</span><span class="p">,</span><span class="n">T</span><span class="o">.</span><span class="n">geom_type</span>
            <span class="k">raise</span> <span class="ne">SystemError</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3>Attempt to fix invalid set</h3>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">a</span> <span class="o">=</span> <span class="n">gd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="o">.</span><span class="n">from_file</span><span class="p">()</span>
<span class="n">a</span><span class="o">=</span><span class="n">invalids</span>
<span class="k">print</span> <span class="nb">type</span><span class="p">(</span><span class="n">a</span><span class="p">),</span><span class="nb">type</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="k">print</span> <span class="nb">len</span><span class="p">(</span><span class="n">a</span><span class="p">),</span><span class="nb">len</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">fPath</span> <span class="o">=</span> <span class="n">fPath_base</span><span class="o">+</span><span class="s">&#39;invalids_r1&#39;</span><span class="o">+</span><span class="s">&#39;.shp&#39;</span>
<span class="n">this_poly_set</span> <span class="o">=</span> <span class="n">invalids</span>
<span class="n">poly_cnt</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">this_poly_set</span><span class="p">)</span>

<span class="c"># Set schema for geo-object</span>
<span class="n">schema</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">&#39;geometry&#39;</span><span class="p">:</span> <span class="n">this_poly_set</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">geom_type</span><span class="p">,</span>
    <span class="s">&#39;properties&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="s">&#39;int&#39;</span><span class="p">},</span>
<span class="p">}</span>

<span class="k">with</span> <span class="n">fiona</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">fPath</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">,</span> <span class="s">&#39;ESRI Shapefile&#39;</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span> <span class="k">as</span> <span class="n">c</span><span class="p">:</span>
    <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">poly_cnt</span><span class="p">):</span>
        <span class="n">i</span><span class="o">+=</span><span class="mi">1</span>
        <span class="k">print</span> <span class="n">i</span><span class="o">-</span><span class="mi">1</span>
        <span class="n">c</span><span class="o">.</span><span class="n">write</span><span class="p">({</span>
            <span class="s">&#39;geometry&#39;</span><span class="p">:</span> <span class="n">mapping</span><span class="p">(</span><span class="n">this_poly_set</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">buffer</span><span class="p">(</span><span class="mi">0</span><span class="p">)),</span>
            <span class="s">&#39;properties&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="n">i</span><span class="p">},</span>
        <span class="p">})</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">b</span><span class="o">=</span><span class="p">(</span><span class="s">&quot;SELECT ST_AsText(ST_CollectionExtract(&quot;</span><span class="o">+</span>
   <span class="s">&quot;ST_GeomFromText(&#39;GEOMETRYCOLLECTION(&quot;</span><span class="o">+</span>
   <span class="s">&quot;GEOMETRYCOLLECTION(POINT(0 0)))&#39;),1));&quot;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1>Spatial Joins</h1>
<p>A <em>spatial join</em> uses <a href="http://toblerity.org/shapely/manual.html#binary-predicates">binary predicates</a> 
such as <code>intersects</code> and <code>crosses</code> to combine two <code>GeoDataFrames</code> based on the spatial relationship 
between their geometries.</p>
<p>A common use case might be a spatial join between a point layer and a polygon layer where you want to retain the point geometries and grab the attributes of the intersecting polygons.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[2]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="kn">from</span> <span class="nn">IPython.core.display</span> <span class="kn">import</span> <span class="n">Image</span> 
<span class="n">Image</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="s">&quot;https://dl.dropboxusercontent.com/u/6769420/sjoin_test.png&quot;</span><span class="p">)</span> 
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">
    Out[2]:</div>

<div class="output_html rendered_html output_subarea output_pyout">
<img src="https://dl.dropboxusercontent.com/u/6769420/sjoin_test.png"/>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2>Types of spatial joins</h2>
<p>We currently support the following methods of spatial joins. We refer to the <em>left_df</em> and <em>right_df</em> which are the correspond to the two dataframes passed in as args.</p>
<h3>Left outer join</h3>
<p>In a LEFT OUTER JOIN (<code>how='left'</code>), we keep <em>all</em> rows from the left and duplicate them if necessary to represent multiple hits between the two dataframes. We retain attributes of the right if they intersect and lose right rows that don't intersect. A left outer join implies that we are interested in retaining the geometries of the left. </p>
<p>This is equivalent to the PostGIS query:</p>

<pre><code>SELECT pts.geom, pts.id as ptid, polys.id as polyid  
FROM pts
LEFT OUTER JOIN polys
ON ST_Intersects(pts.geom, polys.geom);

                    geom                    | ptid | polyid 
--------------------------------------------+------+--------
 010100000040A9FBF2D88AD03F349CD47D796CE9BF |    4 |     10
 010100000048EABE3CB622D8BFA8FBF2D88AA0E9BF |    3 |     10
 010100000048EABE3CB622D8BFA8FBF2D88AA0E9BF |    3 |     20
 0101000000F0D88AA0E1A4EEBF7052F7E5B115E9BF |    2 |     20
 0101000000818693BA2F8FF7BF4ADD97C75604E9BF |    1 |       
(5 rows)</code></pre>
<h3>Right outer join</h3>
<p>In a RIGHT OUTER JOIN (<code>how='right'</code>), we keep <em>all</em> rows from the right and duplicate them if necessary to represent multiple hits between the two dataframes. We retain attributes of the left if they intersect and lose left rows that don't intersect. A right outer join implies that we are interested in retaining the geometries of the right. </p>
<p>This is equivalent to the PostGIS query:</p>

<pre><code>SELECT polys.geom, pts.id as ptid, polys.id as polyid  
FROM pts
RIGHT OUTER JOIN polys
ON ST_Intersects(pts.geom, polys.geom);

  geom    | ptid | polyid 
----------+------+--------
 01...9BF |    4 |     10
 01...9BF |    3 |     10
 02...7BF |    3 |     20
 02...7BF |    2 |     20
 00...5BF |      |     30
(5 rows)</code></pre>
<h3>Inner join</h3>
<p>In an INNER JOIN (<code>how='inner'</code>), we keep rows from the right and left only where their binary predicate is <code>True</code>. We duplicate them if necessary to represent multiple hits between the two dataframes. We retain attributes of the right and left only if they intersect and lose all rows that do not. An inner join implies that we are interested in retaining the geometries of the left. </p>
<p>This is equivalent to the PostGIS query:</p>

<pre><code>SELECT pts.geom, pts.id as ptid, polys.id as polyid  
FROM pts
INNER JOIN polys
ON ST_Intersects(pts.geom, polys.geom);

                    geom                    | ptid | polyid 
--------------------------------------------+------+--------
 010100000040A9FBF2D88AD03F349CD47D796CE9BF |    4 |     10
 010100000048EABE3CB622D8BFA8FBF2D88AA0E9BF |    3 |     10
 010100000048EABE3CB622D8BFA8FBF2D88AA0E9BF |    3 |     20
 0101000000F0D88AA0E1A4EEBF7052F7E5B115E9BF |    2 |     20
(4 rows)</code></pre>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2>Spatial Joins between two GeoDataFrames</h2>
<p>Let's take a look at how we'd implement these using <code>GeoPandas</code>. First, load up the NYC test data into <code>GeoDataFrames</code>:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[19]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">shapely.geometry</span> <span class="kn">import</span> <span class="n">Point</span>
<span class="kn">from</span> <span class="nn">geopandas</span> <span class="kn">import</span> <span class="n">GeoDataFrame</span><span class="p">,</span> <span class="n">read_file</span>
<span class="kn">from</span> <span class="nn">geopandas.tools</span> <span class="kn">import</span> <span class="n">overlay</span>

<span class="c"># NYC Boros</span>
<span class="n">zippath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="s">&#39;../examples/nybb_14aav.zip&#39;</span><span class="p">)</span>
<span class="n">polydf</span> <span class="o">=</span> <span class="n">read_file</span><span class="p">(</span><span class="s">&#39;/nybb_14a_av/nybb.shp&#39;</span><span class="p">,</span> <span class="n">vfs</span><span class="o">=</span><span class="s">&#39;zip://&#39;</span> <span class="o">+</span> <span class="n">zippath</span><span class="p">)</span>

<span class="c"># Generate some points</span>
<span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">polydf</span><span class="o">.</span><span class="n">total_bounds</span><span class="p">]</span>
<span class="n">N</span> <span class="o">=</span> <span class="mi">8</span>
<span class="n">pointdf</span> <span class="o">=</span> <span class="n">GeoDataFrame</span><span class="p">([</span>
    <span class="p">{</span><span class="s">&#39;geometry&#39;</span> <span class="p">:</span> <span class="n">Point</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">),</span> <span class="s">&#39;value1&#39;</span><span class="p">:</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="p">,</span> <span class="s">&#39;value2&#39;</span><span class="p">:</span> <span class="n">x</span> <span class="o">-</span> <span class="n">y</span><span class="p">}</span>
    <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">b</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">b</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="nb">int</span><span class="p">((</span><span class="n">b</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">-</span><span class="n">b</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">/</span><span class="n">N</span><span class="p">)),</span>
                    <span class="nb">range</span><span class="p">(</span><span class="n">b</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">b</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="nb">int</span><span class="p">((</span><span class="n">b</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">-</span><span class="n">b</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">/</span><span class="n">N</span><span class="p">)))])</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[20]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">pointdf</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">
    Out[20]:</div>

<div class="output_html rendered_html output_subarea output_pyout">
<div style="max-height:1000px;max-width:1500px;overflow:auto;">
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>geometry</th>
      <th>value1</th>
      <th>value2</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>  POINT (913175 120121)</td>
      <td> 1033296</td>
      <td> 793054</td>
    </tr>
    <tr>
      <th>1</th>
      <td>  POINT (932450 139211)</td>
      <td> 1071661</td>
      <td> 793239</td>
    </tr>
    <tr>
      <th>2</th>
      <td>  POINT (951725 158301)</td>
      <td> 1110026</td>
      <td> 793424</td>
    </tr>
    <tr>
      <th>3</th>
      <td>  POINT (971000 177391)</td>
      <td> 1148391</td>
      <td> 793609</td>
    </tr>
    <tr>
      <th>4</th>
      <td>  POINT (990275 196481)</td>
      <td> 1186756</td>
      <td> 793794</td>
    </tr>
    <tr>
      <th>5</th>
      <td> POINT (1009550 215571)</td>
      <td> 1225121</td>
      <td> 793979</td>
    </tr>
    <tr>
      <th>6</th>
      <td> POINT (1028825 234661)</td>
      <td> 1263486</td>
      <td> 794164</td>
    </tr>
    <tr>
      <th>7</th>
      <td> POINT (1048100 253751)</td>
      <td> 1301851</td>
      <td> 794349</td>
    </tr>
    <tr>
      <th>8</th>
      <td> POINT (1067375 272841)</td>
      <td> 1340216</td>
      <td> 794534</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[21]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">polydf</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">
    Out[21]:</div>

<div class="output_html rendered_html output_subarea output_pyout">
<div style="max-height:1000px;max-width:1500px;overflow:auto;">
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>BoroCode</th>
      <th>BoroName</th>
      <th>Shape_Area</th>
      <th>Shape_Leng</th>
      <th>geometry</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td> 5</td>
      <td> Staten Island</td>
      <td> 1.623847e+09</td>
      <td> 330454.175933</td>
      <td> (POLYGON ((970217.0223999023 145643.3322143555...</td>
    </tr>
    <tr>
      <th>1</th>
      <td> 3</td>
      <td>      Brooklyn</td>
      <td> 1.937810e+09</td>
      <td> 741227.337073</td>
      <td> (POLYGON ((1021176.479003906 151374.7969970703...</td>
    </tr>
    <tr>
      <th>2</th>
      <td> 4</td>
      <td>        Queens</td>
      <td> 3.045079e+09</td>
      <td> 896875.396449</td>
      <td> (POLYGON ((1029606.076599121 156073.8142089844...</td>
    </tr>
    <tr>
      <th>3</th>
      <td> 1</td>
      <td>     Manhattan</td>
      <td> 6.364308e+08</td>
      <td> 358400.912836</td>
      <td> (POLYGON ((981219.0557861328 188655.3157958984...</td>
    </tr>
    <tr>
      <th>4</th>
      <td> 2</td>
      <td>         Bronx</td>
      <td> 1.186822e+09</td>
      <td> 464475.145651</td>
      <td> (POLYGON ((1012821.805786133 229228.2645874023...</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[22]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">pointdf</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">
    Out[22]:</div>


<div class="output_text output_subarea output_pyout">
<pre>&lt;matplotlib.axes.AxesSubplot at 0x7fe17c79de90&gt;</pre>
</div>

</div>

<div class="output_area"><div class="prompt"></div>


<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
"
>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[23]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">polydf</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">
    Out[23]:</div>


<div class="output_text output_subarea output_pyout">
<pre>&lt;matplotlib.axes.AxesSubplot at 0x7fe17c48f8d0&gt;</pre>
</div>

</div>

<div class="output_area"><div class="prompt"></div>


<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
mfMX+xFXjljJjLYzaOnckqB3Qbx49oId23fEpEXIbIizw6mARqNh06ZNrFq1CltbW6pVq4a+vj6/
/PJ57UelUvHhw4dkCVXk4+PD2LFjefDAi9DQUCIjI7GyssTExITg4BDu3btL3rzF6NBhJra2Dmg0
GjQaNceOraRyZem0opeXF0WLFo3nTnGJiorixYsXGBsb8/HjRxya9Prh50kvtJu+lz862fLg3H6C
XvlglqsAcrmcAWtvsrqfAxuGVKfHkv9QKA0BiIoIQxUVibGxMVa5rAh8E4jPXR+8Pbx57vUcPy8/
PoV8om27tuzauQu5XP7FPsq27dvSo0gPnDo60Xt2byxyJ++xNblcTo5cOQh6E0SzbM1YcXUFxSoV
w22HG1u3bOWnn35K1vulVzLiOZgMtUXGw8ODsmXL6hx2NG3aFFdXV549e8aGDRuYOnUqhoZGvHr1
MklieObMGerEOo3RqNFgjIxMCQv7wJs33shkMiws8lO4cGWsre10trFqVV9ev36MsbFxokOpr1q1
ikGDBsV8rt5+FA1/WZTo50jPuB9axz8L+wFQvFoTOs2RcifPqK9ArVbh1HM6dXpMwffOOTxO7cTd
dTVLFv9O586dqe5YnRfPX2CVy4o8efOQL28+bAvY0q1bN8qVK6f7fu7uDB02lNt3btOodyN6zuyJ
kXHyBqY9tO4Qi/stRk+hx5GII7SzbMfpE6cpXz5tF7FSa4uMEMEU5MmTJ1SuXAVDw5y8eOFF0aLV
ePjwks6yCoWCqChp2BgeHo5S+WVUFR8fH3bv3s3+/Qfw8fElLOwjgYGBlCvnQNGiRdizZ09MWUND
E8aMcUFPL/Eba2/fPsG+fbOAb88X6eLt27dYWVlRvcNo7Co2oECZmiiNjBN9/4zA46vH2Dq+CRq1
mtJ1O9Juyg5Orv0f57bNJY+dPeVbDOLUmnHUr1+PKpUrMW7cOAwNDX/onidOnGDU6FH4vfCj3dh2
tB/dHj09vWR6ItgweQNbZ25l1qFZTGw2EW9vb2xtbZOt/aQgRPDbZAgRfP78ORUrViZv3nK0bPkr
AGp1FGq1GoVCyeLFHTE0NKFOne7s3j0tpl6+fPlo1qwZFStW5NSpU2TLlo27d+9y5coVTE3NsbGx
x8amLHfuHOfFC6+YenK5HjKZnNat/0fp0nWT7Pft28fZt282hoaGicosZm9fhrt3PRi2zRvzPLZJ
vn9GwffOOTYMqwXA4I0PMM9jx+/trPkULKWk3LVrF+3bx00m5enpiYGBwRcCExwczKZNm+jfvz9K
pfdGsDMAACAASURBVBKZTMaMGTOYNGlSnPqbN29m4uSJRMmiGLxsMNWaVUuW57l29BrjG4+nRNUS
PLj8gHPnzuHo6JgsbScVIYLfJt2LoLe3N3Z2dhQvXp0OHWbGe8xIrY5i/vyfCA//pPN64cKVyJ27
GPXq9fmiraioCG7ePEyFCs2Ry5OnV3D69AbOnNnEmDFjWLBgQYLrValShatXrzL1dPr+v0lOTq+f
xJktUq+57eTt7J3RGQBLKyuuXrkSpyfl5+eHnV1hcpib4/ngfkxoqsWLFzNq1CjKlCvDqROnsLKy
+u6XkFqtZtKUSfy59E9yFcjFsNXDsHe0/6FncfnDhRUjVsR8dijvwA33tN0YnVoiKBZGUoBJkyYh
l+vRocOMBJ2zlMsVjB9/iE+f3uPjc5Nz57aSI0decuSwpnDhyhQuHHcfGoBCoaRSpeSdvH72TNoM
+/Llq0TVC4uU5sOyEnX7zMTv3kUCH7tz+Pd+FC9Rklo1HVm7Vvd+yL//3955hkV1dAH4XXoRBFRE
ELCLJXY09q4hGjUqtkSNLfZPozFqjApJjL3FbjQSQbFHVGKJBbGioqhYwA4WOkpvu/v9mKUFUNSl
6X2fh4e7s3On3L333Jk5Z85xcSEtLZWI8DCOHTvGgAHCzrB9+/bo6usiM5ZhbWMNQOWqlfOsV0ND
g99+/Y25s+cyZeoUZnaZSbPuzZi1Y9Y7ubuKexXHye0nAREv+uLFi/hdy93A+0NEGgmqGWdnZ5yc
nBg8eAlVqpQ8zyiPH/tx6NBvRESEvTmzikePHmFXqzaTdj7FoPTH4/3s7jkPDsz/Gte/XOjTp0+u
eW7evMkvv87j+k1/kpOSePLoAdWrVycgICBDYCkUCmwq2dB/Tn+sqluRkpyCU08nEuIT3vgSTZ91
AFSoVIGVF1bmW4scFRKFy2wXvHd5U61aNXbv3I2JiQm9evXC0tKSXbt2vcXVUD/SSLAEsm3bNubP
X0CXLmNLpAAEiImJwNDw7RQaq1atwsrOvsQKwN0/9cCobAXaj1qCrqHRm08ATm+Zy8U9S1m+dEme
AlCpVPJp8xboly5H5PNHlDIyxsDQEF9f32wjNg0NDSpUqEBsVCz12wotsUxDxv3799nisoUyZmWY
MmVKDoE4eMhg3FzdAFi7di3/HPmHodWGMsRpCI7f5x3cPuJ5BJtnbMZ7jzcNGjRgz649dO3aNeP7
s2fP5usafChIxtJq5LvvvkNb24DmzfsVdVPeGX19Y4KCHmNiYoKPj0++ztl/4BB1Ow0u4JYVHKGP
buHjsZEF3Y25cmD9G7XiEcGBeG39mfVr1zBmzJi880VEkBAfR/zLcADqfVKXpMREwsPDs+VLS0vj
6pWrWNeyzkirVKsSK1euZNGiRUybNo2JEyfmKN/MzIzhw4ejVCoZO3YsBz0OstN9JxumbeCG940c
+VNSUpjeeTpDqw4lMSiRM6fPcPH8xWwC8GNEEoJqRF+/FO3afVPUzXgvKla0A+DVq1dMnz4jX+eE
hoRgW79dAbaqYBnneo/2w34GwHP5WH4fYEOQf07/HQqFgj1zerNmSE0Arl+/nu17uVzOt6PHUL6C
FT4+PpQrVw5tbR2SEuJo0aotPpcuo1AoePHiBQMGDEAmk/HixQuOHDmCQqHgkueljLI6DunIzl07
0VQpvNauXZutHX369uH3lb/nWAPU19dHT1+PmMgYJjefzIoxKzJMrxYPWYzvcV/cXN0443UmwzD+
Y0cSgmokKOgRBgYl20GohoZYIYmPj8fL69Qbcot8SUkJmFrmbnxdEtDQ0KDNkNlM2x9OnTZ9eBn2
lC0TW/LXpFa8DM10KX9i43SiHlwiNDSU9evXM3t2pgOkBw8eULdeA/YfPklSGuzbtw+5XE5qagrt
hjkTkqhN+WoNqfNJfTw9Pdm5cycAL1++xMHBAV09XYJuZ9bVc0JPqjSpQmqWGM0pKSlcvHiRT1t8
yr69+wDYvHkzrVq3ymhDX8e+9J/en6XDl9KuSTuuHLjC+CbjiY+J58LBC1y5coW+ffsW6PUsaUhC
UI1oaWmjo6Nea/7CRlfXACMjE44dO/bmzEBQUBC6egZoqNFwt6gwKF2Wvs57GDDvAACPb5xjw7Da
HFk9iTNu87h6cD0bN6zH3Nyc0aNHY2pqCsCOHTuo36ARehUb0tdpHwmvIli0aBH16tWjctVq+Huu
I/rxdULv+dKgXl3mz59P5SpV8Pf3p1atWtjb25OclMyNMzd4ePMhIARz9YaZ2xaNTY3x8PCgefPm
JGknZXPZ/+DBA4KDg+nQqQPNezUn/Gk4djXtWLVqFWtWr+HB9Qf0q9CPChUq0LhxyVyrLkgkIahG
NDQ00NIq+fFzGzb8gkmTJmdMo15HhQoVSE5MQCGXF0LLCoeaLb5g/NYAdPQMkKel4LP3dy7tXMiq
lcvp3r17trzLV6zgm+Ej6DR+JT1nbkVTRxdNTS1MTExYtGgRy5YsxrxcWaIjw5HL5fj730ZbW5um
TT+lTp06yOXybI5KbWvbZhz7Hsv0UxgTHYO3tzc1G9dk+ZnlGBoboqmlSbNPmxHyIgRbW1us61nz
+ejPObn9JBvWbQCgTBmhrEpOSMbWJrNsiUwkIahGUlKS8fMr+aEj27QZTEKCHEtLK9atW/favEZG
RujqG/Aq7MOKRFbWugYj11+hqeNUjMzK89NPsxg5cmS2PPfu3WPmzFn0mbuHBp99A0CZitUxr1Sb
adOm0a1bN37+5Rdu3/LPOOe33+aRkpLCDncRfe/ixcxtlJ6Jntm2wv2440dAeJQBqFmzJlEhUcRE
xTCg4gBsbW25/+A+A2YMwDPRk54Te/K/Fv+jY4eOGft+s7rC9zrlxY0bORUmHzuSEFQjNja2pKTk
f6tZcUVTU5tRozYSHh7GuHHjuHz58mvyamJmViYjmHpJ5/gfM/FycQKgnG0tOo2aj5GZOampOUfF
Hh4elK9Sh+rNHAB4eseHVYNrEvrIHwcHkebm6srkyZM5cuQIjx494vPPHXKt16KqBbp6utnSHlx/
gFlZM0aMGAFA+fLlSU1M5fZ5EZ7UwMCAyPBIhv06DB1dHR76PwQl3LyR+VsMGz6Mdu3bYVXVCutq
1ty8+WH8TupEEoJqRF9fHwOD93eFVRzQ0dGnTx+x8D9pUs6A6VmpUKECYY9Ldtzg2MgXKORyzm1f
wOm/nLnqmbnmFh8Vho2NdY5zLC0tiQy+x44fu7FxeB22TGhB1NNA3LdvyxiJ1a5dm+XLl9O1a9cc
2+jS0tLo319stdPV1yUqJCrb9zKZDG1tbab/IPaee/7jSdOmTTm65Si6err43/Sn2efNMkaPnb4S
nryDgoLYsmULAD2+6IHXKS9qNK1BdET0a19oHyvSjhE1ERgYSL169fn2202YmVkVdXPURlTUMzZt
Gs3WrS55ahUnT/6Ov49fZNjqC4XcOvWwvJ8NMeHBtB0yh6jnD7h5XExVf/CIRN/YjO3THYh9epNx
Y8fx48zp2aasf/zxB4GBgVhYWDB8+PAMZUluKJVK0tLS0NHRoVu37ri7b6dxkybcCwxES1sLeZoc
pVKJ43eOjF42mqTEJLobiDXIJ0+eYGFhwcaNG5k4cSJmZcyIioxiX8Q+jMsYEx0WzYLBC/A95ou5
jTlhQWEolUoeP35Ml8+6EBwUTFJiEgCJiYnv7dWmMChu0eaaAen2EuaAByLoujeZgdlHIaLGXQC6
qdL0gb2qfJ5AWVX6p4iwnGeBOVnqmYsIwnQOEb6zxODp6YmFReUPSgACmJlZYWpqjaOjI8nJybnm
mT37J2Jf3OfC7uWF3Dr1EBMughpVb96d3rPc6DJuGQCLepYh+sVjHJ33olm6InNmz8LB4fNs544a
NYrFixczderUXAVgWloagYGBjBghnF+kb0Xz9DyEsbEx9wIDmTr1e+Ji43jw4AGt27Rm9/LdTGk7
hT++/4NyVuUAsLGxQUdHh4YNG9KiVQvKlhWP0gO/ByiVSkbXH821E9cwLG1IWFAY9s3E4+Pu7s69
gHuMWjyKpV5LMTQ2pHmL5jg5OaFQKEhNTWXLli00a94MmUzG9JnTC+QaF2fyIwR/AP4A0hcsFgGu
QFuEAKsLWAATERHpugLzAR1gLHAdaANsBdJ9A60HBiLiFzdDxBdupMrXDBGjeM179ayQiY6ORlf3
w/Sf16uXMJpetWpVrt+XKVOGdWtX47NjAfIsdm0lgZchjzOOTSsIpwXNHb+jUoN2APw+qDLaegZo
qMYjz0JCcy2nY6fOVKpcBfl/tOQLFy6kZs2a/PnnnwCsXr0aAEen3dRq3RsAc/NyzJ49m2vXrqGj
rcPYcWO54X0Dj7UemFhktztt2bIl586cw9nJmZq1ajLzs5l01uhMVEgUCrkCHS0dNmzYgMufLnzR
8wt++eUXAFx+ciHuZRxz9szh9p3bODs7o6mpiY6ODrOcZ2HTwob67eqzfNnyHDtaPnTyIwTvA73J
HJa2QARH/xf4CjiJCJF5DkgFYlTn1ANaAkdU5x1BhN00QgjIR6r0o6r0lkC6cVowYl9zidmMmpCQ
AJR8W7ncKFfOlm7dJjN//sI83Tv169cPywrl2TW7R67fF1dWDsz01mJQumzG8deLxa1oWa0eADVb
CYG1Z6d7ruXIZDKePH6ElpZWtrW/rJ62AZ4/fw5AWRs77pzZh4aGBtOnT2fx4sX06dOHEydO4LHf
IyN/3+/6YlPZJlsZ7jvcGThwIAF3ArKZMdW0q8nToKc4ODjQtl1bQpJDSExMxMDAAJuKNvge9aVx
58YMnDmQZt2ase7qOn775zdcH7syZukYlp5aSpVPquD888flDSg/QnAfkFU1VgmIAjojYg5PRwi2
V1nyxAKlAWOEUMwr7b/puZVRIqhatSqxsR/uG7Rx4x4oFJoYGBhkPMhZkclkeJ08TsR9Xw6vnKC2
yHWFhWWNRgA4t5fh3F7G4ZXjAXgV8Zx9877m3LZ59O7riIWFBZ6enmzYsCFbH2fOyJxGfv/99xnH
ZmZmWNvYqI7LEBQkTInWDRehK1u3Fo5ZrapbZThISA9rOXPbTFb/bzWRYdmDLQ0aOCjbZ0dHR6Z+
PxW/a37o6enx2eefYdfKjgVHFiCTyejQsQMvX72kcVdhKD14zmDmHZpH9YbVM2Ifp9Pn+z5s2bLl
o9Iiv4sXmUjggOr4IDAPuIIQhOkYAS8Rws7oNWkghN9LICWPMnLg5OSUcdyuXbtstlBFRd++ffn+
+2n4+R2hQYPPiro5akcmkzF27J8sWfIl+/fvzxYkKh1zc3NOHD9Gt+49WNbbHbMKlTG1tsOyZlMa
fzEaLR3dXEouPKJfPOLkplnUad8Pu1a9AJj9byrrh9fmeeBVNo3L9NL84Nw+bCtVJujJY15cP8ao
Ed8gVyipaGOLjn4pXoa/IDw8PMP7c8eOHQGwt2/Kv/8eZ8KECRllBT15AsCECRNYsyb7Ks+MGTN4
+uwpNjY2zJs1j+TkZAwMDPC94YtlNUtio2IpU64MAwcNZO2atbmuO44ZM4YOHTpw69YtTp48yW3/
2xy4cAC5XChamjVtxqGDh6je6M2BszoM6MDdi3dp3aY1Fy9cxM7O7u0u8nvg5eWFl5dXodWXTn41
L5UAd6A5sBuhGHEDJgGWwDLE9Nge0EMoPRoA4xHCzBmxztdalXYN6IOYEh8CnAA5Yr2xM2K6fUBV
xn8pltphEK7Px42byOTJu98pvkdJYPv2afTq1Z5FixblmSc1NZVLly7h4+PDNb/rnDl7jpCQEMpX
qk3V5j1o7jgFbT2DQmy14O/fBnPjXzfMKlRmzJbbXNi1BL1SJnzS6SsW9cjug6+UcWlSkpMpX7k2
qYnxyNNS0C9djpZfz6ZG8+64fteW7m0asHLlyoxzKlpbExkRSeMmjRkxfAQzZ83CrmYtypQxZeSI
4Tg4OLB582ZGjhzJhAkTWLJkCbq6OV8M036YhudpTxxGObBtzjZiYmOoULkC1ayqcfTwUa5cucKp
U6coXbo09vb2NGzYkAMHDmREh5PJZBxOPsziYYs5se0Ely9fxt7ent2huzE1z1t7nZU5PedQybgS
21y3vccVfz+Km3v9SsB2xHqgDbAJMESM1AYhprEjgW8RU+x5wN8I7fBfQAUgWZU3DKH8WIFYRDsK
pO9Enws4qMqYDOR05VGMhSCAhYUlrVqNpG7dDkXdlAJh48bRGBvLuHv3br7PUSgU+Pn5cfToUVy2
uhESGs4XM92oZt+lAFuak/And9gwsj7yNKG80dHRJSUlGZPyNrT6ahaHlo0GoM3g2VRp0pmy1jUx
NDXPtayz7ot4fs6N2/6ZOzBkMhkDBgzA3d0dYxNTancaio5eKSKC7vDg8mE2rl/H0KFDX9vGgICA
jNFX/bb1qVuxLgcOHcC4nDHP7j9DqVSSmpqKu7s7165dw9TUFP/b/uzeuTujjFELR7F32V6iQoXd
Yf0G9Xka8pSdL3bm+1otH70c/Zf62cotbIqbECxOFGshOHToN/j6PqJv3w9vcTk42J8//5yIo6Pj
e3kdXrhwEU7OP/Np/2m0HTpXjS18M4kx0ez7dSD3Lx/F0qoiz589BUBHz4BxLncoXd7mDSUI4qPD
WO5oRUpKcsZaXrpbK6VSiV3tuuhbN6LnzK0ArPq6OhopMYSH5dQux8fH892U77h37x5ep7wA0DXQ
xdjUmFnTZqGrq8vYsWOxq2XHyRMnadW6FWHhYcg0ZFSoXAFTC1P8z/kTHxPPkLlD0NDS4K85f6Gl
pUV1++oZO0zK25Rn25M3j+zCn4Yz0HogHTp24MTxE/m6HgWBJATzplgLwQ4dOvLiRTL9+/9a1E1R
KzEx4WzePJrJkyfi7Pz+Av7s2bN80aMXdbuOoOPohWpo4dvxz4qx3Dy2Fd1SptTrOozzOxZSsfan
fLPSO1/nK5VKFvcw5cSxwzRv3hyAhg0bkZCYSMDdOzx48IBatWtjUbUeacmJvHh4K1sEuVevXjF5
ymQS4hN49PgRj4IfUbFGReq0qIOmjiYVq1fk97G/E/wkGBMT4dWnbdu2tGnThkuXLnEg9gAGpTKX
FDrJxG6R48rjRDyPYGSdkXQe0plRi0dxaN0hkhKSUCqVfPXjV2/sV2eNztk+FxWSEMybYisEb968
ib19M4YNW51ncPOSSGpqMitW9KNz5w7s3/+32sq9du0azVu0os/c3ZhUqEw521pqKzs3nNuL233U
Bl8sqjXAbUpbngf4oqNXCiNza17c92OS+2NKm+fcIpcbm0c35IcJwzO8PqempiKXyzN2Y1y7do2D
Bw+io6PDiBEjKFdOGD6fP3+eli1bYtfEjrtXxLKChqYGunq6JCcmZ2idJ/xvAqtWCtvMtLQ0Onfp
nDFSBCHw0skqBN8F/7P+uM515bbPbRLjhRlUBcsKPH+W0xKgsJCEYN4USyF448YN6tevT716Hfny
y5zxYksqCoUcF5eJpKREExT0JEdQ+PelX78B7N4t1qp+OpaCpnbBKZSWfGlO/Mtw6nYYSOexi9Ez
LM3xjTO4dmgjSpkmSnkqfefuolab3vkq76/v2iOPfEhQ0JOMtOjoaNatW0fv3r3z1Kx6eHjQq5fQ
Tn/101ds+1VMUQMCArC2tkZXV5e4uDiMjIyEkuPwYT7/PPtOFQ0NDY7JM30+pqWlIZPJXhuQ/WXE
S+763CXwciBpqWlUbVCVT9p8wnHX47g5uTFw4ECmThE7XwICAqhTp07GzpSiQBKCeVPshGBaWhra
qod3zpyT7xT2sLhy+PBKwsNvcOuWP/r66ncYGx8fT6lSpQAYudYHq1pN33DGu7NqcA2int6jy9il
HFs3Ffte4/l80mq2TmlP0M2zmJiY0ajvD7ToPzVf5Z3c9BNnts3LmDKGhobSpm17QqNekRT7Eu/T
p2jaNPf+nD9/ni5duiDTlhH3Mg7IOfVUKBSsWLGCqVNFezp+1ZET28Qa3d/Rf2NkkntQqNiXsVw8
cJGAywEE3Qoi8lkk4c/DSU1JxdzCnEqVKqGtrc39e/cJeRGCuYU5vy//Pc+AUUWFJATzptgJQRcX
F4YNG8aoUeuxtKxZ1M1RG6GhD1m/fgTnzp2jRYsWBVaPtrZ2xs6HTt8upOXAHwqknuBbF/hzQmY/
0keej66eYOtUMZ3sMW0TSqWSsra1uHVqFzeOufLd7qfo5GLSk5wQx4JuRkRFRWFqakqXrg4Evohl
8NKTHFoyEoP4J5w7ezrP9igUCoYOG4rbVjeq16hOYECgaGdwMCEhIUyZOoWzZ84yecNkuo3qhkwm
IykxCR1dnWyR51JTU7l24hqBlwPxPeJLgG8AlhUtqVWzFnVq16FBgwY0atSIatWqZbysSwJSyM0S
ROfOndHQ0PygBGBcXBS7d/9EgwYNadSoUYHVEx0dnW3rV+22eYeKfF9eBPhm+7xzzpckxUUT7H+e
UqVKERcXh/fWn7PFFQHYP38I/Zz35ChP16AU5W2qs3XrViZNmoT3aS+GrfVBU1uHyvaf4bttTo5z
sqKhoYHrX664/uUKiBjCAwYNwO+aHynJKdRoWIPtT7ZjbpNppqOnr0dyUjI+h3y4dPgS96/cJzgw
GOPSxlSsWJGeDj0Z7jacypXzDt4ukR1JCKqBqKgotLVLvlv9dOTyVLZvn0aTJg04fNizQKf3xsbG
GcdzTynxdptHxCN/es/OfY/um0hNTiLk/jUe+v6LURkrzCvXwaxiDbS0dbH/cjzG5a3Z+ZNYj7t3
0TPjPMtP2hF44RCD+/Vi5MgRVK5cGUNDQzZu3MiPTr/lWV+dLsP4ffVaJk2ahFFpE+Kjw4iPDufy
nmV0bNsmX21++vQpy5Ytw9XNFctalrg+csXIzAgtbS00NDQIuhvEDe8bPPZ/zN0Ld3l48yHlypej
qX1TJo2ahIODA1WrVn2n6yUhCUG1cPPmTQwNS8w25zeybdsMIiOfcvDg3QIRgEqlkkOHDnH37l2s
rYUmtpx1dTZ925Bn9/wwMrMgPjoMZBoYmuR/YX65oxUxEW/WZmpqaiGXi9GnlrYOaakpBF44BECT
Jo2pV69eRt4RI0Yw+bsphD3yx7xy3RxlPbn6L23biP2/NjY27J8/lNjI5zRo1ITly5dm5AsICGDl
ypXIFXKa2jclNTWVfw7/w/kL54mLjcPO3o6hC4bSeUhntLS0iI+N5+/f/+bE1hM8f/icKlWqYGtr
y1e9vuLr3V9ja2v7Qa09FyWSEFQDrq7bsbSsXdTNUAs3bvzLo0dX6d27d471I7lczoABAxkzZnTG
Xtm3JTAwkN59+/EkKJiy1tVJfBmGppY24cH3qFixIraVKhMe9Yolvctj16oX/X/Jv0mOXasviY18
Dko54Q+uExX2FH19AxQKBYkJ8QDMnDmTX3/9FQ0NDVJTU9m9eze/zV/ALf+byGSyjMBEWUlNScHQ
tHyOdP+TO3l624dfD7oBsHb17/Tu3YfmXbpy9KhwnqRQKJjx4wxWr17NJ60/QddAl+PLj6Oto42h
iSFD5g2hZa+WmJQTLrN8j/uyf+V+/E76YVvJlm+HfMvYsWOzjZgl1IskBNXAw4cPqV695DtN8PU9
yKFDy7CwsGDv3r05vj9z5gx79uwmIiLinYXggEGDUZSuzITtZ9E1EFphpVLJxd3LeehzkOeBV0mI
E06GmvV5vVv//+IwaXW2z4mx0cRGPEcm0wCZjGNrJhEREZmhVNDW1mbQoEEMGjQot+IAsW5nbGLK
i0BftHQNeHrrPJFBd3l4+TAxUWEsWrwYS0tL0d5mzXim2oECYobQf2B/ouOimX90PnVb5hxJgtih
sX7Kes7uOUtCbAI9e/Tkj0t/UKdOnbfqv8S7IQnB9+TVq1cEBt7BweH1i+DFnXv3fDh0SHhUXrx4
ca55bG1FyMaIiHd3GXb/fiB9fl6cIQBBaAGb95tC835TUCqVxEW+ICEmivJVchca+SHy6T1ehjzB
uFxFUhJjiY18TmmLyly89HYxNjQ1Nfmsaxd2zPoCQ0MjKlepSo3qVZm0dCH9+/fP1WxIoVDg5OzE
kqVL6DCoAxNWT0BbJ6dWNuJ5BH/88Afn9p2jYaOGLJq3iIEDB6KlJT2WhYl0td+TCxcuYGRkgomJ
RVE35Z158OAy27fPoHz58oSEhOSZr3LlyiQkJLyXvWDdOnW5uGcFOvpGWFRrkGNdSyaTYVTWEqOy
lq8tRyGXE/X8AZFBd3lw5V+eB1xG39gMbS1tXj6/x4tHdwAoZVSahPjYjF0Y/Qe+fttYbqxds5rx
48bSokWLbKYpuREQEIBjf0fCosL45eAvNGif0xHSs/vPcPnJhQsHL9CiRQsuXrhI/fr137pdEupB
EoLvyZkzZzA3L7nmCC9eBLJ3rzNLlixhzJgxb8z/vgbTq35fwcjRY3H7ri3auvrU6/YtHYb/kmte
hUJBTHgwLwKvEv74FnfP7udFYKaZi76BISamZXjxTJi0tGnTlk8+qUuDb76gefPm2NnZZeygkMvl
r91N8TpMTU1p1arVa/MoFAqcfxbXsY1jG+avmY+eQfZgRvev32fLzC1c97pOx04d8bngk00JI1E0
SELwPbly5Qqmpvnba1rciI2NxN19BuPGjc3YlVDQNG7cmGtXLiGXy/Hw8KBPnz6EPbiBrmFpIoMD
UCoVhD64gbFpWaLDc9f0du36GevXr8sRwvJ1vKsAzA9+fn58PeRrIl5G4OThRKOO2e0qr528hpuT
G4G+gfTo2QP3W+6SHV8xoiTq2IvNjpG0tDSMjIzp2/dnqlZtUtTNeStSUhKZP/9z9PX1VfFRioYy
ZcpiampCnbqfEBYWirGRMaamJvTt2xdHR2E4HRcXR1JSUq6a28Li77//Zu++vdT7pB6e/3jifdqb
GnY1MDIy4vat23Qc3JGxK8ZmC6B+6cglXH504fn95wwaNAinuU5UqFChyPpQ0pB2jJQAPDw8GB6C
BQAAEn9JREFU0NU1pEqVxkXdlLciPPwJa9d+g56eHjt27Hjr87t3746hoSE7d+bfSWdeREZG5Pld
1pedoWHBR/Lz9/fHzs4uh2Jiw4YNjBkzhla9W3HJ/RIpKSkAlK1Zljot6zDBbQLWNcRs4PGtx2yY
uoHLRy+jqaXJ5MmTmXt6LkZGue/zlSh6pJHge9CzZy+CgpLo2XNGUTflrfjrr4nUqWOLi4vLO3kJ
sbS04sWL50Xqa06dKJVKNmzYkBEZ7vTp07RpI3Z7eHt7039gf+p2qMsM19x/Z4VCwd7le9nw/YaM
tP/973+MGjWKunXfXcP9sSM5UMibYiMEq1evSZ06X5aYwErx8a/4889xJCZGExIS8l4GuK9evaJ0
6ZK7S+bGjRtcv36dhQsXkipPJTwyHPtu9pxwO4E8TU7turWJiIggNiaWnv/ryfB5w3NohuVyOXuW
7cFjpQdhz8IAcHNz46uv3l4DLZETaTpcAkhISEBHR/3upQqKf/5ZRrlyRqxb5/beOxBKqgBMTU3l
68Ffc/DgQcrblufxnceM+G0EX07+Ej19PX7Y8gPee72JDo3GyMSIeu3qUdYy+2j53rV7uM9zx/eY
LyalTRgzYgyzZ8+W7PtKKPn91ZoBC4D2WdIGARMQwZcARiECLaUBvwKeiEBLbkA5RBzhoUAE8Cki
0FIaIuD6z6oy5gKfq9InA29n2VqIhIeHExoaQsWKJcOq/9ChRdy+7c358+cz3MF/bERGRtKpSyei
4qPYdGcT5W1yboUDaNMnp+ODsOAw9q3Yx9k9Z4kOi6Z9h/bs3b1X5UEoP+G7JYor+RGCPwBfA3FZ
0hoCw7N8tgAmAo0Rgu8sIgTnWOA6Qsj1B35CCLf1wJeIkJueiNCaGkAbhMC1BvYCBedhMx8oFAo8
PDzw8fHBwsKCJk2a8OjRI8zNzenevTtly1pjbFx0nnfzy9Wrnvj7n+Kvv/6iWbNmRd2cQme7+3Z+
nPUjoSGh1GtTj3Xn1mXT4v6XhLgEDqw5wN2Ld0mKT+LKv1fQ0NSgQcMGzJw6k9GjR+caKlOiZJIf
IXgf6A24qj6XQYTUnAz8oUprCpwDUlV/94F6QEsgPYrOEURoTSNAByEAQYTc7IQIyZnuLzxY1bYy
iGDvRcK4cePZsGE95uY2pKYmER0dlvGdlpYuvXvPfs3ZRc/LlyEEB/tz8OASqlSpwpAhQ4q6SYXO
/v37GfXtKIb+MpRPu3+KVTWrPPPGx8SzZdYWjrkcw9bWljat2pCYmEiPn3vg6OhYqIHIJQqP/AjB
fYi4wyBGa5uBKUBSljzGiNjD6cQCpVXpMa9JS0+voiovMpcyCl0Ienl5MW3adK5fv5bNW3RKSgIe
Hoto2PBzqlUr0kHqG3n1KoxNm0YTHx9Dr1692LdvX1E3qUhYunwp3cZ0o8/kvF3HJyUk4ersiud6
T2rWrMk/h/6hbdu2hdhKiaLkbVdyGwPVgHWAHlAbWAacQozw0jFCBGaPyZKeWxoIofgSSMmjjEJF
qVTi7PwzQUERdOv2fTZv0To6Bjg6OhV2k96Jffuc6dKlEz/+OBNzc/OP1vdcWHgYLT7JPTRASnIK
OxftxGOlB1aWVuzasQsHB4dCbqFEUfO2QvAykG74ZAvsQIwKLRBTZF2EcKwF+COmyJ+rznMAvBEj
vBTE6O8R0AVwAuTAImAJYk1QA4jKrRFOTk4Zx+3ataNdu3Zv2Y2cKBQKQkNDWb9+Az4+lxkwYD42
NiXPxislJRFf34O8evWCrVt9MoIYfaxoamgiT5VnS0tKSMJ9vjue6z0pV6Yc61avY8CAAUXUQol0
vLy88PLyKvR630YI/tc4T5YlLQT4HTiDEF4/Itb41gF/qdKTERplgDHANkATsSaYrgU+A1xQlTEu
r4ZkFYLqQC6XU7FiRUJCQjA0NGLgwPlYWxc/ASiXp3H79mkePPDBwMCU5s37YWSUuZVs9+7Z3L59
FhDusD52AQiQmJiIvrEwY0pMSMT9N3c813liWcGSjWs3ZmzNkyh6/jugcXZ2LpR6S+IcSe3G0hMm
TGTnzr9p3XooVavaY2hootby1YFCkcYvv3QGoH79+ujq6hMQcI9vv91MZORTTpxYS3x8OD4+F7G2
ti5RUcUKEgtLC8auHYvfST+Obz2OrY0tTnOc6Nu3b1E3TeINSDtG8katQjApKQl9fX2++OJ7GjXq
prZy1YlSqeTnnztkfH78+DG2trbo6OigVMrQ09Nn4MD+zJ07ByurvLWfHyPpa6FNmjbh159/pWvX
rkXcIon8UlhC8KO38tTT06N///74+R0s6qbkSUxMpmlOaGhohodnR0dH0tJSsLdvzMaNGyQBmAer
Vq3iss9lSQBK5Iq0zwdYvnw5Nja2JCXFoqdX/Lx96OuLNl25cgVzcxGDNqu218VlS5G0qySgUCg+
Ws24RP746EeCAObm5qSlpXL58oGibkqunDr1JyA250N2AThx4kRsbGyKpF0lAUkASryJkniHqF0x
olAoaNeuHdev32bcuK3o6hqotfx35dmzu/zzzxLCw4PR1NTAyKg01tbWXL16BQAzszI8fRr83i7v
JSSKI9KaYCGioaGBl5cXMpkcf/+TRd0cAO7fv8yWLRPp2bMrwcFBzJgxg4SEZMqWtadHj2kYGpZm
wYL5kgCUkHhPJCGoQkNDg9KlSxMfH13UTeHUqS3s2vUTffr0Ye3aNZQvX57Ro0eTmppI9erN8fX1
oHXrFowaNaqomyohUeKRhGAWYmJisbIquk3ycnkq69YNx9t7K87OTuzcmen63sLCgooVrVmzZghW
Vqbs2bO7yNopIfEhIWmHVTx8+JD4+DgqVcoZJ7agiY9/yYkTfxAQcIakpHjmzJnDzJkzc+Tz9b3M
nj17+OabbyQHnhISakJ6klTs2rULfX0jNDULd6fF9evH+PffNdSr9wnOznMYM2ZMntvdTExMGDly
ZKG2T0LiQ0cSgipsbW1JTU16c0Y1oFCkcezYWoKD/Xn1KoS1a1d/lL7+JCSKA9KaoIpGjRqRmBiP
n9/RAik/MTGGO3fOEBsbxZYtEwkN9eOzz1rj63tZEoASEkWINBJUoaWlhZmZGR4eC6hXrxMaGppq
K/vMGTfOn3enVClDIiLCqV+/ARcuXJXMWyQkigEf/UiwXbt2yGQyqlWrBujg4PA/tQrAkyc3cfXq
Pv7+ey9hYaGsWbOGY8eOSgJQQqKY8FHvGAkNDcXCwgIALS0dZs1S71T41Kk/8fZ25eLFix9lgCMJ
ifdBijtcCAweLNbievf+iTp12r8hd97I5Wk8e3aHW7dOoatrSIcOIwgPf4K3tyvDhw+XBKCERDHm
oxWCR44c4d9/jzF69B9YWFR7pzISEl6xfft0IiOD0NHRJSZGhESxt+/Fvn1zGT58OJs3b1ZnsyUk
JNTMRzsdTvcuMnfuqXcuY/PmsTx9epdbt25Ru3Ztnj17xoABA7lw4Tw1a9px/bqfZNQsIfGOSNPh
AkQuF4F3ypSxfucyfHz2ERUVzJMnTzJcWVlZWXH6tBfXr1+nbt26kgCUkCgBfJRPqYaGBrq6egwd
uvydzj958g+uXNmPi8uWHL78NDQ0aNiwoTqaKSEhUQjk10SmGSK2MEADROjMU8ARwFyVPgoRNe4C
kB6sQx/Yq8rvCZRVpX8KXATOAnOy1DMX8EGE6rR/u67kH5lMhkwmIzExNt/nKJUKwsIec/r0Vi5f
/htv79P069evoJooISFRSORHCP4A/IGIKQywApgAtAf2AdOB8sBEoAXQFZgP6ABjgetAG2Ar8JOq
jPXAQKAVQsA2ABqp8jUDBgBr3qtnb6B58xZcurQn1++USiVPntxg+/ZpLFr0BQsXdmPFir78+edY
IiJ8WbXqd5o0aVIg7SrsuKtSfSWzro+hvsIiP0LwPtCbzAXKAcAN1bE2kAg0RYzeUoEY1Tn1gJaI
0SKq/50AI4SAfKRKP6pKbwkcU6UFI6bqmUF11cz06dO4dcuLhw+vZEt/+TIEF5cJ7Nw5k2bNajFg
gCPXrvmyb99u4uPjuHnzeoE6MfjQb+wPub4PuW9FUV9hkR8huA9Iy/I5RPW/BTAeWA4YA6+y5IkF
SqvSY16T9t/03MooELp27cr48WM4cGABMTHhHD26mm3bvmfTptHUrm3L06fBuLpuxcbGBjs7Ozp2
7Iimpvp2kkhISBQP3lUx0h/4EfgciEQItaxh2oyAl/9Jzy0NhPB7CaTkUUaBsWjRIi5dusKKFf1p
2LAx/fp1xcJiKOPHj0dD46PfUSghIZGFSgiFB8DXCEWHaZbvyyOmyLqI0dsd1fEUhLIDsq/zXQOq
IKbYngglSCPguCrNBvDLoy33AaX0J/1Jfx/8332KEZWA84jpcyRwFaEdPkWmkBsJXAKuAF+q0vSB
XcAZhIBL1yQ3QwjVS8AvWeqZi9AaX0JMtyUkJCQkJCQkJCQkJCQkPhB0EDaD54HTQH2gGsJw2htY
S6Y5jjoMsH8GwhEKmauq+grK4FsHsZYZi9B0D8rSjkGqPqdTUH0zBzwQ19YbsZRRkPXZqfKdATaj
vt+uGcKMygfwRVzXgrg/5qrquI5YygGxRh2NUMzdU5UJ8J2qjItZyijI+kAsQR0GRr9Hff6I+9Ee
8axdVNX3HNihKtMBcR0vAL8XQt/GIn67S0Cv96wv6+aKsghTO+8sfSt2jEcYSwPUQDxMHghDaYB1
iItigVC2aCM0yDcQQmYKmReiP8J4G8RDUll17EmmAXaAqj5rVRnp65n1VHm/BZaSqdx5n/oWAE9V
aW2AeNVxQ8SaaLoQLMi+bQH6qvK2A7oXcH3uwGeqvG5qqm85EEimdcAxhLIN1H9/nEBsCLiDeHkB
PATmqY4vIIR7ZcRDmy6AzwKfFGB96fymSvtW9flt67unujZXEALnALAHGIK4ln8hNjzcBMxU508H
yhVg30qp0rUAE+DxO/bthCrNWtU3EAI8PV7FdGAyb6Ao7EBqk2lAHQhYAR0QkhvEW68TQrKrwwA7
UpUvGGHvaEXBGXy3IPOH8VblqYq4CSaT+QCpy7j8v32rqEq3Bv4FvgJOFnB9ugijdpnq3BQ11GeK
EK7pdqO1Eb9RGdR/fxxTnfuFqg9lVf1aqcq7HXF/BiOEvVKVrg0kFWB9IF5m8izl8w71XUBsdkhF
CJ0mCIFyRHUtdRCKzJvAMsR9+wIx4i+ovilUn0upypO/Y9/+u7mi7H/KSL9XXktRCEE/xGgBxDC3
HGCQ5fs3GU+/rQH2gyz1gbhQ6f1Wt8F3JELopfdNC3BBvOHisuQvqL6VQUx/o4DOQBDibWhUgPUt
QdzktxFT8dNq6F8w4p5IfzhkWfKr+/54ReaGALkqXSNL2VGqtqQhfl+Zqs9XEaOsrO1QR32Rqvrq
IraWzlHVmf4Cfdv6zpO52SFWVVd6GbGAHmI01h4xinNAvLCrF0Df0q9lAmKqehsxQk2ffr9Lfa9L
jyMfGy6KQgj+iejUGcS0JgBxcdJJN55WhwF2DOINl16fJeJNFY0Ybq9DvQbfpxBvufS+oapzHWJk
Uxvxtn1VgH2LREx5AA4i3vwFeS3dgNZALcAVsbSgjv7FAelbdBRZ8qv7/siarqlKV6jygHhpJqiO
9YBtgCEwTpUWkyWvOuorp6pvMGLWchIYiliP7Pqe9aWPutLLMEaMZl8ipvphiCUcb8SUU919S7+W
zRGDhEoIm+AvESP79+3byzzKeC1FIQSbIn7Y1oi1iRDE26qt6nsHxI9wSZUn3QC7FmKB9xxCcGXN
G4uYhqUbYHdRpZ8DHFX1fYV4OJ8jphnjEWtmj1VlqaO+V4gfoA1CUMQhRobtEVPw24hR4eUC7NsZ
MpUEbVXlFuS1TB+lgZhGmaipviuqc2XAXcQNHYX674+uqjRL1f9IxLrud6oyBiLW/2SItWs/xKJ+
+rS4oOqbjhAU7RGziWWIqeC71AdiSilDKJkeq8pwQAipI4iRZxnE7OVT4FYB9q0UYnkjBUhGCCqT
96jPJkt9uZVR7DBDrFedRzxQVRFDby9V2iYyh/7qMMBegLjIsapyalBwBt9miCljLOKN5JilHZXI
rh0uiL5VRdwQxxA3gyeZ04GCqq8TQnPnhXhI0x0svm99lRDT+YsIbeNVCub+SDfQ90OMdNPzps8O
HiOmcF8iHtyTZN43zQqovv9qNOeSqRh5l/quIX6zFohn7RxiNhQC/K0qsz/iOl4Bpr1HXfnt2yKE
Zvc8sPA968u6ucIcsRZ4NkvfJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQk
JCQkJCQ+Pv4PeOABo584nw0AAAAASUVORK5CYII=
"
>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2>Joins</h2>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[24]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="kn">from</span> <span class="nn">geopandas.tools</span> <span class="kn">import</span> <span class="n">sjoin</span>
<span class="n">join_left_df</span> <span class="o">=</span> <span class="n">sjoin</span><span class="p">(</span><span class="n">pointdf</span><span class="p">,</span> <span class="n">polydf</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s">&quot;left&quot;</span><span class="p">)</span>
<span class="n">join_left_df</span>
<span class="c"># Note the NaNs where the point did not intersect a boro</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">
    Out[24]:</div>

<div class="output_html rendered_html output_subarea output_pyout">
<div style="max-height:1000px;max-width:1500px;overflow:auto;">
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>geometry</th>
      <th>value1</th>
      <th>value2</th>
      <th>BoroCode</th>
      <th>BoroName</th>
      <th>Shape_Area</th>
      <th>Shape_Leng</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>  POINT (913175 120121)</td>
      <td> 1033296</td>
      <td> 793054</td>
      <td>NaN</td>
      <td>          None</td>
      <td>          NaN</td>
      <td>           NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>  POINT (932450 139211)</td>
      <td> 1071661</td>
      <td> 793239</td>
      <td>  5</td>
      <td> Staten Island</td>
      <td> 1.623847e+09</td>
      <td> 330454.175933</td>
    </tr>
    <tr>
      <th>2</th>
      <td>  POINT (951725 158301)</td>
      <td> 1110026</td>
      <td> 793424</td>
      <td>  5</td>
      <td> Staten Island</td>
      <td> 1.623847e+09</td>
      <td> 330454.175933</td>
    </tr>
    <tr>
      <th>3</th>
      <td>  POINT (971000 177391)</td>
      <td> 1148391</td>
      <td> 793609</td>
      <td>NaN</td>
      <td>          None</td>
      <td>          NaN</td>
      <td>           NaN</td>
    </tr>
    <tr>
      <th>4</th>
      <td>  POINT (990275 196481)</td>
      <td> 1186756</td>
      <td> 793794</td>
      <td>NaN</td>
      <td>          None</td>
      <td>          NaN</td>
      <td>           NaN</td>
    </tr>
    <tr>
      <th>5</th>
      <td> POINT (1009550 215571)</td>
      <td> 1225121</td>
      <td> 793979</td>
      <td>  4</td>
      <td>        Queens</td>
      <td> 3.045079e+09</td>
      <td> 896875.396449</td>
    </tr>
    <tr>
      <th>6</th>
      <td> POINT (1028825 234661)</td>
      <td> 1263486</td>
      <td> 794164</td>
      <td>  2</td>
      <td>         Bronx</td>
      <td> 1.186822e+09</td>
      <td> 464475.145651</td>
    </tr>
    <tr>
      <th>7</th>
      <td> POINT (1048100 253751)</td>
      <td> 1301851</td>
      <td> 794349</td>
      <td>NaN</td>
      <td>          None</td>
      <td>          NaN</td>
      <td>           NaN</td>
    </tr>
    <tr>
      <th>8</th>
      <td> POINT (1067375 272841)</td>
      <td> 1340216</td>
      <td> 794534</td>
      <td>NaN</td>
      <td>          None</td>
      <td>          NaN</td>
      <td>           NaN</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[25]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">join_right_df</span> <span class="o">=</span> <span class="n">sjoin</span><span class="p">(</span><span class="n">pointdf</span><span class="p">,</span> <span class="n">polydf</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s">&quot;right&quot;</span><span class="p">)</span>
<span class="n">join_right_df</span>
<span class="c"># Note Staten Island is repeated</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">
    Out[25]:</div>

<div class="output_html rendered_html output_subarea output_pyout">
<div style="max-height:1000px;max-width:1500px;overflow:auto;">
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>BoroCode</th>
      <th>BoroName</th>
      <th>Shape_Area</th>
      <th>Shape_Leng</th>
      <th>geometry</th>
      <th>value1</th>
      <th>value2</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td> 5</td>
      <td> Staten Island</td>
      <td> 1.623847e+09</td>
      <td> 330454.175933</td>
      <td> (POLYGON ((970217.0223999023 145643.3322143555...</td>
      <td> 1071661</td>
      <td> 793239</td>
    </tr>
    <tr>
      <th>1</th>
      <td> 5</td>
      <td> Staten Island</td>
      <td> 1.623847e+09</td>
      <td> 330454.175933</td>
      <td> (POLYGON ((970217.0223999023 145643.3322143555...</td>
      <td> 1110026</td>
      <td> 793424</td>
    </tr>
    <tr>
      <th>2</th>
      <td> 3</td>
      <td>      Brooklyn</td>
      <td> 1.937810e+09</td>
      <td> 741227.337073</td>
      <td> (POLYGON ((1021176.479003906 151374.7969970703...</td>
      <td>     NaN</td>
      <td>    NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td> 4</td>
      <td>        Queens</td>
      <td> 3.045079e+09</td>
      <td> 896875.396449</td>
      <td> (POLYGON ((1029606.076599121 156073.8142089844...</td>
      <td> 1225121</td>
      <td> 793979</td>
    </tr>
    <tr>
      <th>4</th>
      <td> 1</td>
      <td>     Manhattan</td>
      <td> 6.364308e+08</td>
      <td> 358400.912836</td>
      <td> (POLYGON ((981219.0557861328 188655.3157958984...</td>
      <td>     NaN</td>
      <td>    NaN</td>
    </tr>
    <tr>
      <th>5</th>
      <td> 2</td>
      <td>         Bronx</td>
      <td> 1.186822e+09</td>
      <td> 464475.145651</td>
      <td> (POLYGON ((1012821.805786133 229228.2645874023...</td>
      <td> 1263486</td>
      <td> 794164</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[27]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">join_inner_df</span> <span class="o">=</span> <span class="n">sjoin</span><span class="p">(</span><span class="n">pointdf</span><span class="p">,</span> <span class="n">polydf</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s">&quot;inner&quot;</span><span class="p">)</span>
<span class="n">join_inner_df</span>
<span class="c"># Note the lack of NaNs; dropped anything that didn&#39;t intersect</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">
    Out[27]:</div>

<div class="output_html rendered_html output_subarea output_pyout">
<div style="max-height:1000px;max-width:1500px;overflow:auto;">
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>geometry</th>
      <th>value1</th>
      <th>value2</th>
      <th>BoroCode</th>
      <th>BoroName</th>
      <th>Shape_Area</th>
      <th>Shape_Leng</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>  POINT (932450 139211)</td>
      <td> 1071661</td>
      <td> 793239</td>
      <td> 5</td>
      <td> Staten Island</td>
      <td> 1.623847e+09</td>
      <td> 330454.175933</td>
    </tr>
    <tr>
      <th>1</th>
      <td>  POINT (951725 158301)</td>
      <td> 1110026</td>
      <td> 793424</td>
      <td> 5</td>
      <td> Staten Island</td>
      <td> 1.623847e+09</td>
      <td> 330454.175933</td>
    </tr>
    <tr>
      <th>2</th>
      <td> POINT (1009550 215571)</td>
      <td> 1225121</td>
      <td> 793979</td>
      <td> 4</td>
      <td>        Queens</td>
      <td> 3.045079e+09</td>
      <td> 896875.396449</td>
    </tr>
    <tr>
      <th>3</th>
      <td> POINT (1028825 234661)</td>
      <td> 1263486</td>
      <td> 794164</td>
      <td> 2</td>
      <td>         Bronx</td>
      <td> 1.186822e+09</td>
      <td> 464475.145651</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We're not limited to using the <code>intersection</code> binary predicate. Any of the <code>Shapely</code> geometry methods that return a Boolean can be used by specifying the <code>op</code> kwarg.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[32]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">sjoin</span><span class="p">(</span><span class="n">pointdf</span><span class="p">,</span> <span class="n">polydf</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s">&quot;left&quot;</span><span class="p">,</span> <span class="n">op</span><span class="o">=</span><span class="s">&quot;within&quot;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">
    Out[32]:</div>

<div class="output_html rendered_html output_subarea output_pyout">
<div style="max-height:1000px;max-width:1500px;overflow:auto;">
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>geometry</th>
      <th>value1</th>
      <th>value2</th>
      <th>BoroCode</th>
      <th>BoroName</th>
      <th>Shape_Area</th>
      <th>Shape_Leng</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>  POINT (913175 120121)</td>
      <td> 1033296</td>
      <td> 793054</td>
      <td>NaN</td>
      <td>          None</td>
      <td>          NaN</td>
      <td>           NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>  POINT (932450 139211)</td>
      <td> 1071661</td>
      <td> 793239</td>
      <td>  5</td>
      <td> Staten Island</td>
      <td> 1.623847e+09</td>
      <td> 330454.175933</td>
    </tr>
    <tr>
      <th>2</th>
      <td>  POINT (951725 158301)</td>
      <td> 1110026</td>
      <td> 793424</td>
      <td>  5</td>
      <td> Staten Island</td>
      <td> 1.623847e+09</td>
      <td> 330454.175933</td>
    </tr>
    <tr>
      <th>3</th>
      <td>  POINT (971000 177391)</td>
      <td> 1148391</td>
      <td> 793609</td>
      <td>NaN</td>
      <td>          None</td>
      <td>          NaN</td>
      <td>           NaN</td>
    </tr>
    <tr>
      <th>4</th>
      <td>  POINT (990275 196481)</td>
      <td> 1186756</td>
      <td> 793794</td>
      <td>NaN</td>
      <td>          None</td>
      <td>          NaN</td>
      <td>           NaN</td>
    </tr>
    <tr>
      <th>5</th>
      <td> POINT (1009550 215571)</td>
      <td> 1225121</td>
      <td> 793979</td>
      <td>  4</td>
      <td>        Queens</td>
      <td> 3.045079e+09</td>
      <td> 896875.396449</td>
    </tr>
    <tr>
      <th>6</th>
      <td> POINT (1028825 234661)</td>
      <td> 1263486</td>
      <td> 794164</td>
      <td>  2</td>
      <td>         Bronx</td>
      <td> 1.186822e+09</td>
      <td> 464475.145651</td>
    </tr>
    <tr>
      <th>7</th>
      <td> POINT (1048100 253751)</td>
      <td> 1301851</td>
      <td> 794349</td>
      <td>NaN</td>
      <td>          None</td>
      <td>          NaN</td>
      <td>           NaN</td>
    </tr>
    <tr>
      <th>8</th>
      <td> POINT (1067375 272841)</td>
      <td> 1340216</td>
      <td> 794534</td>
      <td>NaN</td>
      <td>          None</td>
      <td>          NaN</td>
      <td>           NaN</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Define-a-Table">Define a Table<a class="anchor-link" href="#Define-a-Table">&#182;</a></h1>
</div>
</div>
</div>

<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">Table</span><span class="p">,</span> <span class="n">Column</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">String</span><span class="p">,</span> <span class="n">MetaData</span>
<span class="kn">from</span> <span class="nn">geoalchemy2</span> <span class="kn">import</span> <span class="n">Geometry</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">that</span> <span class="n">each</span> <span class="n">new</span> <span class="n">dg</span> <span class="n">that</span> <span class="n">comes</span> <span class="n">into</span> <span class="n">group</span> <span class="n">has</span> <span class="n">to</span> <span class="n">make</span> <span class="n">a</span> <span class="n">larger</span> <span class="n">number</span> <span class="n">of</span> <span class="n">connections</span><span class="p">,</span>
<span class="n">however</span><span class="p">,</span> <span class="n">the</span> <span class="n">current</span> <span class="n">DG</span> <span class="k">continue</span> <span class="n">to</span> <span class="n">require</span> <span class="n">no</span> <span class="n">extra</span> <span class="n">work</span><span class="err">?</span> <span class="n">right</span><span class="err">?</span>

<span class="n">first</span> <span class="n">DG</span> <span class="o">--</span> <span class="n">no</span> <span class="n">connections</span>
<span class="mi">2</span><span class="n">nd</span> <span class="n">DG</span> <span class="o">--</span> <span class="mi">1</span> <span class="n">connection</span> <span class="p">(</span><span class="n">w</span><span class="o">/</span> <span class="mi">1</span><span class="n">st</span><span class="p">)</span>
<span class="mi">3</span><span class="n">rd</span> <span class="n">DG</span> <span class="o">--</span> <span class="mi">2</span> <span class="n">connections</span> <span class="p">(</span><span class="n">w</span><span class="o">/</span> <span class="mi">1</span><span class="n">st</span><span class="p">,</span> <span class="mi">2</span><span class="n">nd</span><span class="p">)</span>
<span class="mi">4</span>    <span class="mi">3</span>   

<span class="n">Is</span> <span class="n">first</span> <span class="n">DG</span> <span class="n">connected</span> <span class="k">with</span> <span class="nb">all</span> <span class="mi">2</span><span class="o">-</span><span class="mi">4</span><span class="err">?</span>  <span class="n">yes</span><span class="o">.</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre> 
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre> 
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre> 
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre> 
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[2]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span> <span class="k">as</span> <span class="n">soup</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s">&#39;display.max_rows&#39;</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">re</span> <span class="kn">import</span> <span class="n">findall</span> <span class="k">as</span> <span class="n">re_findall</span>

<span class="c"># fpath_pdf = &#39;/Users/admin/Projects/GIS/pdf_data/usps_sample.pdf&#39;</span>
<span class="n">fpath_pdf</span> <span class="o">=</span> <span class="s">&#39;/Users/admin/Projects/GIS/pdf_data/usps_street_abbr.pdf&#39;</span>
<span class="n">fpath_xml</span> <span class="o">=</span> <span class="s">&#39;/Users/admin/Projects/GIS/pdf_data/usps_sample_pg3&#39;</span>
<span class="n">save_csv_path</span> <span class="o">=</span> <span class="s">&#39;/Users/admin/Projects/GIS/table_data/usps_street_abbr.csv&#39;</span>

<span class="n">t</span> <span class="o">=</span> <span class="err">!</span><span class="n">pdftohtml</span> <span class="o">-</span><span class="n">i</span> <span class="o">-</span><span class="n">stdout</span> <span class="o">-</span><span class="n">xml</span> <span class="err">$</span><span class="n">fpath_pdf</span>
<span class="c"># t = !pdftohtml -i -xml $fpath_pdf $fpath_xml</span>
<span class="n">html</span> <span class="o">=</span> <span class="s">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">l</span><span class="p">)</span>
<span class="n">pages</span><span class="o">=</span><span class="n">soup</span><span class="p">(</span><span class="n">html</span><span class="p">)</span><span class="o">.</span><span class="n">findAll</span><span class="p">(</span><span class="s">&#39;page&#39;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[3]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">d</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">pg</span> <span class="ow">in</span> <span class="n">pages</span><span class="p">:</span>
    <span class="n">idx</span> <span class="o">=</span> <span class="n">pages</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">pg</span><span class="p">)</span>
    <span class="n">pg</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">pg</span><span class="p">)</span>
    <span class="n">line_iter</span> <span class="o">=</span> <span class="n">re_findall</span><span class="p">(</span><span class="s">r&#39;(&lt;text.*?&lt;/text&gt;)&#39;</span><span class="p">,</span><span class="n">pg</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">line_iter</span><span class="p">:</span>
        <span class="n">a</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;page_num&#39;</span><span class="p">]</span><span class="o">+</span><span class="n">re_findall</span><span class="p">(</span><span class="s">&#39;([a-zA-Z]+)+\=&#39;</span><span class="p">,</span> <span class="n">it</span><span class="p">)</span><span class="o">+</span><span class="p">[</span><span class="s">&#39;text&#39;</span><span class="p">]</span>
        <span class="n">b</span><span class="o">=</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span><span class="o">+</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">s</span><span class="p">),</span><span class="n">re_findall</span><span class="p">(</span><span class="s">&#39;[0-9]+&#39;</span><span class="p">,</span> <span class="n">it</span><span class="p">))</span><span class="o">+</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">soup</span><span class="p">(</span><span class="n">it</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">)]</span>
        <span class="n">d</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)))</span>

<span class="n">g</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="n">pgs_grp</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s">&#39;page_num&#39;</span><span class="p">)</span>

<span class="n">cols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;prim_suff&#39;</span><span class="p">,</span><span class="s">&#39;common_use&#39;</span><span class="p">,</span><span class="s">&#39;usps_abbr&#39;</span><span class="p">]</span>
<span class="n">A</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">cols</span><span class="p">)</span>
<span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">pages</span><span class="p">)):</span>
    
    <span class="n">pg</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">pgs_grp</span><span class="o">.</span><span class="n">indices</span><span class="p">[</span><span class="n">k</span><span class="p">],:]</span>
    
    <span class="n">top_list</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">top</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
    <span class="n">left_list</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">left</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
    <span class="n">pg</span><span class="p">[</span><span class="s">&#39;top_cnt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">top</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">top_list</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
    <span class="n">pg</span><span class="p">[</span><span class="s">&#39;left_cnt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">left</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">left_list</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
    <span class="n">pg</span><span class="p">[</span><span class="s">&#39;is_alpha&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">.</span><span class="n">isalpha</span><span class="p">())</span>
    <span class="n">pg</span> <span class="o">=</span> <span class="n">pg</span><span class="p">[</span><span class="n">pg</span><span class="o">.</span><span class="n">is_alpha</span><span class="o">==</span><span class="bp">True</span><span class="p">]</span>
    <span class="n">pg</span><span class="p">[</span><span class="s">&#39;all_caps&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">isupper</span><span class="p">())</span>
    <span class="n">tops</span> <span class="o">=</span> <span class="n">pg</span><span class="p">[</span><span class="n">pg</span><span class="o">.</span><span class="n">top_cnt</span><span class="o">==</span><span class="mi">3</span><span class="p">]</span>
    
    <span class="n">a</span><span class="o">=</span><span class="n">tops</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s">&#39;top&#39;</span><span class="p">)</span>
    <span class="n">z</span><span class="o">=</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">idxmax</span><span class="p">()</span><span class="o">-</span><span class="n">a</span><span class="o">.</span><span class="n">idxmin</span><span class="p">())</span><span class="o">.</span><span class="n">left</span>
    <span class="n">top_rows</span> <span class="o">=</span> <span class="n">z</span><span class="p">[</span><span class="n">z</span><span class="o">==</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
    <span class="n">first_row</span> <span class="o">=</span> <span class="n">pg</span><span class="p">[</span><span class="n">pg</span><span class="o">.</span><span class="n">top</span><span class="o">==</span><span class="n">top_rows</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
    <span class="n">pg</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">first_row</span><span class="p">:,:]</span>
    <span class="n">last_row</span> <span class="o">=</span> <span class="n">pg</span><span class="p">[</span><span class="n">pg</span><span class="o">.</span><span class="n">all_caps</span><span class="o">==</span><span class="bp">True</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
    <span class="n">pg</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">ix</span><span class="p">[:</span><span class="n">last_row</span><span class="p">,:]</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">pg</span><span class="p">[</span><span class="s">&#39;top_st&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">top</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="bp">True</span> <span class="k">if</span> <span class="n">top_rows</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">!=</span><span class="mi">0</span> <span class="k">else</span> <span class="bp">False</span><span class="p">)</span>

    <span class="n">a</span> <span class="o">=</span> <span class="n">pg</span><span class="p">[(</span><span class="n">pg</span><span class="o">.</span><span class="n">top_cnt</span><span class="o">==</span><span class="mi">3</span><span class="p">)</span><span class="o">&amp;</span><span class="p">(</span><span class="n">pg</span><span class="o">.</span><span class="n">top_st</span><span class="o">==</span><span class="bp">True</span><span class="p">)]</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s">&#39;top&#39;</span><span class="p">)</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">groups</span><span class="o">.</span><span class="n">values</span><span class="p">())</span><span class="o">.</span><span class="n">T</span>
    <span class="n">prim_suff_idx</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">b</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>
    <span class="n">primary_suffixes</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">prim_suff_idx</span><span class="p">,</span><span class="s">&#39;text&#39;</span><span class="p">]</span>
    <span class="n">usps_abbr</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="nb">sorted</span><span class="p">(</span><span class="n">b</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()),</span><span class="s">&#39;text&#39;</span><span class="p">]</span>
    <span class="n">usps_abbr_idx</span> <span class="o">=</span> <span class="n">usps_abbr</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
    
    <span class="n">d</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">prim_suff_idx</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">this_set</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="n">prim_suff_idx</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">prim_suff_idx</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">dump</span> <span class="o">=</span> <span class="n">this_set</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">this_set</span><span class="p">:</span>
            <span class="n">d</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">cols</span><span class="p">,[</span><span class="n">prim_suff_idx</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">c</span><span class="p">,</span><span class="n">usps_abbr_idx</span><span class="p">[</span><span class="n">i</span><span class="p">]])))</span>

        <span class="k">if</span> <span class="n">i</span><span class="o">==</span><span class="nb">len</span><span class="p">(</span><span class="n">prim_suff_idx</span><span class="p">)</span><span class="o">-</span><span class="mi">2</span><span class="p">:</span>
            <span class="n">a</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="n">prim_suff_idx</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">],</span><span class="n">pg</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">this_set</span> <span class="o">=</span> <span class="p">[</span><span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span><span class="o">+</span><span class="n">a</span><span class="p">[</span><span class="mi">3</span><span class="p">:]</span>
            <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">this_set</span><span class="p">:</span>
                <span class="n">d</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">cols</span><span class="p">,[</span><span class="n">prim_suff_idx</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">],</span><span class="n">c</span><span class="p">,</span><span class="n">usps_abbr_idx</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]])))</span>
    
    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">ix</span><span class="p">[:,[</span><span class="s">&#39;prim_suff&#39;</span><span class="p">,</span><span class="s">&#39;common_use&#39;</span><span class="p">,</span><span class="s">&#39;usps_abbr&#39;</span><span class="p">]]</span>
    <span class="n">df</span><span class="p">[</span><span class="s">&#39;prim_suff&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">prim_suff</span><span class="p">,</span><span class="s">&#39;text&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
    <span class="n">df</span><span class="p">[</span><span class="s">&#39;common_use&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">common_use</span><span class="p">,</span><span class="s">&#39;text&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
    <span class="n">df</span><span class="p">[</span><span class="s">&#39;usps_abbr&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">usps_abbr</span><span class="p">,</span><span class="s">&#39;text&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="c">#     print pg.ix[this_set,:].drop([&#39;is_alpha&#39;,&#39;all_caps&#39;,&#39;width&#39;,&#39;font&#39;,&#39;height&#39;,&#39;page_num&#39;],axis=1)</span>
<span class="c">#     print A.append(df,ignore_index=True)</span>
<span class="c">#     z=raw_input(&#39;hit enter...&#39;)</span>
<span class="c">#     if z==0:</span>
<span class="c">#         pdb.set_trace()</span>
    <span class="n">A</span> <span class="o">=</span> <span class="n">A</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">df</span><span class="p">,</span><span class="n">ignore_index</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    

<span class="k">print</span> <span class="s">&#39;add rows to adjust for cases where prim_suff was not included as common_use&#39;</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">A</span><span class="o">.</span><span class="n">prim_suff</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">A</span><span class="o">.</span><span class="n">common_use</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="n">z</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s">&#39;all_u&#39;</span><span class="p">:</span><span class="n">a</span><span class="p">})</span>
<span class="n">z</span><span class="p">[</span><span class="s">&#39;cnt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">z</span><span class="o">.</span><span class="n">all_u</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">b</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
<span class="n">z</span><span class="p">[</span><span class="s">&#39;common_use&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">a</span>
<span class="n">suff_idx_map</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">A</span><span class="o">.</span><span class="n">prim_suff</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span><span class="n">A</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">tolist</span><span class="p">()))</span>
<span class="n">z</span><span class="p">[</span><span class="s">&#39;usps_abbr&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">z</span><span class="o">.</span><span class="n">all_u</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">A</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">suff_idx_map</span><span class="p">[</span><span class="n">s</span><span class="p">],</span><span class="s">&#39;usps_abbr&#39;</span><span class="p">])</span>
<span class="n">z</span> <span class="o">=</span> <span class="n">z</span><span class="p">[</span><span class="n">z</span><span class="o">.</span><span class="n">cnt</span><span class="o">==</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s">&#39;cnt&#39;</span><span class="p">],</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;all_u&#39;</span><span class="p">:</span><span class="s">&#39;prim_suff&#39;</span><span class="p">})</span>
<span class="k">print</span> <span class="nb">len</span><span class="p">(</span><span class="n">z</span><span class="p">),</span><span class="s">&#39;rows added&#39;</span>
<span class="k">print</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span><span class="n">z</span><span class="p">,</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span>
<span class="n">A</span> <span class="o">=</span> <span class="n">A</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">z</span><span class="p">,</span><span class="n">ignore_index</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s">&#39;prim_suff&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>


<span class="k">print</span> <span class="nb">len</span><span class="p">(</span><span class="n">A</span><span class="p">),</span><span class="s">&#39;before haircut, e.g., remove nulls, dupes&#39;</span>
<span class="n">erroneous</span> <span class="o">=</span> <span class="n">A</span><span class="p">[(</span><span class="n">A</span><span class="o">.</span><span class="n">prim_suff</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">==</span><span class="bp">True</span><span class="p">)</span><span class="o">|</span>
  <span class="p">(</span><span class="n">A</span><span class="o">.</span><span class="n">common_use</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">==</span><span class="bp">True</span><span class="p">)</span><span class="o">|</span>
  <span class="p">(</span><span class="n">A</span><span class="o">.</span><span class="n">usps_abbr</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">==</span><span class="bp">True</span><span class="p">)]</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="k">print</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">Erroneous Rows:</span><span class="se">\n\n</span><span class="s">&#39;</span><span class="p">,</span><span class="n">erroneous</span>
<span class="n">err_idx</span> <span class="o">=</span> <span class="n">erroneous</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="n">A</span> <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="n">A</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">err_idx</span><span class="p">)</span><span class="o">==</span><span class="bp">False</span><span class="p">]</span>
<span class="k">print</span> <span class="nb">len</span><span class="p">(</span><span class="n">A</span><span class="p">),</span><span class="s">&#39;after erroneous&#39;</span>
<span class="n">A</span><span class="p">[</span><span class="s">&#39;dupes&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">A</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">==</span><span class="n">s</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">dupe_idx</span> <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="n">A</span><span class="o">.</span><span class="n">dupes</span><span class="o">==</span><span class="bp">True</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="n">prim_suff_list</span> <span class="o">=</span> <span class="n">A</span><span class="o">.</span><span class="n">prim_suff</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="n">A</span><span class="p">[</span><span class="s">&#39;cnt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">A</span><span class="o">.</span><span class="n">prim_suff</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">prim_suff_list</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
<span class="k">print</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span><span class="n">A</span><span class="p">[(</span><span class="n">A</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">dupe_idx</span><span class="p">)</span><span class="o">==</span><span class="bp">True</span><span class="p">)]</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s">&#39;cnt&#39;</span><span class="p">),</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span>
<span class="n">A</span> <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="n">A</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">dupe_idx</span><span class="p">)</span><span class="o">==</span><span class="bp">False</span><span class="p">]</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="k">print</span> <span class="nb">len</span><span class="p">(</span><span class="n">A</span><span class="p">),</span><span class="s">&#39;after dupes&#39;</span>



<span class="k">print</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span><span class="s">&#39;Save Path:</span><span class="se">\n\n\t\t</span><span class="s">&#39;</span><span class="p">,</span><span class="n">save_csv_path</span><span class="p">,</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span>
<span class="n">z</span><span class="o">=</span><span class="nb">raw_input</span><span class="p">(</span><span class="s">&#39;type &quot;y&quot; to confirm save...&#39;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">z</span><span class="o">==</span><span class="s">&#39;y&#39;</span><span class="p">:</span>
    <span class="n">A</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">save_csv_path</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>add rows to adjust for cases where prim_suff was not included as common_use
5 rows added

      prim_suff  common_use usps_abbr
54   EXTENSIONS  EXTENSIONS      EXTS
83      HEIGHTS     HEIGHTS       HTS
88        INLET       INLET      INLT
118     MISSION     MISSION       MSN
137       PLACE       PLACE        PL 

507 before haircut, e.g., remove nulls, dupes

Erroneous Rows:

Empty DataFrame
Columns: [prim_suff, common_use, usps_abbr]
Index: []
507 after erroneous

      prim_suff common_use usps_abbr dupes  cnt
382         ROW        ROW       ROW  True    1
288        MEWS       MEWS      MEWS  True    1
141        FALL       FALL      FALL  True    1
278        MALL       MALL      MALL  True    1
357        RAMP       RAMP      RAMP  True    1
503        WAYS       WAYS      WAYS  True    1
383         RUE        RUE       RUE  True    1
384         RUN        RUN       RUN  True    1
257        LAND       LAND      LAND  True    1
404        SPUR       SPUR      SPUR  True    1
324        PASS       PASS      PASS  True    1
500        WALL       WALL      WALL  True    1
498        WALK       WALK      WALK  True    1
256       LAKES        LKS       LKS  True    2
311        OVAL       OVAL      OVAL  True    2
306        NECK        NCK       NCK  True    2
219       HILLS        HLS       HLS  True    2
281      MANORS       MNRS      MNRS  True    2
279       MANOR        MNR       MNR  True    2
225       INLET       INLT      INLT  True    2
254        LAKE         LK        LK  True    2
276        LOOP       LOOP      LOOP  True    2
269        LOCK        LCK       LCK  True    2
266        LOAF         LF        LF  True    2
264       LIGHT        LGT       LGT  True    2
233        ISLE       ISLE      ISLE  True    2
315        PARK       PARK      PARK  True    2
245         KEY         KY        KY  True    2
247        KEYS        KYS       KYS  True    2
251      KNOLLS       KNLS      KNLS  True    2
271       LOCKS       LCKS      LCKS  True    2
261        LANE         LN        LN  True    2
334       PLACE         PL        PL  True    2
329        PIKE       PIKE      PIKE  True    2
501         WAY        WAY       WAY  True    2
492       VILLE         VL        VL  True    2
490    VILLAGES       VLGS      VLGS  True    2
482       VIEWS        VWS       VWS  True    2
479        VIEW         VW        VW  True    2
474     VALLEYS       VLYS      VLYS  True    2
466       UNION         UN        UN  True    2
387      SHOALS       SHLS      SHLS  True    2
386       SHOAL        SHL       SHL  True    2
379       ROADS        RDS       RDS  True    2
378        ROAD         RD        RD  True    2
371      RIDGES       RDGS      RDGS  True    2
367        REST        RST       RST  True    2
365      RAPIDS       RPDS      RPDS  True    2
363       RAPID        RPD       RPD  True    2
349       PORTS       PRTS      PRTS  True    2
346        PORT        PRT       PRT  True    2
344      POINTS        PTS       PTS  True    2
343       POINT         PT        PT  True    2
337      PLAINS       PLNS      PLNS  True    2
336       PLAIN        PLN       PLN  True    2
217        HILL         HL        HL  True    2
331       PINES       PNES      PNES  True    2
326        PATH       PATH      PATH  True    2
206       HAVEN        HVN       HVN  True    2
506       WELLS        WLS       WLS  True    2
91       COURSE       CRSE      CRSE  True    2
149      FIELDS       FLDS      FLDS  True    2
147       FIELD        FLD       FLD  True    2
78        CLIFF        CLF       CLF  True    2
142       FALLS        FLS       FLS  True    2
140  EXTENSIONS       EXTS      EXTS  True    2
80       CLIFFS       CLFS      CLFS  True    2
82         CLUB        CLB       CLB  True    2
151        FLAT        FLT       FLT  True    2
86       CORNER        COR       COR  True    2
128     ESTATES       ESTS      ESTS  True    2
125      ESTATE        EST       EST  True    2
93        COURT         CT        CT  True    2
95       COURTS        CTS       CTS  True    2
97         COVE         CV        CV  True    2
115         DAM         DM        DM  True    2
113        DALE         DL        DL  True    2
89      CORNERS       CORS      CORS  True    2
155        FORD        FRD       FRD  True    2
153       FLATS       FLTS      FLTS  True    2
100       CREEK        CRK       CRK  True    2
9        ARCADE        ARC       ARC  True    2
41        BROOK        BRK       BRK  True    2
165        FORK        FRK       FRK  True    2
19        BEACH        BCH       BCH  True    2
167       FORKS       FRKS      FRKS  True    2
192       GREEN        GRN       GRN  True    2
22         BEND        BND       BND  True    2
189        GLEN        GLN       GLN  True    2
58         CAPE        CPE       CPE  True    2
24        BLUFF        BLF       BLF  True    3
36       BRANCH         BR        BR  True    3
350     PRAIRIE         PR        PR  True    3
51         CAMP         CP        CP  True    3
441       TRACE       TRCE      TRCE  True    3
424      STREAM       STRM      STRM  True    3
370       RIDGE        RDG       RDG  True    3
40       BRIDGE        BRG       BRG  True    3
394      SHORES       SHRS      SHRS  True    3
390       SHORE        SHR       SHR  True    3
61     CAUSEWAY       CSWY      CSWY  True    3
339       PLAZA        PLZ       PLZ  True    3
454     TRAILER       TRLR      TRLR  True    3
437     TERRACE        TER       TER  True    3
208     HEIGHTS        HTS       HTS  True    3
108    CROSSING       XING      XING  True    3
170        FORT         FT        FT  True    3
163       FORGE        FRG       FRG  True    3
258     LANDING       LNDG      LNDG  True    3
160      FOREST       FRST      FRST  True    3
181     GARDENS       GDNS      GDNS  True    3
145       FERRY        FRY       FRY  True    3
250       KNOLL        KNL       KNL  True    3
296       MOUNT         MT        MT  True    3
241   JUNCTIONS       JCTS      JCTS  True    3
308     ORCHARD       ORCH      ORCH  True    3
227      ISLAND         IS        IS  True    3
197       GROVE        GRV       GRV  True    3
231     ISLANDS        ISS       ISS  True    3
470      VALLEY        VLY       VLY  True    4
451       TRAIL        TRL       TRL  True    4
31    BOULEVARD       BLVD      BLVD  True    4
478     VIADUCT        VIA       VIA  True    4
432      SUMMIT        SMT       SMT  True    4
428      STREET         ST        ST  True    4
416     STATION        STA       STA  True    4
28       BOTTOM        BTM       BTM  True    4
102    CRESCENT       CRES      CRES  True    4
6          ANEX        ANX       ANX  True    4
400     SPRINGS       SPGS      SPGS  True    4
2         ALLEY        ALY       ALY  True    4
118      DIVIDE         DV        DV  True    4
274       LODGE        LDG       LDG  True    4
120       DRIVE         DR        DR  True    4
375       RIVER        RIV       RIV  True    4
286     MEADOWS       MDWS      MDWS  True    4
135   EXTENSION        EXT       EXT  True    4
356      RADIAL       RADL      RADL  True    4
359       RANCH       RNCH      RNCH  True    4
396      SPRING        SPG       SPG  True    4
47       BYPASS        BYP       BYP  True    5
497       VISTA        VIS       VIS  True    5
221      HOLLOW       HOLW      HOLW  True    5
318     PARKWAY       PKWY      PKWY  True    5
203      HARBOR        HBR       HBR  True    5
175     FREEWAY        FWY       FWY  True    5
187     GATEWAY       GTWY      GTWY  True    5
446       TRACK       TRAK      TRAK  True    5
408      SQUARE         SQ        SQ  True    5
134  EXPRESSWAY       EXPY      EXPY  True    6
240    JUNCTION        JCT       JCT  True    6
488     VILLAGE        VLG       VLG  True    6
71       CIRCLE        CIR       CIR  True    6
215     HIGHWAY        HWY       HWY  True    6
458      TUNNEL       TUNL      TUNL  True    6
299    MOUNTAIN        MTN       MTN  True    6
419   STRAVENUE       STRA      STRA  True    7
12       AVENUE        AVE       AVE  True    7
69       CENTER        CTR       CTR  True    8 

348 after dupes

Save Path:

		/Users/admin/Projects/GIS/table_data/usps_street_abbr.csv

type &quot;y&quot; to confirm save...n
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="o">%</span><span class="k">magic</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython"><pre><span class="n">u</span> <span class="o">=</span> <span class="n">A</span>
<span class="n">g</span> <span class="o">=</span> <span class="n">u</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s">&#39;prim_suff&#39;</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s">&#39;prim_suff&#39;</span><span class="p">:</span><span class="n">g</span><span class="o">.</span><span class="n">groups</span><span class="o">.</span><span class="n">keys</span><span class="p">()})</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s">&#39;prim_suff&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="n">suff_abbr_map</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">prim_suff</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span><span class="n">u</span><span class="o">.</span><span class="n">usps_abbr</span><span class="o">.</span><span class="n">tolist</span><span class="p">()))</span>
<span class="n">df</span><span class="p">[</span><span class="s">&#39;usps_abbr&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">prim_suff</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">suff_abbr_map</span><span class="p">)</span>

<span class="n">f</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">get_group</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">.</span><span class="n">common_use</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s">&#39; &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;, &#39;</span><span class="p">,</span><span class="s">&#39; | &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&quot;&#39;&quot;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s">&#39;[]&#39;</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="s">&#39;pattern&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">prim_suff</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="s">&#39;combined&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">ix</span><span class="p">[:,[</span><span class="s">&#39;pattern&#39;</span><span class="p">,</span><span class="s">&#39;usps_abbr&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()),</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">usps_repl_list</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">combined</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>


<span class="k">def</span> <span class="nf">one</span><span class="p">(</span><span class="n">fpath</span><span class="p">,</span><span class="n">the_list</span><span class="p">):</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">fpath</span><span class="p">,</span><span class="s">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">the_list</span><span class="p">:</span>
            <span class="k">print</span> <span class="n">f</span><span class="p">,</span> <span class="n">item</span>

<span class="k">def</span> <span class="nf">two</span><span class="p">(</span><span class="n">fpath</span><span class="p">,</span><span class="n">the_list</span><span class="p">):</span>
    <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fpath</span><span class="p">,</span><span class="s">&#39;w&#39;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">the_list</span><span class="p">:</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%s</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">item</span><span class="p">)</span>
    <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">three</span><span class="p">(</span><span class="n">fpath</span><span class="p">,</span><span class="n">the_list</span><span class="p">):</span>
    <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fpath</span><span class="p">,</span><span class="s">&#39;w&#39;</span><span class="p">)</span>
    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%s</span><span class="se">\n</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">Pickle</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">the_list</span><span class="p">)))</span>
    <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">four</span><span class="p">():</span>
    <span class="kn">import</span> <span class="nn">pickle</span>
    <span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">itemlist</span><span class="p">,</span> <span class="n">outfile</span><span class="p">)</span>
    
<span class="k">print</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="k">print</span> <span class="n">df</span>
<span class="n">z</span><span class="o">=</span><span class="nb">raw_input</span><span class="p">(</span><span class="s">&#39;type &quot;y&quot; to confirm save...&#39;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">z</span><span class="o">==</span><span class="s">&#39;y&#39;</span><span class="p">:</span>
    <span class="n">fpath</span> <span class="o">=</span> <span class="n">save_csv_path</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;.csv&#39;</span><span class="p">,</span><span class="s">&#39;_1_regex.txt&#39;</span><span class="p">)</span>
<span class="c">#     %timeit one(fpath,usps_repl_list)</span>
    <span class="o">%</span><span class="k">timeit</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>
<span class="c">#     fpath = fpath.replace(&#39;1&#39;,&#39;2&#39;)</span>
<span class="c">#     %timeit two(fpath,usps_repl_list)</span>
<span class="c">#     fpath = fpath.replace(&#39;2&#39;,&#39;3&#39;)</span>
<span class="c">#     %timeit three(fpath,usps_repl_list)</span>
        
<span class="c">#     f = open(save_csv_path.replace(&#39;.csv&#39;,&#39;_regex.txt&#39;),&#39;w&#39;)</span>
<span class="c">#     f.write(usps_repl_list)</span>
<span class="c">#     f.close()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>193
      prim_suff usps_abbr                                            pattern  \
0         ALLEY       ALY                               alley | ally | allee   
1          ANEX       ANX                                annex | annx | anex   
2        ARCADE       ARC                                             arcade   
3        AVENUE       AVE           avn | av | aven | avenu | avenue | avnue   
4         BAYOU       BYU                                      bayou | bayoo   
5         BEACH       BCH                                              beach   
6          BEND       BND                                               bend   
7         BLUFF       BLF                                       bluf | bluff   
8        BLUFFS      BLFS                                             bluffs   
9        BOTTOM       BTM                               bot | bottm | bottom   
10    BOULEVARD      BLVD                           boul | boulevard | boulv   
11       BRANCH        BR                                     branch | brnch   
12       BRIDGE       BRG                                     bridge | brdge   
13        BROOK       BRK                                              brook   
14       BROOKS      BRKS                                             brooks   
15         BURG        BG                                               burg   
16        BURGS       BGS                                              burgs   
17       BYPASS       BYP                       bypas | bypa | bypass | byps   
18         CAMP        CP                                         cmp | camp   
19       CANYON       CYN                              cnyn | canyn | canyon   
20         CAPE       CPE                                               cape   
21     CAUSEWAY      CSWY                                  causeway | causwa   
22       CENTER       CTR  cent | cen | center | centr | centre | cnter |...   
23      CENTERS      CTRS                                            centers   
24       CIRCLE       CIR               circ | circl | circle | crcl | crcle   
25      CIRCLES      CIRS                                            circles   
26        CLIFF       CLF                                              cliff   
27       CLIFFS      CLFS                                             cliffs   
28         CLUB       CLB                                               club   
29       COMMON       CMN                                             common   
30      COMMONS      CMNS                                            commons   
31       CORNER       COR                                             corner   
32      CORNERS      CORS                                            corners   
33       COURSE      CRSE                                             course   
34        COURT        CT                                              court   
35       COURTS       CTS                                             courts   
36         COVE        CV                                               cove   
37        COVES       CVS                                              coves   
38        CREEK       CRK                                              creek   
39     CRESCENT      CRES                          crescent | crsent | crsnt   
40        CREST      CRST                                              crest   
41     CROSSING      XING                                  crossing | crssng   
42    CROSSROAD       XRD                                          crossroad   
43   CROSSROADS      XRDS                                         crossroads   
44        CURVE      CURV                                              curve   
45         DALE        DL                                               dale   
46          DAM        DM                                                dam   
47       DIVIDE        DV                                 div | divide | dvd   
48        DRIVE        DR                                 driv | drive | drv   
49       DRIVES       DRS                                             drives   
50       ESTATE       EST                                             estate   
51      ESTATES      ESTS                                            estates   
52   EXPRESSWAY      EXPY           express | exp | expr | expressway | expw   
53    EXTENSION       EXT                          extension | extn | extnsn   
54   EXTENSIONS      EXTS                                         extensions   
55        FALLS       FLS                                              falls   
56        FERRY       FRY                                       frry | ferry   
57        FIELD       FLD                                              field   
58       FIELDS      FLDS                                             fields   
59         FLAT       FLT                                               flat   
60        FLATS      FLTS                                              flats   
61         FORD       FRD                                               ford   
62        FORDS      FRDS                                              fords   
63       FOREST      FRST                                   forest | forests   
64        FORGE       FRG                                       forg | forge   
65       FORGES      FRGS                                             forges   
66         FORK       FRK                                               fork   
67        FORKS      FRKS                                              forks   
68         FORT        FT                                         frt | fort   
69      FREEWAY       FWY                    freewy | frway | frwy | freeway   
70       GARDEN       GDN                      gardn | grden | grdn | garden   
71      GARDENS      GDNS                                    grdns | gardens   
72      GATEWAY      GTWY                  gatewy | gatway | gtway | gateway   
73         GLEN       GLN                                               glen   
74        GLENS      GLNS                                              glens   
75        GREEN       GRN                                              green   
76       GREENS      GRNS                                             greens   
77        GROVE       GRV                                       grov | grove   
78       GROVES      GRVS                                             groves   
79       HARBOR       HBR                      hrbor | harb | harbor | harbr   
80      HARBORS      HBRS                                            harbors   
81        HAVEN       HVN                                              haven   
82      HEIGHTS       HTS                                       ht | heights   
83      HIGHWAY       HWY             hiway | highway | highwy | hiwy | hway   
84         HILL        HL                                               hill   
85        HILLS       HLS                                              hills   
86       HOLLOW      HOLW                    holws | hllw | hollow | hollows   
87        INLET      INLT                                              inlet   
88       ISLAND        IS                                     island | islnd   
89      ISLANDS       ISS                                   islnds | islands   
90         ISLE      ISLE                                              isles   
91     JUNCTION       JCT        junction | junctn | juncton | jctn | jction   
92    JUNCTIONS      JCTS                                  jctns | junctions   
93          KEY        KY                                                key   
94         KEYS       KYS                                               keys   
95        KNOLL       KNL                                       knol | knoll   
96       KNOLLS      KNLS                                             knolls   
97         LAKE        LK                                               lake   
98        LAKES       LKS                                              lakes   
99      LANDING      LNDG                                    landing | lndng   
100        LANE        LN                                               lane   
101       LIGHT       LGT                                              light   
102      LIGHTS      LGTS                                             lights   
103        LOAF        LF                                               loaf   
104        LOCK       LCK                                               lock   
105       LOCKS      LCKS                                              locks   
106       LODGE       LDG                                lodg | lodge | ldge   
107        LOOP      LOOP                                              loops   
108       MANOR       MNR                                              manor   
109      MANORS      MNRS                                             manors   
110      MEADOW       MDW                                             meadow   
111     MEADOWS      MDWS                             mdw | medows | meadows   
112        MILL        ML                                               mill   
113       MILLS       MLS                                              mills   
114     MISSION       MSN                             mission | missn | mssn   
115    MOTORWAY      MTWY                                           motorway   
116       MOUNT        MT                                        mnt | mount   
117    MOUNTAIN       MTN          mtin | mountin | mountain | mntn | mntain   
118   MOUNTAINS      MTNS                                  mountains | mntns   
119        NECK       NCK                                               neck   
120     ORCHARD      ORCH                                   orchard | orchrd   
121        OVAL      OVAL                                                ovl   
122    OVERPASS      OPAS                                           overpass   
123        PARK      PARK                                                prk   
124       PARKS      PARK                                              parks   
125     PARKWAY      PKWY                     pky | parkwy | parkway | pkway   
126    PARKWAYS      PKWY                                   parkways | pkwys   
127     PASSAGE      PSGE                                            passage   
128        PATH      PATH                                              paths   
129        PIKE      PIKE                                              pikes   
130        PINE       PNE                                               pine   
131       PINES      PNES                                              pines   
132       PLACE        PL                                              place   
133       PLAIN       PLN                                              plain   
134      PLAINS      PLNS                                             plains   
135       PLAZA       PLZ                                       plza | plaza   
136       POINT        PT                                              point   
137      POINTS       PTS                                             points   
138        PORT       PRT                                               port   
139       PORTS      PRTS                                              ports   
140     PRAIRIE        PR                                      prairie | prr   
141      RADIAL      RADL                              rad | radial | radiel   
142       RANCH      RNCH                            rnchs | ranches | ranch   
143       RAPID       RPD                                              rapid   
144      RAPIDS      RPDS                                             rapids   
145        REST       RST                                               rest   
146       RIDGE       RDG                                       rdge | ridge   
147      RIDGES      RDGS                                             ridges   
148       RIVER       RIV                                 rivr | river | rvr   
149        ROAD        RD                                               road   
150       ROADS       RDS                                              roads   
151       ROUTE       RTE                                              route   
152       SHOAL       SHL                                              shoal   
153      SHOALS      SHLS                                             shoals   
154       SHORE       SHR                                      shore | shoar   
155      SHORES      SHRS                                    shoars | shores   
156      SKYWAY      SKWY                                             skyway   
157      SPRING       SPG                              spng | spring | sprng   
158     SPRINGS      SPGS                           spngs | springs | sprngs   
159       SPURS      SPUR                                              spurs   
160      SQUARE        SQ                          squ | square | sqr | sqre   
161     SQUARES       SQS                                     sqrs | squares   
162     STATION       STA                              stn | statn | station   
163   STRAVENUE      STRA  strvn | strav | strvnue | straven | stravenue ...   
164      STREAM      STRM                                    stream | streme   
165      STREET        ST                                strt | str | street   
166     STREETS       STS                                            streets   
167      SUMMIT       SMT                            sumit | sumitt | summit   
168     TERRACE       TER                                     terrace | terr   
169  THROUGHWAY      TRWY                                         throughway   
170       TRACE      TRCE                                     traces | trace   
171       TRACK      TRAK                        trks | track | trk | tracks   
172  TRAFFICWAY      TRFY                                         trafficway   
173       TRAIL       TRL                              trail | trails | trls   
174     TRAILER      TRLR                                    trailer | trlrs   
175      TUNNEL      TUNL           tunel | tunnl | tunls | tunnel | tunnels   
176    TURNPIKE      TPKE                          turnpk | trnpk | turnpike   
177   UNDERPASS      UPAS                                          underpass   
178       UNION        UN                                              union   
179      UNIONS       UNS                                             unions   
180      VALLEY       VLY                              vlly | valley | vally   
181     VALLEYS      VLYS                                            valleys   
182     VIADUCT       VIA                            vdct | viaduct | viadct   
183        VIEW        VW                                               view   
184       VIEWS       VWS                                              views   
185     VILLAGE       VLG         villg | vill | villag | village | villiage   
186    VILLAGES      VLGS                                           villages   
187       VILLE        VL                                              ville   
188       VISTA       VIS                          vist | vista | vst | vsta   
189       WALKS      WALK                                              walks   
190         WAY       WAY                                                 wy   
191        WELL        WL                                               well   
192       WELLS       WLS                                              wells   

                                              combined  
0                          (alley | ally | allee, aly)  
1                           (annex | annx | anex, anx)  
2                                        (arcade, arc)  
3      (avn | av | aven | avenu | avenue | avnue, ave)  
4                                 (bayou | bayoo, byu)  
5                                         (beach, bch)  
6                                          (bend, bnd)  
7                                  (bluf | bluff, blf)  
8                                       (bluffs, blfs)  
9                          (bot | bottm | bottom, btm)  
10                    (boul | boulevard | boulv, blvd)  
11                                (branch | brnch, br)  
12                               (bridge | brdge, brg)  
13                                        (brook, brk)  
14                                      (brooks, brks)  
15                                          (burg, bg)  
16                                        (burgs, bgs)  
17                 (bypas | bypa | bypass | byps, byp)  
18                                    (cmp | camp, cp)  
19                        (cnyn | canyn | canyon, cyn)  
20                                         (cape, cpe)  
21                           (causeway | causwa, cswy)  
22   (cent | cen | center | centr | centre | cnter ...  
23                                     (centers, ctrs)  
24         (circ | circl | circle | crcl | crcle, cir)  
25                                     (circles, cirs)  
26                                        (cliff, clf)  
27                                      (cliffs, clfs)  
28                                         (club, clb)  
29                                       (common, cmn)  
30                                     (commons, cmns)  
31                                       (corner, cor)  
32                                     (corners, cors)  
33                                      (course, crse)  
34                                         (court, ct)  
35                                       (courts, cts)  
36                                          (cove, cv)  
37                                        (coves, cvs)  
38                                        (creek, crk)  
39                   (crescent | crsent | crsnt, cres)  
40                                       (crest, crst)  
41                           (crossing | crssng, xing)  
42                                    (crossroad, xrd)  
43                                  (crossroads, xrds)  
44                                       (curve, curv)  
45                                          (dale, dl)  
46                                           (dam, dm)  
47                            (div | divide | dvd, dv)  
48                            (driv | drive | drv, dr)  
49                                       (drives, drs)  
50                                       (estate, est)  
51                                     (estates, ests)  
52    (express | exp | expr | expressway | expw, expy)  
53                    (extension | extn | extnsn, ext)  
54                                  (extensions, exts)  
55                                        (falls, fls)  
56                                 (frry | ferry, fry)  
57                                        (field, fld)  
58                                      (fields, flds)  
59                                         (flat, flt)  
60                                       (flats, flts)  
61                                         (ford, frd)  
62                                       (fords, frds)  
63                            (forest | forests, frst)  
64                                 (forg | forge, frg)  
65                                      (forges, frgs)  
66                                         (fork, frk)  
67                                       (forks, frks)  
68                                    (frt | fort, ft)  
69              (freewy | frway | frwy | freeway, fwy)  
70                (gardn | grden | grdn | garden, gdn)  
71                             (grdns | gardens, gdns)  
72           (gatewy | gatway | gtway | gateway, gtwy)  
73                                         (glen, gln)  
74                                       (glens, glns)  
75                                        (green, grn)  
76                                      (greens, grns)  
77                                 (grov | grove, grv)  
78                                      (groves, grvs)  
79                (hrbor | harb | harbor | harbr, hbr)  
80                                     (harbors, hbrs)  
81                                        (haven, hvn)  
82                                 (ht | heights, hts)  
83       (hiway | highway | highwy | hiwy | hway, hwy)  
84                                          (hill, hl)  
85                                        (hills, hls)  
86             (holws | hllw | hollow | hollows, holw)  
87                                       (inlet, inlt)  
88                                (island | islnd, is)  
89                             (islnds | islands, iss)  
90                                       (isles, isle)  
91   (junction | junctn | juncton | jctn | jction, ...  
92                           (jctns | junctions, jcts)  
93                                           (key, ky)  
94                                         (keys, kys)  
95                                 (knol | knoll, knl)  
96                                      (knolls, knls)  
97                                          (lake, lk)  
98                                        (lakes, lks)  
99                             (landing | lndng, lndg)  
100                                         (lane, ln)  
101                                       (light, lgt)  
102                                     (lights, lgts)  
103                                         (loaf, lf)  
104                                        (lock, lck)  
105                                      (locks, lcks)  
106                         (lodg | lodge | ldge, ldg)  
107                                      (loops, loop)  
108                                       (manor, mnr)  
109                                     (manors, mnrs)  
110                                      (meadow, mdw)  
111                     (mdw | medows | meadows, mdws)  
112                                         (mill, ml)  
113                                       (mills, mls)  
114                      (mission | missn | mssn, msn)  
115                                   (motorway, mtwy)  
116                                  (mnt | mount, mt)  
117   (mtin | mountin | mountain | mntn | mntain, mtn)  
118                          (mountains | mntns, mtns)  
119                                        (neck, nck)  
120                           (orchard | orchrd, orch)  
121                                        (ovl, oval)  
122                                   (overpass, opas)  
123                                        (prk, park)  
124                                      (parks, park)  
125             (pky | parkwy | parkway | pkway, pkwy)  
126                           (parkways | pkwys, pkwy)  
127                                    (passage, psge)  
128                                      (paths, path)  
129                                      (pikes, pike)  
130                                        (pine, pne)  
131                                      (pines, pnes)  
132                                        (place, pl)  
133                                       (plain, pln)  
134                                     (plains, plns)  
135                                (plza | plaza, plz)  
136                                        (point, pt)  
137                                      (points, pts)  
138                                        (port, prt)  
139                                      (ports, prts)  
140                                (prairie | prr, pr)  
141                      (rad | radial | radiel, radl)  
142                    (rnchs | ranches | ranch, rnch)  
143                                       (rapid, rpd)  
144                                     (rapids, rpds)  
145                                        (rest, rst)  
146                                (rdge | ridge, rdg)  
147                                     (ridges, rdgs)  
148                          (rivr | river | rvr, riv)  
149                                         (road, rd)  
150                                       (roads, rds)  
151                                       (route, rte)  
152                                       (shoal, shl)  
153                                     (shoals, shls)  
154                               (shore | shoar, shr)  
155                            (shoars | shores, shrs)  
156                                     (skyway, skwy)  
157                       (spng | spring | sprng, spg)  
158                   (spngs | springs | sprngs, spgs)  
159                                      (spurs, spur)  
160                    (squ | square | sqr | sqre, sq)  
161                              (sqrs | squares, sqs)  
162                       (stn | statn | station, sta)  
163  (strvn | strav | strvnue | straven | stravenue...  
164                            (stream | streme, strm)  
165                          (strt | str | street, st)  
166                                     (streets, sts)  
167                     (sumit | sumitt | summit, smt)  
168                              (terrace | terr, ter)  
169                                 (throughway, trwy)  
170                             (traces | trace, trce)  
171                (trks | track | trk | tracks, trak)  
172                                 (trafficway, trfy)  
173                       (trail | trails | trls, trl)  
174                            (trailer | trlrs, trlr)  
175   (tunel | tunnl | tunls | tunnel | tunnels, tunl)  
176                  (turnpk | trnpk | turnpike, tpke)  
177                                  (underpass, upas)  
178                                        (union, un)  
179                                      (unions, uns)  
180                       (vlly | valley | vally, vly)  
181                                    (valleys, vlys)  
182                     (vdct | viaduct | viadct, via)  
183                                         (view, vw)  
184                                       (views, vws)  
185  (villg | vill | villag | village | villiage, vlg)  
186                                   (villages, vlgs)  
187                                        (ville, vl)  
188                   (vist | vista | vst | vsta, vis)  
189                                      (walks, walk)  
190                                          (wy, way)  
191                                         (well, wl)  
192                                       (wells, wls)  
type &quot;y&quot; to confirm save...y
</pre>
</div>
</div>

</div>
</div>

</div></html>